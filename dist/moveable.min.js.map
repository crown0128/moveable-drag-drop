{"version":3,"file":"moveable.min.js","sources":["../src/InnerMoveable.tsx","../src/consts.ts","../src/Moveable.tsx","../src/MoveableManager.tsx","../src/utils.ts","../src/index.umd.ts"],"sourcesContent":["import * as React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport Moveable, { MoveableProps } from \"react-moveable\";\nimport { ref } from \"framework-utils\";\n\nexport default class InnerMoveable extends React.Component<any> {\n    public state: any = {};\n    public moveable!: Moveable;\n    constructor(props: any) {\n        super(props);\n        this.state = this.props;\n    }\n    public render() {\n        return createPortal(<Moveable ref={ref(this, \"moveable\")} {...this.state} />, this.state.parentElement);\n    }\n}\n","import { MOVEABLE_PROPS, MOVEABLE_METHODS, MOVEABLE_EVENTS } from \"react-moveable\";\n\nexport const PROPERTIES: string[] = MOVEABLE_PROPS;\nexport const METHODS: string[] = MOVEABLE_METHODS;\nexport const EVENTS: string[] = MOVEABLE_EVENTS;\n","import MoveableManager from \"./MoveableManager\";\n\nexport default class Moveable extends MoveableManager {}\n","import { ref, Properties } from \"framework-utils\";\nimport * as React from \"react\";\nimport { render } from \"react-dom\";\nimport InnerMoveable from \"./InnerMoveable\";\nimport {\n    MoveableInterface,\n    MoveableOptions, MoveableProperties,\n} from \"react-moveable/declaration/types\";\nimport { camelize, isArray } from \"@daybrush/utils\";\nimport { MoveableEventsParameters } from \"./types\";\nimport { PROPERTIES, EVENTS, METHODS } from \"./consts\";\nimport EventEmitter from \"@scena/event-emitter\";\n/**\n * Moveable is Draggable! Resizable! Scalable! Rotatable!\n * @sort 1\n * @alias Moveable\n * @extends EventEmitter\n */\n@Properties(METHODS, (prototype, property) => {\n    if (prototype[property]) {\n        return;\n    }\n    prototype[property] = function(...args: any[]) {\n        const self = this.getMoveable();\n\n        if (!self || !self[property]) {\n            return;\n        }\n        return self[property](...args);\n    };\n})\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getMoveable().props[property];\n        },\n        set(value) {\n            this.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\nclass MoveableManager extends EventEmitter<MoveableEventsParameters> {\n    private innerMoveable!: InnerMoveable | null;\n    private tempElement: HTMLElement | null = document.createElement(\"div\");\n\n    /**\n     *\n     */\n    constructor(parentElement: HTMLElement | SVGElement, options: MoveableOptions = {}) {\n        super();\n        const nextOptions = { container: parentElement || document.body, ...options };\n\n        const events: any = {};\n\n        EVENTS.forEach(name => {\n            events[camelize(`on ${name}`)] = (e: any) => this.trigger<any>(name, e);\n        });\n\n        render(\n            <InnerMoveable\n                ref={ref(this, \"innerMoveable\")}\n                parentElement={parentElement}\n                {...nextOptions}\n                {...events}\n            />,\n            this.tempElement,\n        );\n        const target = nextOptions.target!;\n        if (isArray(target) && target.length > 1) {\n            this.updateRect();\n        }\n    }\n    public setState(state: Partial<MoveableOptions>, callback?: () => any) {\n        this.innerMoveable!.setState(state, callback);\n    }\n    public destroy() {\n        render(null as any, this.tempElement!);\n        this.off();\n        this.tempElement = null;\n        this.innerMoveable = null;\n    }\n    private getMoveable() {\n        return this.innerMoveable!.moveable;\n    }\n}\n\ninterface MoveableManager extends MoveableInterface, MoveableProperties {\n}\n\nexport default MoveableManager;\n","import { getElementInfo as getElementInfoFunction } from \"react-moveable\";\n\nexport function getElementInfo(\n    target: SVGElement | HTMLElement,\n    container?: SVGElement | HTMLElement | null,\n    rootContainer?: SVGElement | HTMLElement | null | undefined,\n) {\n    return getElementInfoFunction(target, container, rootContainer);\n};\n","import Moveable, * as modules from \"./index.esm\";\n\nfor (const name in modules) {\n    (Moveable as any)[name] = (modules as any)[name];\n}\n\nexport default Moveable;\n"],"names":["props","_super","_this","state","__extends","React","Moveable","ref","this","parentElement","PROPERTIES","MOVEABLE_PROPS","METHODS","MOVEABLE_METHODS","EVENTS","MOVEABLE_EVENTS","options","document","createElement","nextOptions","container","body","events","forEach","name","e","trigger","render","InnerMoveable","tempElement","target","length","updateRect","callback","innerMoveable","setState","off","moveable","Properties","prototype","property","_i","args","self","getMoveable","Object","defineProperty","get","set","value","enumerable","configurable","MoveableManager","EventEmitter","rootContainer","modules"],"mappings":";;;;;;;;6kyKAQgBA,SACRC,YAAMD,gBAHHE,QAAa,GAIhBA,EAAKC,MAAQD,EAAKF,eALiBI,0BAOvC,oBACwBC,EAACC,MAASC,IAAKA,EAAIC,KAAM,aAAiBA,KAAKL,UAAWK,KAAKL,MAAMM,uDARtDJ,GCH9BK,GAAuBC,GACvBC,GAAoBC,GACpBC,GAAmBC,qFCFMX,iCCkDtBK,EAAyCO,gBAAAA,YACjDf,mBANIC,cAAkCe,SAASC,cAAc,WAOvDC,KAAgBC,UAAWX,GAAiBQ,SAASI,MAASL,GAE9DM,EAAc,GAEpBR,GAAOS,QAAQ,SAAAC,GACXF,GAAgB,MAAME,oEAAW,SAACC,UAAWvB,EAAKwB,QAAaF,EAAMC,MAGzEE,EACItB,EAACuB,MACGrB,IAAKA,EAAIL,EAAM,iBACfO,cAAeA,GACXU,EACAG,IAERpB,EAAK2B,mBAEHC,EAASX,EAAYW,gBACfA,oBAA2B,EAAhBA,EAAOC,QAC1B7B,EAAK8B,eA5Ba5B,2CA+B1B,SAAgBD,EAAiC8B,QACxCC,cAAeC,SAAShC,EAAO8B,cAExC,WACIN,EAAO,KAAanB,KAAKqB,kBACpBO,WACAP,YAAc,UACdK,cAAgB,oBAEzB,kBACW1B,KAAK0B,cAAeG,+UApElCC,EAAW1B,GAAS,SAAC2B,EAAWC,GACzBD,EAAUC,KAGdD,EAAUC,GAAY,4BAASC,mBAAAA,IAAAC,sBACrBC,EAAOnC,KAAKoC,iBAEbD,GAASA,EAAKH,UAGZG,EAAKH,SAALG,EAAkBD,OAGhCJ,EAAW5B,GAAY,SAAC6B,EAAWC,GAChCK,OAAOC,eAAeP,EAAWC,EAAU,CACvCO,sBACWvC,KAAKoC,cAAc5C,MAAMwC,IAEpCQ,aAAIC,cACKd,iBACAK,GAAWS,OAGpBC,YAAY,EACZC,cAAc,OAGhBC,IAAwBC,kGC1C1BvB,EACAV,EACAkC,YAEsClC,cAAWkC,aAAnBxB,oBCLlC,IAAK,IAAMN,MAAQ+B,GACdjD,GAAiBkB,IAAS+B,GAAgB/B"}