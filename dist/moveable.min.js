/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.18.5
*/
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).Moveable=r()}(this,function(){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function i(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var s=function(){return(s=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)};function u(t){return void 0===t}var t=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var r=t.prototype;return r.trigger=function(t,r){void 0===r&&(r={});var e=this._eventHandler[t]||[];if(!(0<e.length))return!0;e=e.concat(),r.eventType=t;var n=!1,i=[r],o=0;r.stop=function(){n=!0},r.currentTarget=this;for(var a=arguments.length,s=new Array(2<a?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];for(1<=s.length&&(i=i.concat(s)),o=0;e[o];o++)e[o].apply(this,i);return!n},r.once=function(i,o){if("object"==typeof i&&u(o)){var t,r=i;for(t in r)this.once(t,r[t]);return this}var a;return"string"==typeof i&&"function"==typeof o&&(a=this).on(i,function t(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];o.apply(a,e),a.off(i,t)}),this},r.hasOn=function(t){return!!this._eventHandler[t]},r.on=function(t,r){if("object"==typeof t&&u(r)){var e,n=t;for(e in n)this.on(e,n[e]);return this}var i;return"string"==typeof t&&"function"==typeof r&&(u(i=this._eventHandler[t])&&(this._eventHandler[t]=[],i=this._eventHandler[t]),i.push(r)),this},r.off=function(t,r){if(u(t))return this._eventHandler={},this;if(u(r)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var e,n=t;for(e in n)this.off(e,n[e]);return this}var i=this._eventHandler[t];if(i)for(var o,a=0;void 0!==(o=i[a]);a++)if(o===r){i=i.splice(a,1);break}return this},t}();return t.VERSION="2.1.2",t}();function x(r,e){return function(t){t&&(r[e]=t)}}function e(e,n){return function(t){var r=t.prototype;e.forEach(function(t){n(r,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var r=t.prototype;return r.get=function(t){return this.values[this.keys.indexOf(t)]},r.set=function(t,r){var e=this.keys,n=this.values,i=e.indexOf(t),o=-1===i?e.length:i;e[o]=t,n[o]=r},t}(),y=function(){function t(){this.object={}}var r=t.prototype;return r.get=function(t){return this.object[t]},r.set=function(t,r){this.object[t]=r},t}(),E="function"==typeof Map,o=function(){function t(){}var r=t.prototype;return r.connect=function(t,r){this.prev=t,this.next=r,t&&(t.next=this),r&&(r.prev=this)},r.disconnect=function(){var t=this.prev,r=this.next;t&&(t.next=r),r&&(r.prev=t)},r.getIndex=function(){for(var t=this,r=-1;t;)t=t.prev,++r;return r},t}();var S=function(){function t(t,r,e,n,i,o,a,s){this.prevList=t,this.list=r,this.added=e,this.removed=n,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var r=t.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var t,e,s,u,r=(t=this.changedBeforeAdded,e=this.fixed,s=[],u=[],t.forEach(function(t){var r=t[0],e=t[1],n=new o;s[r]=n,u[e]=n}),s.forEach(function(t,r){t.connect(s[r-1])}),t.filter(function(t,r){return!e[r]}).map(function(t,r){var e=t[0],n=t[1];if(e===n)return[0,0];var i=s[e],o=u[n-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})),c=this.changed,l=[];this.cacheOrdered=r.filter(function(t,r){var e=t[0],n=t[1],i=c[r],o=i[0],a=i[1];if(e!==n)return l.push([o,a]),!0}),this.cachePureChanged=l},t}();function c(t,r,e){var n=E?Map:e?y:b,i=e||function(t){return t},o=[],a=[],s=[],u=t.map(i),c=r.map(i),l=new n,p=new n,f=[],d=[],h={},g=[],v=0,m=0;return u.forEach(function(t,r){l.set(t,r)}),c.forEach(function(t,r){p.set(t,r)}),u.forEach(function(t,r){var e=p.get(t);void 0===e?(++m,a.push(r)):h[e]=m}),c.forEach(function(t,r){var e=l.get(t);void 0===e?(o.push(r),++v):(s.push([e,r]),m=h[r]||0,f.push([e-m,r-v]),d.push(r===e),e!==r&&g.push([e,r]))}),a.reverse(),new S(t,r,o,a,g,s,f,d)}var r=function(){function t(t,r){void 0===t&&(t=[]),this.findKeyCallback=r,this.list=[].slice.call(t)}return t.prototype.update=function(t){var r=[].slice.call(t),e=c(this.list,r,this.findKeyCallback);return this.list=r,e},t}(),a="string",l="undefined",p=['"',"'",'\\"',"\\'"];function f(t){return Array.isArray(t)}function d(t){return typeof t===a}function h(t,r,e,n){for(var i=e;i<n;++i){var o=r[i].trim();if(o===t)return i;var a=i;if("("===o?a=h(")",r,i+1,n):-1<p.indexOf(o)&&(a=h(o,r,i+1,n)),-1===a)break;i=a}return-1}function g(t){return function(t,r){for(var e=new RegExp("(\\s*"+(r||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),n=t.split(e).filter(Boolean),i=n.length,o=[],a=[],s=0;s<i;++s){var u=n[s].trim(),c=s;if("("===u)c=h(")",n,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<p.indexOf(u))c=h(u,n,s+1,i);else if(u===r){a.length&&(o.push(a.join("")),a=[]);continue}}-1===c&&(c=i-1),a.push(n.slice(s,c+1).join("")),s=c}return a.length&&o.push(a.join("")),o}(t,",")}function v(t,n){return void 0===n&&(n="-"),t.replace(/([a-z])([A-Z])/g,function(t,r,e){return""+r+n+e.toLowerCase()})}function M(){return Date.now?Date.now():(new Date).getTime()}function D(t,r,e,n){t.addEventListener(r,e,n)}function w(t,r,e){t.removeEventListener(r,e)}var m=function(t,r){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function C(t,r){function e(){this.constructor=t}m(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var O=function(){return(O=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)};function R(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function P(t,r){if(t===r)return!1;for(var e in t)if(!(e in r))return!0;for(var e in r)if(t[e]!==r[e])return!0;return!1}function z(i,o){var a=Object.keys(i),e=Object.keys(o),t=c(a,e,function(t){return t}),n={},s={},u={};return t.added.forEach(function(t){var r=e[t];n[r]=o[r]}),t.removed.forEach(function(t){var r=a[t];s[r]=i[r]}),t.maintained.forEach(function(t){var r=t[0],e=a[r],n=[i[e],o[e]];i[e]!==o[e]&&(u[e]=n)}),{added:n,removed:s,changed:u}}function B(t){t.forEach(function(t){t()})}function _(t){var r=0;return t.map(function(t){return null==t?"$compat"+ ++r:""+t})}function G(t,r,e,n){return d(t)?new Y("text_"+t,r,e,n,null,{}):new("string"==typeof t.type?X:t.type.prototype.render?L:q)(t.type,r,e,n,t.ref,t.props)}function T(t){var r=t.className,e=R(t,["className"]);return null!=r&&(e.class=r),delete e.style,delete e.children,e}function A(t,r){if(!r)return t;for(var e in r)typeof t[e]===l&&(t[e]=r[e]);return t}function I(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=r||{},o=i.key,a=i.ref,s=R(i,["key","ref"]);return{type:t,key:o,ref:a,props:O(O({},s),{children:function r(t){var e=[];return t.forEach(function(t){e=e.concat(f(t)?r(t):t)}),e}(e).filter(function(t){return null!=t&&!1!==t})})}}var k=function(){function t(t,r,e,n,i,o){void 0===o&&(o={}),this.type=t,this.key=r,this.index=e,this.container=n,this.ref=i,this.props=o,this._providers=[]}var r=t.prototype;return r._should=function(t,r){return!0},r._update=function(t,r,e,n){if(this.base&&!d(r)&&!n&&!this._should(r.props,e))return!1;this.original=r,this._setState(e);var i=this.props;return d(r)||(this.props=r.props,this.ref=r.ref),this._render(t,this.base?i:{},e),!0},r._mounted=function(){var t=this.ref;t&&t(this.base)},r._setState=function(t){},r._updated=function(){var t=this.ref;t&&t(this.base)},r._destroy=function(){var t=this.ref;t&&t(null)},t}();function N(t){var r={},e={};for(var n in t)0===n.indexOf("on")?e[n.replace("on","").toLowerCase()]=t[n]:r[n]=t[n];return{attributes:r,events:e}}var Y=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}C(r,t);var e=r.prototype;return e._render=function(t){var r=this,e=!this.base;return e&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){e?r._mounted():r._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},r}(k),X=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.events={},t}C(t,r);var e=t.prototype;return e.addEventListener=function(t,r){var e=this.events;e[t]=function(t){t.nativeEvent=t,r(t)},this.base.addEventListener(t,e[t])},e.removeEventListener=function(t){var r=this.events;this.base.removeEventListener(t,r[t]),delete r[t]},e._should=function(t){return P(this.props,t)},e._render=function(t,r){var e=this,n=!this.base;n&&(this.base=document.createElement(this.type)),K(this,this._providers,this.props.children,t,null);var i=this.base,o=N(r),a=o.attributes,s=o.events,u=N(this.props),c=u.attributes,l=u.events;return function(t,r,e){var n=z(t,r),i=n.added,o=n.removed,a=n.changed;for(var s in i)e.setAttribute(s,i[s]);for(var s in a)e.setAttribute(s,a[s][1]);for(var s in o)e.removeAttribute(s)}(T(a),T(c),i),function(t,r,e){var n=z(t,r),i=n.added,o=n.removed,a=n.changed;for(var s in o)e.removeEventListener(s);for(var s in i)e.addEventListener(s,i[s]);for(var s in a)e.removeEventListener(s),e.addEventListener(s,a[s][1]);for(var s in o)e.removeEventListener(s)}(s,l,this),function(t,r,e){var n=e.style,i=z(t,r),o=i.added,a=i.removed,s=i.changed;for(var u in o){var c=v(u,"-");n.setProperty?n.setProperty(c,o[u]):n[c]=o[u]}for(var u in s){c=v(u,"-");n.setProperty?n.setProperty(c,s[u][1]):n[c]=s[u][1]}for(var u in a){c=v(u,"-");n.removeProperty?n.removeProperty(c):n[c]=""}}(r.style||{},this.props.style||{},i),t.push(function(){n?e._mounted():e._updated()}),!0},e._unmount=function(){var t=this.events,r=this.base;for(var e in t)r.removeEventListener(e,t[e]);this._providers.forEach(function(t){t._unmount()}),this.events={},r.parentNode.removeChild(r)},t}(k);function j(t){if(!t)return null;if(t instanceof Node)return t;var r=t._provider._providers;return r.length?j(r[0].base):null}var q=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}C(r,t);var e=r.prototype;return e._render=function(t){var r=this.type(this.props);return K(this,this._providers,r?[r]:[],t),!0},e._unmount=function(){this._providers.forEach(function(t){t._unmount()})},r}(k),W=function(e){function t(t){var r=e.call(this,"container","container",0,null)||this;return r.base=t,r}C(t,e);var r=t.prototype;return r._render=function(){return!0},r._unmount=function(){},t}(k),L=function(a){function t(t,r,e,n,i,o){return void 0===o&&(o={}),a.call(this,t,r,e,n,i,A(o,t.defaultProps))||this}C(t,a);var r=t.prototype;return r._should=function(t,r){return this.base.shouldComponentUpdate(A(t,this.type.defaultProps),r||this.base.state)},r._render=function(t,r,e){var n=this;this.props=A(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),K(this,this._providers,s?[s]:[],t,e,null),t.push(function(){i?(n._mounted(),o.componentDidMount()):(n._updated(),o.componentDidUpdate(r,a))})},r._setState=function(t){t&&(this.base.state=t)},r._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(k),F=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var r=t.prototype;return r.shouldComponentUpdate=function(t,r){return!0},r.render=function(){return null},r.setState=function(t,r,e){var n=[],i=this._provider;K(i.container,[i],[i.original],n,O(O({},this.state),t),e)&&(r&&n.push(r),B(n))},r.forceUpdate=function(t){this.setState(this.state,t,!0)},r.componentDidMount=function(){},r.componentDidUpdate=function(t,r){},r.componentWillUnmount=function(){},t}(),H=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return C(r,t),r.prototype.shouldComponentUpdate=function(t,r){return P(this.props,t)||P(this.state,r)},r}(F),V=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}C(r,t);var e=r.prototype;return e.componentDidMount=function(){var t=this.props,r=t.element,e=t.container;this._portalProvider=new W(e),$(r,e,this._portalProvider)},e.componentDidUpdate=function(){var t=this.props;$(t.element,t.container,this._portalProvider)},e.componentWillUnmount=function(){$(null,this.props.container,this._portalProvider),this._portalProvider=null},r}(H);function U(i,a,o){var s=o.map(function(t){return d(t)?null:t.key}),t=c(_(a.map(function(t){return t.key})),_(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var r=t[0],e=t[1],n=a.splice(r,1)[0];a.splice(e,0,n);var i=j(n.base),o=j(a[e+1]&&a[e+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,G(o[t],s[t],t,i))});var r=t.maintained.filter(function(t){t[0];var r=t[1],e=o[r],n=a[r];return(d(e)?"text_"+e:e.type)!==n.type?(n._unmount(),a.splice(r,1,G(e,s[r],r,i)),!0):(n.index=r,!1)});return function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var o=arguments[r],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}(t.added,r.map(function(t){t[0];return t[1]}))}function K(i,o,e,n,a,s){var t=U(i,o,e),r=o.filter(function(t,r){return t._update(n,e[r],a,s)}),u=function t(r){if(!r)return null;var e=r.base;return e instanceof Node?e:t(r.container)}(i);return u&&t.reverse().forEach(function(t){var r,e=o[t],n=j(e.base);n&&(u===n||n.parentNode||(r=function(t,r){for(var e=t._providers,n=e.length,i=r.index+1;i<n;++i){var o=j(e[i].base);if(o)return o}return null}(i,e),u.insertBefore(n,r)))}),0<r.length}function $(t,r,e){void 0===e&&(e=r.__REACT_COMPAT__);var n,i,o,a,s=!!e;return e=e||new W(r),i=t?[t]:[],a=[],K(n=e,n._providers,i,a,o),B(a),s||(r.__REACT_COMPAT__=e),e}function Z(t,r,e){var n=r.__REACT_COMPAT__;t&&!n&&(r.innerHTML=""),$(t,r,n),e&&e()}var J=("undefined"!=typeof window&&window||{}).navigator,Q={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"unknown"},os:{version:"-1",name:"unknown"}}};function tt(t,r){for(var e=[],n=0;n<t.length;n++)r(t[n])&&e.push(t[n]);return e}var rt=void 0;function et(t,r){return r&&r.test?!!r.test(t):-1<t.indexOf(r)}function nt(t,r){var e=tt(t,function(t){return et(rt,t.criteria)})[0];return e&&e.identity||r.name}function it(t,n){return tt(t,function(t){var r=t.criteria,e=new RegExp(t.identity,"i").test(n);return!!(r?e&&et(rt,r):e)})[0]}function ot(t,r){var e=Q.defaultString.browser.version,n=new RegExp("("+t+")","i").exec(r);if(!n)return e;var i,o=n.index,a=n[0];return-1<o&&(i=o+a.length+1,e=r.substring(i).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")),e}function at(t){var r;if(t)return ot((r=t,it(Q.browser,r)||{criteria:r,versionSearch:r,identity:r}).versionSearch||t,rt)}function st(){var t=Q.webview,r=void 0;return function(t,r){for(var e=0;e<t.length;e++)if(r(t[e]))return!0;return!1}(tt(t,function(t){return et(rt,t.criteria)}),function(t){return r=ot(t.browserVersionSearch,rt),!(!et(rt,t.webviewToken)&&!et(r,t.webviewBrowserVersion))})}function ut(t){var r,e=(r=t,it(Q.os,r)||{}),n=Q.defaultString.os.version,i=void 0;if(t){if(e.versionAlias)return e.versionAlias;var o=new RegExp("("+(e.versionSearch||t)+")\\s([\\d_\\.]+|\\d_0)","i");return o.exec(rt)&&(i=o.exec(rt)[2].replace(/_/g,".").replace(/;|\)/g,"")),i||n}}function ct(){var t=nt(Q.os,Q.defaultString.os);return{name:t,version:ut(t)}}function lt(){var t=nt(Q.browser,Q.defaultString.browser);return{name:t,version:at(t),webview:st()}}function pt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:J.userAgent;rt=t;var r={os:ct(),browser:lt(),isMobile:-1!==rt.indexOf("Mobi")};return r.browser.name=r.browser.name.toLowerCase(),r.os.name=r.os.name.toLowerCase(),r.os.version=r.os.version.toLowerCase(),"ios"===r.os.name&&r.browser.webview&&(r.browser.version="-1"),r}pt.VERSION="2.1.6";var ft="function",dt="object",ht="undefined",gt=['"',"'",'\\"',"\\'"];function vt(t){return typeof t===ht}function mt(t){return t&&typeof t===dt}function bt(t){return Array.isArray(t)}function yt(t,r,e,n){for(var i=e;i<n;++i){var o=r[i].trim();if(o===t)return i;var a=i;if("("===o?a=yt(")",r,i+1,n):-1<gt.indexOf(o)&&(a=yt(o,r,i+1,n)),-1===a)break;i=a}return-1}function xt(t,r){for(var e=new RegExp("(\\s*"+(r||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),n=t.split(e).filter(Boolean),i=n.length,o=[],a=[],s=0;s<i;++s){var u=n[s].trim(),c=s;if("("===u)c=yt(")",n,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<gt.indexOf(u))c=yt(u,n,s+1,i);else if(u===r){a.length&&(o.push(a.join("")),a=[]);continue}}-1===c&&(c=i-1),a.push(n.slice(s,c+1).join("")),s=c}return a.length&&o.push(a.join("")),o}function Et(t){return xt(t,"")}function St(t){return xt(t,",")}function Mt(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function Dt(t){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!r)return{prefix:"",unit:"",value:NaN};var e=r[1],n=r[2];return{prefix:e,unit:r[3],value:parseFloat(n)}}function wt(t,r,e){void 0===e&&(e=-1);for(var n=t.length,i=0;i<n;++i)if(r(t[i],i,t))return i;return e}function Ct(t,r){return t.classList?t.classList.contains(r):!!t.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}var Ot=function(t){for(var r=5381,e=t.length;e;)r=33*r^t.charCodeAt(--e);return r>>>0};function Rt(o){var a,s="rCS"+Ot(o).toString(36),u=0;return{className:s,inject:function(t,r){void 0===r&&(r={});var e,n=function(t){if(t.getRootNode){var r=t.getRootNode();if(11===r.nodeType)return r}}(t),i=0===u;return(n||i)&&(e=function(e,t,r,n){var i=document.createElement("style");i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",e),r.nonce&&i.setAttribute("nonce",r.nonce);var o=t;return r.original||(o=t.replace(/([^}{]*){/gm,function(t,r){return g(r).map(function(t){return-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+e):"."+e+" "+t}).join(", ")+"{"})),i.innerHTML=o,(n||document.head||document.body).appendChild(i),i}(s,o,r,n)),i&&(a=e),n||++u,{destroy:function(){n?(t.removeChild(e),e=null):(0<u&&--u,0===u&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var Pt=function(t,r){return(Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};var zt=function(){return(zt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)};var Bt=function(){return(Bt=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)};function _t(t){return 180*(r=[t[0].clientX,t[0].clientY],e=[t[1].clientX,t[1].clientY],n=e[0]-r[0],i=e[1]-r[1],(0<=(o=Math.atan2(i,n))?o:o+2*Math.PI)/Math.PI);var r,e,n,i,o}function Gt(t,r,e,n){var i=Xt(t),o=Xt(r),a=Xt(n);return At(jt(n[0],qt(i,a)),jt(n[0],qt(o,a)),e[0])}function Tt(t){return t.touches?Nt(t.touches):[Yt(t)]}function At(t,r,e){var n=t.clientX,i=t.clientY;return{clientX:n,clientY:i,deltaX:n-r.clientX,deltaY:i-r.clientY,distX:n-e.clientX,distY:i-e.clientY}}function It(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function kt(t,e,n){return t.map(function(t,r){return At(t,e[r],n[r])})}function Nt(t){for(var r=Math.min(t.length,2),e=[],n=0;n<r;++n)e.push(Yt(t[n]));return e}function Yt(t){return{clientX:t.clientX,clientY:t.clientY}}function Xt(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function jt(t,r){return{clientX:t.clientX+r.clientX,clientY:t.clientY+r.clientY}}function qt(t,r){return{clientX:t.clientX-r.clientX,clientY:t.clientY-r.clientY}}var Wt=["textarea","input"],Lt=function(){function t(t,r){var x=this;void 0===r&&(r={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.startRotate=0,this.onDragStart=function(t,r){if(void 0===r&&(r=!0),x.flag||!1!==t.cancelable){var e=x.options,n=e.container,i=e.pinchOutside,o=e.dragstart,a=e.preventRightClick,s=e.preventDefault,u=e.checkInput,c=x.isTouch;if(!x.flag){var l,p=document.activeElement,f=t.target,d=f.tagName.toLowerCase(),h=-1<Wt.indexOf(d),g=f.isContentEditable;if(h||g){if(u||p===f)return!1;if(p&&g&&p.isContentEditable&&p.contains(f))return!1}else{(s||"touchstart"===t.type)&&p&&(l=p.tagName,(p.isContentEditable||-1<Wt.indexOf(l))&&p.blur())}}var v,m=0;if(!x.flag&&c&&i&&(m=setTimeout(function(){D(n,"touchstart",x.onDragStart,{passive:!1})})),x.flag&&c&&i&&w(n,"touchstart",x.onDragStart),(v=t).touches&&2<=v.touches.length){if(clearTimeout(m),!x.flag&&t.touches.length!==t.changedTouches.length)return;x.pinchFlag||x.onPinchStart(t)}if(!x.flag){var b=x.startClients[0]?x.startClients:Tt(t);x.customDist=[0,0],x.flag=!0,x.isDrag=!1,x.startClients=b,x.prevClients=b,x.datas={};var y=At(b[x.movement=0],x.prevClients[0],x.startClients[0]);if(a&&(3===t.which||2===t.button))return clearTimeout(m),x.initDrag(),!1;!1===(o&&o(Bt({type:"dragstart",datas:x.datas,inputEvent:t,isTrusted:r},y)))&&(clearTimeout(m),x.initDrag()),x.isDouble=M()-x.prevTime<200,x.flag&&s&&t.preventDefault()}}},this.onDrag=function(t,r){var e,n,i;x.flag&&(e=Tt(t),x.pinchFlag&&x.onPinch(t,e),!(n=x.move([0,0],t,e))||!n.deltaX&&!n.deltaY||(i=x.options.drag)&&i(Bt({},n,{isScroll:!!r,inputEvent:t})))},this.onDragEnd=function(t){var r,e,n,i,o,a,s,u,c;x.flag&&(e=(r=x.options).dragend,n=r.pinchOutside,i=r.container,x.isTouch&&n&&w(i,"touchstart",x.onDragStart),x.pinchFlag&&x.onPinchEnd(t),x.flag=!1,o=x.prevClients,a=x.startClients,s=x.pinchFlag?Gt(o,o,a,x.startPinchClients):At(o[0],o[0],a[0]),u=M(),c=!x.isDrag&&x.isDouble,x.prevTime=x.isDrag||c?0:u,x.startClients=[],x.prevClients=[],e&&e(Bt({type:"dragend",datas:x.datas,isDouble:c,isDrag:x.isDrag,inputEvent:t},s)))};var e=[].concat(t);this.options=Bt({checkInput:!1,container:1<e.length?window:e[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},r);var n,i=this.options,o=i.container,a=i.events;this.isTouch=-1<a.indexOf("touch"),this.isMouse=-1<a.indexOf("mouse"),this.customDist=[0,0],this.targets=e,this.isMouse&&(e.forEach(function(t){D(t,"mousedown",x.onDragStart)}),D(o,"mousemove",this.onDrag),D(o,"mouseup",this.onDragEnd),D(o,"contextmenu",this.onDragEnd)),this.isTouch&&(n={passive:!1},e.forEach(function(t){D(t,"touchstart",x.onDragStart,n)}),D(o,"touchmove",this.onDrag,n),D(o,"touchend",this.onDragEnd,n),D(o,"touchcancel",this.onDragEnd,n))}var r=t.prototype;return r.isDragging=function(){return this.isDrag},r.isFlag=function(){return this.flag},r.isPinchFlag=function(){return this.pinchFlag},r.isPinching=function(){return this.isPinch},r.scrollBy=function(r,e,t,n){void 0===n&&(n=!0),this.flag&&(this.startClients.forEach(function(t){t.clientX-=r,t.clientY-=e}),this.prevClients.forEach(function(t){t.clientX-=r,t.clientY-=e}),n&&this.onDrag(t,!0))},r.move=function(t,r,e){var n=t[0],i=t[1];void 0===e&&(e=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,u=this.pinchFlag?Gt(e,a,s,this.startPinchClients):At(e[0],a[0],s[0]);o[0]+=n,o[1]+=i,u.deltaX+=n,u.deltaY+=i;var c=u.deltaX,l=u.deltaY;return u.distX+=o[0],u.distY+=o[1],this.movement+=Math.sqrt(c*c+l*l),this.prevClients=e,this.isDrag=!0,Bt({type:"drag",datas:this.datas},u,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},r.onPinchStart=function(t){var r,e,n,i,o,a,s=this.options,u=s.pinchstart,c=s.pinchThreshold;this.isDrag&&this.movement>c||(n=Nt(t.changedTouches),this.pinchFlag=!0,(r=this.startClients).push.apply(r,n),(e=this.prevClients).push.apply(e,n),this.startDistance=It(this.prevClients),this.startPinchClients=this.prevClients.slice(),u&&(a=At(o=Xt(i=this.prevClients),o,o),this.startRotate=_t(i),u(Bt({type:"pinchstart",datas:this.datas,angle:this.startRotate,touches:kt(i,i,i)},a,{inputEvent:t}))))},r.onPinch=function(t,r){var e,n,i,o,a,s;!this.flag||!this.pinchFlag||r.length<2||(this.isPinch=!0,(e=this.options.pinch)&&(n=this.prevClients,i=this.startClients,o=At(Xt(r),Xt(n),Xt(i)),a=_t(r),s=It(r),e(Bt({type:"pinch",datas:this.datas,movement:this.movement,angle:a,rotation:a-this.startRotate,touches:kt(r,n,i),scale:s/this.startDistance,distance:s},o,{inputEvent:t}))))},r.onPinchEnd=function(t){var r,e,n,i,o;this.flag&&this.pinchFlag&&(r=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,(e=this.options.pinchend)&&(n=this.prevClients,i=this.startClients,o=At(Xt(n),Xt(n),Xt(i)),e(Bt({type:"pinchend",datas:this.datas,isPinch:r,touches:kt(n,n,i)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1))},r.triggerDragStart=function(t){this.onDragStart(t,!1)},r.unset=function(){var r=this,t=this.targets,e=this.options.container;this.isMouse&&(t.forEach(function(t){w(t,"mousedown",r.onDragStart)}),w(e,"mousemove",this.onDrag),w(e,"mouseup",this.onDragEnd),w(e,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){w(t,"touchstart",r.onDragStart)}),w(e,"touchstart",this.onDragStart),w(e,"touchmove",this.onDrag),w(e,"touchend",this.onDragEnd),w(e,"touchcancel",this.onDragEnd))},r.initDrag=function(){this.startClients=[],this.prevClients=[],this.flag=!1},t}(),Ft=function(t,r){return(Ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function Ht(t){var r=t.container;return[r.scrollLeft,r.scrollTop]}var Vt=function(r){function t(){this.constructor=e}var e,n;function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}Ft(e=i,n=r),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t);var o=i.prototype;return o.dragStart=function(t,r){var e=r.container.getBoundingClientRect(),n=e.top,i=e.left,o=e.width,a=e.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:n,left:i,width:o,height:a}},o.drag=function(t,r){var e=this,n=t.clientX,i=t.clientY,o=r.container,a=r.threshold,s=void 0===a?0:a,u=r.throttleTime,c=void 0===u?0:u,l=r.getScrollPosition,p=void 0===l?Ht:l,f=this.startRect,d=this.startPos,h=M(),g=Math.max(c+this.prevTime-h,0),v=[0,0];if(f.top>i-s?(d[1]>f.top||i<d[1])&&(v[1]=-1):f.top+f.height<i+s&&(d[1]<f.top+f.height||i>d[1])&&(v[1]=1),f.left>n-s?(d[0]>f.left||n<d[0])&&(v[0]=-1):f.left+f.width<n+s&&(d[0]<f.left+f.width||n>d[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){e.drag(t,r)},g),!1;this.prevTime=h;var m=p({container:o,direction:v});this.trigger("scroll",{container:o,direction:v,inputEvent:t});var b=p({container:o,direction:v}),y=b[0]-m[0],x=b[1]-m[1];return!(!y&&!x)&&(this.trigger("move",{offsetX:v[0]?y:0,offsetY:v[1]?x:0,inputEvent:t}),c&&(this.timer=window.setTimeout(function(){e.drag(t,r)},c)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},i}(t),Ut=function(t,r){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};var Kt,$t="function"==typeof Map?void 0:(Kt=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Kt)}),Zt=function(r){function t(){this.constructor=e}var e,n;function i(t){return void 0===t&&(t=[]),r.call(this,t,$t)||this}return Ut(e=i,n=r),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t),i}(r),Jt=function(t,r){return(Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function Qt(t,r){function e(){this.constructor=t}Jt(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var tr=function(){return(tr=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)};function rr(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+r+'deg);transform-origin: 16px 16px"></path></svg>'}var er=pt(("undefined"!=typeof navigator&&navigator||{}).userAgent||""),nr=-1<er.os.name.indexOf("ios")||-1<er.browser.name.indexOf("safari"),ir="moveable-",or="\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(e=rr(1,r=t),n=rr(2,r),i=45*Math.round(r/45)%180,"cursor:"+(o=135==i?"nwse-resize":45==i?"nesw-resize":90==i?"ew-resize":"ns-resize")+";cursor: url('"+e+"') 16 16, "+o+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+n+"') 2x) 16 16, "+o+";")+"\n}\n";var r,e,n,i,o}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(nr?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",ar=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],sr=1e-7,ur=Math.pow(10,10),cr=-ur,lr=["nw","ne","sw","se","n","w","s","e"],pr={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},fr={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},dr=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"];function hr(t,r,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<e;++i)n[i*e+r-1]=0,n[(r-1)*e+i]=0;return n[(r-1)*(e+1)]=1,n}function gr(t,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=t.slice(),n=Or(r),i=0;i<r;++i){var o=r*i+i;if(0===e[o])for(var a=i+1;a<r;++a)if(e[r*i+a]){!function(t,r,e,n,i){for(var o=0;o<i;++o){var a=e+o*i,s=n+o*i,u=t[a],c=r[a];t[a]=t[s],t[s]=u,r[a]=r[s],r[s]=c}}(e,n,i,a,r);break}if(!e[o])return[];!function(t,r,e,n,i){for(var o=0;o<n;++o){var a=e+o*n;t[a]/=i,r[a]/=i}}(e,n,i,r,e[o]);for(a=0;a<r;++a){var s=e[a+i*r];0!==s&&i!==a&&function(t,r,e,n,i,o){for(var a=0;a<i;++a){var s=e+a*i,u=n+a*i;t[s]+=t[u]*o,r[s]+=r[u]*o}}(e,n,a,i,r,-s)}}return n}function vr(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=Math.atan2(n,e);return 0<=i?i:i+2*Math.PI}function mr(t,r){for(var e=t.slice(),n=t.length;n<r-1;++n)e[n]=0;return e[r-1]=1,e}function br(t,r,e){if(void 0===r&&(r=Math.sqrt(t.length)),r===e)return t;for(var n=Or(e),i=Math.min(r,e),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)n[o*e+a]=t[o*r+a];n[(o+1)*e-1]=t[(o+1)*r-1],n[(e-1)*e+o]=t[(r-1)*r+o]}return n[e*e-1]=t[r*r-1],n}function yr(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=Or(r);return t.forEach(function(t){n=xr(n,t,r)}),n}function xr(t,r,e){void 0===e&&(e=Math.sqrt(t.length));var n=[],i=t.length/e,o=r.length/i;if(!i)return r;if(!o)return t;for(var a=0;a<e;++a)for(var s=0;s<o;++s)for(var u=n[s*e+a]=0;u<i;++u)n[s*e+a]+=t[u*e+a]*r[s*i+u];return n}function Er(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length,n=0,i=e-1;0<=i;--i)n+=t[i];return e?n/e:0}function Sr(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),i=0;i<e;++i)n[i]=n[i]+r[i];return n}function Mr(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),i=0;i<e;++i)n[i]=n[i]-r[i];return n}function Dr(t,r,e){void 0===e&&(e=r.length);var n=xr(t,r,e),i=n[e-1];return n.map(function(t){return t/i})}function wr(t,r){return Dr(Cr(r,3),mr(t,3))}function Cr(t,r){var e=Math.cos(t),n=Math.sin(t),i=Or(r);return i[0]=e,i[1]=n,i[r]=-n,i[r+1]=e,i}function Or(t){for(var r=t*t,e=[],n=0;n<r;++n)e[n]=n%(t+1)?0:1;return e}function Rr(t,r){for(var e=Or(r),n=Math.min(t.length,r-1),i=0;i<n;++i)e[(r+1)*i]=t[i];return e}function Pr(t,r){for(var e=Or(r),n=Math.min(t.length,r-1),i=0;i<n;++i)e[r*(r-1)+i]=t[i];return e}function zr(t,r,e,n,i,o,a,s){var u=t[0],c=t[1],l=r[0],p=r[1],f=e[0],d=e[1],h=n[0],g=n[1],v=i[0],m=i[1],b=o[0],y=o[1],x=a[0],E=a[1],S=s[0],M=s[1],D=gr([u,0,l,0,f,0,h,0,c,0,p,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,l,0,f,0,h,0,c,0,p,0,d,0,g,0,1,0,1,0,1,0,1,-v*u,-m*u,-b*l,-y*l,-x*f,-E*f,-S*h,-M*h,-v*c,-m*c,-b*p,-y*p,-x*d,-E*d,-S*g,-M*g],8);if(!D.length)return[];var w=xr(D,[v,m,b,y,x,E,S,M],8);return w[8]=1,br(function(t,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r;++n)for(var i=0;i<r;++i)e[i*r+n]=t[r*n+i];return e}(w),3,4)}function Br(t,r){var e=r.datas,n=t.state,i=n.matrix,o=n.beforeMatrix,a=n.is3d,s=n.left,u=n.top,c=n.origin,l=n.offsetMatrix,p=n.targetMatrix,f=n.transformOrigin,d=a?4:3;e.is3d=a,e.matrix=i,e.targetMatrix=p,e.beforeMatrix=o,e.offsetMatrix=l,e.transformOrigin=f,e.inverseMatrix=gr(i,d),e.inverseBeforeMatrix=gr(o,d),e.absoluteOrigin=mr(Sr([s,u],c),d),e.startDragBeforeDist=Dr(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=Dr(e.inverseMatrix,e.absoluteOrigin,d)}function _r(t,r){var e=t.datas,n=t.distX,i=t.distY,o=e.inverseBeforeMatrix,a=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,c=e.startDragDist,l=s?4:3;return Mr(Dr(r?o:a,Sr(e.absoluteOrigin,[n,i]),l),r?u:c)}function Gr(t){var r=[];return 0<=t[1]&&(0<=t[0]&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(0<=t[0]&&r.push(1),t[0]<=0&&r.push(0)),r}function Tr(r,t){return Gr(t).map(function(t){return r[t]})}function Ar(t,r){var e=Tr(t,r);return[Er.apply(void 0,e.map(function(t){return t[0]})),Er.apply(void 0,e.map(function(t){return t[1]}))]}function Ir(t,r){return Ar(t,r.map(function(t){return-t}))}function kr(t,r,e,n,i,o){var a=Ir(te(r,e,n,i),o);return[t[0]-a[0],t[1]-a[1]]}function Nr(t,r,e,n){return xr(t,Lr(r,n,e),n)}function Yr(t,r){var e=t.transformOrigin,n=t.offsetMatrix,i=t.is3d?4:3;return Nr(n,xr(t.targetMatrix,Rr(r,i),i),e,i)}function Xr(t,r,e,n,i,o){var a,s,u,c,l,p,f=t.props.groupable,d=t.state,h=d.transformOrigin,g=d.targetMatrix,v=d.offsetMatrix,m=d.is3d,b=d.width,y=d.height,x=d.left,E=d.top,S=m?4:3,M=f?x:0,D=f?E:0;return Mr(kr(i,Nr(v,g,(s=r,u=e,void 0===(c=b)&&(c=s),void 0===(l=y)&&(l=u),void 0===(p=h)&&(p=[0,0]),(a=o)?a.map(function(t,r){var e=Dt(t),n=e.value,i=e.unit,o=r?l:c,a=r?u:s;return"%"===t||isNaN(n)?a*(o?p[r]/o:0):"%"!==i?n:a*n/100}):p),S),r,e,S,n),[M,D])}function jr(t,r){return Ir(ge(t.state),r)}function qr(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.map(function(t){return t.split(" ").map(function(t){return t?""+r+t:""}).join(" ")}).join(" ")}.apply(void 0,[ir].concat(t))}function Wr(){return Or(3)}function Lr(t,r,e){return yr(r,Pr(e,r),t,Pr(e.map(function(t){return-t}),r))}function Fr(s){return Hr(Me(s,":before")).map(function(t,r){var e,n,i=Dt(t),o=i.value,a=i.unit;return o*(e=s,n=0===r,"%"!==a?1:Jr(e.ownerSVGElement)[n?"width":"height"]/100)})}function Hr(t){var r=t.transformOrigin;return r?r.split(" "):["0","0"]}function Vr(t,r,e){for(var n=document.body,i=!t||e?t:t.parentElement,o=!1,a="relative";i&&i!==n;){r===i&&(o=!0);var s=Me(i),u=s.transform;if("static"!==(a=s.position)||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===n,offsetParent:i||n}}function Ur(t,r,e,n){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;n&&(s-=(o=(r||document.documentElement).getBoundingClientRect()).left,u-=o.top);var c,l,p=vt(s),f=!p;return f||"svg"===a?l=(c=Hr(e).map(function(t){return parseFloat(t)})).slice():(l=(c=nr?Fr(t):Hr(e).map(function(t){return parseFloat(t)})).slice(),f=!0,"g"===a?u=s=0:(s=(i=function(t,r){if(!t.getBBox)return[0,0];var e=t.getBBox(),n=Jr(t.ownerSVGElement),i=e.x-n.x,o=e.y-n.y;return[i,o,r[0]-i,r[1]-o]}(t,c))[0],u=i[1],c[0]=i[2],c[1]=i[3])),{isSVG:p,hasOffset:f,offset:[s,u],origin:c,targetOrigin:l}}function Kr(t,r,e){var n,i,o,a,s,u,c=t,l=[],p=!1,f=!1,d=3,h=Vr(r,r,!0).offsetParent;for(e&&(p=t===r,10<e.length&&(f=!0,d=4),r=t.parentElement);c&&!p;){var g=Me(c),v=c.tagName.toLowerCase(),m=g.position,b="fixed"===m,y=(u=g.transform,a=u&&"none"!==u?mt(u)?u:Mt(u).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0],(s=void 0)===s&&(s=6===a.length),s?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),x=y.length;if(!f&&16===x){f=!0,d=4;for(var E=l.length,S=0;S<E;++S)l[S]=br(l[S],3,4)}f&&9===x&&(y=br(y,3,4));var M=Ur(c,r,g,b),D=M.hasOffset,w=M.isSVG,C=M.origin,O=M.targetOrigin,R=M.offset,P=R[0],z=R[1];"svg"===v&&o&&l.push(function(t,r){var e=t.clientWidth,n=t.clientHeight,i=Jr(t),o=i.width,a=i.height,s=e/o,u=n/a,c=t.preserveAspectRatio.baseVal,l=c.align,p=c.meetOrSlice,f=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==l&&(g=(l-2)%3,v=Math.floor((l-2)/3),f[0]=o*g/2,f[1]=a*v/2,m=2===p?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(e-o)/2*g,h[1]=(n-a)/2*v)}var b=Rr(d,r);return b[r*(r-1)]=h[0],b[r*(r-1)+1]=h[1],Lr(b,r,f)}(c,d),Or(d));var B=Vr(c,r),_=B.offsetParent,G=B.isEnd,T=B.isStatic;nr&&D&&!w&&T&&("relative"===m||"static"===m)&&(P-=_.offsetLeft,z-=_.offsetTop,p=p||G);var A=0,I=0;if(D&&h!==_&&(A=_.clientLeft,I=_.clientTop),l.push(Lr(y,d,C),Pr(D?[P-c.scrollLeft+A,z-c.scrollTop+I]:[c,C],d)),o=o||y,n=n||C,i=i||O,p||b)break;c=_,p=G}return{offsetContainer:h,matrixes:l,targetMatrix:o=o||Or(d),transformOrigin:n=n||[0,0],targetTransformOrigin:i=i||[0,0],is3d:f}}function $r(t,r,e,n,i,o){var a=Kr(t,r,n),s=a.matrixes,u=a.is3d,c=a.targetMatrix,l=a.transformOrigin,p=a.targetTransformOrigin,f=Kr(a.offsetContainer,e,i),d=f.matrixes,h=f.is3d,g=h||u?4:3,v="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,m=r||document.body,b=n?br(n,o,g):Or(g),y=c,x=i?br(i,o,g):Or(g),E=n?br(n,o,g):Or(g),S=Or(g),M=s.length,D=Vr(m,m,!0).offsetParent;d.reverse(),s.reverse(),!u&&h&&(y=br(y,3,4),s.forEach(function(t,r){s[r]=br(t,3,4)})),u&&!h&&d.forEach(function(t,r){d[r]=br(t,3,4)}),i||d.forEach(function(t){x=xr(x,t,g)}),s.forEach(function(t,r){var e;M-2===r&&(E=b.slice()),M-1===r&&(S=b.slice()),mt(t[g*(g-1)])&&(e=function(t,r,e,n,i,o){var a,s=ue(t,void 0,!0),u=s[0],c=s[1],l=r.getBoundingClientRect(),p=t.getBoundingClientRect(),f=p.left-l.left+r.scrollLeft-(r.clientLeft||0),d=p.top-l.top+r.scrollTop-(r.clientTop||0),h=p.width,g=p.height,v=yr(e,i,o),m=ee(v,u,c,e),b=m.left,y=m.top,x=m.width,E=m.height,S=Qr(v,n,e),M=Mr(S,[b,y]),D=[f+M[0]*h/x,d+M[1]*g/E],w=[0,0],C=0;for(;++C<10;){var O=gr(i,e);a=Mr(Qr(O,D,e),Qr(O,S,e)),w[0]=a[0],w[1]=a[1];var R=ee(yr(e,i,Pr(w,e),o),u,c,e),P=R.left,z=R.top,B=P-f,_=z-d;if(Math.abs(B)<2&&Math.abs(_)<2)break;D[0]-=B,D[1]-=_}return w.map(function(t){return Math.round(t)})}(t[g*(g-1)],D,g,t[g*(g-1)+1],b,s[r+1]),t[g*(g-1)]=e[0],t[g*(g-1)+1]=e[1]),b=xr(b,t,g)});var w=!v&&u,y=y||Or(w?4:3),C=Zr(v&&16===y.length?br(y,4,3):y,w);return[x=hr(x,g,g),E,S,b,y,C,l,p,u||h]}function Zr(t,r){return void 0===r&&(r=9<t.length),(r?"matrix3d":"matrix")+"("+(e=t,void 0===(n=!r)&&(n=9===e.length),(n?[e[0],e[1],e[3],e[4],e[6],e[7]]:e).join(","))+")";var e,n}function Jr(t){var r=t.clientWidth,e=t.clientHeight,n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||r,height:i.height||e}}function Qr(t,r,e){return Dr(t,mr(r,e),e)}function te(r,t,e,n){return[[0,0],[t,0],[0,e],[t,e]].map(function(t){return Qr(r,t,n)})}function re(t){var r=t.map(function(t){return t[0]}),e=t.map(function(t){return t[1]}),n=Math.min.apply(Math,r),i=Math.min.apply(Math,e),o=Math.max.apply(Math,r),a=Math.max.apply(Math,e);return{left:n,top:i,right:o,bottom:a,width:o-n,height:a-i}}function ee(t,r,e,n){return re(te(t,r,e,n))}function ne(t,r,e,n){var i=16===t.length?4:3,o=te(t,e,n,i),a=o[0],s=a[0],u=a[1],c=o[1],l=c[0],p=c[1],f=o[2],d=f[0],h=f[1],g=o[3],v=g[0],m=g[1],b=Qr(t,r,i),y=b[0],x=b[1],E=Math.min(s,l,d,v),S=Math.min(u,p,h,m),M=Math.max(s,l,d,v),D=Math.max(u,p,h,m),y=y-E||0,x=x-S||0,w=[((s=s-E||0)+(l=l-E||0)+(d=d-E||0)+(v=v-E||0))/4,((u=u-S||0)+(p=p-S||0)+(h=h-S||0)+(m=m-S||0))/4],C=vr(w,[s,u]),O=vr(w,[l,p]);return[[E,S,M,D],[y,x],[[s,u],[l,p],[d,h],[v,m]],C<O&&O-C<Math.PI||O<C&&O-C<-Math.PI?1:-1]}function ie(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function oe(t,r){return ie([r[0]-t[0],r[1]-t[1]])}function ae(t,r,e){void 0===e&&(e=vr(t,r));var n=oe(t,r);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+e+"rad)",width:n+"px"}}function se(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=r.length;return{transform:"translate("+r.reduce(function(t,r){return t+r[0]},0)/n+"px, "+r.reduce(function(t,r){return t+r[1]},0)/n+"px) rotate("+t+"rad)"}}function ue(t,r,e,n){void 0===r&&(r=window.getComputedStyle(t)),void 0===n&&(n=e||"border-box"===r.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!vt(i);if((e||n)&&a)return[i,o];if(a||"svg"===t.tagName.toLowerCase())return i=t.clientWidth,o=t.clientHeight,e||n?[i+(parseFloat(r.borderLeftWidth)||0)+(parseFloat(r.borderRightWidth)||0),o+(parseFloat(r.borderTopWidth)||0)+(parseFloat(r.borderBottomWidth)||0)]:[i-(parseFloat(r.paddingLeft)||0)-(parseFloat(r.paddingRight)||0),o-(parseFloat(r.paddingTop)||0)-(parseFloat(r.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function ce(t,r){return vr(0<r?t[0]:t[1],0<r?t[1]:t[0])}function le(t,r,e,n,i,o){var a,s,u,c,l,p,f,d=0,h=0,g=0,v=0,m=[0,0],b=[[0,0],[0,0],[0,0],[0,0]],y=Wr(),x=Wr(),E=Wr(),S=Wr(),M=Wr(),D=0,w=0,C=[0,0],O=1,R=1,P=!1,z="",B=[0,0],_=pe(),G=pe(),T=pe(),A=[0,0],I=0,k=o?o.beforeMatrix:void 0,N=o?o.rootMatrix:void 0,Y=o?o.is3d?4:3:void 0;return r&&(o?(D=o.width,w=o.height):(l=Me(r),D=r.offsetWidth,w=r.offsetHeight,vt(D)&&(D=(a=ue(r,l,!0))[0],w=a[1])),y=(s=$r(r,e,i,k,N,Y))[0],E=s[1],x=s[2],S=s[3],M=s[4],z=s[5],C=s[6],A=s[7],P=s[8],d=(c=(u=ne(S,C,D,w))[0])[0],h=c[1],g=c[2],v=c[3],m=u[1],b=u[2],O=u[3],f=(p=ne(x,Sr(C,function(t,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r-1;++n)e[n]=t[r*(r-1)+n];return e[r-1]=0,e}(M,P?4:3)),D,w))[0],B=p[1],R=p[3],B=[B[0]+f[0]-d,B[1]+f[1]-h],_=fe(r),G=fe(Vr(n,n,!0).offsetParent||document.body,!0),t&&(T=fe(t)),I=ce([b[0],b[1]],O)),{rotation:I,targetClientRect:_,containerClientRect:G,moveableClientRect:T,beforeDirection:R,direction:O,target:r,left:d,top:h,right:g,bottom:v,pos1:b[0],pos2:b[1],pos3:b[2],pos4:b[3],width:D,height:w,rootMatrix:y,beforeMatrix:E,offsetMatrix:x,targetMatrix:M,matrix:S,targetTransform:z,is3d:P,beforeOrigin:B,origin:m,transformOrigin:C,targetOrigin:A}}function pe(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function fe(t,r){var e=t.getBoundingClientRect(),n=e.left,i=e.width,o=e.top,a=e.bottom,s={left:n,right:e.right,top:o,bottom:a,width:i,height:e.height};return r&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function de(t){if(t){var r=t.getAttribute("data-direction");if(r){var e=[0,0];return-1<r.indexOf("w")&&(e[0]=-1),-1<r.indexOf("e")&&(e[0]=1),-1<r.indexOf("n")&&(e[1]=-1),-1<r.indexOf("s")&&(e[1]=1),e}}}function he(t,r){return[Sr(r,t[0]),Sr(r,t[1]),Sr(r,t[2]),Sr(r,t[3])]}function ge(t){var r=t.left,e=t.top;return he([t.pos1,t.pos2,t.pos3,t.pos4],[r,e])}function ve(t,r){return r?Math.round(t/r)*r:t}function me(e,n){return e.forEach(function(t,r){e[r]=ve(e[r],n)}),e}function be(t,r){t[r]&&(t[r].unset(),t[r]=null)}function ye(t,r,e){return(t[0]-r[0])*(e[1]-r[1])-(t[1]-r[1])*(e[0]-r[0])}function xe(t,r,e){var n=r.datas;n.datas||(n.datas={});var i=tr({},e,{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,datas:n.datas});return n.isStartEvent?n.lastEvent=i:n.isStartEvent=!0,i}function Ee(t,r,e){var n=r.datas,i="isDrag"in e?e.isDrag:r.isDrag;return n.datas||(n.datas={}),tr({isDrag:i},e,{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:r.isDouble,datas:n.datas})}function Se(t,r,e,n){return n&&$i.prototype.triggerEvent.call(t,r,e),t.triggerEvent(r,e)}function Me(t,r){return window.getComputedStyle(t,r)}function De(t,e,n){var i={},o={};return t.filter(function(r){var t=r.name;if(i[t]||!e.some(function(t){return r[t]}))return!1;if(!n&&r.ableGroup){if(o[r.ableGroup])return!1;o[r.ableGroup]=!0}return i[t]=!0})}function we(t,r,e){return t*(r?e:1/e)}function Ce(t,r,e){return t*(r?1/e:e)}function Oe(t,r){return t===r||null==t&&null==r}function Re(o,a){var s=[],u=[];return o.forEach(function(t,r){var e=a(t,r,o),n=u.indexOf(e),i=s[n]||[];-1===n&&(u.push(e),s.push(i)),i.push(t)}),s}function Pe(t){return t.reduce(function(t,r){return t.concat(r)},[])}function ze(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(t,r){return Math.abs(r)-Math.abs(t)}),t[0]}function Be(t,r,e){return Dr(gr(t,e),mr(r,e),e)}function _e(t,r){var e=t.is3d?4:3,n=Be(t.rootMatrix,[r.distX,r.distY],e);return r.distX=n[0],r.distY=n[1],r}function Ge(t,r,e,n,i){return Mr(Qr(t,Sr(e,r),i),n)}function Te(t,e,n){return[[e[0],e[0]*t[1]/t[0]],[e[1]*t[0]/t[1],e[1]]].filter(function(t){return t.every(function(t,r){return n?t<=e[r]:t>=e[r]})})[0]||t}function Ae(t,r){var e=Dt(t),n=e.value;return"%"===e.unit?n*r/100:n}function Ie(t,r,e){return e?t/r*100+"%":t+"px"}function ke(t,u,r,e,n){var i=t[r],o=i.direction,a=i.pos,s=i.horizontal,c=i.vertical,l=i.sub,p=[e*Math.abs(s),n*Math.abs(c)];o&&!l?o.split("").forEach(function(a){var s="n"===a||"s"===a;t.forEach(function(t,r){var e=t.direction,n=t.horizontal,i=t.vertical,o=t.pos;e&&-1!==e.indexOf(a)&&(u[r]=Sr(o,[s||!n?0:p[0],s&&i?p[1]:0]))})}):u[r]=Sr(a,p)}function Ne(t,r){var e=r.clientX,n=r.clientY,i=r.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,c=o.pos1,l=Mr(Be(s,[e-a.left,n-a.top],u?4:3),c),p=_r({datas:i,distX:l[0],distY:l[1]});return[p[0],p[1]]}function Ye(t){return Math.abs(t)<=sr?0:t}function Xe(i,t,r,e,n,o,a){var s="Start"===n;if(!i.state.target||s&&-1<e.indexOf("Control")&&!o.isRequest&&i.areaElement===o.inputEvent.target)return!1;var u=""+r+e+n,c=""+r+e+"Condition",l="End"===n,p=-1<n.indexOf("After"),f=!(!s||i.targetDragger&&i.controlDragger&&i.targetDragger.isFlag()&&i.controlDragger.isFlag());f&&i.updateRect(n,!0,!1),""!==n||p||_e(i.state,o);var d,h=-1<e.indexOf("Group"),g=i[t].slice();if(o.isRequest&&(d=o.requestAble,g.some(function(t){return t.name===d})||g.push.apply(g,i.props.ables.filter(function(t){return t.name===d}))),!g.length)return!1;var v=g.filter(function(t){return t[u]}),m=o.datas,b=m.render||(m.render={}),y=tr({},o,{datas:b,originalDatas:m});f&&v.forEach(function(t){t.unset&&t.unset(i)});var x,E,S,M,D,w,C,O,R,P,z,B,_,G,T,A=v.filter(function(t){var r=s&&t[c],e=t.name,n=m[e]||(m[e]={});return!(r&&!t[c](o,i))&&t[u](i,tr({},o,{datas:n,originalDatas:m}))}),I=A.length;if(s){if(v.length&&!I)return i.state.dragger=null,i.moveables&&i.moveables.forEach(function(t){t.state.dragger=null}),!1;B=h,G=xe(z=i,_=y,{isPinch:!!_.isPinch}),T=B?"Group":"",B&&(G.targets=z.props.targets),Se(z,"onRender"+T+"Start",G)}else l?(C=h,R=xe(w=i,O=y,{isPinch:!!O.sPinch,isDrag:O.isDrag}),P=C?"Group":"",C&&(R.targets=w.props.targets),Se(w,"onRender"+P+"End",R)):p&&!I||(E=h,M=xe(x=i,S=y,{isPinch:!!S.isPinch}),D=E?"Group":"",E&&(M.targets=x.props.targets),Se(x,"onRender"+D,M));if(l&&(i.state.dragger=null),i.isUnmounted)return!1;(!s&&I&&!a||l)&&(A.some(function(t){return t.updateRect})&&!h?i.updateRect(n,!1,!1):i.updateRect(n,!0,!1),i.forceUpdate()),s||l||p||!I||Xe(i,t,r,e,n+"After",o)}function je(e,t,r){var n=e.controlBox.getElement(),i=[];i.push(n),e.props.dragArea||i.push(t);function o(t){var r=t.inputEvent.target;return r===e.areaElement||!e.isMoveableElement(r)||-1<r.className.indexOf("moveable-area")||-1<r.className.indexOf("moveable-padding")}return qe(e,i,"targetAbles",r,{dragstart:o,pinchstart:o})}function qe(i,t,o,a,s){void 0===s&&(s={});var r=i.props,e=r.pinchOutside,n=r.pinchThreshold,u={container:window,pinchThreshold:n,pinchOutside:e};return["drag","pinch"].forEach(function(n){["Start","","End"].forEach(function(r){var e=""+n+r.toLowerCase();u[e]=function(t){return!(s[e]&&!s[e](t))&&Xe(i,o,n,a,r,t)}})}),new Lt(t,u)}var We={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},pinchStart:function(e,n){var i=n.datas,t=n.targets,o=n.angle,r=e.props,a=r.pinchable,s=r.ables;if(!a)return!1;var u="onPinch"+(t?"Group":"")+"Start",c="drag"+(t?"Group":"")+"ControlStart",l=(!0===a?e.controlAbles:s.filter(function(t){return-1<a.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),p=xe(e,n,{});t&&(p.targets=t);var f=Se(e,u,p);i.isPinch=!1!==f,i.ables=l;var d=i.isPinch;return!!d&&(l.forEach(function(t){var r;i[t.name+"Datas"]={},t[c]&&(r=tr({},n,{datas:i[t.name+"Datas"],parentRotate:o,isPinch:!0}),t[c](e,r))}),e.state.snapRenderInfo={request:n.isRequest,direction:[0,0]},d)},pinch:function(r,e){var n=e.datas,t=e.scale,i=e.distance,o=e.inputEvent,a=e.targets,s=e.angle;if(n.isPinch){var u=i*(1-1/t),c=xe(r,e,{});a&&(c.targets=a),Se(r,"onPinch"+(a?"Group":""),c);var l=n.ables,p="drag"+(a?"Group":"")+"Control";return l.forEach(function(t){t[p]&&t[p](r,tr({},e,{datas:n[t.name+"Datas"],inputEvent:o,parentDistance:u,parentRotate:s,isPinch:!0}))}),c}},pinchEnd:function(r,e){var n=e.datas,i=e.isPinch,o=e.inputEvent,t=e.targets;if(n.isPinch){var a="onPinch"+(t?"Group":"")+"End",s=Ee(r,e,{isDrag:i});t&&(s.targets=t),Se(r,a,s);var u=n.ables,c="drag"+(t?"Group":"")+"ControlEnd";return u.forEach(function(t){t[c]&&t[c](r,tr({},e,{isDrag:i,datas:n[t.name+"Datas"],inputEvent:o,isPinch:!0}))}),i}},pinchGroupStart:function(t,r){return this.pinchStart(t,tr({},r,{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,tr({},r,{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,tr({},r,{targets:t.props.targets}))}};function Le(t,r,e,n,i){var o=t.dragger.move(r,e),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return tr({},i?_e(t,o):o,{isDrag:!0,isPinch:!!n,parentEvent:!0,datas:s})}var Fe=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var r=t.prototype;return r.dragStart=function(t,r){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},tr({},this.move(t,r),{type:"dragstart"})},r.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},r.move=function(t,r){var e,n;return this.isFlag?(e=this.prevX+t[0],n=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],e=t[0],n=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=e,clientY:this.prevY=n,inputEvent:r,isDrag:this.isDrag,distX:e-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function He(t,i,o,a,r,s){var u=!!o.match(/Start$/g),c=!!o.match(/End$/g),l=r.inputEvent,p=r.isPinch,f=r.datas,e=t.moveables.map(function(t,r){var e={},e=u?(new Fe).dragStart(a,l):(t.state.dragger||(t.state.dragger=f.childDraggers[r]),Le(t.state,a,l,p,s)),n=i[o](t,tr({},e,{parentFlag:!0}));return c&&(t.state.dragger=null),n});return u&&(f.childDraggers=t.moveables.map(function(t){return t.state.dragger})),e}function Ve(t,o,a,r,s,u){var e=o.name,c=r[e]||(r[e]=[]),l=!!a.match(/End$/g);return t.moveables.map(function(t,r){var e=c[r]||(c[r]={}),n=typeof s===ft?s(t,e):s,i=o[a](t,tr({},n,{datas:e,parentFlag:!0}));return i&&u&&u(t,e,i,r),l&&(t.state.dragger=null),i})}function Ue(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:Ct(t.inputEvent.target,qr("direction"))}function Ke(t,r,f,d,e,n){var h=e[0],g=e[1],i=n[0],o=n[1],v=[],a=d?0:1,m="vertical"===r?"horizontal":"vertical",b=Re(t.filter(function(t){return t.type===r}),function(t){return t.element}).map(function(t){return t[0]}).filter(function(t){var r=t.pos,e=t.sizes;return r[a]<=o&&i<=r[a]+e[a]});return b.forEach(function(t){var l=t.pos[d],p=l+t.sizes[d];b.forEach(function(t){var r,e=t.pos,n=t.sizes,i=t.element,o=e[d],a=o+n[d],s=0,u=0,c=!0;if(p<=o)h<(s=a-(u=p-o))-f&&(c=!1);else{if(!(a<=l))return;(s=o-(u=l-a))+f<g&&(c=!1)}c&&v.push({pos:"vertical"==m?[s,e[1]]:[e[0],s],element:i,sizes:n,size:0,type:m,gap:u,gapGuidelines:b}),p<=h&&g<=o&&(0<=ve(h-((r=(o+p-(g-h))/2)-f),.1)&&v.push({pos:"vertical"==m?[r,e[1]]:[e[0],r],element:i,sizes:n,size:0,type:m,gap:p-h,gapGuidelines:b}))})}),v}function $e(t,r,e,n,i){var o,a,s,u,c,l,p,f,d,h,g,v,m,b,y,x,E,S,M,D,w,C,O,R,P=(f=(o=t).state,d=f.guidelines,h=f.containerClientRect,g=h.scrollHeight,v=h.scrollWidth,m=o.props,b=m.snapHorizontal,y=void 0===b||b,x=m.snapVertical,E=void 0===x||x,S=m.snapGap,M=void 0===S||S,D=m.verticalGuidelines,w=m.horizontalGuidelines,C=m.snapThreshold,O=void 0===C?5:C,R=d.slice(),M&&(s=(a=re(ge(o.state))).top,u=a.left,c=a.bottom,l=a.right,p=d.filter(function(t){return t.element}),R.push.apply(R,Ke(p,"horizontal",O,0,[u,l],[s,c]).concat(Ke(p,"vertical",O,1,[s,c],[u,l])))),y&&w&&w.forEach(function(t){R.push({type:"horizontal",pos:[0,ve(t,.1)],size:v})}),E&&D&&D.forEach(function(t){R.push({type:"vertical",pos:[ve(t,.1),0],size:g})}),R),z=t.props,B=z.snapElement,_=void 0===B||B,G=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var i=t[n];if(!vt(i))return i}return t[e]}(i,z.snapThreshold,5);return{vertical:Je(P,"vertical",r,G,n,_),horizontal:Je(P,"horizontal",e,G,n,_)}}function Ze(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0],i=n.offset,o=n.dist,a=n.guideline;return{isSnap:r,offset:i,dist:o,pos:e.pos,guideline:a}}function Je(r,a,t,s,u,c){if(!r||!r.length)return{isSnap:!1,posInfos:[]};var i="vertical"===a?0:1,e=t.map(function(n){var t=r.map(function(t){var r=t.pos,e=n-r[i];return{offset:e,dist:Math.abs(e),guideline:t}}).filter(function(t){var r=t.guideline,e=t.dist,n=r.type,i=r.center,o=r.element;return!(!c&&o||!u&&i||n!==a||s<e)}).sort(function(t,r){return t.dist-r.dist});return{pos:n,guidelineInfos:t}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,r){return t.guidelineInfos[0].dist-r.guidelineInfos[0].dist});return{isSnap:0<e.length,posInfos:e}}function Qe(t,u){return t.slice().sort(function(t,r){var e=t.sign[u],n=r.sign[u],i=t.offset[u],o=r.offset[u],a=Math.abs(i),s=Math.abs(o);return e?n?t.isBound&&r.isBound?s-a:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?a-s:t.isSnap?-1:r.isSnap||a<sr?1:s<sr?-1:a-s:-1:1})[0]}function tn(t,r){var e=Er(r[0][0],r[1][0]),n=Er(r[0][1],r[1][1]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function rn(t,r){var e,n,i=r[0],o=r[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<sr&&(a=0),Math.abs(s)<sr&&(s=0),n=a?(e=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(e=i[0],t[0]),e-n}function en(t,e,n){void 0===n&&(n=sr);var i=rn(t[0],e)<=0;return t.slice(1).every(function(t){var r=rn(t,e);return r<=0==i||Math.abs(r)<=n})}function nn(t,r,e,n,i){return void 0===i&&(i=0),n&&r-i<=t||!n&&t<=e+i?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function on(t,r,e,n,i){var o=t[0],a=t[1],s=r[0],u=r[1],c=Ye(a[1]-o[1]),l=Ye(a[0]-o[0]),p=Ye(u[1]-s[1]);if(!Ye(u[0]-s[0])){if(i&&!c)return{isBound:!1,offset:0};if(l)return nn(c/l*(s[0]-o[0])+o[1],s[1],u[1],e,n);var f=s[0]-o[0];return{isBound:d=Math.abs(f)<=(n||0),offset:d?f:0}}if(p)return{isBound:!1,offset:0};if(i&&!l)return{isBound:!1,offset:0};if(c)return nn((s[1]-o[1])/(c/l)+o[0],s[0],u[0],e,n);var d,f=s[1]-o[1];return{isBound:d=Math.abs(f)<=(n||0),offset:d?f:0}}function an(l,t,p,f){return t.map(function(t){var e=t[0],r=t[1],n=t[2],i=function(t,r,e){var n=t.props.innerBounds;if(!n)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=n.left,o=n.top,a=n.width,s=n.height,u=[[i,o],[i,o+s]],c=[[i,o],[i+a,o]],l=[[i+a,o],[i+a,o+s]],p=[[i,o+s],[i+a,o+s]],f=tn(e,r),d=f.horizontal,h=f.vertical;if(en([e,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=on(r,c,h),v=on(r,p,h),m=on(r,u,d),b=on(r,l,d),y=g.isBound&&v.isBound,x=g.isBound||v.isBound,E=m.isBound&&b.isBound,S=m.isBound||b.isBound,M=ze(g.offset,v.offset),D=ze(m.offset,b.offset),w=[0,0],C=!1;return{isAllBound:Math.abs(D)<Math.abs(M)?(w=[M,0],C=x,y):(w=[0,D],C=S,E),isVerticalBound:x,isHorizontalBound:S,isBound:C,offset:w}}(l,[r,n],p),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,c=_r({datas:f,distX:a[0],distY:a[1]}).map(function(t,r){return t*(e[r]?2/e[r]:0)});return{sign:e,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:c}})}function sn(t,r,e){var n,i,o,a,s,u,c,l,p,f,d,h,g,v=an(t,un(r,[0,0],!1).map(function(t){var r=t[0],e=t[1],n=t[2];return[r.map(function(t){return 2*Math.abs(t)}),e,n]}),Ar(r,[0,0]),e),m=Qe(v,0),b=Qe(v,1),y=0,x=0,E=m.isVerticalBound||b.isVerticalBound,S=m.isHorizontalBound||b.isHorizontalBound;return(E||S)&&(i={datas:e,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,c=a.beforeMatrix,l=a.matrix,p=a.is3d,f=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=p?4:3,y=(n=Mr(Dr(o?c:l,Sr(o?f:d,[s,u]),g),h))[0],x=n[1]),{vertical:{isBound:E,offset:y},horizontal:{isBound:S,offset:x}}}function un(i,t,r){return n=r,o=[],a=(e=t)[0],s=e[1],a&&s?o.push([[0,2*s],e,[-a,s]],[[2*a,0],e,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),n&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),n&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var r=t[0],e=t[1],n=t[2];return[r,Ar(i,e),Ar(i,n)]});var e,n,o,a,s}function cn(t,r,e,n){var i=n?t.map(function(t){return wr(t,n)}):t,o=[e].concat(r);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t,r){return!en(o,t)})}function ln(t,r,e,n,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,c=o.width,l=o.height,p=s-n[0],f=s+c-n[0],d=u-n[1],h=u+l-n[1],g=[[p,d],[f,d],[p,h],[f,h]],v=Ar(e,[0,0]);if(!cn(e,g,v,0))return[];var m=[],b=g.map(function(t){return[ie(t),vr([0,0],t)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(t){var i=vr([0,0],function(t){var r=t[0],e=t[1],n=e[0]-r[0],i=e[1]-r[1];if(!n)return[r[0],0];if(!i)return[0,r[1]];var o=i/n,a=-o*r[0]+r[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var r=t[0],e=t[1],n=e[0]-r[0],i=e[1]-r[1];if(!n)return Math.abs(r[0]);if(!i)return Math.abs(r[1]);var o=i/n;return Math.abs((-o*r[0]+r[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var r=t[0];return r&&o<=r}).map(function(t){var r=t[0],e=t[1],n=Math.acos(r?o/r:0);return[a+(e+n)-i,a+(e-n)-i]}).reduce(function(t,r){return t.push.apply(t,r),t},[]).filter(function(t){return!cn(r,g,v,t)}).map(function(t){return ve(180*t/Math.PI,sr)}))}),m}function pn(t,r,e){var n=t.props.bounds||{},i=n.left,o=n.top,a=n.right,s=n.bottom,u={left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===s?1/0:s};return{vertical:fn(u,r,!0),horizontal:fn(u,e,!1)}}function fn(t,r,e){var n=t[e?"left":"top"],i=t[e?"right":"bottom"],o=Math.min.apply(Math,r),a=Math.max.apply(Math,r);return o<n+1?{isBound:!0,offset:o-n,pos:n}:i-1<a?{isBound:!0,offset:a-i,pos:i}:{isBound:!1,offset:0,pos:0}}function dn(t,r,e){return(e?t.map(function(t){return wr(t,e)}):t).some(function(t){return t[0]<r.left&&.1<Math.abs(t[0]-r.left)||t[0]>r.right&&.1<Math.abs(t[0]-r.right)||t[1]<r.top&&.1<Math.abs(t[1]-r.top)||t[1]>r.bottom&&.1<Math.abs(t[1]-r.bottom)})}function hn(t,c,e,r,n){var i=t.props.bounds,l=n*Math.PI/180;if(!i)return[];var o=i.left,a=void 0===o?-1/0:o,s=i.top,u=void 0===s?-1/0:s,p=i.right,f=void 0===p?1/0:p,d=i.bottom,h=void 0===d?1/0:d,g=a-r[0],v=f-r[0],m=u-r[1],b=h-r[1],y={left:g,top:m,right:v,bottom:b};if(!dn(e,y,0))return[];var x=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,r){var s=t[0],u=t[1];e.forEach(function(t){var e,r,n,i,o,a=vr([0,0],t);x.push.apply(x,(r=s,n=u,i=ie(e=t),[o=Math.sqrt(i*i-r*r)||0,-o].sort(function(t,r){return Math.abs(t-e[n?0:1])-Math.abs(r-e[n?0:1])}).map(function(t){return vr([0,0],n?[t,r]:[r,t])}).map(function(t){return l+t-a}).filter(function(t){return!dn(c,y,t)}).map(function(t){return ve(180*t/Math.PI,sr)})))})}),x}function gn(t,r,e){var n=Qr(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}function vn(t){var r,e,n,i,o,a,s,u,c,g,l,p,f,d,v,m,h,b,y,x,E,S,M,D,w=t.state;w.guidelines&&w.guidelines.length||(n=void 0===(e=(r=t.props).horizontalGuidelines)?[]:e,o=void 0===(i=r.verticalGuidelines)?[]:i,s=void 0===(a=r.elementGuidelines)?[]:a,u=r.bounds,c=r.innerBounds,g=r.snapCenter,(c||u||n.length||o.length||s.length)&&(l=w.containerClientRect,f=(p=w.targetClientRect).top,d=p.left,v=w.rootMatrix,m=w.is3d?4:3,h=gn(v,l,m),b=h[0],y=h[1],x=ge(w),E=Mr([Math.min.apply(Math,x.map(function(t){return t[0]})),Math.min.apply(Math,x.map(function(t){return t[1]}))],Be(v,[d-b,f-y],m)).map(function(t){return r=t,Math.round(r%1==-.5?r-1:r);var r}),S=E[0],M=E[1],D=[],s.forEach(function(t){var r=t.getBoundingClientRect(),e=r.left-b,n=r.top-y,i=n+r.height,o=e+r.width,a=Be(v,[e,n],m),s=a[0],u=a[1],c=Be(v,[o,i],m),l=c[0],p=c[1],f=l-s,d=p-u,h=[f,d];D.push({type:"vertical",element:t,pos:[ve(s+S,.1),u],size:d,sizes:h}),D.push({type:"vertical",element:t,pos:[ve(l+S,.1),u],size:d,sizes:h}),D.push({type:"horizontal",element:t,pos:[s,ve(u+M,.1)],size:f,sizes:h}),D.push({type:"horizontal",element:t,pos:[s,ve(p+M,.1)],size:f,sizes:h}),g&&(D.push({type:"vertical",element:t,pos:[ve((s+l)/2+S,.1),u],size:d,sizes:h,center:!0}),D.push({type:"horizontal",element:t,pos:[s,ve((u+p)/2+M,.1)],size:f,sizes:h,center:!0}))}),w.guidelines=D,w.enableSnap=!0))}function mn(t,r){var e=t.props,n=e.snappable,i=e.bounds,o=e.innerBounds,a=e.verticalGuidelines,s=e.horizontalGuidelines,u=t.state,c=u.guidelines,l=u.enableSnap;return n&&l&&!(r&&!0!==n&&n.indexOf(r)<0)&&!!(i||o||c&&c.length||a&&a.length||s&&s.length)}function bn(t,r,e,n,i){var o=function(t,r,e,n){var i=r[0]-t[0],o=r[1]-t[1];Math.abs(i)<sr&&(i=0);Math.abs(o)<sr&&(o=0);if(!i)return n?[0,0]:[0,e];if(!o)return n?[e,0]:[0,0];var a=o/i,s=t[1]-a*t[0];{if(n){var u=a*(r[0]+e)+s;return[e,u-r[1]]}return[(r[1]+e-s)/a-r[0],e]}}(t,r,e,n);if(!o)return[0,0];var a=_r({datas:i,distX:o[0],distY:o[1]});return[a[0],a[1]]}function yn(t,r,e,n,i,o){var a=te(t,r,e,o?4:3);return he(a,Mr(n,Ir(a,i)))}function xn(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function En(t,r){return t.isBound?t.offset:r.isSnap?Ze(r).offset:0}function Sn(t,r,e,n){var i=function(t,r,e){var n=t.props.bounds||{},i=n.left,o=void 0===i?-1/0:i,a=n.top,s=void 0===a?-1/0:a,u=n.right,c=void 0===u?1/0:u,l=n.bottom,p=void 0===l?1/0:l,f=e[0],d=e[1],h=Mr(e,r),g=h[0],v=h[1];Math.abs(g)<sr&&(g=0),Math.abs(v)<sr&&(v=0);var m,b,y,x,E,S=0<v,M=0<g,D={isBound:!1,offset:0,pos:0},w={isBound:!1,offset:0,pos:0};return 0===g&&0===v||(0===g?S?p<d&&(w.pos=p,w.offset=d-p):d<s&&(w.pos=s,w.offset=d-s):0===v?M?c<f&&(D.pos=c,D.offset=f-c):f<o&&(D.pos=o,D.offset=f-o):(m=v/g,b=e[1]-m*f,x=y=0,E=!1,M&&c<=f?(y=m*c+b,x=c,E=!0):!M&&f<=o&&(y=m*o+b,x=o,E=!0),E&&(y<s||p<y)&&(E=!1),E||(S&&p<=d?(x=((y=p)-b)/m,E=!0):!S&&d<=s&&(x=((y=s)-b)/m,E=!0)),E&&(D.isBound=!0,D.pos=x,D.offset=f-x,w.isBound=!0,w.pos=y,w.offset=d-y))),{vertical:D,horizontal:w}}(t,r,e),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,r,e){var n=e[0],i=e[1],o=r[0],a=r[1],s=Mr(e,r),u=s[0],c=0<(p=s[1]),l=0<u,u=Ye(u),p=Ye(p),f={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===p)return{vertical:f,horizontal:d};var h=$e(t,u?[n]:[],p?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var r=t.pos;return l?o<=r:r<=o}),v.posInfos.filter(function(t){var r=t.pos;return c?a<=r:r<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,y,x,E,S=Ze(g),M=S.isSnap,D=S.guideline,w=Ze(v),C=w.isSnap,O=w.guideline,R=C?O.pos[1]:0,P=M?D.pos[0]:0;return 0===u?C&&(d.isSnap=!0,d.pos=O.pos[1],d.offset=i-d.pos):0===p?M&&(f.isSnap=!0,f.pos=P,f.offset=n-P):(m=p/u,b=e[1]-m*n,x=y=0,E=!1,M?(y=m*(x=P)+b,E=!0):C&&(x=((y=R)-b)/m,E=!0),E&&(f.isSnap=!0,f.pos=x,f.offset=n-x,d.isSnap=!0,d.pos=y,d.offset=i-y)),{vertical:f,horizontal:d}}(t,r,e),u=s.horizontal,c=s.vertical,l=xn(o,u),p=xn(a,c),f=Math.abs(l),d=Math.abs(p);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:l,dist:f},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:p,dist:d}}}function Mn(t,r,e,n){void 0===n&&(n=e);var i=pn(t,n.map(function(t){return t[0]}),n.map(function(t){return t[1]})),o=i.horizontal,a=i.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:$e(t,e.map(function(t){return t[0]}),e.map(function(t){return t[1]})),u=s.horizontal,c=s.vertical,l=En(o,u),p=En(a,c),f=Math.abs(l),d=Math.abs(p);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:l,dist:f},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:p,dist:d}}}function Dn(t){return t?t/Math.abs(t):0}function wn(t,r,e,n,i,o){var a,s,u,c,y,x,E,S,M,l=(s=n,u=[],c=[-(a=e)[0],-a[1]],a[0]&&a[1]?(u.push([c,[a[0],-a[1]]],[c,[-a[0],a[1]]]),s&&u.push([c,a])):a[0]?s?u.push([c,[c[0],-1]],[c,[c[0],1]],[c,[a[0],-1]],[c,a],[c,[a[0],1]]):u.push([[c[0],-1],[a[0],-1]],[[c[0],0],[a[0],0]],[[c[0],1],[a[0],1]]):a[1]?s?u.push([c,[-1,c[1]]],[c,[1,c[1]]],[c,[-1,a[1]]],[c,[1,a[1]]],[c,a]):u.push([[-1,c[1]],[-1,a[1]]],[[0,c[1]],[0,a[1]]],[[1,c[1]],[1,a[1]]]):u.push([c,[1,0]],[c,[-1,0]],[c,[0,-1]],[c,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),u),p=un(r,e,n),f=(y=t,x=r,E=n,S=i,M=o,l.map(function(t){var r=t[0],e=t[1],n=Ar(x,r),i=Ar(x,e),o=E?Sn(y,n,i,S):Mn(y,S,[i]),a=o.horizontal,s=a.dist,u=a.offset,c=a.isBound,l=a.isSnap,p=o.vertical,f=p.dist,d=p.offset,h=p.isBound,g=p.isSnap,v=Mr(e,r);if(!d&&!u)return{isBound:h||c,isSnap:g||l,sign:v,offset:[0,0]};var m=s<f,b=bn(n,i,-(m?d:u),m,M).map(function(t,r){return t*(v[r]?2/v[r]:0)});return{sign:v,isBound:m?h:c,isSnap:m?g:l,offset:b}}).concat(an(t,p,Ar(r,[0,0]),o))),d=Qe(f,0),h=Qe(f,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function Cn(t,r,e,n,i,o,a,s){for(var u,c,l,p,f,d,h,g,v,m,b,y,x,E,S,M,D,w,C,O,R,P,z,B,_,G=ge(t.state),T=t.props.keepRatio,A=0,I=0,k=0;k<2;++k){var N,Y,X=wn(t,r(A,I),i,T,a,s),j=X.width,q=X.height,W=j.isBound,L=q.isBound,F=j.offset,H=q.offset;if(1===k&&(W||(F=0),L||(H=0)),0===k&&a&&!W&&!L)return[0,0];T&&(N=Math.abs(F)*(e?1/e:1),Y=Math.abs(H)*(n?1/n:1),(W&&L?N<Y:L||!W&&N<Y)?F=e*H/n:H=n*F/e),A+=F,I+=H}return i[0]&&i[1]&&(f=t,d=G,g=o,v=s,C=[-(h=i)[0],-h[1]],O=f.state,R=O.width,P=O.height,z=f.props.bounds,_=B=1/0,z&&(m=[[h[0],-h[1]],[-h[0],h[1]]],b=z.left,y=void 0===b?-1/0:b,x=z.top,E=void 0===x?-1/0:x,S=z.right,M=void 0===S?1/0:S,D=z.bottom,w=void 0===D?1/0:D,m.forEach(function(t){var r,e,n,i=t[0]!==C[0],o=t[1]!==C[1],a=Ar(d,t),s=Dn(t[1]-C[1]),u=Dn(t[0]-C[0]),c=360*vr(g,a)/Math.PI;o&&(e=a.slice(),(Math.abs(c-360)<2||Math.abs(c-180)<2)&&(e[1]=g[1]),r=bn(g,e,(g[1]<a[1]?w:E)-a[1],!1,v)[1],isNaN(r)||(_=P+s*r)),i&&(e=a.slice(),(Math.abs(c-90)<2||Math.abs(c-270)<2)&&(e[0]=g[0]),n=bn(g,e,(g[0]<a[0]?M:y)-a[0],!0,v)[0],isNaN(n)||(B=R+u*n))})),c=(u={maxWidth:B,maxHeight:_}).maxWidth,l=u.maxHeight,A+=F=(p=function(t,r,e,n,i,o,a,s,u){var c=Mn(t,s,[Ar(r,a)]),l=c.horizontal.offset,p=c.vertical.offset;if(p||l){var f=_r({datas:u,distX:-p,distY:-l}),d=f[0],h=f[1];return[Math.min(i||1/0,e+a[0]*d)-e,Math.min(o||1/0,n+a[1]*h)-n]}return[0,0]}(t,r(A,I),e+A,n+I,c,l,i,a,s))[0],I+=H=p[1]),[A,I]}function On(t,r,e,n){if(!mn(t,"rotatable"))return n;var i=r.pos1,o=r.pos2,a=r.pos3,s=r.pos4,u=n*Math.PI/180,c=[i,o,a,s].map(function(t){return Mr(t,e)}),l=c.map(function(t){return wr(t,u)}),p=hn(t,c,l,e,n).concat(ln(t,c,l,e,n));return p.sort(function(t,r){return Math.abs(t-n)-Math.abs(r-n)}),p.length?p[0]:n}function Rn(t,r,e,n,i,o){if(!mn(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=he(o.absolutePoses,[r,e]),s=re(a),u=s.left,c=s.right,l=s.top,p=s.bottom,f=[[u,l],[c,l],[u,p],[c,p]];t.props.snapCenter&&f.push([(u+c)/2,(l+p)/2]);var d,h,g,v,m,b,y,x,E,S,M,D,w,C,O,R,P,z,B,_=Mn(t,i,f,a),G=_.vertical,T=_.horizontal,A=sn(t,a,o),I=A.vertical,k=A.horizontal,N=G.isSnap,Y=T.isSnap,X=G.isBound||I.isBound,j=T.isBound||k.isBound,q=ze(G.offset,I.offset),W=ze(T.offset,k.offset),L=(d=n,g=[X,j],v=[N,Y],m=[q,W],S=(h=[r,e])[0],M=h[1],D=g[0],w=g[1],C=v[0],O=v[1],R=m[0],P=m[1],z=-R,B=-P,d&&S&&M?(B=z=0,b=[],D&&w?b.push([0,P],[R,0]):D?b.push([R,0]):w?b.push([0,P]):C&&O?b.push([0,P],[R,0]):C?b.push([R,0]):O&&b.push([0,P]),b.length&&(b.sort(function(t,r){return ie(Mr([S,M],t))-ie(Mr([S,M],r))}),(y=b[0])[0]&&Math.abs(S)>sr?(z=-y[0],B=M*Math.abs(S+z)/Math.abs(S)-M):y[1]&&Math.abs(M)>sr&&(x=M,B=-y[1],z=S*Math.abs(M+B)/Math.abs(x)-S),d&&w&&D&&(Math.abs(z)>sr&&Math.abs(z)<Math.abs(R)?(z*=E=Math.abs(R)/Math.abs(z),B*=E):Math.abs(B)>sr&&Math.abs(B)<Math.abs(P)?(z*=E=Math.abs(P)/Math.abs(B),B*=E):(z=ze(-R,z),B=ze(-P,B))))):(z=S||D?-R:0,B=M||w?-P:0),[z,B]);return[{isBound:X,isSnap:N,offset:L[0]},{isBound:j,isSnap:Y,offset:L[1]}]}function Pn(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var r=t.guideline;-1<e.indexOf(r)||e.push(r)})}),e}function zn(t,r,e,n){var i=t-e,o=i<0?i+r:n;return{size:(i<0?0:i)-o,pos:o}}function Bn(t,c,e,l){var p=[],r=Re(t.filter(function(t){var r=t.element,e=t.gap;return r&&!e}),function(t){var r,e,n,i=t.element,o=t.pos,a=o[l],s=(Math.min(0,a-c)<0?-1:1)+"_"+o[l?0:1],u=-1<(n=wt(r=p,function(t){var r=t[0],e=t[1];return i===r&&a===e}))?r[n]:e;return u?u[2]:(p.push([i,a,s]),s)});return r.forEach(function(t){t.sort(function(t,r){return zn(t.pos[l],t.size,c,e).size-zn(r.pos[l],t.size,c,e).size||t.pos[l?0:1]-r.pos[l?0:1]})}),r}function _n(t,r,f,d,h,g,v,m,b,y,x,E){var S=r[0],M=r[1],D=r[2],w=r[3];return Pe(t.map(function(t,l){var p=!0;return t.map(function(t,r){var e,n=t.pos,i=t.size,o=zn(n[y],i,d,h),a=o.pos,s=o.size;if(s<v)return null;var u=p;p=!1;var c=m&&u?parseFloat(s.toFixed(b)):0;return E.createElement("div",{className:qr("line",S,"guideline","dashed"),"data-size":0<c?x(c):"",key:S+"LinkGuidline"+l+"-"+r,style:((e={})[M]=f+a+"px",e[D]=-g+n[y?0:1]+"px",e[w]=s+"px",e)})})}))}function Gn(t,r,o,a,s,u){var c=r[0],l=r[1],p=r[2],f=r[3];return t.map(function(t,r){var e,n=t.type,i=t.pos;return u.createElement("div",{className:qr("line",c,"guideline","target","bold",n),key:c+"TargetGuidline"+r,style:((e={})[l]=o+"px",e[p]=-a+i+"px",e[f]=s+"px",e)})})}function Tn(t,r,a,s,u,c){var l=r[0],p=r[1],f=r[2],d=r[3];return t.map(function(t,r){var e,n=t.pos,i=t.size,o=t.element;return c.createElement("div",{className:qr("line",l,"guideline",o?"bold":""),key:l+"Guidline"+r,style:((e={})[p]=-a+n[u]+"px",e[f]=-s+n[u?0:1]+"px",e[d]=i+"px",e)})})}function An(t,i,O,R){var r=t.filter(function(t){var r=t.element,e=t.gap,n=t.type;return r&&e&&n===i}),e="vertical"===i?[0,1]:[1,0],P=e[0],z=e[1];return Pe(r.map(function(t,r){var e=t.pos,n=t.gap,i=t.gapGuidelines,o=t.sizes,a=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(t,r){return Math.abs(t)-Math.abs(r)}),t[0]}(e[z]+o[z]-O[z],e[z]-O[z]-R[z]),s=Math.min(o[z],R[z]);0<a&&s<a?a=2*(a-s/2):a<0&&a<-s&&(a=2*(a+s/2));var u,c,l,p,f,d,h,g,v,m,b,y,x,E,S,M,D,w,C=(0<a?0:R[z])+a/2;return m=i,b=P,y=O,x=R,E=e,S=n,M=C,D=Math.abs(S),w=E[b]+(0<S?x[0]:0),m.filter(function(t){return t.pos[b]<=y[b]}).sort(function(t,r){var e=t.pos;return r.pos[b]-e[b]}).filter(function(t){var r=t.pos,e=t.sizes,n=r[b];return ve(n+e[b],1e-4)===ve(w-D,1e-4)&&(w=n,!0)}).map(function(t){var r=-y[b]+t.pos[b]+t.sizes[b];return tr({},t,{gap:S,renderPos:b?[M,r]:[r,M]})}).concat((u=i,c=P,l=O,p=R,f=e,d=n,h=C,g=Math.abs(d),v=f[c]+(d<0?p[c]:0),u.filter(function(t){return t.pos[c]>l[c]}).sort(function(t,r){var e=t.pos,n=r.pos;return e[c]-n[c]}).filter(function(t){var r=t.pos,e=t.sizes,n=r[c];return ve(n,1e-4)===ve(v+g,1e-4)&&(v=n+e[c],!0)}).map(function(t){var r=-l[c]+t.pos[c]-g;return tr({},t,{gap:d,renderPos:c?[h,r]:[r,h]})})))}))}function In(t,r,e,n,s,u){var c=n[0],l=n[1],p=n[2],f=n[3],i=t.props,o=i.snapDigit,d=void 0===o?0:o,a=i.isDisplaySnapDigit,h=void 0===a||a,g="vertical"===e?"horizontal":"vertical",v="vertical"===e?[0,1]:[1,0],m=v[0],b=v[1];return r.map(function(t,r){var e,n=t.renderPos,i=t.gap,o=Math.abs(i),a=h?parseFloat(o.toFixed(d)):0;return u.createElement("div",{className:qr("line",c,"guideline","gap"),"data-size":0<a?s(a):"",key:g+"GapGuideline"+r,style:((e={})[l]=n[m]+"px",e[p]=n[b]+"px",e[f]=o+"px",e)})})}function kn(t,r,e,i,o){var n=pn(t,r,e),a=n.vertical,s=a.isBound,u=a.pos,c=n.horizontal,l=c.isBound,p=c.pos;s&&i.push({type:"bounds",pos:u}),l&&o.push({type:"bounds",pos:p});var f=function(t){var r=t.props.innerBounds;if(!r)return{vertical:[],horizontal:[]};var e=t.getRect(),n=e.pos1,i=e.pos2,o=e.pos3,a=e.pos4,u=Ar([n,i,o,a],[0,0]),c=r.left,l=r.top,p=r.width,f=r.height,d=[[c,l],[c,l+f]],h=[[c,l],[c+p,l]],g=[[c+p,l],[c+p,l+f]],v=[[c,l+f],[c+p,l+f]],m=[],b=[],y={top:!1,bottom:!1,left:!1,right:!1};return[[n,i],[i,a],[a,o],[o,n]].forEach(function(t){var r=tn(u,t),e=r.horizontal,n=r.vertical,i=on(t,h,n,1,!0),o=on(t,v,n,1,!0),a=on(t,d,e,1,!0),s=on(t,g,e,1,!0);i.isBound&&!y.top&&(m.push(l),y.top=!0),o.isBound&&!y.bottom&&(m.push(l+f),y.bottom=!0),a.isBound&&!y.left&&(b.push(c),y.left=!0),s.isBound&&!y.right&&(b.push(c+p),y.right=!0)}),{horizontal:m,vertical:b}}(t),d=f.vertical,h=f.horizontal;d.forEach(function(n){0<=wt(i,function(t){var r=t.type,e=t.pos;return"bounds"===r&&e===n})||i.push({type:"bounds",pos:n})}),h.forEach(function(n){0<=wt(o,function(t){var r=t.type,e=t.pos;return"bounds"===r&&e===n})||o.push({type:"bounds",pos:n})})}var Nn={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 1;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,r){var e=t.state,n=e.top,i=e.left,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,c=e.snapRenderInfo,l=e.targetClientRect,p=e.containerClientRect,f=e.is3d,d=e.rootMatrix;if(!c||!mn(t,""))return[];var h,g,v,m,b,y,x,E,S=f?4:3,M=Math.min(o[0],a[0],s[0],u[0]),D=Math.min(o[1],a[1],s[1],u[1]),w=gn(d,p,S),C=Be(d,[l.left-w[0],l.top-w[1]],S),O=C[0],R=C[1],P=t.props,z=P.snapThreshold,B=void 0===z?5:z,_=P.snapDigit,G=void 0===_?0:_,T=P.isDisplaySnapDigit,A=void 0===T||T,I=P.snapDistFormat,k=void 0===I?function(t){return t}:I,N=ge(t.state),Y=re(N),X=Y.width,j=Y.height,q=Y.top,W=Y.left,L=Y.bottom,F=Y.right,H=[],V=[],U=[],K=[],$=[];c.request||(c.direction&&$.push(function(t,r,e){var n=[];if(e[0]&&e[1])n=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(t){return Ar(r,t)});else if(e[0]||e[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(t){return Ar(r,t)}):1<(n=Tr(r,e)).length&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]);else for(var i=[r[0],r[1],r[3],r[2],r[0]],o=0;o<4;++o)n.push(i[o]),n.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return $e(t,n.map(function(t){return t[0]}),n.map(function(t){return t[1]}),!0,1)}(t,N,c.direction)),c.snap&&(h=re(N),c.center&&(h.middle=(h.top+h.bottom)/2,h.center=(h.left+h.right)/2),$.push((v=h,m=!0,b=1,y=(g=t).props.snapCenter&&m,x=["left","right"],E=["top","bottom"],y&&(x.push("center"),E.push("middle")),x=x.filter(function(t){return t in v}),E=E.filter(function(t){return t in v}),$e(g,x.map(function(t){return v[t]}),E.map(function(t){return v[t]}),y,b)))),$.forEach(function(t){var r=t.vertical.posInfos,e=t.horizontal.posInfos;H.push.apply(H,r.map(function(t){return{type:"snap",pos:t.pos}})),V.push.apply(V,e.map(function(t){return{type:"snap",pos:t.pos}})),U.push.apply(U,Pn(r)),K.push.apply(K,Pn(e))})),kn(t,[W,F],[q,L],H,V);var Z=Bn(K,O,X,0),J=Bn(U,R,j,1),Q=["horizontal","left","top","width"],tt=["vertical","top","left","height"],rt=An(U,"vertical",[i,n],[X,j]),et=An(K,"horizontal",[i,n],[X,j]),nt=U.concat(K);return Se(t,"onSnap",{guidelines:nt.filter(function(t){return!t.element}),elements:Re(nt.filter(function(t){return t.element}),function(t){return t.element}),gaps:rt.concat(et)},!0),In(t,rt,"vertical",Q,k,r).concat(In(t,et,"horizontal",tt,k,r),_n(Z,Q,M,O,X,n,B,A,G,0,k,r),_n(J,tt,D,R,j,i,B,A,G,1,k,r),Gn(V,Q,M,n,X,r),Gn(H,tt,D,i,j,r),Tn(K,Q,i,n,0,r),Tn(U,tt,n,i,1,r))},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},vn(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return Ue(t)||Ln(t)},dragControlStart:function(t,r){t.state.snapRenderInfo=null,vn(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,r){t.state.snapRenderInfo=null,vn(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null}},Yn={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,r){var e=t.props.throttleDragRotate,n=t.state,i=n.dragInfo,o=n.beforeOrigin;if(!e||!i)return[];var a=i.dist;if(!a[0]&&!a[1])return[];var s=ie(a),u=vr(a,[0,0]);return[r.createElement("div",{className:qr("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+o[0]+"px, "+o[1]+"px) rotate("+u+"rad)"}})]},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,i=r.parentDragger,o=t.state,a=o.targetTransform,s=o.target;if(o.dragger)return!1;o.dragger=i||t.targetDragger;var u,c=window.getComputedStyle(s);e.datas={},e.left=parseFloat(c.left||"")||0,e.top=parseFloat(c.top||"")||0,e.bottom=parseFloat(c.bottom||"")||0,e.right=parseFloat(c.right||"")||0,e.transform=a,e.startTranslate=[0,0],Br(t,{datas:e}),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,u=t,e.absolutePoses=ge(u.state);var l=xe(t,r,{set:function(t){e.startTranslate=t}});return!1!==(n||Se(t,"onDragStart",l))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.dragger=null,e.isPinch=!1),!!e.isDrag&&l},drag:function(t,r){var e=r.datas,n=r.parentEvent,i=r.parentFlag,o=r.isPinch,a=r.isRequest,s=r.distX,u=r.distY,c=e.isDrag,l=e.prevDist,p=e.prevBeforeDist,f=e.transform,d=e.startTranslate;if(c){var h,g,v,m,b,y,x,E,S,M,D,w,C=t.props,O=C.parentMoveable,R=!n&&C.throttleDrag||0,P=!n&&C.throttleDragRotate||0,z=!1,B=0;!n&&0<P&&(s||u)&&(g=ve((h=C.startDragRotate||0)+180*vr([0,0],[s,u])/Math.PI,P)-h,v=u*Math.abs(Math.cos((g-90)/180*Math.PI)),m=ie([s*Math.abs(Math.cos(g/180*Math.PI)),v]),B=g*Math.PI/180,s=m*Math.cos(B),u=m*Math.sin(B)),o||n||i||P&&!s&&!u||(y=(b=Rn(t,s,u,P,a,e))[0],x=b[1],E=y.isSnap,S=y.isBound,M=y.offset,D=x.isSnap,w=x.isBound,z=E||D||S||w,s+=M,u+=x.offset),e.passDeltaX=s-(e.passDistX||0),e.passDeltaY=u-(e.passDistY||0),e.passDistX=s,e.passDistY=u;var _=Sr(_r({datas:e,distX:s,distY:u},!0),d),G=Sr(_r({datas:e,distX:s,distY:u},!1),d);P||z||(me(G,R),me(_,R));var T=Mr(_,d),A=Mr(G,d),I=Mr(A,l),k=Mr(T,p);e.prevDist=A,e.prevBeforeDist=T;var N=e.left+T[0],Y=e.top+T[1],X=e.right-T[0],j=e.bottom-T[1],q=f+" translate("+A[0]+"px, "+A[1]+"px)";if(t.state.dragInfo.dist=n?[0,0]:A,n||O||!I.every(function(t){return!t})||!k.some(function(t){return!t})){var W=xe(t,r,{transform:q,dist:A,delta:I,translate:G,beforeDist:T,beforeDelta:k,beforeTranslate:_,left:N,top:Y,right:X,bottom:j,isPinch:o});return n||Se(t,"onDrag",W),W}}},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas,i=r.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,n.isDrag)return n.isDrag=!1,e||Se(t,"onDragEnd",Ee(t,r,{})),i},dragGroupStart:function(t,r){var e=r.datas,n=r.clientX,i=r.clientY,o=this.dragStart(t,r);if(!o)return!1;var a=He(t,this,"dragStart",[n||0,i||0],r,!1),s=Se(t,"onDragGroupStart",tr({},o,{targets:t.props.targets,events:a}));return e.isDrag=!1!==s,!!e.isDrag&&o},dragGroup:function(t,r){if(r.datas.isDrag){var e=this.drag(t,r),n=r.datas,i=He(t,this,"drag",[n.passDeltaX,n.passDeltaY],r,!1);if(e){var o=tr({targets:t.props.targets,events:i},e);return Se(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var e=r.isDrag;if(r.datas.isDrag)return this.dragEnd(t,r),He(t,this,"dragEnd",[0,0],r,!1),Se(t,"onDragGroupEnd",Ee(t,r,{targets:t.props.targets})),e},request:function(t){var r={},e=t.getRect(),n=0,i=0;return{isControl:!1,requestStart:function(){return{datas:r}},request:function(t){return"x"in t?n=t.x-e.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY),{datas:r,distX:n,distY:i}},requestEnd:function(){return{datas:r,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Xn(t,r,e,n,i,o){var a=t.state.is3d?4:3,s=Qr(t.state.rootMatrix,i,a),u=Sr([o.left,o.top],s);r.startAbsoluteOrigin=u,r.prevDeg=vr(u,[e,n])/Math.PI*180,r.prevSnapDeg=r.prevDeg,r.startDeg=r.prevDeg,r.loop=0}function jn(t,r,e,n,i,o){var a=e.prevDeg,s=On(t,r,e.origin,n);return[(e.prevDeg=s)-a,s,o+s]}function qn(t,r,e,n,i,o,a,s){var u=e.prevDeg,c=e.prevSnapDeg,l=e.startDeg,p=e.loop;n<u&&270<u&&n<90?++e.loop:u<n&&u<90&&270<n&&--e.loop;var f=e.loop,d=360*p+c-l+o,h=360*f+n-l+o;e.prevDeg=h-360*f+l-o;var g=i*((h=ve(h,a))-o);return s&&(h=(g=On(t,r,e.origin,g))/i+o),e.prevSnapDeg=h-360*f+l-o,[i*(h-d),g,o+g]}function Wn(t,r,e,n,i,o,a,s){return qn(t,r,e,vr(e.startAbsoluteOrigin,[i,o])/Math.PI*180,n,a,s,!0)}function Ln(t){return t.isRequest?"rotatable"===t.requestAble:Ct(t.inputEvent.target,qr("rotation"))}var Fn={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},render:function(t,r){var e=t.props,n=e.rotatable,i=e.rotationPosition;if(!n)return null;var o=t.state,a=function(t,r,e){var n=r[0],i=r[1],o=r[2],a=r[3],s=(t||"top").split("-"),u=s[0],c=s[1],l=[n,i];"left"===u?l=[o,n]:"right"===u?l=[i,a]:"bottom"===u&&(l=[a,o]);var p,f,d=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2],h=ce(l,e);return c&&(f="bottom"===u||"left"===u,d=l[(p="top"===c||"left"===c)&&!f||!p&&f?0:1]),[d,h]}(i,o.renderPoses,o.direction),s=a[0],u=a[1];return r.createElement("div",{key:"rotation",className:qr("line rotation-line"),style:{transform:"translate(-50%) translate("+s[0]+"px, "+s[1]+"px) rotate("+u+"rad)"}},r.createElement("div",{className:qr("control","rotation")}))},dragControlCondition:Ln,dragControlStart:function(t,r){var e=r.datas,n=r.clientX,i=r.clientY,o=r.parentRotate,a=r.parentFlag,s=r.isPinch,u=r.isRequest,c=t.state,l=c.target,p=c.left,f=c.top,d=c.origin,h=c.beforeOrigin,g=c.direction,v=c.beforeDirection,m=c.targetTransform;if(!u&&!l)return!1;var b,y,x=t.getRect();e.rect=x,e.transform=m,e.left=p,e.top=f,u||s||a?(b=o||0,e.beforeInfo={origin:x.beforeOrigin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0},e.afterInfo={origin:x.origin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0}):(e.beforeInfo={origin:x.beforeOrigin},e.afterInfo={origin:x.origin},y=fe(t.controlBox.getElement()),Xn(t,e.beforeInfo,n,i,h,y),Xn(t,e.afterInfo,n,i,d,y)),e.direction=g,e.beforeDirection=v,e.startRotate=0,e.datas={};var E=xe(t,r,{set:function(t){e.startRotate=t}}),S=Se(t,"onRotateStart",E);return e.isRotate=!1!==S,t.state.snapRenderInfo={request:r.isRequest},!!e.isRotate&&E},dragControl:function(t,r){var e,n,i,o,a=r.datas,s=r.clientX,u=r.clientY,c=r.parentRotate,l=r.parentFlag,p=r.isPinch,f=a.direction,d=a.beforeDirection,h=a.beforeInfo,g=a.afterInfo,v=a.isRotate,m=a.startRotate,b=a.rect;if(v){var y,x,E,S,M,D,w,C,O,R=t.props,P=R.throttleRotate,z=void 0===P?0:P,B=R.parentMoveable;if(O=!l&&"parentDist"in r?(E=(x=jn(t,b,g,y=r.parentDist,0,m))[0],S=x[1],M=x[2],w=(D=jn(t,b,h,y,0,m))[0],C=D[1],D[2]):p||l?(E=(e=qn(t,b,g,c,f,m,z))[0],S=e[1],M=e[2],w=(n=qn(t,b,h,c,f,m,z))[0],C=n[1],n[2]):(E=(i=Wn(t,b,g,f,s,u,m,z))[0],S=i[1],M=i[2],w=(o=Wn(t,b,h,d,s,u,m,z))[0],C=o[1],o[2]),E||w||B){var _=xe(t,r,{delta:E,dist:S,rotate:M,beforeDist:C,beforeDelta:w,beforeRotate:O,transform:a.transform+" rotate("+S+"deg)",isPinch:!!p});return Se(t,"onRotate",_),_}}},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isRotate&&(e.isRotate=!1,Se(t,"onRotateEnd",Ee(t,r,{})),n)},dragGroupControlCondition:Ln,dragGroupControlStart:function(t,r){var e=r.datas,u=r.inputEvent,n=t.state,c=n.left,l=n.top,p=n.beforeOrigin,i=this.dragControlStart(t,r);if(!i)return!1;i.set(e.beforeDirection*t.rotation);var o=Ve(t,this,"dragControlStart",e,tr({},r,{parentRotate:0}),function(t,r,e){var n=t.state,i=n.left,o=n.top,a=n.beforeOrigin,s=Sr(Mr([i,o],[c,l]),Mr(a,p));r.prevClient=s,e.dragStart=Yn.dragStart(t,(new Fe).dragStart(s,u))}),a=Se(t,"onRotateGroupStart",tr({},i,{targets:t.props.targets,events:o}));return e.isRotate=!1!==a,!!e.isRotate&&i},dragGroupControl:function(r,f){var d=f.inputEvent,t=f.datas;if(t.isRotate){var e=this.dragControl(r,f);if(e){var h=t.beforeDirection,n=e.beforeDist,g=e.beforeDelta/180*Math.PI,i=Ve(r,this,"dragControl",t,tr({},f,{parentRotate:n}),function(t,r,e,n){var i=r.prevClient,o=i[0],a=i[1],s=wr([o,a],g*h),u=s[0],c=s[1],l=[u-o,c-a];r.prevClient=[u,c];var p=Yn.drag(t,Le(t.state,l,d,!!f.isPinch,!1));e.drag=p});r.rotation=h*e.beforeRotate;var o=tr({targets:r.props.targets,events:i,set:function(t){r.rotation=t}},e);return Se(r,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isRotate)return this.dragControlEnd(t,r),Ve(t,this,"dragControlEnd",n,r),Se(t,"onRotateGroupEnd",Ee(t,r,{targets:t.props.targets})),e},request:function(t){var r={},e=0,n=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:r}},request:function(t){return"deltaRotate"in t?e+=t.deltaRotate:"rotate"in t&&(e=t.rotate-n),{datas:r,parentDist:e}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function Hn(t,r,n){var e=t.state,i=e.renderPoses,o=e.rotation,a=t.props.renderDirections,s=void 0===a?r:a,u=t.state.direction,c={};return s.forEach(function(t){c[t]=!0}),s.map(function(t){var r=pr[t];if(!r||!c[t])return null;var e=ve(o/Math.PI*180,15)+fr[t];return u<1&&(e=360-e),e%=180,n.createElement("div",{className:qr("control","direction",t),"data-rotation":e,"data-direction":t,key:"direction-"+t,style:se.apply(void 0,[o].concat(r.map(function(t){return i[t]})))})})}function Vn(t,r){return Hn(t,lr,r)}function Un(t,r){return Hn(t,["nw","ne","sw","se"],r)}var Kn={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,r){var e=t.props,n=e.resizable,i=e.edge;if(n)return(i?Un:Vn)(t,r)},dragControlCondition:Ue,dragControlStart:function(t,r){var e,n,i,o=r.inputEvent,a=r.isPinch,s=r.parentDirection,u=r.datas,c=r.parentFlag,l=s||(a?[0,0]:de(o.target)),p=t.state,f=p.target,d=p.width,h=p.height;if(!l||!f)return!1;a||Br(t,{datas:u}),u.datas={},u.direction=l,u.startOffsetWidth=d,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,n=f,i=window.getComputedStyle(n),e=[parseFloat(i.width),parseFloat(i.height)],u.startWidth=e[0],u.startHeight=e[1];var g,v=[Math.max(0,d-u.startWidth),Math.max(0,h-u.startHeight)];u.minSize=v,u.maxSize=[1/0,1/0],c||(g=window.getComputedStyle(f),u.minSize=Sr([parseFloat(g.minWidth)||0,parseFloat(g.minHeight)||0],v),u.maxSize=Sr([parseFloat(g.maxWidth)||1/0,parseFloat(g.maxHeight)||1/0],v));var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&"string"==typeof m?m.split(" "):m,u.startDirection=function(t){if(!t[0]&&!t[1])return[0,0];var r=[-1,-1];return[t[0]?t[0]:-1*r[0],t[1]?t[1]:-1*r[1]]}(l),u.fixedPosition=jr(t,u.startDirection),u.fixedOriginalPosition=jr(t,l);var b=xe(t,r,{direction:l,set:function(t){var r=t[0],e=t[1];u.startWidth=r,u.startHeight=e},setMin:function(t){u.minSize=t},setMax:function(t){u.maxSize=t},setOrigin:function(t){u.transformOrigin=t},dragStart:Yn.dragStart(t,(new Fe).dragStart([0,0],o))});return!1!==Se(t,"onResizeStart",b)&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:l}),!!u.isResize&&b},dragControl:function(t,r){var e,n=r.datas,i=r.distX,o=r.distY,a=r.parentFlag,s=r.isPinch,u=r.parentDistance,c=r.parentScale,l=r.inputEvent,p=r.parentKeepRatio,f=r.dragClient,d=r.parentDist,h=r.isRequest,g=n.direction,v=n.isResize,m=n.transformOrigin;if(v){var b=n.startWidth,y=n.startHeight,x=n.startOffsetWidth,E=n.startOffsetHeight,S=n.prevWidth,M=n.prevHeight,D=n.minSize,w=n.maxSize,C=t.props,O=C.throttleResize,R=void 0===O?0:O,P=C.parentMoveable,z=g;g[0]||g[1]||(z=[1,1]);var B,_,G,T,A,I,k=t.props.keepRatio||p,N=z[0]||!z[1],Y=N?E/x:x/E,X=k||a?g:n.startDirection,j=f,q=0,W=0;f||(j=!a&&s?jr(t,[0,0]):k?n.fixedOriginalPosition:n.fixedPosition),d?(q=d[0],W=d[1]):c?(q=(c[0]-1)*x,W=(c[1]-1)*E):s?u&&(W=(q=u)*E/x):(B=_r({datas:n,distX:i,distY:o}),q=z[0]*B[0],W=z[1]*B[1],k&&x&&E&&(_=vr([0,0],B),G=vr([0,0],z),T=vr([0,0],[x,E]),A=ie([q,W]),I=Math.cos(_-G)*A,z[0]?W=z[1]?(q=Math.cos(T)*I,Math.sin(T)*I):we(q=I,N,Y):q=Ce(W=I,N,Y)));var L=z[0]||k?Math.max(x+q,sr):x,F=z[1]||k?Math.max(E+W,sr):E;k&&x&&E&&(F=L*E/x);var H,V=[0,0];s||(V=function(t,e,n,i,o,r,a){if(!mn(t,"resizable"))return[0,0];var s=t.state,u=s.matrix,c=s.is3d;return Cn(t,function(t,r){return yn(u,e+t,n+r,o,i,c)},e,n,i,o,r,a)}(t,L,F,g,n.fixedOriginalPosition,h,n)),d&&(d[0]||(V[0]=0),d[1]||(V[1]=0)),k?(z[0]&&z[1]&&V[0]&&V[1]&&(Math.abs(V[0])>Math.abs(V[1])?V[1]=0:V[0]=0),(H=!V[0]&&!V[1])&&(N?L=ve(L,R):F=ve(F,R)),z[0]&&!z[1]||V[0]&&!V[1]||H&&N?F=we(L+=V[0],N,Y):(!z[0]&&z[1]||!V[0]&&V[1]||H&&!N)&&(L=Ce(F+=V[1],N,Y))):(L+=V[0],F+=V[1],V[0]||(L=ve(L,R)),V[1]||(F=ve(F,R))),L=(e=function(t,e,n,r){if(!r)return t.map(function(t,r){return Math.min(n[r],Math.max(t,e[r]))});var i=t[0],o=t[1],a=Te(t,e,!1),s=a[0],u=a[1],c=Te(t,n,!0),l=c[0],p=c[1];return i<s||o<u?(i=s,o=u):(l<i||p<o)&&(i=l,o=p),[i,o]}([L,F],D,w,k))[0],F=e[1];var U=[(q=(L=Math.round(L))-x)-S,(W=(F=Math.round(F))-E)-M];n.prevWidth=q,n.prevHeight=W;var K=Xr(t,L,F,X,j,m);if(P||!U.every(function(t){return!t})||!K.every(function(t){return!t})){var $=xe(t,r,{width:b+q,height:y+W,offsetWidth:L,offsetHeight:F,direction:g,dist:[q,W],delta:U,isPinch:!!s,drag:Yn.drag(t,Le(t.state,K,l,!!s,!1))});return Se(t,"onResize",$),$}}},dragControlAfter:function(t,r){var e=r.datas,n=e.isResize,i=e.startOffsetWidth,o=e.startOffsetHeight,a=e.prevWidth,s=e.prevHeight;if(n){var u=t.state,c=u.width-(i+a),l=u.height-(o+s),p=3<Math.abs(c),f=3<Math.abs(l);return p&&(e.startWidth+=c,e.startOffsetWidth+=c,e.prevWidth+=c),f&&(e.startHeight+=l,e.startOffsetHeight+=l,e.prevHeight+=l),p||f?(this.dragControl(t,r),!0):void 0}},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isResize&&(e.isResize=!1,Se(t,"onResizeEnd",Ee(t,r,{})),n)},dragGroupControlCondition:Ue,dragGroupControlStart:function(a,s){var t=s.datas,r=this.dragControlStart(a,s);if(!r)return!1;var u=r.direction,c=t.fixedOriginalPosition,e=Ve(a,this,"dragControlStart",t,function(t,r){var e=jr(t,u),n=Dr(Cr(-a.rotation/180*Math.PI,3),[e[0]-c[0],e[1]-c[1],1],3),i=n[0],o=n[1];return r.originalX=i,r.originalY=o,s}),n=tr({},r,{targets:a.props.targets,events:e}),i=Se(a,"onResizeGroupStart",n);return t.isResize=!1!==i,!!t.isResize&&r},dragGroupControl:function(o,a){var t=a.datas;if(t.isResize){var r=this.dragControl(o,a);if(r){var e=r.offsetWidth,n=r.offsetHeight,i=r.dist,s=o.props.keepRatio,u=[e/(e-i[0]),n/(n-i[1])],c=t.fixedOriginalPosition,l=Ve(o,this,"dragControl",t,function(t,r){var e=Dr(Cr(o.rotation/180*Math.PI,3),[r.originalX*u[0],r.originalY*u[1],1],3),n=e[0],i=e[1];return tr({},a,{parentDist:null,parentScale:u,dragClient:Sr(c,[n,i]),parentKeepRatio:s})}),p=tr({targets:o.props.targets,events:l},r);return Se(o,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isResize)return this.dragControlEnd(t,r),Ve(t,this,"dragControlEnd",n,r),Se(t,"onResizeGroupEnd",Ee(t,r,{targets:t.props.targets})),e},request:function(t){var r={},e=0,n=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:r,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?e=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(e+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:r,parentDist:[e,n]}},requestEnd:function(){return{datas:r,isDrag:!0}}}}},$n={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,r){var e=t.props,n=e.resizable,i=e.scalable,o=e.edge;if(!n&&i)return(o?Un:Vn)(t,r)},dragControlCondition:Ue,dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,i=r.inputEvent,o=r.parentDirection||(n?[0,0]:de(i.target)),a=t.state,s=a.width,u=a.height,c=a.targetTransform,l=a.target;if(!o||!l)return!1;n||Br(t,{datas:e}),e.datas={},e.transform=c,e.prevDist=[1,1],e.direction=o,e.width=s,e.height=u,e.startScale=[1,1],e.fixedDirection=o.map(function(t){return-t}),e.fixedPosition=jr(t,o);var p=xe(t,r,{direction:o,set:function(t){e.startScale=t},dragStart:Yn.dragStart(t,(new Fe).dragStart([0,0],i))});return!1!==Se(t,"onScaleStart",p)&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),!!e.isScale&&p},dragControl:function(t,r){var e=r.datas,n=r.distX,i=r.distY,o=r.parentScale,a=r.parentDistance,s=r.parentKeepRatio,u=r.parentFlag,c=r.isPinch,l=r.inputEvent,p=r.dragClient,f=r.parentDist,d=r.isRequest,h=e.prevDist,g=e.direction,v=e.width,m=e.height,b=e.transform,y=e.isScale,x=e.startScale;if(!y)return!1;var E=t.props,S=E.throttleScale,M=E.parentMoveable,D=g;g[0]||g[1]||(D=[1,1]);var w,C,O,R,P,z,B,_,G=t.props.keepRatio||s,T=t.state,A=D[0]||!D[1],I=v*x[0],k=m*x[1],N=A?k/I:I/k,Y=1,X=1,j=p;p||(j=!u&&c?jr(t,[0,0]):e.fixedPosition),f?(Y=(v+f[0])/v,X=(m+f[1])/m):o?(Y=o[0],X=o[1]):c?a&&(Y=(v+a)/v,X=(m+a*m/v)/m):(w=_r({datas:e,distX:n,distY:i}),C=D[0]*w[0],O=D[1]*w[1],G&&v&&m&&(R=vr([0,0],w),P=vr([0,0],D),z=vr([0,0],[I,k]),B=ie([C,O]),_=Math.cos(R-P)*B,D[0]?O=D[1]?(C=Math.cos(z)*_,Math.sin(z)*_):we(C=_,A,N):C=Ce(O=_,A,N)),Y=(v+C)/v,X=(m+O)/m),Y=D[0]||G?Y*x[0]:x[0],X=D[1]||G?X*x[1]:x[1],0===Y&&(Y=1e-9*(0<h[0]?1:-1)),0===X&&(X=1e-9*(0<h[1]?1:-1));var q,W=[Y/x[0],X/x[1]],L=[Y,X];c||!t.props.groupable||bt(q=(T.snapRenderInfo||{}).direction)&&(q[0]||q[1])&&(T.snapRenderInfo={direction:g,request:r.isRequest});var F,H,V,U=[0,0];c||(U=function(t,e,n,i,r,o){var a=o.width,s=o.height;if(!mn(t,"scalable"))return[0,0];var u=o.is3d,c=Cn(t,function(t,r){return yn(Yr(o,Sr(e,[t/a,r/s])),a,s,i,n,u)},a,s,n,i,r,o);return[c[0]/a,c[1]/s]}(t,W,g,e.fixedPosition,d,e)),G?(D[0]&&D[1]&&U[0]&&U[1]&&(Math.abs(U[0])>Math.abs(U[1])?U[1]=0:U[0]=0),(F=!U[0]&&!U[1])&&(A?W[0]=ve(W[0]*x[0],S)/x[0]:W[1]=ve(W[1]*x[1],S)/x[1]),D[0]&&!D[1]||U[0]&&!U[1]||F&&A?(W[0]+=U[0],H=we(v*W[0]*x[0],A,N),W[1]=H/m/x[1]):(!D[0]&&D[1]||!U[0]&&U[1]||F&&!A)&&(W[1]+=U[1],V=Ce(m*W[1]*x[1],A,N),W[0]=V/v/x[0])):(W[0]+=U[0],W[1]+=U[1],U[0]||(W[0]=ve(W[0]*x[0],S)/x[0]),U[1]||(W[1]=ve(W[1]*x[1],S)/x[1])),0===W[0]&&(W[0]=1e-9*(0<h[0]?1:-1)),0===W[1]&&(W[1]=1e-9*(0<h[1]?1:-1));var K,$,Z=[W[0]/h[0],W[1]/h[1]];$=x,L=[(K=W)[0]*$[0],K[1]*$[1]],e.prevDist=W;var J,Q,tt,rt,et,nt,it,ot,at,st,ut,ct,lt,pt,ft=(Q=Z,tt=g,rt=j,et=(J=t).state,nt=et.is3d,it=et.left,ot=et.top,at=et.width,st=et.height,ut=nt?4:3,ct=J.props.groupable,lt=ct?it:0,pt=ct?ot:0,Mr(kr(rt,Yr(J.state,Q),at,st,ut,tt),[lt,pt]));if(Y===h[0]&&X===h[1]&&ft.every(function(t){return!t})&&!M)return!1;var dt=xe(t,r,{offsetWidth:v,offsetHeight:m,scale:L,direction:g,dist:W,delta:Z,transform:b+" scale("+Y+", "+X+")",isPinch:!!c,drag:Yn.drag(t,Le(t.state,ft,l,c,!1))});return Se(t,"onScale",dt),dt},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isScale&&(e.isScale=!1,Se(t,"onScaleEnd",Ee(t,r,{})),n)},dragGroupControlCondition:Ue,dragGroupControlStart:function(a,s){var t=s.datas,r=this.dragControlStart(a,s);if(!r)return!1;var u=r.direction,c=t.fixedPosition;t.moveableScale=a.scale;var e=Ve(a,this,"dragControlStart",t,function(t,r){var e=jr(t,u),n=Dr(Cr(-a.rotation/180*Math.PI,3),[e[0]-c[0],e[1]-c[1],1],3),i=n[0],o=n[1];return r.originalX=i,r.originalY=o,s}),n=tr({},r,{targets:a.props.targets,events:e}),i=Se(a,"onScaleGroupStart",n);return t.isScale=!1!==i,!!t.isScale&&n},dragGroupControl:function(o,a){var t=a.datas;if(t.isScale){var r=this.dragControl(o,a);if(r){var e=t.moveableScale;o.scale=[r.scale[0]*e[0],r.scale[1]*e[1]];var s=o.props.keepRatio,u=r.dist,c=r.scale,l=t.fixedPosition,n=Ve(o,this,"dragControl",t,function(t,r){var e=Dr(Cr(o.rotation/180*Math.PI,3),[r.originalX*u[0],r.originalY*u[1],1],3),n=e[0],i=e[1];return tr({},a,{parentDist:null,parentScale:c,parentKeepRatio:s,dragClient:Sr(l,[n,i])})}),i=tr({targets:o.props.targets,events:n},r);return Se(o,"onScaleGroup",i),i}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isScale)return this.dragControlEnd(t,r),Ve(t,this,"dragControlEnd",n,r),Se(t,"onScaleGroupEnd",Ee(t,r,{targets:t.props.targets})),e},request:function(){var r={},e=0,n=0;return{isControl:!0,requestStart:function(t){return{datas:r,parentDirection:t.direction||[1,1]}},request:function(t){return e+=t.deltaWidth,n+=t.deltaHeight,{datas:r,parentDist:[e,n]}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function Zn(t,a){return t.map(function(t,r){return e=t,n=a[r],(e*(o=2)+n*(i=1))/(i+o);var e,n,i,o})}function Jn(t,r,e){var n=vr(t,r),i=vr(t,e)-n;return 0<=i?i:i+2*Math.PI}var Qn={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,r){var e=t.props,n=e.resizable,i=e.scalable,o=e.warpable;if(n||i||!o)return[];var a=t.state,s=a.pos1,u=a.pos2,c=a.pos3,l=a.pos4,p=Zn(s,u),f=Zn(u,s),d=Zn(s,c),h=Zn(c,s),g=Zn(c,l),v=Zn(l,c),m=Zn(u,l),b=Zn(l,u);return[r.createElement("div",{className:qr("line"),key:"middeLine1",style:ae(p,g)}),r.createElement("div",{className:qr("line"),key:"middeLine2",style:ae(f,v)}),r.createElement("div",{className:qr("line"),key:"middeLine3",style:ae(d,m)}),r.createElement("div",{className:qr("line"),key:"middeLine4",style:ae(h,b)})].concat(Vn(t,r))},dragControlCondition:function(t){return!t.isRequest&&Ct(t.inputEvent.target,qr("direction"))},dragControlStart:function(t,r){var n=r.datas,e=r.inputEvent,i=t.props.target,o=de(e.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,c=a.targetTransform,l=a.targetMatrix,p=a.width,f=a.height,d=a.left,h=a.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=u?l:br(l,3,4),n.targetInverseMatrix=hr(gr(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=d,n.top=h,Br(t,{datas:n}),n.poses=[[0,0],[p,0],[0,f],[p,f]].map(function(t){return Mr(t,s)}),n.nextPoses=n.poses.map(function(t){var r=t[0],e=t[1];return Dr(n.warpTargetMatrix,[r,e,0,1],4)}),n.startMatrix=Or(4),n.prevMatrix=Or(4),n.absolutePoses=ge(a),n.posIndexes=Gr(o),!(a.snapRenderInfo={request:r.isRequest,direction:o})!==Se(t,"onWarpStart",xe(t,r,{set:function(t){n.startMatrix=t}}))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,r){var e,n,i,o,a=r.datas,s=r.isRequest,u=r.distX,c=r.distY,l=a.targetInverseMatrix,p=a.prevMatrix,f=a.isWarp,d=a.startMatrix,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!f)return!1;mn(t,"warpable")&&(1<(e=g.map(function(t){return v[t]})).length&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]),i=(n=Mn(t,s,e.map(function(t){return[t[0]+u,t[1]+c]}))).horizontal,o=n.vertical,c-=i.offset,u-=o.offset);var m=_r({datas:a,distX:u,distY:c},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=Sr(b[t],m)}),!ar.every(function(t){return r=t.map(function(t){return h[t]}),e=t.map(function(t){return b[t]}),n=Jn(r[0],r[1],r[2]),i=Jn(e[0],e[1],e[2]),!((o=Math.PI)<=n&&i<=o||n<=o&&o<=i);var r,e,n,i,o}))return!1;var y=zr(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!y.length)return!1;var x=xr(l,y,4),E=a.targetTransform+" "+Zr(x,!0);return Se(t,"onWarp",xe(t,r,{delta:xr(gr(p,4),x,4),matrix:xr(d,a.prevMatrix=x,4),multiply:xr,dist:x,transform:E})),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return!!e.isWarp&&(e.isWarp=!1,Se(t,"onWarpEnd",Ee(t,r,{})),n)}},ti=qr("area"),ri=qr("area-pieces"),ei=qr("area-piece"),ni=qr("avoid");function ii(t){var r,e,n,i=t.areaElement,o=t.state,a=o.width,s=o.height;e=ni,(r=i).classList?r.classList.remove(e):(n=new RegExp("(\\s|^)"+e+"(\\s|$)"),r.className=r.className.replace(n," ")),i.style.cssText+="left: 0px; top: 0px; width: "+a+"px; height: "+s+"px"}function oi(t){return t.createElement("div",{key:"area_pieces",className:ri},t.createElement("div",{className:ei}),t.createElement("div",{className:ei}),t.createElement("div",{className:ei}),t.createElement("div",{className:ei}))}var ai={name:"dragArea",props:{dragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,r){var e=t.props,n=e.target,i=e.dragArea,o=e.groupable,a=t.state,s=a.width,u=a.height,c=a.renderPoses;if(o)return[r.createElement("div",{key:"area",ref:x(t,"areaElement"),className:ti}),oi(r)];if(!n||!i)return[];var l=zr([0,0],[s,0],[0,u],[s,u],c[0],c[1],c[2],c[3]),p=l.length?Zr(l,!0):"none";return[r.createElement("div",{key:"area",ref:x(t,"areaElement"),className:ti,style:{top:"0px",left:"0px",width:s+"px",height:u+"px",transformOrigin:"0 0",transform:p}}),oi(r)]},dragStart:function(t,r){var e=r.datas,n=r.clientX,i=r.clientY,o=r.inputEvent;if(!o)return!1;e.isDragArea=!1,e.inputTarget=o.target;var a,s,u=t.areaElement,c=t.state,l=c.moveableClientRect,p=c.renderPoses,f=c.rootMatrix,d=c.is3d,h=l.left,g=l.top,v=re(p),m=v.left,b=v.top,y=v.width,x=v.height,E=Be(f,[n-h,i-g],d?4:3),S=E[0],M=E[1],D=[{left:m,top:b,width:y,height:(M-=b)-10},{left:m,top:b,width:(S-=m)-10,height:x},{left:m,top:b+M+10,width:y,height:x-M-10},{left:m+S+10,top:b,width:y-S-10,height:x}],w=[].slice.call(u.nextElementSibling.children);return D.forEach(function(t,r){w[r].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),s=ni,(a=u).classList?a.classList.add(s):a.className+=" "+s,!0},drag:function(t,r){var e=r.datas;if(!r.inputEvent)return!1;e.isDragArea||(e.isDragArea=!0,ii(t))},dragEnd:function(t,r){if(!r.inputEvent)return!1;var e=r.inputEvent,n=r.datas.isDragArea;n||ii(t);var i,o=t.state.target,a=e.target;n||t.isMoveableElement(a)||(i=o.contains(a),Se(t,"onClick",xe(t,r,{isDouble:r.isDouble,inputTarget:a,isTarget:o===a,containsTarget:i})))},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){var e=r.inputEvent,n=r.isDragArea,i=r.datas;if(!e)return!1;n||ii(t);var o,a,s,u,c=i.inputTarget,l=e.target;n||t.isMoveableElement(l)||c===l||(s=-1<(a=(o=t.props.targets).indexOf(l)),u=!1,-1===a&&(u=-1<(a=wt(o,function(t){return t.contains(l)}))),Se(t,"onClickGroup",xe(t,r,{isDouble:r.isDouble,targets:o,inputTarget:l,targetIndex:a,isTarget:s,containsTarget:u})))}},si={name:"origin",props:{origin:Boolean},events:{},render:function(t,r){var e=t.state,n=e.beforeOrigin,i=e.rotation;return[r.createElement("div",{className:qr("control","origin"),style:se(i,n),key:"beforeOrigin"})]}};function ui(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var ci={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(o,a){var t=o.props.scrollContainer,r=void 0===t?o.getContainer():t,e=new Vt;a.datas.dragScroll=e;var n=a.isControl?"controlDragger":"targetDragger",s=a.targets;e.on("scroll",function(t){var r=t.container,e=t.direction,n=xe(o,a,{scrollContainer:r,direction:e}),i=s?"onScrollGroup":"onScroll";s&&(n.targets=s),Se(o,i,n)}).on("move",function(t){var r=t.offsetX,e=t.offsetY;o[n].scrollBy(r,e,a.inputEvent,!1)}),e.dragStart(a,{container:r})},checkScroll:function(t,r){var e=r.datas.dragScroll;if(e){var n=t.props,i=n.scrollContainer,o=void 0===i?t.getContainer():i,a=n.scrollThreshold,s=void 0===a?0:a,u=n.getScrollPosition,c=void 0===u?ui:u;return e.drag(r,{container:o,threshold:s,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,tr({},r,{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,tr({},r,{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,tr({},r,{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,tr({},r,{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,tr({},r,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,r){return this.drag(t,tr({},r,{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,tr({},r,{targets:t.props.targets}))}},li={name:"",props:{target:Object,dragTarget:Object,container:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"}},pi={name:"padding",props:{padding:Object},events:{},render:function(t,o){var r=t.props;if(r.dragArea)return[];var e=r.padding||{},n=e.left,i=void 0===n?0:n,a=e.top,s=void 0===a?0:a,u=e.right,c=void 0===u?0:u,l=e.bottom,p=void 0===l?0:l,f=t.state,d=f.renderPoses,h=[f.pos1,f.pos2,f.pos3,f.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<c&&g.push([1,3]),0<p&&g.push([2,3]),g.map(function(t,r){var e=t[0],n=t[1],i=zr([0,0],[100,0],[0,100],[100,100],h[e],h[n],d[e],d[n]);if(i.length)return o.createElement("div",{key:"padding"+r,className:qr("padding"),style:{transform:Zr(i,!0)}})})}},fi=["nw","ne","se","sw"];function di(t,r){var e=t[0]+t[1],n=r<e?r/e:1;return t[0]*=n,t[1]=r-t[1]*n,t}var hi=[1,2,5,6],gi=[0,3,4,7],vi=[1,-1,-1,1],mi=[1,1,-1,-1];function bi(t,a,s,u,c,l,p,f,d){void 0===l&&(l=0),void 0===p&&(p=0),void 0===f&&(f=u),void 0===d&&(d=c);var h=[],g=!1,r=t.map(function(t,r){var e=a[r],n=e.horizontal,i=e.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-p:d-t[1]);return h.push(Ie(o,c,s)),o}o=Math.max(0,1===n?t[0]-l:f-t[0]);return h.push(Ie(o,u,s)),o});return{styles:h,raws:r}}function yi(t){for(var r=[0,0],e=[0,0],n=t.length,i=0;i<n;++i){var o=t[i];o.sub&&(o.horizontal&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1,e[0]=i+1),o.vertical&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:r,verticalRange:e}}function xi(t,n,i,o,a){var r,e,s,u=t.indexOf("/"),c=(-1<u?t.slice(0,u):t).length,l=t.slice(0,c),p=t.slice(c+1),f=l[0],d=void 0===f?"0":f,h=l[1],g=void 0===h?d:h,v=l[2],m=void 0===v?d:v,b=l[3],y=void 0===b?g:b,x=p[0],E=void 0===x?d:x,S=p[1],M=void 0===S?E:S,D=p[2],w=void 0===D?E:D,C=p[3],O=void 0===C?M:C,R=[d,g,m,y].map(function(t){return Ae(t,n)}),P=[E,M,w,O].map(function(t){return Ae(t,i)}),z=R.slice(),B=P.slice(),_=di([z[0],z[1]],n);z[0]=_[0],z[1]=_[1],r=di([z[3],z[2]],n),z[3]=r[0],z[2]=r[1],e=di([B[0],B[3]],i),B[0]=e[0],B[3]=e[1],s=di([B[1],B[2]],i),B[1]=s[0],B[2]=s[1];var G=z.slice(0,l.length),T=B.slice(0,p.length);return G.map(function(t,r){var e=fi[r];return{horizontal:vi[r],vertical:0,pos:[o+t,a+(-1===mi[r]?i:0)],sub:!0,raw:R[r],direction:e}}).concat(T.map(function(t,r){var e=fi[r];return{horizontal:0,vertical:mi[r],pos:[o+(-1===vi[r]?n:0),a+t],sub:!0,raw:P[r],direction:e}}))}function Ei(t,r,e,n,i){void 0===i&&(i=r.length);var o=yi(t.slice(n)),a=o.horizontalRange,s=o.verticalRange,u=e-n,c=0;if(0==u)c=i;else if(0<u&&u<a[1])c=a[1]-u;else{if(!(u>=s[0]))return;c=s[0]+s[1]-u}t.splice(e,c),r.splice(e,c)}function Si(t,r,e,n,i,o,a,s,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var p=yi(t.slice(e)),f=p.horizontalRange,d=p.verticalRange;if(-1<n)for(var h=1===vi[n]?o-c:s-o,g=f[1];g<=n;++g){var v=1===mi[g]?l:u,m=0;if(n===g?m=o:0===g?m=c+h:-1===vi[g]&&(m=s-(r[e][0]-c)),t.splice(e+g,0,{horizontal:vi[g],vertical:0,pos:[m,v]}),r.splice(e+g,0,[m,v]),0===g)break}else if(-1<i){var b,y=1===mi[i]?a-l:u-a;0===f[1]&&0===d[1]&&(b=[c+y,l],t.push({horizontal:vi[0],vertical:0,pos:b}),r.push(b));for(var x=d[0],g=d[1];g<=i;++g){m=1===vi[g]?c:s,v=0;if(i===g?v=a:0===g?v=l+y:1===mi[g]?v=r[e+x][1]:-1===mi[g]&&(v=u-(r[e+x][1]-l)),t.push({horizontal:0,vertical:mi[g],pos:[m,v]}),r.push([m,v]),0===g)break}}}function Mi(t,e){return void 0===e&&(e=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,r){return t.horizontal?e[r]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,r){return t.vertical?e[r]:null}).filter(function(t){return null!=t})}}var Di=[[0,-1,"n"],[1,0,"e"]],wi=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ci(t,r,e){var n=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=r.type,u=r.poses,c="rect"===s,l="circle"===s;if("polygon"===s)return e.map(function(t){return Ie(t[0],o,n)+" "+Ie(t[1],a,n)});if(c||"inset"===s){var p=e[1][1],f=e[3][0],d=e[7][0],h=e[5][1];if(c)return[p,f,h,d].map(function(t){return t+"px"});var g,v,m,b=[p,o-f,a-h,d].map(function(t,r){return Ie(t,r%2?o:a,n)});return 8<e.length&&(v=(g=Mr(e[4],e[0]))[0],m=g[1],b.push.apply(b,["round"].concat(bi(e.slice(8),u.slice(8),n,v,m,d,p,f,h).styles))),b}if(l||"ellipse"===s){var y=e[0],x=Ie(Math.abs(e[1][1]-y[1]),l?Math.sqrt((o*o+a*a)/2):a,n);return(b=l?[x]:[Ie(Math.abs(e[2][0]-y[0]),o,n),x]).push("at",Ie(y[0],o,n),Ie(y[1],a,n)),b}}function Oi(t,r,e,n){var a=[n,(n+r)/2,r],s=[t,(t+e)/2,e];return wi.map(function(t){var r=t[0],e=t[1],n=t[2],i=a[r+1],o=s[e+1];return{vertical:Math.abs(e),horizontal:Math.abs(r),direction:n,pos:[i,o]}})}function Ri(t,i,o,r,e){var n,a,s,u=e;if(u||(u="none"!==(s=(a=getComputedStyle(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=r)){var c=Mt(u),l=c.prefix,p=void 0===l?u:l,f=c.value,d=void 0===f?"":f,h="circle"===p,g=" ";if("polygon"===p){g=",";return{type:p,clipText:u,poses:B=(P=St(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var r=t.split(" "),e=r[0],n=r[1];return{vertical:1,horizontal:1,pos:[Ae(e,i),Ae(n,o)]}}),splitter:g}}if(h||"ellipse"===p){var v,m,b,y,x,E,S,M,D,w="",C="",O=0,R=0,P=Et(d);R=h?(m=void 0===(v=P[0])?"50%":v,w=void 0===(b=P[2])?"50%":b,C=void 0===(y=P[3])?"50%":y,O=Ae(m,Math.sqrt((i*i+o*o)/2))):(0,E=void 0===(x=P[0])?"50%":x,M=void 0===(S=P[1])?"50%":S,w=void 0===(D=P[3])?"50%":D,C=void 0===(n=P[4])?"50%":n,O=Ae(E,i),Ae(M,o));var z=[Ae(w,i),Ae(C,o)],B=[{vertical:1,horizontal:1,pos:z,direction:"nesw"}].concat(Di.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[z[0]+t[0]*O,z[1]+t[1]*R]}}));return{type:p,clipText:u,radiusX:O,radiusY:R,left:z[0]-O,top:z[1]-R,poses:B,splitter:g}}if("inset"===p){var _=(P=Et(d||"0 0 0 0")).indexOf("round"),G=(-1<_?P.slice(0,_):P).length,T=P.slice(G+1),A=P.slice(0,G),I=A[0],k=A[1],N=void 0===k?I:k,Y=A[2],X=void 0===Y?I:Y,j=A[3],q=void 0===j?N:j,W=[I,X].map(function(t){return Ae(t,o)}),L=W[0],F=W[1],H=[q,N].map(function(t){return Ae(t,i)}),V=H[0],U=H[1],K=i-U,$=o-F,Z=xi(T,K-V,$-L,V,L);return{type:"inset",clipText:u,poses:B=Oi(L,K,$,V).concat(Z),top:L,left:V,right:K,bottom:$,radius:T,splitter:g}}if("rect"===p){g=",";var J=(P=St(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t,r){return Dt(t).value});return{type:"rect",clipText:u,poses:B=Oi(L=J[0],U=J[1],F=J[2],V=J[3]),top:L,right:U,bottom:F,left:V,values:P,splitter:g}}}}var Pi={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}"],render:function(t,o){var r=t.props,e=r.customClipPath,n=r.defaultClipPath,i=r.clipArea,a=r.zoom,s=t.state,u=s.target,c=s.width,l=s.height,p=s.matrix,f=s.is3d,d=s.left,h=s.top,g=s.pos1,v=s.pos2,m=s.pos3,b=s.pos4,y=s.clipPathState;if(!u)return[];var x=Ri(u,c,l,n||"inset",y||e);if(!x)return[];var E,S,M,D,w,C,O=f?4:3,R=x.type,P=x.poses.map(function(t){var r=Qr(p,t.pos,O);return[r[0]-d,r[1]-h]}),z=[],B=[],_="rect"===R,G="inset"===R,T="polygon"===R;if((_||G||T)&&(B=(E=G?P.slice(0,8):P).map(function(t,r){var e=0===r?E[E.length-1]:E[r-1],n=vr(e,t),i=oe(e,t);return o.createElement("div",{key:"clipLine"+r,className:qr("line","clip-line"),"data-clip-index":r,style:{width:i+"px",transform:"translate("+e[0]+"px, "+e[1]+"px) rotate("+n+"rad)"}})})),z=P.map(function(t,r){return o.createElement("div",{key:"clipControl"+r,className:qr("control","clip-control"),"data-clip-index":r,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})}),G&&z.push.apply(z,P.slice(8).map(function(t,r){return o.createElement("div",{key:"clipRadiusControl"+r,className:qr("control","clip-control","clip-radius"),"data-clip-index":8+r,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})})),"circle"===R||"ellipse"===R){var A=x.left,I=x.top,k=x.radiusX,N=x.radiusY,Y=Mr(Qr(p,[A,I],O),Qr(p,[0,0],O)),X=Y[0],j=Y[1],q="none";if(!i){for(var W=Math.max(10,k/5,N/5),L=[],F=0;F<=W;++F){var H=2*Math.PI/W*F;L.push([k+(k-a)*Math.cos(H),N+(N-a)*Math.sin(H)])}L.push([k,-2]),L.push([-2,-2]),L.push([-2,2*N+2]),L.push([2*k+2,2*N+2]),L.push([2*k+2,-2]),L.push([k,-2]),q="polygon("+L.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}z.push(o.createElement("div",{key:"clipEllipse",className:qr("clip-ellipse"),style:{width:2*k+"px",height:2*N+"px",clipPath:q,transform:"translate("+(-d+X)+"px, "+(-h+j)+"px) "+Zr(p)}}))}return i&&(M=(S=re([g,v,m,b].concat(P))).width,D=S.height,w=S.left,C=S.top,(T||_||G)&&(L=G?P.slice(0,8):P,z.push(o.createElement("div",{key:"clipArea",className:qr("clip-area"),style:{width:M+"px",height:D+"px",transform:"translate("+w+"px, "+C+"px)",clipPath:"polygon("+L.map(function(t){return t[0]-w+"px "+(t[1]-C)+"px"}).join(", ")+")"}})))),z.concat(B)},dragControlCondition:function(t){return t.inputEvent&&-1<(t.inputEvent.target.className||"").indexOf("clip")},dragStart:function(t,r){var e=t.props.dragWithClip;return void 0!==e&&!e&&this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,r)},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var e=t.state,n=t.props,i=n.defaultClipPath,o=n.customClipPath,a=e.target,s=e.width,u=e.height,c=r.inputEvent?r.inputEvent.target:null,l=c?c.className:"",p=r.datas,f=Ri(a,s,u,i||"inset",o);if(!f)return!1;var d=f.clipText;return!1===Se(t,"onClipStart",xe(t,r,{clipType:f.type,clipStyle:d,poses:f.poses.map(function(t){return t.pos})}))?p.isClipStart=!1:(p.isControl=-1<l.indexOf("clip-control"),p.isLine=-1<l.indexOf("clip-line"),p.isArea=-1<l.indexOf("clip-area")||-1<l.indexOf("clip-ellipse"),p.index=c?parseInt(c.getAttribute("data-clip-index"),10):-1,p.clipPath=f,p.isClipStart=!0,e.clipPathState=d,Br(t,r),!0)},dragControl:function(t,r){var e=r.datas,n=r.originalDatas;if(!e.isClipStart)return!1;var i=n&&n.draggable||{},o=e.isControl,a=e.isLine,s=e.isArea,u=e.index,c=e.clipPath;if(!c)return!1;var l=i.isDrag?i.prevDist:_r(r),p=l[0],f=l[1],d=t.state,h=!s&&!o&&!a,g=c.type,v=c.poses,m=c.splitter,b=v.map(function(t){return t.pos}),y=b.map(function(t){return t.slice()});h&&(p=-p,f=-f);var x=!o||"nesw"===v[u].direction;o&&!x&&ke(v,y,u,p,f),x&&b.forEach(function(t,r){y[r]=Sr(t,[p,f])});var E=Ci(t,c,y),S=g+"("+E.join(m)+")";return d.clipPathState=S,Se(t,"onClip",xe(t,r,{clipEventType:"changed",clipType:g,poses:y,clipStyle:S,clipStyles:E,distX:p,distY:f})),!0},dragControlEnd:function(t,r){t.state.clipPathState="";var e=r.isDrag,n=r.datas,i=r.isDouble,o=n.isLine,a=n.isClipStart,s=n.isControl;return!!a&&(Se(t,"onClipEnd",Ee(t,r,{})),i&&(s?function(t,r){var e=r.datas,n=e.clipPath,i=e.index,o=n.type,a=n.poses,s=n.splitter,u=a.map(function(t){return t.pos}),c=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(Ei(a,u,i,8,c),c===a.length)return}var l=Ci(t,n,u);Se(t,"onClip",xe(t,r,{clipEventType:"removed",clipType:o,poses:u,clipStyles:l,clipStyle:o+"("+l.join(s)+")",distX:0,distY:0}))}(t,r):o&&function(t,r){var e=Ne(t,r),n=e[0],i=e[1],o=r.datas,a=o.clipPath,s=o.index,u=a.type,c=a.poses,l=a.splitter,p=c.map(function(t){return t.pos});if("polygon"===u)p.splice(s,0,[n,i]);else{if("inset"!==u)return;var f=hi.indexOf(s),d=gi.indexOf(s),h=c.length;if(Si(c,p,8,f,d,n,i,p[4][0],p[4][1],p[0][0],p[0][1]),h===c.length)return}var g=Ci(t,a,p);Se(t,"onClip",xe(t,r,{clipEventType:"added",clipType:u,poses:p,clipStyles:g,clipStyle:u+"("+g.join(l)+")",distX:0,distY:0}))}(t,r)),i||e)},unset:function(t){t.state.clipPathState=""}},zi={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:Ct(t.inputEvent.target,qr("origin"))},dragControlStart:function(t,r){var e=r.inputEvent,n=r.datas;Br(t,r);var i=xe(t,r,{dragStart:Yn.dragStart(t,(new Fe).dragStart([0,0],e))}),o=Se(t,"onDragOriginStart",i);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],!(n.isDragOrigin=!0)===o?n.isDragOrigin=!1:i},dragControl:function(t,r){var e=r.datas,n=r.inputEvent,i=r.isPinch,o=r.isRequest;if(!e.isDragOrigin)return!1;var a,s=_r(r),u=s[0],c=s[1],l=t.state,p=l.width,f=l.height,d=l.offsetMatrix,h=l.targetMatrix,g=l.is3d,v=t.props.originRelative,m=void 0===v||v,b=g?4:3,y=[u,c];!o||((a=r.distOrigin)[0]||a[1])&&(y=a);var x=Sr(e.startOrigin,y),E=Sr(e.startTargetOrigin,y),S=Mr(y,e.prevOrigin),M=Nr(d,h,x,b),D=t.getRect(),w=re(te(M,p,f,b)),C=[D.left-w.left,D.top-w.top],O=xe(t,r,{width:p,height:f,origin:x,dist:e.prevOrigin=y,delta:S,transformOrigin:[Ie(E[0],p,m),Ie(E[1],f,m)].join(" "),drag:Yn.drag(t,Le(t.state,C,n,!!i,!1))});return Se(t,"onDragOrigin",O),O},dragControlEnd:function(t,r){return!!r.datas.isDragOrigin&&(Se(t,"onDragOriginEnd",Ee(t,r,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,r){return!!this.dragControlStart(t,r)},dragGroupControl:function(t,r){var e=this.dragControl(t,r);return!!e&&(t.transformOrigin=e.transformOrigin,!0)},request:function(t){var r={},e=t.getRect(),n=0,i=0,o=e.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?n=t.x-e.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY)),{datas:r,distX:n,distY:i,distOrigin:a}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function Bi(t,r,e,n){var i;if(n)i=n;else{var o=window.getComputedStyle(t);if(!o)return null;i=o.borderRadius||""}return!i||!n&&"0px"===i?null:xi(Et(i),r,e,0,0)}function _i(t,r,e,n,i,o){var a=t.state,s=a.width,u=a.height,c=bi(o,i,t.props.roundRelative,s,u),l=c.raws,p=c.styles,f=Mi(i,l),d=f.horizontals,h=f.verticals,g=p.join(" ");Se(t,"onRound",xe(t,r,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:n,dist:e}))}var Gi={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,n){var r=t.state,e=r.target,i=r.width,o=r.height,a=r.matrix,s=r.is3d,u=r.left,c=r.top,l=r.borderRadiusState;if(!e)return null;var p=s?4:3,f=Bi(e,i,o,l);return f?f.map(function(t,r){var e=Mr(Qr(a,t.pos,p),[u,c]);return n.createElement("div",{key:"borderRadiusControl"+r,className:qr("control","border-radius"),"data-radius-index":r,style:{transform:"translate("+e[0]+"px, "+e[1]+"px)"}})}):null},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var r=t.inputEvent.target.className||"";return-1<r.indexOf("border-radius")||-1<r.indexOf("moveable-line")&&-1<r.indexOf("moveable-direction")},dragControlStart:function(t,r){var e=r.inputEvent,n=r.datas,i=e.target,o=i.className||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,c=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===Se(t,"onRoundStart",xe(t,r,{})))return!1;n.lineIndex=c,n.controlIndex=u,n.isControl=a,n.isLine=s,Br(t,r);var l=t.props.roundRelative,p=t.state,f=p.target,d=p.width,h=p.height;n.isRound=!0,n.prevDist=[0,0];var g=Bi(f,d,h)||[];return n.controlPoses=g,p.borderRadiusState=bi(g.map(function(t){return t.pos}),g,l,d,h).styles.join(" "),!0},dragControl:function(t,r){var e=r.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var n=e.controlIndex,i=e.controlPoses,o=i.map(function(t){return t.pos.slice()}),a=_r(r),s=a[0],u=a[1],c=[s,u],l=Mr(c,e.prevDist);return ke(i,o,n,s,u),e.prevDist=[s,u],_i(t,r,c,l,i,o),!0},dragControlEnd:function(t,r){var e=t.state;e.borderRadiusState="";var n=r.datas,i=r.isDouble;if(!n.isRound)return!1;var o,a,s,u,c,l,p,f,d,h,g,v,m,b,y,x,E,S=e.width,M=e.height,D=n.isControl,w=n.controlIndex,C=n.isLine,O=n.lineIndex,R=n.controlPoses,P=R.map(function(t){return t.pos}),z=P.length;return i&&(D?Ei(R,P,w,0):C&&(a=(o=Ne(t,r))[0],s=o[1],c=P,l=O,p=a,f=s,d=S,h=M,g=Mi(u=R),v=g.horizontals,m=g.verticals,b=v.length,y=m.length,E=x=-1,0===l?0===b?x=0:1===b&&(x=1):3===l&&(b<=2?x=2:b<=3&&(x=3)),2===l?0===y?E=0:y<4&&(E=3):1===l&&(y<=1?E=1:y<=2&&(E=2)),Si(u,c,0,x,E,p,f,d,h)),z!==R.length&&_i(t,r,[0,0],[0,0],R,P),Se(t,"onRoundEnd",Ee(t,r,{}))),!(e.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}},Ti={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(o,a){var t=o.props.targets||[];o.moveables=[];var r=o.state,s={left:r.left,top:r.top};return t.map(function(t,r){return a.createElement($i,{key:"moveable"+r,ref:(i=r,function(t){t&&(e[n][i]=t)}),target:t,origin:!(n="moveables"),parentMoveable:e=o,parentPosition:s});var e,n,i})}},Ai=[li,Nn,We,Yn,Fn,Kn,$n,Qn,ci,ai,pi,si,zi,Pi,Gi,Ti],Ii=Ai.reduce(function(t,r){return tr({},t,r.events)},{}),ki=Ai.reduce(function(t,r){return tr({},t,r.props)},{}),Ni=function(t){var r={};for(var e in t)r[t[e]]=e;return r}(Ii),Yi=Object.keys(Ni),Xi=Object.keys(ki),ji={};Ai.forEach(function(t){var r=t.css;r&&r.forEach(function(t){ji[t]=!0})});var qi,Wi,Li,Fi,Hi,Vi=Object.keys(ji).join("\n"),Ui=(qi="div",Hi=ir,Wi=(or+Vi).replace(/([^}{]*){/gm,function(t,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+Hi+"$1")+"{"}),Li=Rt(Wi),(Fi=function(t){function r(){this.constructor=e}var e,n;function i(){return null!==t&&t.apply(this,arguments)||this}return Pt(e=i,n=t),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r),i.prototype.render=function(){var t=this.props,r=t.className,e=void 0===r?"":r,n=(t.cspNonce,function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}(t,["className","cspNonce"])),i=Li.className;return I(qi,zt({ref:x(this,"element"),"data-styled-id":i,className:e+" "+i},n))},i.prototype.componentDidMount=function(){this.injectResult=Li.inject(this.element,{nonce:this.props.cspNonce})},i.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},i.prototype.getElement=function(){return this.element},i}(F)).injector=Li,Fi);function Ki(t,r,e,n){var i=vr(r,e),o=t?ve(i/Math.PI*180,15)%180:-1;return I("div",{key:"line"+n,className:qr("line","direction",t),"data-rotation":o,"data-line-index":n,"data-direction":t,style:ae(r,e,i)})}var $i=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.state={container:null,target:null,beforeMatrix:Wr(),matrix:Wr(),targetMatrix:Wr(),offsetMatrix:Wr(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:pe(),containerClientRect:pe(),moveableClientRect:pe(),rotation:0},t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isUnmounted=!1,t}Qt(t,r);var e=t.prototype;return e.render=function(){var t=this.props,r=this.state,e=t.edge,n=t.parentPosition,i=t.className,o=t.target,a=t.zoom,s=t.cspNonce;this.checkUpdate(),this.updateRenderPoses();var u=n||{left:0,top:0},c=u.left,l=u.top,p=r.left,f=r.top,d=r.target,h=r.direction,g=r.renderPoses,v=t.targets,m=(v&&v.length||o)&&d,b=this.isDragging(),y={};return this.getEnabledAbles().forEach(function(t){y["data-able-"+t.name.toLowerCase()]=!0}),I(Ui,tr({cspNonce:s,ref:x(this,"controlBox"),className:qr("control-box",-1===h?"reverse":"",b?"dragging":"")+" "+i},y,{style:{position:"absolute",display:m?"block":"none",transform:"translate("+(p-c)+"px, "+(f-l)+"px) translateZ(50px)","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),Ki(e?"n":"",g[0],g[1],0),Ki(e?"e":"",g[1],g[3],1),Ki(e?"w":"",g[0],g[2],2),Ki(e?"s":"",g[2],g[3],3))},e.componentDidMount=function(){this.controlBox.getElement();var t=this.props,r=t.parentMoveable,e=t.container;this.updateEvent(t),e||r||this.updateRect("End",!1,!0),this.updateCheckInput()},e.componentDidUpdate=function(t){this.updateEvent(t),this.updateCheckInput()},e.componentWillUnmount=function(){this.isUnmounted=!0,be(this,"targetDragger"),be(this,"controlDragger")},e.getContainer=function(){var t=this.props,r=t.parentMoveable;return t.container||r&&r.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(ir)},e.dragStart=function(t){return this.targetDragger&&this.targetDragger.triggerDragStart(t),this},e.hitTest=function(t){var r,e;e=t instanceof Element?{left:(r=t.getBoundingClientRect()).left,top:r.top,width:r.width,height:r.height}:tr({width:0,height:0},t);var n=this.state.targetClientRect,i=n.left,o=n.top,a=n.width,s=n.height,u=e.left,c=e.top,l=u+e.width,p=c+e.height,f=i+a,d=o+s,h=Math.max(i,u),g=Math.min(f,l),v=Math.max(o,c),m=Math.min(d,p);if(g<h||m<v)return 0;var b=(Math.min(f,l)-Math.max(u,i))*(Math.min(d,p)-Math.max(o,c));return Math.min(100,(g-h)*(m-v)/b*100)},e.isInside=function(t,r){var e=this.state,n=e.pos1,i=e.pos2,o=e.pos3,a=e.pos4,s=e.target,u=e.targetClientRect;if(!s)return!1;var c,l,p,f,d,h,g,v=u.left,m=u.top;return f=o,d=a,h=[ye(c=[t-v,r-m],l=n,p=i),ye(c,p,f),ye(c,f,l)],g=[ye(c,p,f),ye(c,f,d),ye(c,d,p)],!!(h.every(function(t){return 0<=t})||h.every(function(t){return t<=0})||g.every(function(t){return 0<=t})||g.every(function(t){return t<=0}))},e.updateRect=function(t,r,e){void 0===e&&(e=!0);var n=this.props,i=n.parentMoveable,o=this.state,a=o.target||this.props.target,s=this.getContainer(),u=i?i.props.rootContainer:n.rootContainer;this.updateState(le(this.controlBox&&this.controlBox.getElement(),a,s,s,u||s,r?o:void 0),!i&&e)},e.updateEvent=function(t){var r=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=t.dragTarget||t.target,s=i.dragArea,u=t.dragArea,c=!s&&a!==o,l=!e&&this.targetDragger||c||u!==s;l&&(be(this,"targetDragger"),this.updateState({dragger:null})),n||be(this,"controlDragger"),o&&e&&!this.targetDragger&&(this.targetDragger=je(this,o,"")),!this.controlDragger&&n&&(this.controlDragger=qe(this,r,"controlAbles","Control")),l&&this.unsetAbles()},e.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},e.updateTarget=function(t){this.updateRect(t,!0)},e.getRect=function(){var t=this.state,r=ge(this.state),e=r[0],n=r[1],i=r[2],o=r[3],a=re(r),s=t.width,u=t.height,c=a.width,l=a.height,p=a.left,f=a.top,d=[t.left,t.top],h=Sr(d,t.origin);return{width:c,height:l,left:p,top:f,pos1:e,pos2:n,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:Sr(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.getRotation=function(){var t=this.state,r=t.pos1,e=t.pos2,n=t.direction,i=vr(r,e)/Math.PI*180;return i=0<=(i=0<=n?i:180-i)?i:360+i},e.request=function(r,t,e){void 0===t&&(t={});var n=this.props,i=n.ables,o=n.groupable,a=i.filter(function(t){return t.name===r})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),c=e||t.isInstant,l=u.isControl?"controlAbles":"targetAbles",p=(o?"Group":"")+(u.isControl?"Control":""),f={request:function(t){return Xe(s,l,"drag",p,"",tr({},u.request(t),{requestAble:r,isRequest:!0}),c),this},requestEnd:function(){return Xe(s,l,"drag",p,"End",tr({},u.requestEnd(),{requestAble:r,isRequest:!0}),c),this}};return Xe(s,l,"drag",p,"Start",tr({},u.requestStart(t),{requestAble:r,isRequest:!0}),c),c?f.request(t).requestEnd():f},e.destroy=function(){this.componentWillUnmount()},e.updateRenderPoses=function(){var t=this.state,r=this.props,e=t.beforeOrigin,n=t.transformOrigin,i=t.matrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,l=t.left,p=t.top,f=r.padding||{},d=f.left,h=void 0===d?0:d,g=f.top,v=void 0===g?0:g,m=f.bottom,b=void 0===m?0:m,y=f.right,x=void 0===y?0:y,E=o?4:3,S=r.groupable?e:Sr(e,[l,p]);t.renderPoses=[Sr(a,Ge(i,[-h,-v],n,S,E)),Sr(s,Ge(i,[x,-v],n,S,E)),Sr(u,Ge(i,[-h,b],n,S,E)),Sr(c,Ge(i,[x,b],n,S,E))]},e.checkUpdate=function(){var t=this.props,r=t.target,e=t.container,n=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||r)&&(this.updateAbles(),Oe(o,r)&&Oe(a,e)||(this.updateState({target:r,container:e}),n||!e&&!this.controlBox||this.updateRect("End",!1,!1)))},e.triggerEvent=function(t,r){var e=this.props[t];return e&&e(r)},e.unsetAbles=function(){var r=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(r),!0)}).length&&this.forceUpdate()},e.updateAbles=function(t,r){void 0===t&&(t=this.props.ables),void 0===r&&(r="");var e=this.props,n=e.triggerAblesSimultaneously,i=t.filter(function(t){return t&&e[t.name]}),o="drag"+r+"ControlStart",a=De(i,["drag"+r+"Start","pinch"+r+"Start"],n),s=De(i,[o],n);this.targetAbles=a,this.controlAbles=s},e.updateState=function(t,r){if(r)this.setState(t);else{var e=this.state;for(var n in t)e[n]=t[n]}},e.getEnabledAbles=function(){var r=this.props;return r.ables.filter(function(t){return t&&r[t.name]})},e.renderAbles=function(){var i,o,a,s,r=this,t=this.props.triggerAblesSimultaneously,e={createElement:I};return i=Pe(De(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(r,e)||[]})).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,r){var e=o(t,r,i),n=s[e];n||(n=[],s[e]=n,a.push(n)),n.push(t)}),a.map(function(t){return t[0]})},e.updateCheckInput=function(){this.targetDragger&&(this.targetDragger.options.checkInput=this.props.checkInput)},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:""},t}(H);function Zi(t,o){return Math.max.apply(Math,t.map(function(t){var r=t[0],e=t[1],n=t[2],i=t[3];return Math.max(r[o],e[o],n[o],i[o])}))}function Ji(t,o){return Math.min.apply(Math,t.map(function(t){var r=t[0],e=t[1],n=t[2],i=t[3];return Math.min(r[o],e[o],n[o],i[o])}))}var Qi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.differ=new Zt,t.moveables=[],t.transformOrigin="50% 50%",t}Qt(t,e);var r=t.prototype;return r.updateEvent=function(t){var r=this.state,e=this.props;r.target||(r.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=je(this,r.target,"Group"),this.controlDragger=qe(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var n=!Oe(t.container,e.container);n&&(r.container=e.container);var i=this.differ.update(e.targets),o=i.added,a=i.changed,s=i.removed;(n||o.length||a.length||s.length)&&this.updateRect()},r.checkUpdate=function(){this.updateAbles()},r.updateRect=function(r,t,e){var n,i,o,a,s,u,c,l,p,f,d,h,g,v,m,b;void 0===e&&(e=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(r,!1,!1)}),n=this.state,i=this.props,o=n.target||i.target,(!t||""!==r&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),a=this.rotation,s=this.scale,c=(u=function(t,r){if(!t.length)return[0,0,0,0];var o,i,a,n,s,e,u,c=t.map(function(t){return ge(t.state)}),l=ur,p=ur,f=0,d=0,h=ve(r,sr);return h%90?(o=r/180*Math.PI,i=Math.tan(o),a=-1/i,n=[cr,ur],s=[cr,ur],c.forEach(function(t){t.forEach(function(t){var r=t[1]-i*t[0],e=t[1]-a*t[0];n[0]=Math.max(n[0],r),n[1]=Math.min(n[1],r),s[0]=Math.max(s[0],e),s[1]=Math.min(s[1],e)})}),n.forEach(function(n){s.forEach(function(t){var r=(t-n)/(i-a),e=i*r+n;l=Math.min(l,r),p=Math.min(p,e)})}),f=Zi(e=c.map(function(t){var r=t[0],e=t[1],n=t[2],i=t[3];return[wr(r,-o),wr(e,-o),wr(n,-o),wr(i,-o)]}),0)-Ji(e,0),d=Zi(e,1)-Ji(e,1)):(l=Ji(c,0),p=Ji(c,1),f=Zi(c,0)-l,d=Zi(c,1)-p,h%180&&(u=f,f=d,d=u)),[l,p,f,d]}(this.moveables,a))[0],l=u[1],p=u[2],f=u[3],o.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+p+"px; height:"+f+"px;transform:rotate("+a+"deg) scale("+(0<=s[0]?1:-1)+", "+(0<=s[1]?1:-1)+")",n.width=p,n.height=f,d=this.getContainer(),g=[(h=le(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||d,n)).left,h.top],v=ge(h),h.pos1=v[0],h.pos2=v[1],h.pos3=v[2],h.pos4=v[3],h.origin=Sr(g,h.origin),h.beforeOrigin=Sr(g,h.beforeOrigin),(m=h.targetClientRect).top+=l-h.top-n.top,m.left+=c-h.left-n.left,b=0<s[0]*s[1]?1:-1,this.updateState(tr({},h,{direction:b,beforeDirection:b,left:c-h.left,top:l-h.top}),e))},r.triggerEvent=function(t,r){if(-1<t.indexOf("Group"))return e.prototype.triggerEvent.call(this,t,r)},r.updateAbles=function(){e.prototype.updateAbles.call(this,this.props.ables.concat([Ti]),"Group")},t.defaultProps=tr({},$i.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}($i),to=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}var e,n;return Qt(r,t),r.prototype.render=function(){var t=this.props.ables||[],r=this.props.target||this.props.targets,e=bt(r);if(e&&1<r.length){var n=tr({},this.props,{target:null,targets:r,ables:Ai.concat([Ti],t)});return I(Qi,tr({key:"group",ref:x(this,"moveable")},n))}var i=e?r[0]:r;return I($i,tr({key:"single",ref:x(this,"moveable")},tr({},this.props,{target:i,ables:Ai.concat(t)})))},function(t,r,e,n){var i,o=arguments.length,a=o<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(r,e,a):i(r,e))||a);3<o&&a&&Object.defineProperty(r,e,a)}([(e=dr,void 0===n&&(n={}),function(r,o){e.forEach(function(i){var t=n[i]||i;r[t]||(r[t]=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=(t=this[o])[i].apply(t,r);return n===this[o]?this:n})})})],r.prototype,"moveable"),r}(H),ro=function(e){function t(t){var r=e.call(this,t)||this;return r.state={},r.state=r.props,r}return i(t,e),t.prototype.render=function(){return t=I(to,s({ref:x(this,"moveable")},this.state)),r=this.state.parentElement,I(V,{element:t,container:r});var t,r},t}(F),eo=Xi,no=dr,io=Yi,oo=function(a){function t(t,r){void 0===r&&(r={});var e=a.call(this)||this;e.tempElement=document.createElement("div");var n=s({container:t},r),i={};io.forEach(function(r){i[("on "+r).replace(/[\s-_]([a-z])/g,function(t,r){return r.toUpperCase()})]=function(t){return e.trigger(r,t)}}),Z(I(ro,s({ref:x(e,"innerMoveable"),parentElement:t},n,i)),e.tempElement);var o=n.target;return f(o)&&1<o.length&&e.updateRect(),e}i(t,a);var r=t.prototype;return r.setState=function(t,r){this.innerMoveable.setState(t,r)},r.destroy=function(){Z(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},t=function(t,r,e,n){var i,o=arguments.length,a=o<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(r,e,a):i(r,e))||a);return 3<o&&a&&Object.defineProperty(r,e,a),a}([e(no,function(t,n){t[n]||(t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=this.getMoveable();if(e&&e[n])return e[n].apply(e,t)})}),e(eo,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var r;this.setState(((r={})[e]=t,r))},enumerable:!0,configurable:!0})})],t)}(t),ao={__proto__:null,default:oo,PROPERTIES:eo,METHODS:no,EVENTS:io};for(var so in ao)oo[so]=ao[so];return oo});
//# sourceMappingURL=moveable.min.js.map
