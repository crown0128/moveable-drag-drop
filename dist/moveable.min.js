/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.21.0
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Moveable=n()}(this,function(){"use strict";var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function i(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var u=function(){return(u=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function M(n,e){return function(t){t&&(n[e]=t)}}function o(n,e,r){return function(t){t&&(n[e][r]=t)}}function e(e,r){return function(t){var n=t.prototype;e.forEach(function(t){r(n,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var e=this.keys,r=this.values,i=e.indexOf(t),o=-1===i?e.length:i;e[o]=t,r[o]=n},t}(),x=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),y="function"==typeof Map,a=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var E=function(){function t(t,n,e,r,i,o,a,s){this.prevList=t,this.list=n,this.added=e,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t,e,s,u,n=(t=this.changedBeforeAdded,e=this.fixed,s=[],u=[],t.forEach(function(t){var n=t[0],e=t[1],r=new a;s[n]=r,u[e]=r}),s.forEach(function(t,n){t.connect(s[n-1])}),t.filter(function(t,n){return!e[n]}).map(function(t,n){var e=t[0],r=t[1];if(e===r)return[0,0];var i=s[e],o=u[r-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})),l=this.changed,c=[];this.cacheOrdered=n.filter(function(t,n){var e=t[0],r=t[1],i=l[n],o=i[0],a=i[1];if(e!==r)return c.push([o,a]),!0}),this.cachePureChanged=c},t}();function l(t,n,e){var r=y?Map:e?x:b,i=e||function(t){return t},o=[],a=[],s=[],u=t.map(i),l=n.map(i),c=new r,p=new r,f=[],d=[],h={},g=[],v=0,m=0;return u.forEach(function(t,n){c.set(t,n)}),l.forEach(function(t,n){p.set(t,n)}),u.forEach(function(t,n){var e=p.get(t);void 0===e?(++m,a.push(n)):h[e]=m}),l.forEach(function(t,n){var e=c.get(t);void 0===e?(o.push(n),++v):(s.push([e,n]),m=h[n]||0,f.push([e-m,n-v]),d.push(n===e),e!==n&&g.push([e,n]))}),a.reverse(),new E(t,n,o,a,g,s,f,d)}var t=function(){function t(t,n){void 0===t&&(t=[]),this.findKeyCallback=n,this.list=[].slice.call(t)}return t.prototype.update=function(t){var n=[].slice.call(t),e=l(this.list,n,this.findKeyCallback);return this.list=n,e},t}(),n="string",s="undefined";function c(t){return typeof t===n}function p(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,n,e){return""+n+r+e.toLowerCase()})}var f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function d(t,n){function e(){this.constructor=t}f(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var h=function(){return(h=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function g(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}function v(t,n){if(t===n)return!1;for(var e in t)if(!(e in n))return!0;for(var e in n)if(t[e]!==n[e])return!0;return!1}function m(i,o){var a=Object.keys(i),e=Object.keys(o),t=l(a,e,function(t){return t}),r={},s={},u={};return t.added.forEach(function(t){var n=e[t];r[n]=o[n]}),t.removed.forEach(function(t){var n=a[t];s[n]=i[n]}),t.maintained.forEach(function(t){var n=t[0],e=a[n],r=[i[e],o[e]];i[e]!==o[e]&&(u[e]=r)}),{added:r,removed:s,changed:u}}function S(t){t.forEach(function(t){t()})}function w(t){var n=0;return t.map(function(t){return null==t?"$compat"+ ++n:""+t})}function C(t,n,e,r){return c(t)?new G("text_"+t,n,e,r,null,{}):new("string"==typeof t.type?T:t.type.prototype.render?k:_)(t.type,n,e,r,t.ref,t.props)}function D(t){var e=[];return t.forEach(function(t){var n;e=e.concat((n=t,Array.isArray(n)?D(t):t))}),e}function R(t){var n=t.className,e=g(t,["className"]);return null!=n&&(e.class=n),delete e.style,delete e.children,e}function P(t,n){if(!n)return t;for(var e in n)typeof t[e]===s&&(t[e]=n[e]);return t}function O(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=n||{},o=i.key,a=i.ref,s=g(i,["key","ref"]);return{type:t,key:o,ref:a,props:h(h({},s),{children:D(e).filter(function(t){return null!=t&&!1!==t})})}}var z=function(){function t(t,n,e,r,i,o){void 0===o&&(o={}),this.type=t,this.key=n,this.index=e,this.container=r,this.ref=i,this.props=o,this._providers=[]}var n=t.prototype;return n._should=function(t,n){return!0},n._update=function(t,n,e,r){if(this.base&&!c(n)&&!r&&!this._should(n.props,e))return!1;this.original=n,this._setState(e);var i=this.props;return c(n)||(this.props=n.props,this.ref=n.ref),this._render(t,this.base?i:{},e),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},t}();function B(t){var n={},e={};for(var r in t)0===r.indexOf("on")?e[r.replace("on","").toLowerCase()]=t[r]:n[r]=t[r];return{attributes:n,events:e}}var G=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}d(n,t);var e=n.prototype;return e._render=function(t){var n=this,e=!this.base;return e&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){e?n._mounted():n._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(z),T=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.events={},t}d(t,n);var e=t.prototype;return e.addEventListener=function(t,n){var e=this.events;e[t]=function(t){t.nativeEvent=t,n(t)},this.base.addEventListener(t,e[t])},e.removeEventListener=function(t){var n=this.events;this.base.removeEventListener(t,n[t]),delete n[t]},e._should=function(t){return v(this.props,t)},e._render=function(t,n){var e=this,r=!this.base;r&&(this.base=document.createElement(this.type)),N(this,this._providers,this.props.children,t,null);var i=this.base,o=B(n),a=o.attributes,s=o.events,u=B(this.props),l=u.attributes,c=u.events;return function(t,n,e){var r=m(t,n),i=r.added,o=r.removed,a=r.changed;for(var s in i)e.setAttribute(s,i[s]);for(var s in a)e.setAttribute(s,a[s][1]);for(var s in o)e.removeAttribute(s)}(R(a),R(l),i),function(t,n,e){var r=m(t,n),i=r.added,o=r.removed,a=r.changed;for(var s in o)e.removeEventListener(s);for(var s in i)e.addEventListener(s,i[s]);for(var s in a)e.removeEventListener(s),e.addEventListener(s,a[s][1]);for(var s in o)e.removeEventListener(s)}(s,c,this),function(t,n,e){var r=e.style,i=m(t,n),o=i.added,a=i.removed,s=i.changed;for(var u in o){var l=p(u,"-");r.setProperty?r.setProperty(l,o[u]):r[l]=o[u]}for(var u in s){l=p(u,"-");r.setProperty?r.setProperty(l,s[u][1]):r[l]=s[u][1]}for(var u in a){l=p(u,"-");r.removeProperty?r.removeProperty(l):r[l]=""}}(n.style||{},this.props.style||{},i),t.push(function(){r?e._mounted():e._updated()}),!0},e._unmount=function(){var t=this.events,n=this.base;for(var e in t)n.removeEventListener(e,t[e]);this._providers.forEach(function(t){t._unmount()}),this.events={},n.parentNode.removeChild(n)},t}(z);function A(t){if(!t)return null;if(t instanceof Node)return t;var n=t._provider._providers;return n.length?A(n[0].base):null}var _=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}d(n,t);var e=n.prototype;return e._render=function(t){var n=this.type(this.props);return N(this,this._providers,n?[n]:[],t),!0},e._unmount=function(){this._providers.forEach(function(t){t._unmount()})},n}(z),I=function(e){function t(t){var n=e.call(this,"container","container",0,null)||this;return n.base=t,n}d(t,e);var n=t.prototype;return n._render=function(){return!0},n._unmount=function(){},t}(z),k=function(a){function t(t,n,e,r,i,o){return void 0===o&&(o={}),a.call(this,t,n,e,r,i,P(o,t.defaultProps))||this}d(t,a);var n=t.prototype;return n._should=function(t,n){return this.base.shouldComponentUpdate(P(t,this.type.defaultProps),n||this.base.state)},n._render=function(t,n,e){var r=this;this.props=P(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),N(this,this._providers,s?[s]:[],t,e,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(n,a))})},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(z),j=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!0},n.render=function(){return null},n.setState=function(t,n,e){var r=[],i=this._provider;N(i.container,[i],[i.original],r,h(h({},this.state),t),e)&&(n&&r.push(n),S(r))},n.forceUpdate=function(t){this.setState(this.state,t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,n){},n.componentWillUnmount=function(){},t}(),Y=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return d(n,t),n.prototype.shouldComponentUpdate=function(t,n){return v(this.props,t)||v(this.state,n)},n}(j),X=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}d(n,t);var e=n.prototype;return e.componentDidMount=function(){var t=this.props,n=t.element,e=t.container;this._portalProvider=new I(e),q(n,e,this._portalProvider)},e.componentDidUpdate=function(){var t=this.props;q(t.element,t.container,this._portalProvider)},e.componentWillUnmount=function(){q(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(Y);function F(i,a,o){var s=o.map(function(t){return c(t)?null:t.key}),t=l(w(a.map(function(t){return t.key})),w(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var n=t[0],e=t[1],r=a.splice(n,1)[0];a.splice(e,0,r);var i=A(r.base),o=A(a[e+1]&&a[e+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,C(o[t],s[t],t,i))});var n=t.maintained.filter(function(t){t[0];var n=t[1],e=o[n],r=a[n];return(c(e)?"text_"+e:e.type)!==r.type?(r._unmount(),a.splice(n,1,C(e,s[n],n,i)),!0):(r.index=n,!1)});return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.added,n.map(function(t){t[0];return t[1]}))}function N(i,o,e,r,a,s){var t=F(i,o,e),n=o.filter(function(t,n){return t._update(r,e[n],a,s)}),u=function t(n){if(!n)return null;var e=n.base;return e instanceof Node?e:t(n.container)}(i);return u&&t.reverse().forEach(function(t){var n,e=o[t],r=A(e.base);r&&(u===r||r.parentNode||(n=function(t,n){for(var e=t._providers,r=e.length,i=n.index+1;i<r;++i){var o=A(e[i].base);if(o)return o}return null}(i,e),u.insertBefore(r,n)))}),0<n.length}function q(t,n,e){void 0===e&&(e=n.__REACT_COMPAT__);var r,i,o,a,s=!!e;return e=e||new I(n),i=t?[t]:[],a=[],N(r=e,r._providers,i,a,o),S(a),s||(n.__REACT_COMPAT__=e),e}function L(t,n,e){var r=n.__REACT_COMPAT__;t&&!r&&(n.innerHTML=""),q(t,n,r),e&&e()}function W(t,n){for(var e=t.length,r=0;r<e;++r)if(n(t[r],r))return!0;return!1}function H(t,n){for(var e=t.length,r=0;r<e;++r)if(n(t[r],r))return t[r];return null}function V(t,n){try{return new RegExp(t,"g").exec(n)}catch(t){return null}}function U(t){return t.replace(/_/g,".")}function Z(t,i){var o=null,a="-1";return W(t,function(t){var n,e,r=V("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",i);return r&&!t.brand&&(o=t,a=r[3]||"-1",t.versionAlias?a=t.versionAlias:t.versionTest&&(n=t.versionTest.toLowerCase(),e=V("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",i),a=(e?e[3]:"")||a),a=U(a),1)}),{preset:o,version:a}}function $(t,e){return H(t,function(t){var n=t.brand;return V(""+e.test,n.toLowerCase())})}var K=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],J=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",brand:!0}],Q=[{test:"applewebkit",id:"webkit"}],tt=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],nt=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function et(t){var n=function(t){var n=t;if(void 0===n){if("undefined"==typeof navigator||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}(t),e=!!/mobi/g.exec(n),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!Z(tt,n).preset,chromium:!!Z(J,n).preset,webkit:!1},i={name:"unknown",version:"-1",majorVersion:-1},o=Z(K,n),a=o.preset,s=o.version,u=Z(nt,n),l=u.preset,c=u.version;return r.webkit=!r.chromium&&!!Z(Q,n).preset,l&&(i.name=l.id,i.version=c,i.majorVersion=parseInt(c,10)),a&&(r.name=a.id,r.version=s,r.webview&&"ios"===i.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:e,isHints:!1}}var rt="function",it="object",ot="string",at="undefined",st=['"',"'",'\\"',"\\'"],ut={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function lt(t){return typeof t===at}function ct(t){return t&&typeof t===it}function pt(t){return Array.isArray(t)}function ft(t){return typeof t===ot}function dt(t,n,e,r){for(var i=e;i<r;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=dt(")",n,i+1,r):-1<st.indexOf(o)&&(a=dt(o,n,i+1,r)),-1===a)break;i=a}return-1}function ht(t,n){for(var e=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=t.split(e).filter(Boolean),i=r.length,o=[],a=[],s=0;s<i;++s){var u=r[s].trim(),l=s;if("("===u)l=dt(")",r,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<st.indexOf(u))l=dt(u,r,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(r.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function gt(t){return ht(t,"")}function vt(t){return ht(t,",")}function mt(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function bt(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}function xt(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}function yt(t){if(Object.keys)return Object.keys(t);var n=[];for(var e in n)n.push(e);return n}function Et(t,n){var e=bt(t),r=e.value,i=e.unit;if(ct(n)){var o=n[i];if(o){if(typeof o===rt)return o(r);if(ut[i])return ut[i](r,o)}}else if("%"===i)return r*n/100;return ut[i]?ut[i](r):r}function St(t,e,r){return[[e[0],e[0]*t[1]/t[0]],[e[1]*t[0]/t[1],e[1]]].filter(function(t){return t.every(function(t,n){return r?t<=e[n]:t>=e[n]})})[0]||t}function Mt(t,o,a,n){if(!n)return t.map(function(t,n){return e=t,r=o[n],i=a[n],Math.max(r,Math.min(e,i));var e,r,i});var e=t[0],r=t[1],i=St(t,o,!1),s=i[0],u=i[1],l=St(t,a,!0),c=l[0],p=l[1];return e<s||r<u?(e=s,r=u):(c<e||p<r)&&(e=c,r=p),[e,r]}function wt(t){for(var n=t.length,e=0,r=n-1;0<=r;--r)e+=t[r];return n?e/n:0}function Ct(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=Math.atan2(r,e);return 0<=i?i:i+2*Math.PI}function Dt(t){var e,n=(e=t,[0,1].map(function(n){return wt(e.map(function(t){return t[n]}))})),r=Ct(n,t[0]),i=Ct(n,t[1]);return r<i&&i-r<Math.PI||i<r&&i-r<-Math.PI?1:-1}function Rt(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function Pt(t,n,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<e;++i)r[i*e+n-1]=0,r[(n-1)*e+i]=0;return r[(n-1)*(e+1)]=1,r}function Ot(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=t.slice(),r=Ht(n),i=0;i<n;++i){var o=n*i+i;if(0===e[o])for(var a=i+1;a<n;++a)if(e[n*i+a]){!function(t,n,e,r,i){for(var o=0;o<i;++o){var a=e+o*i,s=r+o*i,u=t[a],l=n[a];t[a]=t[s],t[s]=u,n[a]=n[s],n[s]=l}}(e,r,i,a,n);break}if(!e[o])return[];!function(t,n,e,r,i){for(var o=0;o<r;++o){var a=e+o*r;t[a]/=i,n[a]/=i}}(e,r,i,n,e[o]);for(a=0;a<n;++a){var s=e[a+i*n];0!==s&&i!==a&&function(t,n,e,r,i,o){for(var a=0;a<i;++a){var s=e+a*i,u=r+a*i;t[s]+=t[u]*o,n[s]+=n[u]*o}}(e,r,a,i,n,-s)}}return r}function zt(t,n){for(var e=t.slice(),r=t.length;r<n-1;++r)e[r]=0;return e[n-1]=1,e}function Bt(t,n,e){if(void 0===n&&(n=Math.sqrt(t.length)),n===e)return t;for(var r=Ht(e),i=Math.min(n,e),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*e+a]=t[o*n+a];r[(o+1)*e-1]=t[(o+1)*n-1],r[(e-1)*e+o]=t[(n-1)*n+o]}return r[e*e-1]=t[n*n-1],r}function Gt(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var r=Ht(n);return t.forEach(function(t){r=Tt(r,t,n)}),r}function Tt(t,n,e){void 0===e&&(e=Math.sqrt(t.length));var r=[],i=t.length/e,o=n.length/i;if(!i)return n;if(!o)return t;for(var a=0;a<e;++a)for(var s=0;s<o;++s)for(var u=r[s*e+a]=0;u<i;++u)r[s*e+a]+=t[u*e+a]*n[s*i+u];return r}function At(t,n){for(var e=Math.min(t.length,n.length),r=t.slice(),i=0;i<e;++i)r[i]=r[i]+n[i];return r}function _t(t,n){for(var e=Math.min(t.length,n.length),r=t.slice(),i=0;i<e;++i)r[i]=r[i]-n[i];return r}function It(t,n){return void 0===n&&(n=9===t.length),n?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function kt(t,n,e){void 0===e&&(e=n.length);var r=Tt(t,n,e),i=r[e-1];return r.map(function(t){return t/i})}function jt(t,n){return Tt(t,[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1],4)}function Yt(t,n){return Tt(t,[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1],4)}function Xt(t,n){return Tt(t,Wt(n,4))}function Ft(t,n){var e=n[0],r=void 0===e?1:e,i=n[1],o=void 0===i?1:i,a=n[2];return Tt(t,[r,0,0,0,0,o,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function Nt(t,n){return kt(Wt(n,3),zt(t,3))}function qt(t,n){var e=n[0],r=void 0===e?0:e,i=n[1],o=void 0===i?0:i,a=n[2];return Tt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===a?0:a,1],4)}function Lt(t,n){return Tt(t,n,4)}function Wt(t,n){var e=Math.cos(t),r=Math.sin(t),i=Ht(n);return i[0]=e,i[1]=r,i[n]=-r,i[n+1]=e,i}function Ht(t){for(var n=t*t,e=[],r=0;r<n;++r)e[r]=r%(t+1)?0:1;return e}function Vt(t,n){for(var e=Ht(n),r=Math.min(t.length,n-1),i=0;i<r;++i)e[(n+1)*i]=t[i];return e}function Ut(t,n){for(var e=Ht(n),r=Math.min(t.length,n-1),i=0;i<r;++i)e[n*(n-1)+i]=t[i];return e}function Zt(t,n,e,r,i,o,a,s){var u=t[0],l=t[1],c=n[0],p=n[1],f=e[0],d=e[1],h=r[0],g=r[1],v=i[0],m=i[1],b=o[0],x=o[1],y=a[0],E=a[1],S=s[0],M=s[1],w=Ot([u,0,c,0,f,0,h,0,l,0,p,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,c,0,f,0,h,0,l,0,p,0,d,0,g,0,1,0,1,0,1,0,1,-v*u,-m*u,-b*c,-x*c,-y*f,-E*f,-S*h,-M*h,-v*l,-m*l,-b*p,-x*p,-y*d,-E*d,-S*g,-M*g],8);if(!w.length)return[];var C=Tt(w,[v,m,b,x,y,E,S,M],8);return C[8]=1,Bt(function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=[],r=0;r<n;++r)for(var i=0;i<n;++i)e[i*n+r]=t[n*r+i];return e}(C),3,4)}var $t=['"',"'",'\\"',"\\'"];function Kt(t,n,e,r){for(var i=e;i<r;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=Kt(")",n,i+1,r):-1<$t.indexOf(o)&&(a=Kt(o,n,i+1,r)),-1===a)break;i=a}return-1}function Jt(t,n){for(var e=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=t.split(e).filter(Boolean),i=r.length,o=[],a=[],s=0;s<i;++s){var u=r[s].trim(),l=s;if("("===u)l=Kt(")",r,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<$t.indexOf(u))l=Kt(u,r,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(r.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function Qt(t){return Jt(t,",")}function tn(t){var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var n=t.matrixFunction,e=t.functionValue;n&&(r=n(r,e))}),r}function nn(t){var n;return(n=t,Array.isArray(n)?t:Jt(t,"")).map(function(t){var n,e,r,i,o,a,s,u,l,c,p,f,d=!(n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t))||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]},h=d.prefix,g=d.value,v=null,m=h,b="";return"translate"===h||"translateX"===h||"translate3d"===h?(v=qt,b=[(e=Qt(g).map(function(t){return parseFloat(t)}))[0],void 0===(r=e[1])?0:r,void 0===(i=e[2])?0:i]):"translateY"===h?(v=qt,b=[0,parseFloat(g),0]):"translateZ"===h?(v=qt,b=[0,0,parseFloat(g)]):"scale"===h||"scale3d"===h?(v=Ft,b=[u=(o=Qt(g).map(function(t){return parseFloat(t)}))[0],void 0===(a=o[1])?u:a,void 0===(s=o[2])?1:s]):"scaleX"===h?(v=Ft,b=[u=parseFloat(g),1,1]):"scaleY"===h?(v=Ft,b=[1,parseFloat(g),1]):"scaleZ"===h?(v=Ft,b=[1,1,parseFloat(g)]):"rotate"===h||"rotateZ"===h||"rotateX"===h||"rotateY"===h?(c=(l=function(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}(g)).unit,p=l.value,"rotate"===h||"rotateZ"===h?(m="rotateZ",v=Xt):"rotateX"===h?v=jt:"rotateY"===h&&(v=Yt),b="rad"===c?p:p*Math.PI/180):"matrix3d"===h?(v=Lt,b=Qt(g).map(function(t){return parseFloat(t)})):"matrix"===h?(v=Lt,b=[(f=Qt(g).map(function(t){return parseFloat(t)}))[0],f[1],0,0,f[2],f[3],0,0,0,0,1,0,f[4],f[5],0,1]):m="",{name:h,functionName:m,value:g,matrixFunction:v,functionValue:b}})}function en(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}function rn(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=Math.atan2(r,e);return 0<=i?i:i+2*Math.PI}function on(t){return[0,1].map(function(n){return function(t){for(var n=t.length,e=0,r=n-1;0<=r;--r)e+=t[r];return n?e/n:0}(t.map(function(t){return t[n]}))})}function an(t){var n=on(t),e=rn(n,t[0]),r=rn(n,t[1]);return e<r&&r-e<Math.PI||r<e&&r-e<-Math.PI?1:-1}function sn(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function un(r){return r.length<3?0:Math.abs(function(t){for(var n=0,e=t.length-1;0<=e;--e)n+=t[e];return n}(r.map(function(t,n){var e=r[n+1]||r[0];return t[0]*e[1]-e[0]*t[1]})))/2}function ln(t,n){var e=n.width,r=n.height,i=n.left,o=n.top,a=cn(t),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,p=e/(l-s),f=r/(c-u);return t.map(function(t){return[i+(t[0]-s)*p,o+(t[1]-u)*f]})}function cn(t){var n=t.map(function(t){return t[0]}),e=t.map(function(t){return t[1]});return{minX:Math.min.apply(Math,n),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,e)}}function pn(t,n,e){var i=t[0],o=t[1],r=cn(n),a=r.minX,s=r.minY,u=r.maxX,l=r.maxY,c=[[a,o],[u,o]],p=[[i,s],[i,l]],f=fn(c[0],c[1]),d=fn(p[0],p[1]),h=gn(n),g=[],v=[];return h.forEach(function(t){var n=fn(t[0],t[1]),e=hn(dn(f,n),[c,t]),r=hn(dn(d,n),[p,t]);1===e.length&&t[0][1]===o||g.push.apply(g,e),1===r.length&&t[0][0]===i||v.push.apply(v,r),n[0]||g.push.apply(g,e),n[1]||v.push.apply(v,r)}),!e&&(-1<en(g,function(t){return t[0]===i})||-1<en(v,function(t){return t[1]===o}))||!!(g.filter(function(t){return t[0]>i}).length%2&&v.filter(function(t){return t[1]>o}).length%2)}function fn(t,n){var e=t[0],r=t[1],i=n[0],o=n[1];if(e===i&&r===o)return[0,0,0];if(e===i)return[1,0,-e];if(r===o)return[0,1,-r];var a=(i-e)/(r-o);return[1,a,-e-a*r]}function dn(t,n){var e,r,i=t[0],o=t[1],a=t[2],s=n[0],u=n[1],l=n[2],c=0===i&&0===s,p=0===o&&0===u;if(c&&p)return[];if(c){var f=-a/o;return f!=-l/u?[]:[[-1/0,f],[1/0,f]]}if(p){var d=-a/i;return d!=-l/s?[]:[[d,-1/0],[d,1/0]]}return 0!==i?0!==s?0!==o?0!==u?[[e=(o*l-u*a)/(u*i-o*s),r=-(i*e+a)/o]]:[[e=-l/s,r=-(i*e+a)/o]]:[[e=-a/i,r=-(s*e+l)/u]]:[[e=-(o*(r=-l/u)+a)/i,r]]:[[e=-(u*(r=-a/o)+l)/s,r]]}function hn(t,n){var e=n.map(function(n){return[0,1].map(function(t){return[Math.min(n[0][t],n[1][t]),Math.max(n[0][t],n[1][t])]})});if(2===t.length){var r=t[0],i=r[0],o=r[1];if(i===t[1][0]){var a=Math.max.apply(Math,e.map(function(t){return t[1][0]})),s=Math.min.apply(Math,e.map(function(t){return t[1][1]}));return s<a?[]:[[i,a],[i,s]]}if(o===t[1][1]){var u=Math.max.apply(Math,e.map(function(t){return t[0][0]})),l=Math.min.apply(Math,e.map(function(t){return t[0][1]}));return l<u?[]:[[u,o],[l,o]]}}return t.filter(function(n){return e.every(function(t){return t[0][0]<=n[0]&&n[0]<=t[0][1]&&t[1][0]<=n[1]&&n[1]<=t[1][1]})})}function gn(e){return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(e.slice(1),[e[0]]).map(function(t,n){return[e[n],t]})}function vn(t,n){return un(function(t,n){var e=t.slice(),s=n.slice();-1===an(e)&&e.reverse(),-1===an(s)&&s.reverse();var u=gn(e),l=gn(s),r=u.map(function(t){return fn(t[0],t[1])}),c=l.map(function(t){return fn(t[0],t[1])}),p=[];r.forEach(function(r,i){var o=u[i],a=[];c.forEach(function(t,n){var e=hn(dn(r,t),[o,l[n]]);a.push.apply(a,e.map(function(t){return{index1:i,index2:n,pos:t}}))}),a.sort(function(t,n){return sn(o[0],t.pos)-sn(o[0],n.pos)}),p.push.apply(p,a),pn(o[1],s)&&p.push({index1:i,index2:-1,pos:o[1]})}),l.forEach(function(t,r){var i,n;pn(t[1],e)&&(i=!1,-1===(n=en(p,function(t){return t.index2!==r?!!i:void(i=!0)}))&&(i=!1,n=en(p,function(t){var n=t.index1,e=t.index2;if(-1!==n||e+1!==r)return!!i;i=!0})),-1===n?p.push({index1:-1,index2:r,pos:t[1]}):p.splice(n,0,{index1:-1,index2:r,pos:t[1]}))});var i=p.map(function(t){return t.pos}),o={};return i.filter(function(t){var n=t[0]+"x"+t[1];return!o[n]&&(o[n]=!0)})}(t,n))}function mn(t){return t&&"object"==typeof t}var bn=function(){return(bn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var xn=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(mn(t))for(var e in t)this.on(e,t[e]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(mn(t))for(var e in t)this.off(e);else{var r,i;n?!(r=this._events[t])||-1<(i=function(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}(r,function(t){return t.listener===n}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},n.once=function(n,t){var e=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(t){e._addEvent(n,t,{once:!0})})},n.emit=function(n,e){var r=this;void 0===e&&(e={});var t=this._events[n];if(!n||!t)return!0;var i=!1;return e.eventType=n,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(e),t.once&&r.off(n,t.listener)}),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,e){var r=this._events;r[t]=r[t]||[],r[t].push(bn({listener:n},e))},t}();var yn=function(t,n){return(yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function En(t){var n=t.container;return[n.scrollLeft,n.scrollTop]}var Sn=function(n){function t(){this.constructor=e}var e,r;function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}yn(e=i,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var o=i.prototype;return o.dragStart=function(t,n){var e=n.container.getBoundingClientRect(),r=e.top,i=e.left,o=e.width,a=e.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:i,width:o,height:a}},o.drag=function(t,n){var e=this,r=t.clientX,i=t.clientY,o=n.container,a=n.threshold,s=void 0===a?0:a,u=n.throttleTime,l=void 0===u?0:u,c=n.getScrollPosition,p=void 0===c?En:c,f=this.startRect,d=this.startPos,h=Date.now?Date.now():(new Date).getTime(),g=Math.max(l+this.prevTime-h,0),v=[0,0];if(f.top>i-s?(d[1]>f.top||i<d[1])&&(v[1]=-1):f.top+f.height<i+s&&(d[1]<f.top+f.height||i>d[1])&&(v[1]=1),f.left>r-s?(d[0]>f.left||r<d[0])&&(v[0]=-1):f.left+f.width<r+s&&(d[0]<f.left+f.width||r>d[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){e.drag(t,n)},g),!1;this.prevTime=h;var m=p({container:o,direction:v});this.trigger("scroll",{container:o,direction:v,inputEvent:t});var b=p({container:o,direction:v}),x=b[0]-m[0],y=b[1]-m[1];return!(!x&&!y)&&(this.trigger("move",{offsetX:v[0]?x:0,offsetY:v[1]?y:0,inputEvent:t}),l&&(this.timer=window.setTimeout(function(){e.drag(t,n)},l)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},i}(xn);function Mn(){return Date.now?Date.now():(new Date).getTime()}function wn(t,n,e,r){t.addEventListener(n,e,r)}function Cn(t,n,e){t.removeEventListener(n,e)}var Dn=function(t,n){return(Dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var Rn=function(){return(Rn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Pn(t){return 180*(n=[t[0].clientX,t[0].clientY],e=[t[1].clientX,t[1].clientY],r=e[0]-n[0],i=e[1]-n[1],(0<=(o=Math.atan2(i,r))?o:o+2*Math.PI)/Math.PI);var n,e,r,i,o}function On(t){return t.touches?function(t){for(var n=Math.min(t.length,2),e=[],r=0;r<n;++r)e.push(Gn(t[r]));return e}(t.touches):[Gn(t)]}function zn(t,n,e){var r=e.length,i=Tn(t,r),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,l=Tn(n,r),c=l.clientX,p=l.clientY,f=Tn(e,r);return{clientX:s,clientY:u,deltaX:o-c,deltaY:a-p,distX:o-f.clientX,distY:a-f.clientY}}function Bn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Gn(t){return{clientX:t.clientX,clientY:t.clientY}}function Tn(t,n){void 0===n&&(n=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<n;++r){var i=t[r];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return n?{clientX:e.clientX/n,clientY:e.clientY/n,originalClientX:e.originalClientX/n,originalClientY:e.originalClientY/n}:e}var An=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.addClients=function(t){void 0===t&&(t=this.prevClients);var n=this.getPosition(t),e=n.deltaX,r=n.deltaY;return this.movement+=Math.sqrt(e*e+r*r),this.prevClients=t,n},n.getAngle=function(t){return void 0===t&&(t=this.prevClients),Pn(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),Pn(t)-Pn(this.startClients)},n.getPosition=function(t){return zn(t||this.prevClients,this.prevClients,this.startClients)},n.getPositions=function(e){void 0===e&&(e=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,n){return zn([e[n]],[r[n]],[t])})},n.getMovement=function(t){var n=this.movement;if(!t)return n;var e=Tn(t,this.length),r=Tn(this.prevClients,this.length),i=e.clientX-r.clientX,o=e.clientY-r.clientY;return Math.sqrt(i*i+o*o)+n},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),Bn(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),Bn(t)/Bn(this.startClients)},n.move=function(n,e){this.startClients.forEach(function(t){t.clientX-=n,t.clientY-=e}),this.prevClients.forEach(function(t){t.clientX-=n,t.clientY-=e})},t}(),_n=["textarea","input"],In=function(u){function t(){this.constructor=n}var n,e;function r(t,n){void 0===n&&(n={});var b=u.call(this)||this;b.options={},b.flag=!1,b.pinchFlag=!1,b.datas={},b.isDrag=!1,b.isPinch=!1,b.isMouse=!1,b.isTouch=!1,b.clientStores=[],b.targets=[],b.prevTime=0,b.isDouble=!1,b.onDragStart=function(t,n){if(void 0===n&&(n=!0),b.flag||!1!==t.cancelable){var e=b.options,r=e.container,i=e.pinchOutside,o=e.preventRightClick,a=e.preventDefault,s=e.checkInput,u=b.isTouch,l=!b.flag;if(l){var c,p=document.activeElement,f=t.target,d=f.tagName.toLowerCase(),h=-1<_n.indexOf(d),g=f.isContentEditable;if(h||g){if(s||p===f)return!1;if(p&&g&&p.isContentEditable&&p.contains(f))return!1}else{(a||"touchstart"===t.type)&&p&&(c=p.tagName,(p.isContentEditable||-1<_n.indexOf(c))&&p.blur())}if(b.clientStores=[new An(On(t))],b.flag=!0,b.isDrag=!1,b.datas={},o&&(3===t.which||2===t.button))return b.initDrag(),!1;!1===b.emit("dragStart",Rn({datas:b.datas,inputEvent:t,isTrusted:n},b.getCurrentStore().getPosition()))&&b.initDrag(),b.isDouble=Mn()-b.prevTime<200,b.flag&&a&&t.preventDefault()}if(!b.flag)return!1;var v,m=0;if(l&&u&&i&&(m=setTimeout(function(){wn(r,"touchstart",b.onDragStart,{passive:!1})})),!l&&u&&i&&Cn(r,"touchstart",b.onDragStart),b.flag&&((v=t).touches&&2<=v.touches.length)){if(clearTimeout(m),l&&t.touches.length!==t.changedTouches.length)return;b.pinchFlag||b.onPinchStart(t)}}},b.onDrag=function(t,n){var e,r;b.flag&&(e=On(t),r=b.moveClients(e,t,!1),(b.pinchFlag||r.deltaX||r.deltaY)&&b.emit("drag",Rn({},r,{isScroll:!!n,inputEvent:t})),b.pinchFlag&&b.onPinch(t,e),b.getCurrentStore().addClients(e))},b.onDragEnd=function(t){var n,e,r,i,o,a;b.flag&&(e=(n=b.options).pinchOutside,r=n.container,b.isTouch&&e&&Cn(r,"touchstart",b.onDragStart),b.flag=!1,i=b.getCurrentStore().getPosition(),o=Mn(),a=!b.isDrag&&b.isDouble,b.prevTime=b.isDrag||a?0:o,b.emit("dragEnd",Rn({datas:b.datas,isDouble:a,isDrag:b.isDrag,inputEvent:t},i)),b.pinchFlag&&b.onPinchEnd(t),b.clientStores=[])},b.onBlur=function(){b.onDragEnd()};var e=[].concat(t);b.options=Rn({checkInput:!1,container:1<e.length?window:e[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},n);var r,i=b.options,o=i.container,a=i.events,s=i.checkWindowBlur;return b.isTouch=-1<a.indexOf("touch"),b.isMouse=-1<a.indexOf("mouse"),b.targets=e,b.isMouse&&(e.forEach(function(t){wn(t,"mousedown",b.onDragStart)}),wn(o,"mousemove",b.onDrag),wn(o,"mouseup",b.onDragEnd),wn(o,"contextmenu",b.onDragEnd)),s&&wn(window,"blur",b.onBlur),b.isTouch&&(r={passive:!1},e.forEach(function(t){wn(t,"touchstart",b.onDragStart,r)}),wn(o,"touchmove",b.onDrag,r),wn(o,"touchend",b.onDragEnd,r),wn(o,"touchcancel",b.onDragEnd,r)),b}Dn(n=r,e=u),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t);var i=r.prototype;return i.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,n){return t+n.movement},0)},i.isDragging=function(){return this.isDrag},i.isFlag=function(){return this.flag},i.isPinchFlag=function(){return this.pinchFlag},i.isPinching=function(){return this.isPinch},i.scrollBy=function(t,n,e,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,n),r&&this.onDrag(e,!0))},i.move=function(t,n){var r=t[0],i=t[1],e=this.getCurrentStore().prevClients;return this.moveClients(e.map(function(t){var n=t.clientX,e=t.clientY;return{clientX:n+r,clientY:e+i,originalClientX:n,originalClientY:e}}),n,!0)},i.triggerDragStart=function(t){this.onDragStart(t,!1)},i.setEventDatas=function(t){var n=this.datas;for(var e in t)n[e]=t[e];return this},i.getEventDatas=function(){return this.datas},i.unset=function(){var n=this,t=this.targets,e=this.options.container;this.off(),Cn(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){Cn(t,"mousedown",n.onDragStart)}),Cn(e,"mousemove",this.onDrag),Cn(e,"mouseup",this.onDragEnd),Cn(e,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){Cn(t,"touchstart",n.onDragStart)}),Cn(e,"touchstart",this.onDragStart),Cn(e,"touchmove",this.onDrag),Cn(e,"touchend",this.onDragEnd),Cn(e,"touchcancel",this.onDragEnd))},i.onPinchStart=function(t){var n,e=this.options.pinchThreshold;this.isDrag&&this.getMovement()>e||(n=new An(On(t)),this.pinchFlag=!0,this.clientStores.splice(0,0,n),!1===this.emit("pinchStart",Rn({datas:this.datas,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1))},i.onPinch=function(t,n){var e;!this.flag||!this.pinchFlag||n.length<2||(e=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",Rn({datas:this.datas,movement:this.getMovement(n),angle:e.getAngle(n),rotation:e.getRotation(n),touches:e.getPositions(n),scale:e.getScale(n),distance:e.getDistance(n)},e.getPosition(n),{inputEvent:t})))},i.onPinchEnd=function(t){var n,e;this.pinchFlag&&(n=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,e=this.getCurrentStore(),this.emit("pinchEnd",Rn({datas:this.datas,isPinch:n,touches:e.getPositions()},e.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1)},i.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.flag=!1},i.getCurrentStore=function(){return this.clientStores[0]},i.moveClients=function(t,n,e){var r=this.getCurrentStore()[e?"addClients":"getPosition"](t);return this.isDrag=!0,Rn({datas:this.datas},r,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},r}(xn),kn=function(t,n){return(kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var jn,Yn="function"==typeof Map?void 0:(jn=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++jn)}),Xn=function(n){function t(){this.constructor=e}var e,r;function i(t){return void 0===t&&(t=[]),n.call(this,t,Yn)||this}return kn(e=i,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),i}(t),Fn=['"',"'",'\\"',"\\'"];function Nn(t,n,e,r){for(var i=e;i<r;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=Nn(")",n,i+1,r):-1<Fn.indexOf(o)&&(a=Nn(o,n,i+1,r)),-1===a)break;i=a}return-1}function qn(t){return function(t,n){for(var e=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=t.split(e).filter(Boolean),i=r.length,o=[],a=[],s=0;s<i;++s){var u=r[s].trim(),l=s;if("("===u)l=Nn(")",r,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<Fn.indexOf(u))l=Nn(u,r,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(r.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}(t,",")}var Ln=function(t){for(var n=5381,e=t.length;e;)n=33*n^t.charCodeAt(--e);return n>>>0};function Wn(t,n,e,r){var i,o,a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",t),e.nonce&&a.setAttribute("nonce",e.nonce),a.innerHTML=(i=t,o=n,e.original?o:o.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,n){var e=n.trim();return(e?qn(e):[""]).map(function(t){var n=t.trim();return 0===n.indexOf("@")?n:-1<n.indexOf(":global")?n.replace(/\:global/g,""):-1<n.indexOf(":host")?""+n.replace(/\:host/g,"."+i):n?"."+i+" "+n:"."+i}).join(", ")+" {"})),(r||document.head||document.body).appendChild(a),a}function Hn(o){var a,s="rCS"+Ln(o).toString(36),u=0;return{className:s,inject:function(t,n){void 0===n&&(n={});var e,r=function(t){if(t&&t.getRootNode){var n=t.getRootNode();if(11===n.nodeType)return n}}(t),i=0===u;return(r||i)&&(e=Wn(s,o,n,r)),i&&(a=e),r||++u,{destroy:function(){r?(t.removeChild(e),e=null):(0<u&&--u,0===u&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var Vn=function(t,n){return(Vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function Un(t,n){function e(){this.constructor=t}Vn(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var Zn=function(){return(Zn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var $n=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}Un(t,n);var e=t.prototype;return e.render=function(){var t=this.props,n=t.className,e=void 0===n?"":n,r=(t.cspNonce,function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}(t,["className","cspNonce"])),i=this.injector.className;return O(this.tag,Zn({ref:M(this,"element"),"data-styled-id":i,className:e+" "+i},r))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},t}(j);var Kn=function(t,n){return(Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function Jn(t,n){function e(){this.constructor=t}Kn(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var Qn=function(){return(Qn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function te(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function ne(t,n){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+n+'deg);transform-origin: 16px 16px"></path></svg>'}var ee,re,ie,oe,ae,se,ue,le,ce,pe,fe,de=(void 0===ee&&function(){if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData){var t=navigator.userAgentData,n=t.brands||t.uaList;return n&&n.length}}()?(ae=navigator.userAgentData,se=(ae.uaList||ae.brands).slice(),ue=ae.mobile||!1,le=se[0],ce={name:le.brand,version:le.version,majorVersion:-1,webkit:!1,webview:W(tt,function(t){return $(se,t)}),chromium:W(J,function(t){return $(se,t)})},pe={name:"unknown",version:"-1",majorVersion:-1},ce.webkit=!ce.chromium&&W(Q,function(t){return $(se,t)}),re&&(ie=re.platform.toLowerCase(),oe=H(nt,function(t){return new RegExp(""+t.test,"g").exec(ie)}),pe.name=oe?oe.id:ie,pe.version=re.platformVersion),W(K,function(t){var n=$(se,t);return n&&(ce.name=t.id,ce.version=re?re.uaFullVersion:n.version,1)}),"Linux armv8l"===navigator.platform?pe.name="android":ce.webkit&&(pe.name=ue?"ios":"mac"),"ios"===pe.name&&ce.webview&&(ce.version="-1"),pe.version=U(pe.version),ce.version=U(ce.version),pe.majorVersion=parseInt(pe.version,10),ce.majorVersion=parseInt(ce.version,10),{browser:ce,os:pe,isMobile:ue,isHints:!0}):et(ee)).browser.webkit,he=de&&(!!(fe=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase()))&&parseFloat(fe[1])<605),ge="moveable-",ve="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(e=ne(1,n=t),r=ne(2,n),i=45*Math.round(n/45)%180,"cursor:"+(o=135==i?"nwse-resize":45==i?"nesw-resize":90==i?"ew-resize":"ns-resize")+";cursor: url('"+e+"') 16 16, "+o+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+r+"') 2x) 16 16, "+o+";")+"\n}\n";var n,e,r,i,o}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(he?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",me=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],be=1e-7,xe=Math.pow(10,10),ye=-xe,Ee=["n","w","s","e","nw","ne","sw","se"],Se={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Me={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},we=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function Ce(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.map(function(t){return t.split(" ").map(function(t){return t?""+n+t:""}).join(" ")}).join(" ")}.apply(void 0,te([ge],t))}function De(t,n,e){return Gt(n,Ut(e,n),t,Ut(e.map(function(t){return-t}),n))}function Re(s){return Pe(ir(s,":before")).map(function(t,n){var e,r,i=bt(t),o=i.value,a=i.unit;return o*(e=s,r=0===n,"%"!==a?1:_e(e.ownerSVGElement)[r?"width":"height"]/100)})}function Pe(t){var n=t.transformOrigin;return n?n.split(" "):["0","0"]}function Oe(t,n,e){for(var r=document.body,i=!t||e?t:t.parentElement,o=!1,a="relative";i&&i!==r;){n===i&&(o=!0);var s=ir(i),u=s.transform;if("static"!==(a=s.position)||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function ze(t,n,e,r){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;r&&(s-=(o=(n||document.documentElement).getBoundingClientRect()).left,u-=o.top);var l,c,p=lt(s),f=!p;return f||"svg"===a?c=(l=Pe(e).map(function(t){return parseFloat(t)})).slice():(c=(l=he?Re(t):Pe(e).map(function(t){return parseFloat(t)})).slice(),f=!0,"g"===a?u=s=0:(s=(i=function(t,n){if(!t.getBBox)return[0,0];var e=t.getBBox(),r=_e(t.ownerSVGElement),i=e.x-r.x,o=e.y-r.y;return[i,o,n[0]-i,n[1]-o]}(t,l))[0],u=i[1],l[0]=i[2],l[1]=i[3])),{isSVG:p,hasOffset:f,offset:[s||0,u||0],origin:l,targetOrigin:c}}function Be(t,n,e){void 0===e&&(e=window.getComputedStyle(t));var r=window.getComputedStyle(document.body),i=r.position;if(!(n||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===e.position&&("auto"===e.top&&"auto"===e.bottom||(a=0),"auto"===e.left&&"auto"===e.right||(o=0)),[o,a]}function Ge(t,n){for(var e,r,i,o,a,s,u=t,l=[],c=!1,p=!1,f=3,d=Oe(n,n,!0).offsetParent;u&&!c;){var h=ir(u),g=u.tagName.toLowerCase(),v=h.position,m="fixed"===v,b=(s=h.transform,o=s&&"none"!==s?ct(s)?s:mt(s).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0],(a=void 0)===a&&(a=6===o.length),a?[o[0],o[1],0,o[2],o[3],0,o[4],o[5],1]:o),x=b.length;if(!p&&16===x){p=!0,f=4;for(var y=l.length,E=0;E<y;++E)l[E]=Bt(l[E],3,4)}p&&9===x&&(b=Bt(b,3,4));var S=ze(u,n,h,m),M=S.hasOffset,w=S.isSVG,C=S.origin,D=S.targetOrigin,R=S.offset,P=R[0],O=R[1];"svg"===g&&i&&l.push(function(t,n){var e=t.clientWidth,r=t.clientHeight,i=_e(t),o=i.width,a=i.height,s=e/o,u=r/a,l=t.preserveAspectRatio.baseVal,c=l.align,p=l.meetOrSlice,f=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),f[0]=o*g/2,f[1]=a*v/2,m=2===p?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(e-o)/2*g,h[1]=(r-a)/2*v)}var b=Vt(d,n);return b[n*(n-1)]=h[0],b[n*(n-1)+1]=h[1],De(b,n,f)}(u,f),Ht(f));var z=Oe(u,n),B=z.offsetParent,G=z.isEnd,T=z.isStatic;de&&M&&!w&&T&&("relative"===v||"static"===v)&&(P-=B.offsetLeft,O-=B.offsetTop,c=c||G);var A,_=0,I=0;if(M&&d!==B&&(_=B.clientLeft,I=B.clientTop),M&&B===document.body&&(P+=(A=Be(u,!1,h))[0],O+=A[1]),l.push(De(b,f,C),Ut(M?[P-u.scrollLeft+_,O-u.scrollTop+I]:[u,C],f)),i=i||b,e=e||C,r=r||D,c||m)break;u=B,c=G}return{offsetContainer:d,matrixes:l,targetMatrix:i=i||Ht(f),transformOrigin:e=e||[0,0],targetOrigin:r=r||[0,0],is3d:p}}function Te(t,n,e,r,i){var o;void 0===e&&(e=n);var a,s,u,l,c,p,f=0,d=0,h=0,g={};i?(f=i.width,d=i.height):t&&(a=ir(t),f=t.offsetWidth,d=t.offsetHeight,lt(f)&&(f=(o=We(t,a,!0))[0],d=o[1])),t&&(u=Xe((s=function(t,n,e,r){void 0===e&&(e=n);var i=Ge(t,n),o=i.matrixes,a=i.is3d,s=i.targetMatrix,u=i.transformOrigin,l=i.targetOrigin,c=Ge(i.offsetContainer,e),p=c.matrixes,f=c.is3d,d=r||f||a,h=d?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=n||document.body,m=s,b=Ht(h),x=Ht(h),y=Ht(h),E=Ht(h),S=o.length,M=Oe(v,v,!0).offsetParent;p.reverse(),o.reverse(),!a&&d&&(m=Bt(m,3,4),o.forEach(function(t,n){o[n]=Bt(t,3,4)}));!f&&d&&p.forEach(function(t,n){p[n]=Bt(t,3,4)});p.forEach(function(t){x=Tt(x,t,h)}),o.forEach(function(t,n){var e;S-2===n&&(y=b.slice()),S-1===n&&(E=b.slice()),ct(t[h*(h-1)])&&(e=function(t,n,e,r,i,o){var a,s=We(t,void 0,!0),u=s[0],l=s[1],c=n.getBoundingClientRect(),p=[0,0];n===document.body&&(p=Be(t,!0));var f=t.getBoundingClientRect(),d=f.left-c.left+n.scrollLeft-(n.clientLeft||0)+p[0],h=f.top-c.top+n.scrollTop-(n.clientTop||0)+p[1],g=f.width,v=f.height,m=Gt(e,i,o),b=Ye(m,u,l,e),x=b.left,y=b.top,E=b.width,S=b.height,M=Ie(m,r,e),w=_t(M,[x,y]),C=[d+w[0]*g/E,h+w[1]*v/S],D=[0,0],R=0;for(;++R<10;){var P=Ot(i,e);a=_t(Ie(P,C,e),Ie(P,M,e)),D[0]=a[0],D[1]=a[1];var O=Ye(Gt(e,i,Ut(D,e),o),u,l,e),z=O.left,B=O.top,G=z-d,T=B-h;if(Math.abs(G)<2&&Math.abs(T)<2)break;C[0]-=G,C[1]-=T}return D.map(function(t){return Math.round(t)})}(t[h*(h-1)],M,h,t[h*(h-1)+1],b,o[n+1]),t[h*(h-1)]=e[0],t[h*(h-1)+1]=e[1]),b=Tt(b,t,h)});var w=!g&&a;m=m||Ht(w?4:3);var C=Ae(g&&16===m.length?Bt(m,4,3):m,w);return{rootMatrix:x=Pt(x,h,h),beforeMatrix:y,offsetMatrix:E,allMatrix:b,targetMatrix:m,targetTransform:C,transformOrigin:u,targetOrigin:l,is3d:d}}(t,n,e,r)).allMatrix,s.transformOrigin,f,d),g=Qn(Qn({},s),u),l=Xe(s.allMatrix,[50,50],100,100),c=[l.pos1,l.pos2],h=Ct(0<(p=l.direction)?c[0]:c[1],0<p?c[1]:c[0]));var v=r?4:3;return Qn({width:f,height:d,rotation:h,rootMatrix:Ht(v),beforeMatrix:Ht(v),offsetMatrix:Ht(v),allMatrix:Ht(v),targetMatrix:Ht(v),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},g)}function Ae(t,n){return void 0===n&&(n=9<t.length),(n?"matrix3d":"matrix")+"("+It(t,!n).join(",")+")"}function _e(t){var n=t.clientWidth,e=t.clientHeight,r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||n,height:i.height||e}}function Ie(t,n,e){return kt(t,zt(n,e),e)}function ke(n,t,e,r){return[[0,0],[t,0],[0,e],[t,e]].map(function(t){return Ie(n,t,r)})}function je(t){var n=t.map(function(t){return t[0]}),e=t.map(function(t){return t[1]}),r=Math.min.apply(Math,n),i=Math.min.apply(Math,e),o=Math.max.apply(Math,n),a=Math.max.apply(Math,e);return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function Ye(t,n,e,r){return je(ke(t,n,e,r))}function Xe(t,n,e,r){var i=16===t.length?4:3,o=ke(t,e,r,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],p=l[1],f=o[2],d=f[0],h=f[1],g=o[3],v=g[0],m=g[1],b=Ie(t,n,i),x=b[0],y=b[1],E=Math.min(s,c,d,v),S=Math.min(u,p,h,m);return{left:E,top:S,right:Math.max(s,c,d,v),bottom:Math.max(u,p,h,m),origin:[x=x-E||0,y=y-S||0],pos1:[s=s-E||0,u=u-S||0],pos2:[c=c-E||0,p=p-S||0],pos3:[d=d-E||0,h=h-S||0],pos4:[v=v-E||0,m=m-S||0],direction:Dt(o)}}function Fe(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ne(t,n){return Fe([n[0]-t[0],n[1]-t[1]])}function qe(t,n,e){void 0===e&&(e=Ct(t,n));var r=Ne(t,n);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+e+"rad)",width:r+"px"}}function Le(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=n.length;return{transform:"translate("+n.reduce(function(t,n){return t+n[0]},0)/r+"px, "+n.reduce(function(t,n){return t+n[1]},0)/r+"px) rotate("+t+"rad)"}}function We(t,n,e,r){void 0===n&&(n=window.getComputedStyle(t)),void 0===r&&(r=e||"border-box"===n.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!lt(i);if((e||r)&&a)return[i,o];if(a||"svg"===t.tagName.toLowerCase())return i=t.clientWidth,o=t.clientHeight,e||r?[i+(parseFloat(n.borderLeftWidth)||0)+(parseFloat(n.borderRightWidth)||0),o+(parseFloat(n.borderTopWidth)||0)+(parseFloat(n.borderBottomWidth)||0)]:[i-(parseFloat(n.paddingLeft)||0)-(parseFloat(n.paddingRight)||0),o-(parseFloat(n.paddingTop)||0)-(parseFloat(n.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function He(t,n,e,r,i,o){var a,s,u=1,l=[0,0],c=Ve(),p=Ve(),f=Ve(),d=Te(n,e,i,!1,o);return n&&(a=d.is3d?4:3,u=(s=Xe(d.offsetMatrix,At(d.transformOrigin,function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=[],r=t[n*n-1],i=0;i<n-1;++i)e[i]=t[n*(n-1)+i]/r;return e[n-1]=0,e}(d.targetMatrix,a)),d.width,d.height)).direction,l=At(s.origin,[s.left-d.left,s.top-d.top]),c=Ue(n),p=Ue(Oe(r,r,!0).offsetParent||document.body,!0),t&&(f=Ue(t))),Qn({targetClientRect:c,containerClientRect:p,moveableClientRect:f,beforeDirection:u,beforeOrigin:l,target:n},d)}function Ve(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Ue(t,n){var e=t.getBoundingClientRect(),r=e.left,i=e.width,o=e.top,a=e.bottom,s={left:r,right:e.right,top:o,bottom:a,width:i,height:e.height};return n&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function Ze(t){if(t){var n=t.getAttribute("data-direction");if(n){var e=[0,0];return-1<n.indexOf("w")&&(e[0]=-1),-1<n.indexOf("e")&&(e[0]=1),-1<n.indexOf("n")&&(e[1]=-1),-1<n.indexOf("s")&&(e[1]=1),e}}}function $e(t,n){return[At(n,t[0]),At(n,t[1]),At(n,t[2]),At(n,t[3])]}function Ke(t){var n=t.left,e=t.top;return $e([t.pos1,t.pos2,t.pos3,t.pos4],[n,e])}function Je(t,n){return n?Math.round(t/n)*n:t}function Qe(e,r){return e.forEach(function(t,n){e[n]=Je(e[n],r)}),e}function tr(t,n){t[n]&&(t[n].unset(),t[n]=null)}function nr(t,n,e){var r=n.datas;r.datas||(r.datas={});var i=Qn(Qn({},e),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,datas:r.datas});return r.isStartEvent?r.lastEvent=i:r.isStartEvent=!0,i}function er(t,n,e){var r=n.datas,i="isDrag"in e?e.isDrag:n.isDrag;return r.datas||(r.datas={}),Qn(Qn({isDrag:i},e),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:n.isDouble,datas:r.datas})}function rr(t,n,e,r){return t.triggerEvent(n,e,r)}function ir(t,n){return window.getComputedStyle(t,n)}function or(t,e,r){var i={},o={};return t.filter(function(n){var t=n.name;if(i[t]||!e.some(function(t){return n[t]}))return!1;if(!r&&n.ableGroup){if(o[n.ableGroup])return!1;o[n.ableGroup]=!0}return i[t]=!0})}function ar(t,n,e){return t*(n?e:1/e)}function sr(t,n,e){return t*(n?1/e:e)}function ur(t,n){return t===n||null==t&&null==n}function lr(o,a){var s=[],u=[];return o.forEach(function(t,n){var e=a(t,n,o),r=u.indexOf(e),i=s[r]||[];-1===r&&(u.push(e),s.push(i)),i.push(t)}),s}function cr(t){return t.reduce(function(t,n){return t.concat(n)},[])}function pr(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(n)-Math.abs(t)}),t[0]}function fr(t,n,e){return kt(Ot(t,e),zt(n,e),e)}function dr(t,n){var e=t.is3d?4:3,r=fr(t.rootMatrix,[n.distX,n.distY],e);return n.distX=r[0],n.distY=r[1],n}function hr(t,n,e,r,i){return _t(Ie(t,At(e,n),i),r)}function gr(t,n,e){return e?t/n*100+"%":t+"px"}function vr(t){return Math.abs(t)<=be?0:t}function mr(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:Rt(t.inputEvent.target,Ce("direction"))}function br(t){var n={};for(var e in t)n[t[e]]=e;return n}function xr(t){return t?((n=t)&&ct(n)&&(pt(n)||"length"in n)?[].slice.call(t):[t]).map(function(t){return t?!ft(t)&&"current"in t?t.current:t:null}):[];var n}var yr={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(e,r){var t=r.datas,n=r.targets,i=r.angle,o=r.originalDatas,a=e.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(n?"Group":"")+"Start",c="drag"+(n?"Group":"")+"ControlStart",p=(!0===s?e.controlAbles:u.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),f=nr(e,r,{});n&&(f.targets=n);var d=rr(e,l,f);t.isPinch=!1!==d,t.ables=p;var h=t.isPinch;return!!h&&(p.forEach(function(t){var n;o[t.name]=o[t.name]||{},t[c]&&(n=Qn(Qn({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](e,n))}),e.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},h)},pinch:function(n,e){var t=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,a=e.inputEvent,s=e.targets,u=e.angle;if(t.isPinch){var l=i*(1-1/r),c=nr(n,e,{});s&&(c.targets=s),rr(n,"onPinch"+(s?"Group":""),c);var p=t.ables,f="drag"+(s?"Group":"")+"Control";return p.forEach(function(t){t[f]&&t[f](n,Qn(Qn({},e),{datas:o[t.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,a=e.originalDatas;if(t.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=er(n,e,{isDrag:r});o&&(u.targets=o),rr(n,s,u);var l=t.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(t){t[c]&&t[c](n,Qn(Qn({},e),{isDrag:r,datas:a[t.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,n){return this.pinchStart(t,Qn(Qn({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,Qn(Qn({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,Qn(Qn({},n),{targets:t.props.targets}))}};function Er(t,n,e,r,i){var o=n.gesto.move(e,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return Qn(Qn({},i?dr(n,o):o),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var Sr=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var e=n.originalDatas;return(this.datas=e).draggable||(e.draggable={}),Qn(Qn({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var e,r;return this.isFlag?(e=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],e=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=e,clientY:this.prevY=r,inputEvent:n,isDrag:this.isDrag,distX:e-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Mr(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas,a=n.inputEvent,s=n.isPinch,u=n.clientX,l=n.clientY,c=n.distX,p=n.distY;return t.moveables.map(function(t,n){return o[n]=o[n]||{},o[n][e]=o[n][e]||{},{inputEvent:a,datas:o[n][e],originalDatas:o[n],isPinch:s,clientX:u,clientY:l,distX:c,distY:p}})}function wr(t,o,a,s,n,u){var l=!!a.match(/Start$/g),c=!!a.match(/End$/g),p=n.isPinch,f=n.datas,e=Mr(t,o.name,n),d=t.moveables,r=e.map(function(t,n){var e=d[n],r=t,r=l?(new Sr).dragStart(s,t):(e.state.gesto||(e.state.gesto=f.childGestos[n]),Er(t,e.state,s,p,u)),i=o[a](e,Qn(Qn({},r),{parentFlag:!0}));return c&&(e.state.gesto=null),i});return l&&(f.childGestos=d.map(function(t){return t.state.gesto})),r}function Cr(t,o,a,n,s,u){void 0===s&&(s=function(t,n){return n});var l=!!a.match(/End$/g),e=Mr(t,o.name,n),c=t.moveables;return e.map(function(t,n){var e=c[n],r=s(e,t),i=o[a](e,Qn(Qn({},r),{parentFlag:!0}));return i&&u&&u(e,t,i,n),l&&(e.state.gesto=null),i})}function Dr(t,n){var e=n.clientX,r=n.clientY,i=n.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=_t(fr(s,[e-a.left,r-a.top],u?4:3),l),p=Tr({datas:i,distX:c[0],distY:c[1]});return[p[0],p[1]]}function Rr(t,n){var e=n.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,l=r.origin,c=r.offsetMatrix,p=r.targetMatrix,f=r.transformOrigin,d=a?4:3;e.is3d=a,e.matrix=i,e.targetMatrix=p,e.beforeMatrix=o,e.offsetMatrix=c,e.transformOrigin=f,e.inverseMatrix=Ot(i,d),e.inverseBeforeMatrix=Ot(o,d),e.absoluteOrigin=zt(At([s,u],l),d),e.startDragBeforeDist=kt(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=kt(e.inverseMatrix,e.absoluteOrigin,d)}function Pr(t,n){var e,r,i,o,a,s,u,l,c,p,f,d=t.datas,h=t.originalDatas.beforeRenderable,g=d.transformIndex,v=h.nextTransforms,m=h.nextTransformAppendedIndexes,b=-1===g?v.length:g+m.filter(function(t){return t<g}).length,x=(r=b,i=(e=v).slice(0,r<0?void 0:r),o=e[r]||"",a=r<0?[]:e.slice(r),s=nn(i),u=nn([o]),l=nn(a),c=tn(s),p=tn(l),f=Tt(c,p,4),{transforms:e,beforeFunctionMatrix:c,targetFunctionMatrix:tn(u),afterFunctionMatrix:p,allFunctionMatrix:f,beforeFunctions:s,targetFunction:u[0],afterFunctions:l,beforeFunctionTexts:i,targetFunctionText:o,afterFunctionTexts:a}),y=x.targetFunction,E="rotate"===n?"rotateZ":n;d.beforeFunctionTexts=x.beforeFunctionTexts,d.afterFunctionTexts=x.afterFunctionTexts,d.beforeTransform=x.beforeFunctionMatrix,d.targetTansform=x.targetFunctionMatrix,d.afterTransform=x.afterFunctionMatrix,d.targetAllTransform=x.allFunctionMatrix,y.functionName===E?(d.afterFunctionTexts.splice(0,1),d.isAppendTransform=!1):(d.isAppendTransform=!0,h.nextTransformAppendedIndexes=te(m,[b]))}function Or(t,n,e){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?e:n)+" "+t.afterFunctionTexts.join(" ")}function zr(t){var n=t.datas,e=Gr({datas:n,distX:t.distX,distY:t.distY});return kt(Br(n,function(t,n){for(var e=Ht(n),r=0;r<n-1;++r)e[n*(n-1)+r]=t[r]||0;return e}([e[0],e[1]],4)),zt([0,0,0],4),4)}function Br(t,n,e){var r=t.beforeTransform,i=t.afterTransform,o=t.targetAllTransform,a=e?Tt(o,n,4):Tt(n,o,4),s=Tt(Ot(r,4),a,4);return Tt(s,Ot(i,4),4)}function Gr(t){var n=t.datas,e=t.distX,r=t.distY,i=n.inverseBeforeMatrix,o=n.is3d,a=n.startDragBeforeDist,s=o?4:3;return _t(kt(i,At(n.absoluteOrigin,[e,r]),s),a)}function Tr(t,n){var e=t.datas,r=t.distX,i=t.distY,o=e.inverseBeforeMatrix,a=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,l=e.startDragDist,c=s?4:3;return _t(kt(n?o:a,At(e.absoluteOrigin,[r,i]),c),n?u:l)}function Ar(t){var n=[];return 0<=t[1]&&(0<=t[0]&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(0<=t[0]&&n.push(1),t[0]<=0&&n.push(0)),n}function _r(n,t){return Ar(t).map(function(t){return n[t]})}function Ir(t,n){var e=_r(t,n);return[wt(e.map(function(t){return t[0]})),wt(e.map(function(t){return t[1]}))]}function kr(t,n){return Ir(t,n.map(function(t){return-t}))}function jr(t,n,e,r){return Tt(t,De(n,r,e),r)}function Yr(t,n,e){var r=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,a=n.beforeTransform,s=n.afterTransform,u=o?4:3;return jr(i,Bt(Tt(Tt(a,tn(nn([e])),4),s,4),4,u),r,u)}function Xr(e){var r=e.originalDatas.beforeRenderable;return{setTransform:function(t,n){void 0===n&&(n=-1),r.startTransforms=pt(t)?t:gt(t),Nr(e,n)},setTransformIndex:function(t){Nr(e,t)}}}function Fr(t){Nr(t,-1)}function Nr(t,n){var e,r,i=t.originalDatas.beforeRenderable,o=t.datas;-1===(o.transformIndex=n)||(e=i.startTransforms[n])&&(r=nn([e]),o.startValue=r[0].functionValue)}function qr(t,n){t.originalDatas.beforeRenderable.nextTransforms=gt(n)}function Lr(t,n,e,r,i){return qr(i,n),{transform:n,drag:Hi.drag(t,Er(i,t.state,e,r,!1))}}function Wr(t,n,e,r,i){var o=t.state,a=o.left,s=o.top,u=t.props.groupable,l=u?a:0,c=u?s:0,p=_t(e,Vr(t,r,Yr(t.state,i,n)));return _t(p,[l,c])}function Hr(t){var n=t.state,e=n.width,r=n.height,i=n.transformOrigin;return[i[0]/(e/2)-1,i[1]/(r/2)-1]}function Vr(t,n,e){void 0===e&&(e=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,a=r.is3d?4:3;return Ie(e,[i/2*(1+n[0]),o/2*(1+n[1])],a)}function Ur(t,n,e,r,i,o){var a,s,u,l,c,p,f,d,h,g=t.props.groupable,v=t.state,m=v.transformOrigin,b=v.targetMatrix,x=v.offsetMatrix,y=v.is3d,E=v.width,S=v.height,M=v.left,w=v.top,C=y?4:3,D=g?M:0,R=g?w:0,P=jr(x,b,(s=n,u=e,void 0===(l=E)&&(l=s),void 0===(c=S)&&(c=u),void 0===(p=m)&&(p=[0,0]),(a=o)?a.map(function(t,n){var e=bt(t),r=e.value,i=e.unit,o=n?c:l,a=n?u:s;return"%"===t||isNaN(r)?a*(o?p[n]/o:0):"%"!==i?r:a*r/100}):p),C);return _t((f=i,d=r,h=kr(ke(P,n,e,C),d),[f[0]-h[0],f[1]-h[1]]),[D,R])}function Zr(t,n){if(!n[0]&&!n[1])return[0,0];var e=[-1,-1];return[n[0]?n[0]:-1*e[0],n[1]?n[1]:-1*e[1]]}function $r(t,n){return kr(Ke(t.state),n)}function Kr(t,n,f,d,e,r){var h=e[0],g=e[1],i=r[0],o=r[1],v=[],a=d?0:1,m="vertical"===n?"horizontal":"vertical",b=lr(t.filter(function(t){return t.type===n}),function(t){return t.element}).map(function(t){return t[0]}).filter(function(t){var n=t.pos,e=t.sizes;return n[a]<=o&&i<=n[a]+e[a]});return b.forEach(function(t){var c=t.pos[d],p=c+t.sizes[d];b.forEach(function(t){var n,e=t.pos,r=t.sizes,i=t.element,o=e[d],a=o+r[d],s=0,u=0,l=!0;if(p<=o)h<(s=a-(u=p-o))-f&&(l=!1);else{if(!(a<=c))return;(s=o-(u=c-a))+f<g&&(l=!1)}l&&v.push({pos:"vertical"==m?[s,e[1]]:[e[0],s],element:i,sizes:r,size:0,type:m,gap:u,gapGuidelines:b}),p<=h&&g<=o&&(0<=Je(h-((n=(o+p-(g-h))/2)-f),.1)&&v.push({pos:"vertical"==m?[n,e[1]]:[e[0],n],element:i,sizes:r,size:0,type:m,gap:p-h,gapGuidelines:b}))})}),v}function Jr(n,e,r,t,i){return t&&t.forEach(function(t){n.push({type:"horizontal",pos:[0,Je(t,.1)],size:e})}),i&&i.forEach(function(t){n.push({type:"vertical",pos:[Je(t,.1),0],size:r})}),n}function Qr(t,n,e,r,i){var o,a,s,u,l,c,p,f,d,h,g,v,m,b,x,y,E,S,M,w,C,D,R,P,O=(f=(o=t).state,d=f.guidelines,h=f.containerClientRect,g=h.scrollHeight,v=h.scrollWidth,m=o.props,b=m.snapHorizontal,x=void 0===b||b,y=m.snapVertical,E=void 0===y||y,S=m.snapGap,M=void 0===S||S,w=m.verticalGuidelines,C=m.horizontalGuidelines,D=m.snapThreshold,R=void 0===D?5:D,P=te(d),M&&(s=(a=je(Ke(o.state))).top,u=a.left,l=a.bottom,c=a.right,p=d.filter(function(t){return t.element}),P.push.apply(P,te(Kr(p,"horizontal",R,0,[u,c],[s,l]),Kr(p,"vertical",R,1,[s,l],[u,c])))),Jr(P,v,g,x&&C,E&&w),P),z=t.props,B=z.snapElement,G=void 0===B||B;return ti(O,n,e,{snapThreshold:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.length-1,r=0;r<e;++r){var i=t[r];if(!lt(i))return i}return t[e]}(i,z.snapThreshold,5),snapCenter:r,snapElement:G})}function ti(t,n,e,r){return{vertical:ri(t,"vertical",n,r),horizontal:ri(t,"horizontal",e,r)}}function ni(t,n,e,r){var i=t.props.snapCenter&&e,o=["left","right"],a=["top","bottom"];return i&&(o.push("center"),a.push("middle")),o=o.filter(function(t){return t in n}),a=a.filter(function(t){return t in n}),Qr(t,o.map(function(t){return n[t]}),a.map(function(t){return n[t]}),i,r)}function ei(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],r=e.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:n,offset:i,dist:o,pos:e.pos,guideline:a}}function ri(e,a,t,n){var r=void 0===n?{}:n,i=r.snapThreshold,s=void 0===i?5:i,u=r.snapElement,l=r.snapCenter;if(!e||!e.length)return{isSnap:!1,index:-1,posInfos:[]};var o="vertical"===a?0:1,c=t.map(function(r,t){var n=e.map(function(t){var n=t.pos,e=r-n[o];return{offset:e,dist:Math.abs(e),guideline:t}}).filter(function(t){var n=t.guideline,e=t.dist,r=n.type,i=n.center,o=n.element;return!(!u&&o||!l&&i||r!==a||s<e)}).sort(function(t,n){return t.dist-n.dist});return{pos:r,index:t,guidelineInfos:n}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist}),p=0<c.length;return{isSnap:p,index:p?c[0].index:-1,posInfos:c}}function ii(t,n){var e=Math.abs(t.offset),r=Math.abs(n.offset);return t.isBound&&n.isBound?r-e:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?r-e:t.isSnap?-1:n.isSnap||e<be?1:r<be?-1:e-r}function oi(t,a){return t.slice().sort(function(t,n){var e=t.sign[a],r=n.sign[a],i=t.offset[a],o=n.offset[a];return e?r?ii({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function ai(t,n){var e=wt([n[0][0],n[1][0]]),r=wt([n[0][1],n[1][1]]);return{vertical:e<=t[0],horizontal:r<=t[1]}}function si(t,n){var e,r,i=n[0],o=n[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<be&&(a=0),Math.abs(s)<be&&(s=0),r=a?(e=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(e=i[0],t[0]),e-r}function ui(t,e,r){void 0===r&&(r=be);var i=si(t[0],e)<=0;return t.slice(1).every(function(t){var n=si(t,e);return n<=0==i||Math.abs(n)<=r})}function li(t,n,e,r,i){return void 0===i&&(i=0),r&&n-i<=t||!r&&t<=e+i?{isBound:!0,offset:r?n-t:e-t}:{isBound:!1,offset:0}}function ci(t,n,e,r,i){var o=t[0],a=t[1],s=n[0],u=n[1],l=vr(a[1]-o[1]),c=vr(a[0]-o[0]),p=vr(u[1]-s[1]);if(!vr(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return li(l/c*(s[0]-o[0])+o[1],s[1],u[1],e,r);var f=s[0]-o[0];return{isBound:d=Math.abs(f)<=(r||0),offset:d?f:0}}if(p)return{isBound:!1,offset:0};if(i&&!c)return{isBound:!1,offset:0};if(l)return li((s[1]-o[1])/(l/c)+o[0],s[0],u[0],e,r);var d,f=s[1]-o[1];return{isBound:d=Math.abs(f)<=(r||0),offset:d?f:0}}function pi(c,t,p,f){return t.map(function(t){var e=t[0],n=t[1],r=t[2],i=function(t,n,e){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=r.left,o=r.top,a=r.width,s=r.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],p=[[i,o+s],[i+a,o+s]],f=ai(e,n),d=f.horizontal,h=f.vertical;if(ui([e,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=ci(n,l,h),v=ci(n,p,h),m=ci(n,u,d),b=ci(n,c,d),x=g.isBound&&v.isBound,y=g.isBound||v.isBound,E=m.isBound&&b.isBound,S=m.isBound||b.isBound,M=pr(g.offset,v.offset),w=pr(m.offset,b.offset),C=[0,0],D=!1;return{isAllBound:Math.abs(w)<Math.abs(M)?(C=[M,0],D=y,x):(C=[0,w],D=S,E),isVerticalBound:y,isHorizontalBound:S,isBound:D,offset:C}}(c,[n,r],p),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=Tr({datas:f,distX:a[0],distY:a[1]}).map(function(t,n){return t*(e[n]?2/e[n]:0)});return{sign:e,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function fi(t,n,e){var r,i,o,a,s,u,l,c,p,f,d,h,g,v=pi(t,di(n,[0,0],!1).map(function(t){var n=t[0],e=t[1],r=t[2];return[n.map(function(t){return 2*Math.abs(t)}),e,r]}),Ir(n,[0,0]),e),m=oi(v,0),b=oi(v,1),x=0,y=0,E=m.isVerticalBound||b.isVerticalBound,S=m.isHorizontalBound||b.isHorizontalBound;return(E||S)&&(i={datas:e,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,l=a.beforeMatrix,c=a.matrix,p=a.is3d,f=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=p?4:3,x=(r=_t(kt(o?l:c,At(o?f:d,[s,u]),g),h))[0],y=r[1]),{vertical:{isBound:E,offset:x},horizontal:{isBound:S,offset:y}}}function di(i,t,n){return r=n,o=[],a=(e=t)[0],s=e[1],a&&s?o.push([[0,2*s],e,[-a,s]],[[2*a,0],e,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),r&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),r&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var n=t[0],e=t[1],r=t[2];return[n,Ir(i,e),Ir(i,r)]});var e,r,o,a,s}function hi(t,n,e,r){var i=r?t.map(function(t){return Nt(t,r)}):t,o=te([e],n);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t,n){return!ui(o,t)})}function gi(t,n,e,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,p=s-r[0],f=s+l-r[0],d=u-r[1],h=u+c-r[1],g=[[p,d],[f,d],[p,h],[f,h]],v=Ir(e,[0,0]);if(!hi(e,g,v,0))return[];var m=[],b=g.map(function(t){return[Fe(t),Ct([0,0],t)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(t){var i=Ct([0,0],function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];if(!r)return[n[0],0];if(!i)return[0,n[1]];var o=i/r,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];if(!r)return Math.abs(n[0]);if(!i)return Math.abs(n[1]);var o=i/r;return Math.abs((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var n=t[0];return n&&o<=n}).map(function(t){var n=t[0],e=t[1],r=Math.acos(n?o/n:0);return[a+(e+r)-i,a+(e-r)-i]}).reduce(function(t,n){return t.push.apply(t,n),t},[]).filter(function(t){return!hi(n,g,v,t)}).map(function(t){return Je(180*t/Math.PI,be)}))}),m}function vi(t,n,e){var r=t||{},i=r.left,o=r.top,a=r.right,s=r.bottom,u={left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===s?1/0:s};return{vertical:mi(u,n,!0),horizontal:mi(u,e,!1)}}function mi(t,n,e){var r=t[e?"left":"top"],i=t[e?"right":"bottom"],o=Math.min.apply(Math,n),a=Math.max.apply(Math,n),s=[];return o<r+1&&s.push({isBound:!0,offset:o-r,pos:r}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)})}function bi(t,n,e){return(e?t.map(function(t){return Nt(t,e)}):t).some(function(t){return t[0]<n.left&&.1<Math.abs(t[0]-n.left)||t[0]>n.right&&.1<Math.abs(t[0]-n.right)||t[1]<n.top&&.1<Math.abs(t[1]-n.top)||t[1]>n.bottom&&.1<Math.abs(t[1]-n.bottom)})}function xi(t,l,e,n,r){var i=t.props.bounds,c=r*Math.PI/180;if(!i)return[];var o=i.left,a=void 0===o?-1/0:o,s=i.top,u=void 0===s?-1/0:s,p=i.right,f=void 0===p?1/0:p,d=i.bottom,h=void 0===d?1/0:d,g=a-n[0],v=f-n[0],m=u-n[1],b=h-n[1],x={left:g,top:m,right:v,bottom:b};if(!bi(e,x,0))return[];var y=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,n){var s=t[0],u=t[1];e.forEach(function(t){var e,n,r,i,o,a=Ct([0,0],t);y.push.apply(y,(n=s,r=u,i=Fe(e=t),[o=Math.sqrt(i*i-n*n)||0,-o].sort(function(t,n){return Math.abs(t-e[r?0:1])-Math.abs(n-e[r?0:1])}).map(function(t){return Ct([0,0],r?[t,n]:[n,t])}).map(function(t){return c+t-a}).filter(function(t){return!bi(l,x,t)}).map(function(t){return Je(180*t/Math.PI,be)})))})}),y}function yi(t,n,e){var r=Ie(t,[n.clientLeft,n.clientTop],e);return[n.left+r[0],n.top+r[1]]}function Ei(t){var n,e,r,i,o,a,s,u,l,g,c,p,f,d,v,m,h,b,x,y,E,S,M,w,C=t.state;C.guidelines&&C.guidelines.length||(r=void 0===(e=(n=t.props).horizontalGuidelines)?[]:e,o=void 0===(i=n.verticalGuidelines)?[]:i,s=void 0===(a=n.elementGuidelines)?[]:a,u=n.bounds,l=n.innerBounds,g=n.snapCenter,(l||u||r.length||o.length||s.length)&&(c=C.containerClientRect,f=(p=C.targetClientRect).top,d=p.left,v=C.rootMatrix,m=C.is3d?4:3,h=yi(v,c,m),b=h[0],x=h[1],E=_t([(y=cn(Ke(C))).minX,y.minY],fr(v,[d-b,f-x],m)).map(function(t){return n=t,Math.round(n%1==-.5?n-1:n);var n}),S=E[0],M=E[1],w=[],s.forEach(function(t){var n=t.getBoundingClientRect(),e=n.left-b,r=n.top-x,i=r+n.height,o=e+n.width,a=fr(v,[e,r],m),s=a[0],u=a[1],l=fr(v,[o,i],m),c=l[0],p=l[1],f=c-s,d=p-u,h=[f,d];w.push({type:"vertical",element:t,pos:[Je(s+S,.1),u],size:d,sizes:h}),w.push({type:"vertical",element:t,pos:[Je(c+S,.1),u],size:d,sizes:h}),w.push({type:"horizontal",element:t,pos:[s,Je(u+M,.1)],size:f,sizes:h}),w.push({type:"horizontal",element:t,pos:[s,Je(p+M,.1)],size:f,sizes:h}),g&&(w.push({type:"vertical",element:t,pos:[Je((s+c)/2+S,.1),u],size:d,sizes:h,center:!0}),w.push({type:"horizontal",element:t,pos:[s,Je((u+p)/2+M,.1)],size:f,sizes:h,center:!0}))}),C.guidelines=w,C.enableSnap=!0))}function Si(t,n){var e=t.props,r=e.snappable,i=e.bounds,o=e.innerBounds,a=e.verticalGuidelines,s=e.horizontalGuidelines,u=t.state,l=u.guidelines,c=u.enableSnap;return r&&c&&!(n&&!0!==r&&r.indexOf(n)<0)&&!!(i||o||l&&l.length||a&&a.length||s&&s.length)}function Mi(t,n,e,r,i){var o=function(t,n,e,r){var i=n[0]-t[0],o=n[1]-t[1];Math.abs(i)<be&&(i=0);Math.abs(o)<be&&(o=0);if(!i)return r?[0,0]:[0,e];if(!o)return r?[e,0]:[0,0];var a=o/i,s=t[1]-a*t[0];{if(r){var u=a*(n[0]+e)+s;return[e,u-n[1]]}return[(n[1]+e-s)/a-n[0],e]}}(t,n,e,r);if(!o)return[0,0];var a=Tr({datas:i,distX:o[0],distY:o[1]});return[a[0],a[1]]}function wi(t,n,e,r,i,o){var a=ke(t,n,e,o?4:3);return $e(a,_t(r,kr(a,i)))}function Ci(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function Di(t,n){return t.isBound?t.offset:n.isSnap?ei(n).offset:0}function Ri(t,n,e,r){var i=function(t,n,e){var r=t.props.bounds||{},i=r.left,o=void 0===i?-1/0:i,a=r.top,s=void 0===a?-1/0:a,u=r.right,l=void 0===u?1/0:u,c=r.bottom,p=void 0===c?1/0:c,f=e[0],d=e[1],h=_t(e,n),g=h[0],v=h[1];Math.abs(g)<be&&(g=0),Math.abs(v)<be&&(v=0);var m,b,x,y,E,S=0<v,M=0<g,w={isBound:!1,offset:0,pos:0},C={isBound:!1,offset:0,pos:0};return 0===g&&0===v||(0===g?S?p<d&&(C.pos=p,C.offset=d-p):d<s&&(C.pos=s,C.offset=d-s):0===v?M?l<f&&(w.pos=l,w.offset=f-l):f<o&&(w.pos=o,w.offset=f-o):(m=v/g,b=e[1]-m*f,y=x=0,E=!1,M&&l<=f?(x=m*l+b,y=l,E=!0):!M&&f<=o&&(x=m*o+b,y=o,E=!0),E&&(x<s||p<x)&&(E=!1),E||(S&&p<=d?(y=((x=p)-b)/m,E=!0):!S&&d<=s&&(y=((x=s)-b)/m,E=!0)),E&&(w.isBound=!0,w.pos=y,w.offset=f-y,C.isBound=!0,C.pos=x,C.offset=d-x))),{vertical:w,horizontal:C}}(t,n,e),o=i.horizontal,a=i.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,e){var r=e[0],i=e[1],o=n[0],a=n[1],s=_t(e,n),u=s[0],l=0<(p=s[1]),c=0<u,u=vr(u),p=vr(p),f={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===p)return{vertical:f,horizontal:d};var h=Qr(t,u?[r]:[],p?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var n=t.pos;return c?o<=n:n<=o}),v.posInfos.filter(function(t){var n=t.pos;return l?a<=n:n<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,x,y,E,S=ei(g),M=S.isSnap,w=S.guideline,C=ei(v),D=C.isSnap,R=C.guideline,P=D?R.pos[1]:0,O=M?w.pos[0]:0;return 0===u?D&&(d.isSnap=!0,d.pos=R.pos[1],d.offset=i-d.pos):0===p?M&&(f.isSnap=!0,f.pos=O,f.offset=r-O):(m=p/u,b=e[1]-m*r,y=x=0,E=!1,M?(x=m*(y=O)+b,E=!0):D&&(y=((x=P)-b)/m,E=!0),E&&(f.isSnap=!0,f.pos=y,f.offset=r-y,d.isSnap=!0,d.pos=x,d.offset=i-x)),{vertical:f,horizontal:d}}(t,n,e),u=s.horizontal,l=s.vertical,c=Ci(o,u),p=Ci(a,l),f=Math.abs(c),d=Math.abs(p);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:f},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:p,dist:d}}}function Pi(t,n,e,r){void 0===r&&(r=e);var i=vi(t.props.bounds,r.map(function(t){return t[0]}),r.map(function(t){return t[1]})),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Qr(t,e.map(function(t){return t[0]}),e.map(function(t){return t[1]})),u=s.horizontal,l=s.vertical,c=Di(o[0],u),p=Di(a[0],l),f=Math.abs(c),d=Math.abs(p);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:f,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:d,bounds:a,snap:l}}}function Oi(t,n,e,r,i){void 0===i&&(i={});var o=vi(n,e,r),a=o.horizontal,s=o.vertical,u=i.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ti(t,e,r,i),l=u.horizontal,c=u.vertical,p=Di(a[0],l),f=Di(s[0],c),d=Math.abs(p),h=Math.abs(f);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:d,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:h,bounds:s,snap:c}}}function zi(t){return t?t/Math.abs(t):0}function Bi(B,G,t,T,A,_){return t.map(function(t){var n=t[0],e=t[1],r=Ir(G,n),i=Ir(G,e),o=T?Ri(B,r,i,A):Pi(B,A,[i]),a=o.horizontal,s=a.offset,u=a.isBound,l=a.isSnap,c=o.vertical,p=c.offset,f=c.isBound,d=c.isSnap,h=_t(e,n);if(!p&&!s)return{isBound:f||u,isSnap:d||l,sign:h,offset:[0,0]};var g,v,m,b,x,y,E,S,M,w,C,D,R,P=(g=o,v=T,m=Ct(r,i)/Math.PI*180,b=g.vertical,x=b.isBound,y=b.isSnap,E=b.dist,S=g.horizontal,M=S.isBound,w=S.isSnap,D=(C=m%180)<3||177<C,R=87<C&&C<93,S.dist<E&&(x||y&&!R&&(!v||!D))?"vertical":!M&&(!w||D||v&&R)?"":"horizontal");if(!P)return{sign:h,isBound:!1,isSnap:!1,offset:[0,0]};var O="vertical"==P,z=Mi(r,i,-(O?p:s),O,_).map(function(t,n){return t*(h[n]?2/h[n]:0)});return{sign:h,isBound:O?f:u,isSnap:O?d:l,offset:z}})}function Gi(t,n,e,r,i,o,a,s){for(var u,l,c,p,f,d,h,g,v,m,b,x,y,E,S,M,w,C,D,R,P,O,z,B,G,T,A,_,I,k,j,Y,X,F,N,q,L,W,H,V,U=Ke(t.state),Z=t.props.keepRatio,$=0,K=0,J=0;J<2;++J){var Q,tt,nt=n($,K),et=(u=t,l=nt,f=a,d=s,S=E=y=x=b=m=v=g=h=void 0,g=p=Z,v=[],m=[-(h=c=i)[0],-h[1]],h[0]&&h[1]?(v.push([m,[h[0],-h[1]]],[m,[-h[0],h[1]]]),g&&v.push([m,h])):h[0]?g?v.push([m,[m[0],-1]],[m,[m[0],1]],[m,[h[0],-1]],[m,h],[m,[h[0],1]]):v.push([[m[0],-1],[h[0],-1]],[[m[0],0],[h[0],0]],[[m[0],1],[h[0],1]]):h[1]?g?v.push([m,[-1,m[1]]],[m,[1,m[1]]],[m,[-1,h[1]]],[m,[1,h[1]]],[m,h]):v.push([[-1,m[1]],[-1,h[1]]],[[0,m[1]],[0,h[1]]],[[1,m[1]],[1,h[1]]]):v.push([m,[1,0]],[m,[-1,0]],[m,[0,-1]],[m,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),b=v,x=di(l,c,p),y=te(Bi(u,l,b,p,f,d),pi(u,x,Ir(l,[0,0]),d)),E=oi(y,0),S=oi(y,1),{width:{isBound:E.isBound,offset:E.offset[0]},height:{isBound:S.isBound,offset:S.offset[1]}}),rt=et.width,it=et.height,ot=rt.isBound,at=it.isBound,st=rt.offset,ut=it.offset;if(1===J&&(ot||(st=0),at||(ut=0)),0===J&&a&&!ot&&!at)return[0,0];Z&&(Q=Math.abs(st)*(e?1/e:1),tt=Math.abs(ut)*(r?1/r:1),(ot&&at?Q<tt:at||!ot&&Q<tt)?st=e*ut/r:ut=r*st/e),$+=st,K+=ut}return i[0]&&i[1]&&(R=t,P=U,z=o,B=s,F=[-(O=i)[0],-O[1]],N=R.state,q=N.width,L=N.height,W=R.props.bounds,V=H=1/0,W&&(G=[[O[0],-O[1]],[-O[0],O[1]]],T=W.left,A=void 0===T?-1/0:T,_=W.top,I=void 0===_?-1/0:_,k=W.right,j=void 0===k?1/0:k,Y=W.bottom,X=void 0===Y?1/0:Y,G.forEach(function(t){var n,e,r,i=t[0]!==F[0],o=t[1]!==F[1],a=Ir(P,t),s=zi(t[1]-F[1]),u=zi(t[0]-F[0]),l=360*Ct(z,a)/Math.PI;o&&(e=a.slice(),(Math.abs(l-360)<2||Math.abs(l-180)<2)&&(e[1]=z[1]),n=Mi(z,e,(z[1]<a[1]?X:I)-a[1],!1,B)[1],isNaN(n)||(V=L+s*n)),i&&(e=a.slice(),(Math.abs(l-90)<2||Math.abs(l-270)<2)&&(e[0]=z[0]),r=Mi(z,e,(z[0]<a[0]?j:A)-a[0],!0,B)[0],isNaN(r)||(H=q+u*r))})),w=(M={maxWidth:H,maxHeight:V}).maxWidth,C=M.maxHeight,$+=st=(D=function(t,n,e,r,i,o,a,s,u){var l=Pi(t,s,[Ir(n,a)]),c=l.horizontal.offset,p=l.vertical.offset;if(p||c){var f=Tr({datas:u,distX:-p,distY:-c}),d=f[0],h=f[1];return[Math.min(i||1/0,e+a[0]*d)-e,Math.min(o||1/0,r+a[1]*h)-r]}return[0,0]}(t,n($,K),e+$,r+K,w,C,i,a,s))[0],K+=ut=D[1]),[$,K]}function Ti(t,n,e,r){if(!Si(t,"rotatable"))return r;var i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=r*Math.PI/180,l=[i,o,a,s].map(function(t){return _t(t,e)}),c=l.map(function(t){return Nt(t,u)}),p=te(xi(t,l,c,e,r),gi(t,l,c,e,r));return p.sort(function(t,n){return Math.abs(t-r)-Math.abs(n-r)}),p.length?p[0]:r}function Ai(t,s,u,l,n,c){var p=c.width,f=c.height;if(!Si(t,"scalable"))return[0,0];var d=c.is3d,e=Gi(t,function(t,n){return wi((e=c,r=At(s,[t/p,n/f]),i=e.transformOrigin,o=e.offsetMatrix,a=e.is3d?4:3,jr(o,Tt(e.targetMatrix,Vt(r,a),a),i,a)),p,f,l,u,d);var e,r,i,o,a},p,f,u,l,n,c);return[e[0]/p,e[1]/f]}function _i(t,n,e,r,i,o){if(!Si(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=$e(o.absolutePoses,[n,e]),s=je(a),u=s.left,l=s.right,c=s.top,p=s.bottom,f=[[u,c],[l,c],[u,p],[l,p]];t.props.snapCenter&&f.push([(u+l)/2,(c+p)/2]);var d,h,g,v,m,b,x,y,E,S,M,w,C,D,R,P,O,z,B,G=Pi(t,i,f,a),T=G.vertical,A=G.horizontal,_=fi(t,a,o),I=_.vertical,k=_.horizontal,j=T.isSnap,Y=A.isSnap,X=T.isBound||I.isBound,F=A.isBound||k.isBound,N=pr(T.offset,I.offset),q=pr(A.offset,k.offset),L=(d=r,g=[X,F],v=[j,Y],m=[N,q],S=(h=[n,e])[0],M=h[1],w=g[0],C=g[1],D=v[0],R=v[1],P=m[0],O=m[1],z=-P,B=-O,d&&S&&M?(B=z=0,b=[],w&&C?b.push([0,O],[P,0]):w?b.push([P,0]):C?b.push([0,O]):D&&R?b.push([0,O],[P,0]):D?b.push([P,0]):R&&b.push([0,O]),b.length&&(b.sort(function(t,n){return Fe(_t([S,M],t))-Fe(_t([S,M],n))}),(x=b[0])[0]&&Math.abs(S)>be?(z=-x[0],B=M*Math.abs(S+z)/Math.abs(S)-M):x[1]&&Math.abs(M)>be&&(y=M,B=-x[1],z=S*Math.abs(M+B)/Math.abs(y)-S),d&&C&&w&&(Math.abs(z)>be&&Math.abs(z)<Math.abs(P)?(z*=E=Math.abs(P)/Math.abs(z),B*=E):Math.abs(B)>be&&Math.abs(B)<Math.abs(O)?(z*=E=Math.abs(O)/Math.abs(B),B*=E):(z=pr(-P,z),B=pr(-O,B))))):(z=S||w?-P:0,B=M||C?-O:0),[z,B]);return[{isBound:X,isSnap:j,offset:L[0]},{isBound:F,isSnap:Y,offset:L[1]}]}function Ii(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var n=t.guideline;-1<e.indexOf(n)||e.push(n)})}),e}function ki(t,n,e,r){var i=t-e,o=i<0?i+n:r;return{size:(i<0?0:i)-o,pos:o}}function ji(t,l,e,c){var p=[],n=lr(t.filter(function(t){var n=t.element,e=t.gap;return n&&!e}),function(t){var n,e,r,i=t.element,o=t.pos,a=o[c],s=(Math.min(0,a-l)<0?-1:1)+"_"+o[c?0:1],u=-1<(r=xt(n=p,function(t){var n=t[0],e=t[1];return i===n&&a===e}))?n[r]:e;return u?u[2]:(p.push([i,a,s]),s)});return n.forEach(function(t){t.sort(function(t,n){return ki(t.pos[c],t.size,l,e).size-ki(n.pos[c],t.size,l,e).size||t.pos[c?0:1]-n.pos[c?0:1]})}),n}function Yi(t,n,f,d,h,g,v,m,b,x,y,E){var S=n[0],M=n[1],w=n[2],C=n[3];return cr(t.map(function(t,c){var p=!0;return t.map(function(t,n){var e,r=t.pos,i=t.size,o=ki(r[x],i,d,h),a=o.pos,s=o.size;if(s<v)return null;var u=p;p=!1;var l=m&&u?parseFloat(s.toFixed(b)):0;return E.createElement("div",{className:Ce("line",S,"guideline","dashed"),"data-size":0<l?y(l):"",key:S+"LinkGuideline"+c+"-"+n,style:((e={})[M]=f+a+"px",e[w]=-g+r[x?0:1]+"px",e[C]=s+"px",e)})})}))}function Xi(t,n,o,a,s,u){var l=n[0],c=n[1],p=n[2],f=n[3];return t.map(function(t,n){var e,r=t.type,i=t.pos;return u.createElement("div",{className:Ce("line",l,"guideline","target","bold",r),key:l+"TargetGuideline"+n,style:((e={})[c]=o+"px",e[p]=-a+i+"px",e[f]=s+"px",e)})})}function Fi(t,n,a,s,u,l){var c=n[0],p=n[1],f=n[2],d=n[3];return t.map(function(t,n){var e,r=t.pos,i=t.size,o=t.element;return l.createElement("div",{className:Ce("line",c,"guideline",o?"bold":""),key:c+"Guideline"+n,style:((e={})[p]=-a+r[u]+"px",e[f]=-s+r[u?0:1]+"px",e[d]=i+"px",e)})})}function Ni(t,i,R,P){var n=t.filter(function(t){var n=t.element,e=t.gap,r=t.type;return n&&e&&r===i}),e="vertical"===i?[0,1]:[1,0],O=e[0],z=e[1];return cr(n.map(function(t,n){var e=t.pos,r=t.gap,i=t.gapGuidelines,o=t.sizes,a=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(t)-Math.abs(n)}),t[0]}(e[z]+o[z]-R[z],e[z]-R[z]-P[z]),s=Math.min(o[z],P[z]);0<a&&s<a?a=2*(a-s/2):a<0&&a<-s&&(a=2*(a+s/2));var u,l,c,p,f,d,h,g,v,m,b,x,y,E,S,M,w,C,D=(0<a?0:P[z])+a/2;return te((m=i,b=O,x=R,y=P,E=e,S=r,M=D,w=Math.abs(S),C=E[b]+(0<S?y[0]:0),m.filter(function(t){return t.pos[b]<=x[b]}).sort(function(t,n){var e=t.pos;return n.pos[b]-e[b]}).filter(function(t){var n=t.pos,e=t.sizes,r=n[b];return Je(r+e[b],1e-4)===Je(C-w,1e-4)&&(C=r,!0)}).map(function(t){var n=-x[b]+t.pos[b]+t.sizes[b];return Qn(Qn({},t),{gap:S,renderPos:b?[M,n]:[n,M]})})),(u=i,l=O,c=R,p=P,f=e,d=r,h=D,g=Math.abs(d),v=f[l]+(d<0?p[l]:0),u.filter(function(t){return t.pos[l]>c[l]}).sort(function(t,n){var e=t.pos,r=n.pos;return e[l]-r[l]}).filter(function(t){var n=t.pos,e=t.sizes,r=n[l];return Je(r,1e-4)===Je(v+g,1e-4)&&(v=r+e[l],!0)}).map(function(t){var n=-c[l]+t.pos[l]-g;return Qn(Qn({},t),{gap:d,renderPos:l?[h,n]:[n,h]})})))}))}function qi(t,n,e,r,s,u){var l=r[0],c=r[1],p=r[2],f=r[3],i=t.props,o=i.snapDigit,d=void 0===o?0:o,a=i.isDisplaySnapDigit,h=void 0===a||a,g="vertical"===e?"horizontal":"vertical",v="vertical"===e?[0,1]:[1,0],m=v[0],b=v[1];return n.map(function(t,n){var e,r=t.renderPos,i=t.gap,o=Math.abs(i),a=h?parseFloat(o.toFixed(d)):0;return u.createElement("div",{className:Ce("line",l,"guideline","gap"),"data-size":0<a?s(a):"",key:g+"GapGuideline"+n,style:((e={})[c]=r[m]+"px",e[p]=r[b]+"px",e[f]=o+"px",e)})})}function Li(t,n,e,i,o,r){var a=vi(r||t.props.bounds,n,e),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})});var l=function(t){var n=t.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var e=t.getRect(),r=e.pos1,i=e.pos2,o=e.pos3,a=e.pos4,u=Ir([r,i,o,a],[0,0]),l=n.left,c=n.top,p=n.width,f=n.height,d=[[l,c],[l,c+f]],h=[[l,c],[l+p,c]],g=[[l+p,c],[l+p,c+f]],v=[[l,c+f],[l+p,c+f]],m=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return[[r,i],[i,a],[a,o],[o,r]].forEach(function(t){var n=ai(u,t),e=n.horizontal,r=n.vertical,i=ci(t,h,r,1,!0),o=ci(t,v,r,1,!0),a=ci(t,d,e,1,!0),s=ci(t,g,e,1,!0);i.isBound&&!x.top&&(m.push(c),x.top=!0),o.isBound&&!x.bottom&&(m.push(c+f),x.bottom=!0),a.isBound&&!x.left&&(b.push(l),x.left=!0),s.isBound&&!x.right&&(b.push(l+p),x.right=!0)}),{horizontal:m,vertical:b}}(t),c=l.vertical,p=l.horizontal;c.forEach(function(r){0<=xt(i,function(t){var n=t.type,e=t.pos;return"bounds"===n&&e===r})||i.push({type:"bounds",pos:r})}),p.forEach(function(r){0<=xt(o,function(t){var n=t.type,e=t.pos;return"bounds"===n&&e===r})||o.push({type:"bounds",pos:r})})}var Wi={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,n){var e=t.state,r=e.top,i=e.left,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,l=e.snapRenderInfo,c=e.targetClientRect,p=e.containerClientRect,f=e.is3d,d=e.rootMatrix;if(!l||!Si(t,""))return[];var h,g=f?4:3,v=Math.min(o[0],a[0],s[0],u[0]),m=Math.min(o[1],a[1],s[1],u[1]),b=yi(d,p,g),x=fr(d,[c.left-b[0],c.top-b[1]],g),y=x[0],E=x[1],S=t.props,M=S.snapThreshold,w=void 0===M?5:M,C=S.snapDigit,D=void 0===C?0:C,R=S.isDisplaySnapDigit,P=void 0===R||R,O=S.snapDistFormat,z=void 0===O?function(t){return t}:O,B=l.externalPoses||[],G=Ke(t.state),T=[],A=[],_=[],I=[],k=[],j=je(G),Y=j.width,X=j.height,F=j.top,N=j.left,q=j.bottom,L=j.right,W=0<B.length,H=W?je(B):{};l.request||(l.direction&&k.push(function(t,n,e){var r=[];if(e[0]&&e[1])r=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(t){return Ir(n,t)});else if(e[0]||e[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(t){return Ir(n,t)}):1<(r=_r(n,e)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return Qr(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),!0,1)}(t,G,l.direction)),l.snap&&(h=je(G),l.center&&(h.middle=(h.top+h.bottom)/2,h.center=(h.left+h.right)/2),k.push(ni(t,h,!0,1))),W&&(l.center&&(H.middle=(H.top+H.bottom)/2,H.center=(H.left+H.right)/2),k.push(ni(t,H,!0,1))),k.forEach(function(t){var n=t.vertical.posInfos,e=t.horizontal.posInfos;T.push.apply(T,n.map(function(t){return{type:"snap",pos:t.pos}})),A.push.apply(A,e.map(function(t){return{type:"snap",pos:t.pos}})),_.push.apply(_,Ii(n)),I.push.apply(I,Ii(e))})),Li(t,[N,L],[F,q],T,A),W&&Li(t,[H.left,H.right],[H.top,H.bottom],T,A,l.externalBounds);var V=ji(I,y,Y,0),U=ji(_,E,X,1),Z=["horizontal","left","top","width"],$=["vertical","top","left","height"],K=Ni(_,"vertical",[i,r],[Y,X]),J=Ni(I,"horizontal",[i,r],[Y,X]),Q=te(_,I);return rr(t,"onSnap",{guidelines:Q.filter(function(t){return!t.element}),elements:lr(Q.filter(function(t){return t.element}),function(t){return t.element}),gaps:te(K,J)},!0),te(qi(t,K,"vertical",Z,z,n),qi(t,J,"horizontal",$,z,n),Yi(V,Z,v,y,Y,r,w,P,D,0,z,n),Yi(U,$,m,E,X,i,w,P,D,1,z,n),Xi(A,Z,v,r,Y,n),Xi(T,$,m,i,X,n),Fi(I,Z,i,r,0,n),Fi(_,$,r,i,1,n))},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},Ei(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return!(!mr(t)&&!Ki(t))||(!t.isRequest&&t.inputEvent?Rt(t.inputEvent.target,Ce("snap-control")):void 0)},dragControlStart:function(t,n){t.state.snapRenderInfo=null,Ei(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,n){t.state.snapRenderInfo=null,Ei(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var n=t.state;n.enableSnap=!1,n.guidelines=[],n.snapRenderInfo=null}},Hi={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var e=t.props.throttleDragRotate,r=t.state,i=r.dragInfo,o=r.beforeOrigin;if(!e||!i)return[];var a=i.dist;if(!a[0]&&!a[1])return[];var s=Fe(a),u=Ct(a,[0,0]);return[n.createElement("div",{className:Ce("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+o[0]+"px, "+o[1]+"px) rotate("+u+"rad)"}})]},dragStart:function(t,n){var e=n.datas,r=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s,u=window.getComputedStyle(a);e.datas={},e.left=parseFloat(u.left||"")||0,e.top=parseFloat(u.top||"")||0,e.bottom=parseFloat(u.bottom||"")||0,e.right=parseFloat(u.right||"")||0,e.startValue=[0,0],Rr(t,n),Fr(n),s=t,e.absolutePoses=Ke(s.state),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1;var l=nr(t,n,Qn({set:function(t){e.startValue=t}},Xr(n)));return!1!==(r||rr(t,"onDragStart",l))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,e.isPinch=!1),!!e.isDrag&&l},drag:function(t,n){Pr(n,"translate");var e=n.datas,r=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.distX,u=n.distY,l=e.isDrag,c=e.prevDist,p=e.prevBeforeDist,f=e.startValue;if(l){var d,h,g,v,m,b,x,y,E,S,M,w,C=t.props,D=C.parentMoveable,R=!r&&C.throttleDrag||0,P=!r&&C.throttleDragRotate||0,O=!1,z=0;!r&&0<P&&(s||u)&&(h=Je((d=C.startDragRotate||0)+180*Ct([0,0],[s,u])/Math.PI,P)-d,g=u*Math.abs(Math.cos((h-90)/180*Math.PI)),v=Fe([s*Math.abs(Math.cos(h/180*Math.PI)),g]),z=h*Math.PI/180,s=v*Math.cos(z),u=v*Math.sin(z)),o||r||i||P&&!s&&!u||(b=(m=_i(t,s,u,P,a,e))[0],x=m[1],y=b.isSnap,E=b.isBound,S=b.offset,M=x.isSnap,w=x.isBound,O=y||M||E||w,s+=S,u+=x.offset),e.passDeltaX=s-(e.passDistX||0),e.passDeltaY=u-(e.passDistY||0),e.passDistX=s,e.passDistY=u;var B=At(Gr({datas:e,distX:s,distY:u}),f),G=At(zr({datas:e,distX:s,distY:u}),f);P||O||(Qe(G,R),Qe(B,R));var T=_t(B,f),A=_t(G,f),_=_t(A,c),I=_t(T,p);e.prevDist=A,e.prevBeforeDist=T;var k=e.left+T[0],j=e.top+T[1],Y=e.right-T[0],X=e.bottom-T[1],F=Or(e,"translate("+G[0]+"px, "+G[1]+"px)","translate("+A[0]+"px, "+A[1]+"px)");if(t.state.dragInfo.dist=r?[0,0]:A,r||D||!_.every(function(t){return!t})||!I.some(function(t){return!t})){var N=t.state,q=nr(t,n,{transform:F,dist:A,delta:_,translate:G,beforeDist:T,beforeDelta:I,beforeTranslate:B,left:k,top:j,right:Y,bottom:X,width:N.width,height:N.height,isPinch:o});return r||rr(t,"onDrag",q),q}}},dragEnd:function(t,n){var e=n.parentEvent,r=n.datas,i=n.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,e||rr(t,"onDragEnd",er(t,n,{})),i},dragGroupStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;var a=wr(t,this,"dragStart",[r||0,i||0],n,!1),s=rr(t,"onDragGroupStart",Qn(Qn({},o),{targets:t.props.targets,events:a}));return e.isDrag=!1!==s,!!e.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var e=this.drag(t,n),r=n.datas,i=wr(t,this,"drag",[r.passDeltaX,r.passDeltaY],n,!1);if(e){var o=Qn({targets:t.props.targets,events:i},e);return rr(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,n){var e=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),wr(t,this,"dragEnd",[0,0],n,!1),rr(t,"onDragGroupEnd",er(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:r,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Vi(t,n,e,r,i,o){var a=t.state.is3d?4:3,s=Ie(t.state.rootMatrix,i,a),u=At([o.left,o.top],s);n.startAbsoluteOrigin=u,n.prevDeg=Ct(u,[e,r])/Math.PI*180,n.prevSnapDeg=n.prevDeg,n.startDeg=n.prevDeg,n.loop=0}function Ui(t,n,e,r,i,o){var a=e.prevDeg,s=Ti(t,n,e.origin,r);return[(e.prevDeg=s)-a,s,o+s]}function Zi(t,n,e,r,i,o,a,s){var u=e.prevDeg,l=e.prevSnapDeg,c=e.startDeg,p=e.loop;r<u&&270<u&&r<90?++e.loop:u<r&&u<90&&270<r&&--e.loop;var f=e.loop,d=360*p+l-c+o,h=360*f+r-c+o;e.prevDeg=h-360*f+c-o;var g=i*((h=Je(h,a))-o);return s&&(h=(g=Ti(t,n,e.origin,g))/i+o),e.prevSnapDeg=h-360*f+c-o,[i*(h-d),g,o+g]}function $i(t,n,e,r,i,o,a,s){return Zi(t,n,e,Ct(e.startAbsoluteOrigin,[i,o])/Math.PI*180,r,a,s,!0)}function Ki(t){return t.isRequest?"rotatable"===t.requestAble:Rt(t.inputEvent.target,Ce("rotation"))}var Ji={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".line.rotation-line {\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% calc(100% - 0.5px);\n            top: -40px;\n            width: var(--zoompx);\n            height: calc(40 * var(--zoompx));\n            top: calc(-40 * var(--zoompx));\n            transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n        }\n        .line.rotation-line .control {\n            border-color: #4af;\n            background:#fff;\n            cursor: alias;\n            left: 50%;\n        }"],render:function(t,n){var e=t.props,r=e.rotatable,i=e.rotationPosition,o=t.state,a=o.rotation,s=o.renderPoses;if(!r)return null;var u=function(t,n){var e=n[0],r=n[1],i=n[2],o=n[3],a=(t||"top").split("-"),s=a[0],u=a[1],l=[e,r];"left"===s?l=[i,e]:"right"===s?l=[r,o]:"bottom"===s&&(l=[o,i]);var c,p,f=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2];return u&&(p="bottom"===s||"left"===s,f=l[(c="top"===u||"left"===u)&&!p||!c&&p?0:1]),f}(i,s);return n.createElement("div",{key:"rotation",className:Ce("line rotation-line"),style:{transform:"translate(-50%) translate("+u[0]+"px, "+u[1]+"px) rotate("+a+"rad)"}},n.createElement("div",{className:Ce("control","rotation")}))},dragControlCondition:Ki,dragControlStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,l=t.state,c=l.target,p=l.left,f=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform;if(!u&&!c)return!1;var b,x,y=t.getRect();e.rect=y,e.transform=m,e.left=p,e.top=f,e.fixedPosition=Vr(t,Hr(t)),u||s||a?(b=o||0,e.beforeInfo={origin:y.beforeOrigin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0},e.afterInfo={origin:y.origin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0}):(e.beforeInfo={origin:y.beforeOrigin},e.afterInfo={origin:y.origin},x=Ue(t.controlBox.getElement()),Vi(t,e.beforeInfo,r,i,h,x),Vi(t,e.afterInfo,r,i,d,x)),e.direction=g,e.beforeDirection=v,e.startValue=0,e.datas={},Fr(n);var E=nr(t,n,Qn(Qn({set:function(t){e.startValue=t*Math.PI/180}},Xr(n)),{dragStart:Hi.dragStart(t,(new Sr).dragStart([0,0],n))})),S=rr(t,"onRotateStart",E);return e.isRotate=!1!==S,t.state.snapRenderInfo={request:n.isRequest},!!e.isRotate&&E},dragControl:function(t,n){var e,r,i,o,a=n.datas,s=n.clientX,u=n.clientY,l=n.parentRotate,c=n.parentFlag,p=n.isPinch,f=n.groupDelta,d=a.beforeDirection,h=a.beforeInfo,g=a.afterInfo,v=a.isRotate,m=a.startValue,b=a.rect;if(v){Pr(n,"rotate");var x,y,E,S,M,w,C,D,R,P=d*Xe(n.datas.beforeTransform,[50,50],100,100).direction,O=t.props,z=O.throttleRotate,B=void 0===z?0:z,G=O.parentMoveable,T=180/Math.PI*m;if(R=!c&&"parentDist"in n?(E=(y=Ui(t,b,g,x=n.parentDist,0,T))[0],S=y[1],M=y[2],C=(w=Ui(t,b,h,x,0,T))[0],D=w[1],w[2]):p||c?(E=(e=Zi(t,b,g,l,P,T,B))[0],S=e[1],M=e[2],C=(r=Zi(t,b,h,l,d,T,B))[0],D=r[1],r[2]):(E=(i=$i(t,b,g,P,s,u,T,B))[0],S=i[1],M=i[2],C=(o=$i(t,b,h,d,s,u,T,B))[0],D=o[1],o[2]),E||C||G){var A,_,I,k,j=Or(a,"rotate("+M+"deg)","rotate("+S+"deg)"),Y=(A=t,_=S,I=a.fixedPosition,k=a,Wr(A,"rotate("+_+"deg)",I,Hr(A),k)),X=_t(At(f||[0,0],Y),a.prevInverseDist||[0,0]);a.prevInverseDist=Y;var F=nr(t,n,Qn({delta:E,dist:S,rotate:M,beforeDist:D,beforeDelta:C,beforeRotate:R,isPinch:!!p},Lr(t,j,X,p,n)));return rr(t,"onRotate",F),F}}},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isRotate&&(e.isRotate=!1,rr(t,"onRotateEnd",er(t,n,{})),r)},dragGroupControlCondition:Ki,dragGroupControlStart:function(t,n){var e=n.datas,r=t.state,s=r.left,u=r.top,l=r.beforeOrigin,i=this.dragControlStart(t,n);if(!i)return!1;i.set(e.beforeDirection*t.rotation);var o=Cr(t,this,"dragControlStart",n,function(t,n){var e=t.state,r=e.left,i=e.top,o=e.beforeOrigin,a=At(_t([r,i],[s,u]),_t(o,l));return n.datas.groupClient=a,Qn(Qn({},n),{parentRotate:0})}),a=rr(t,"onRotateGroupStart",Qn(Qn({},i),{targets:t.props.targets,events:o}));return e.isRotate=!1!==a,!!e.isRotate&&i},dragGroupControl:function(n,t){var e=t.datas;if(e.isRotate){var r=this.dragControl(n,t);if(r){var l=e.beforeDirection,c=r.beforeDist,p=r.beforeDelta/180*Math.PI,i=Cr(n,this,"dragControl",t,function(t,n){var e=n.datas.groupClient,r=e[0],i=e[1],o=Nt([r,i],p*l),a=o[0],s=o[1],u=[a-r,s-i];return n.datas.groupClient=[a,s],Qn(Qn({},n),{parentRotate:c,groupDelta:u})});n.rotation=l*r.beforeRotate;var o=Qn({targets:n.props.targets,events:i,set:function(t){n.rotation=t}},r);return rr(n,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),Cr(t,this,"dragControlEnd",n),rr(t,"onRotateGroupEnd",er(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=0,r=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:n}},request:function(t){return"deltaRotate"in t?e+=t.deltaRotate:"rotate"in t&&(e=t.rotate-r),{datas:n,parentDist:e}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Qi(t,n,r){var e=t.state,i=e.renderPoses,o=e.rotation,a=t.props.renderDirections,s=void 0===a?n:a,u=t.state.direction,l={};return s.forEach(function(t){l[t]=!0}),s.map(function(t){var n=Se[t];if(!n||!l[t])return null;var e=Je(o/Math.PI*180,15)+Me[t];return u<1&&(e=360-e),e%=180,r.createElement("div",{className:Ce("control","direction",t),"data-rotation":e,"data-direction":t,key:"direction-"+t,style:Le.apply(void 0,te([o],n.map(function(t){return i[t]})))})})}function to(t,n,e,r,i){for(var o=[],a=5;a<arguments.length;a++)o[a-5]=arguments[a];var s=Ct(e,r),u=n?Je(s/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+i,className:Ce.apply(void 0,te(["line","direction",n],o)),"data-rotation":u,"data-line-index":i,"data-direction":n,style:qe(e,r,s)})}function no(t,n){return Qi(t,Ee,n)}function eo(t,n){return Qi(t,["nw","ne","sw","se"],n)}var ro={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.edge;if(r)return(i?eo:no)(t,n)},dragControlCondition:mr,dragControlStart:function(t,n){var e,r,i,o=n.inputEvent,a=n.isPinch,s=n.parentDirection,u=n.datas,l=n.parentFlag,c=s||(a?[0,0]:Ze(o.target)),p=t.state,f=p.target,d=p.width,h=p.height;if(!c||!f)return!1;a||Rr(t,n),u.datas={},u.direction=c,u.startOffsetWidth=d,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,r=f,i=window.getComputedStyle(r),e=[parseFloat(i.width),parseFloat(i.height)],u.startWidth=e[0],u.startHeight=e[1];var g,v=[Math.max(0,d-u.startWidth),Math.max(0,h-u.startHeight)];u.minSize=v,u.maxSize=[1/0,1/0],l||(g=window.getComputedStyle(f),u.minSize=At([parseFloat(g.minWidth)||0,parseFloat(g.minHeight)||0],v),u.maxSize=At([parseFloat(g.maxWidth)||1/0,parseFloat(g.maxHeight)||1/0],v));var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&ft(m)?m.split(" "):m,u.startDirection=Zr(0,c),u.fixedPosition=$r(t,u.startDirection),u.fixedOriginalPosition=$r(t,c);var b=nr(t,n,{direction:c,set:function(t){var n=t[0],e=t[1];u.startWidth=n,u.startHeight=e},setMin:function(t){u.minSize=t},setMax:function(t){u.maxSize=t},setOrigin:function(t){u.transformOrigin=t},dragStart:Hi.dragStart(t,(new Sr).dragStart([0,0],n))});return!1!==rr(t,"onResizeStart",b)&&(u.isResize=!0,t.state.snapRenderInfo={request:n.isRequest,direction:c}),!!u.isResize&&b},dragControl:function(t,n){var e,r=n.datas,i=n.distX,o=n.distY,a=n.parentFlag,s=n.isPinch,u=n.parentDistance,l=n.parentScale,c=n.parentKeepRatio,p=n.dragClient,f=n.parentDist,d=n.isRequest,h=r.isResize,g=r.transformOrigin,v=r.startWidth,m=r.startHeight,b=r.startOffsetWidth,x=r.startOffsetHeight,y=r.prevWidth,E=r.prevHeight,S=r.minSize,M=r.maxSize;if(h){var w=t.props,C=w.throttleResize,D=void 0===C?0:C,R=w.parentMoveable,P=w.snapThreshold,O=void 0===P?5:P,z=r.direction,B=z,G=p,T=0,A=0;z[0]||z[1]||(B=[1,1]);var _,I,k,j,Y,X,F,N=0!==b&&0!==x&&(t.props.keepRatio||c),q=B[0]||!B[1],L=q?x/b:b/x,W=te(N||a?z:r.startDirection);p||(G=!a&&s?$r(t,[0,0]):N?r.fixedOriginalPosition:r.fixedPosition),f?(T=f[0],A=f[1]):l?(T=(l[0]-1)*b,A=(l[1]-1)*x):s?u&&(A=(T=u)*x/b):(_=Tr({datas:r,distX:i,distY:o}),T=B[0]*_[0],A=B[1]*_[1],N&&b&&x?(I=Ct([0,0],_),k=Ct([0,0],B),j=Ct([0,0],[b,x]),Y=Fe([T,A]),X=Math.cos(I-k)*Y,B[0]?A=B[1]?(T=Math.cos(j)*X,Math.sin(j)*X):ar(T=X,q,L):T=sr(A=X,q,L)):N||(F=te(z),b||(_[0]<0?F[0]=-1:0<_[0]&&(F[0]=1)),x||(_[1]<0?F[1]=-1:0<_[1]&&(F[1]=1)),W=Zr(0,B=z=F),T=B[0]*_[0],A=B[1]*_[1]));var H=B[0]||N?Math.max(b+T,be):b,V=B[1]||N?Math.max(x+A,be):x;N&&b&&x&&(V=H*x/b);var U,Z=[0,0];s||(Z=function(t,e,r,i,o,n,a){if(!Si(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return Gi(t,function(t,n){return wi(u,e+t,r+n,o,i,l)},e,r,i,o,n,a)}(t,H,V,z,r.fixedOriginalPosition,d,r)),f&&(f[0]||(Z[0]=0),f[1]||(Z[1]=0)),N?(B[0]&&B[1]&&Z[0]&&Z[1]&&(Math.abs(Z[0])>Math.abs(Z[1])?Z[1]=0:Z[0]=0),(U=!Z[0]&&!Z[1])&&(q?H=Je(H,D):V=Je(V,D)),B[0]&&!B[1]||Z[0]&&!Z[1]||U&&q?V=ar(H+=Z[0],q,L):(!B[0]&&B[1]||!Z[0]&&Z[1]||U&&!q)&&(H=sr(V+=Z[1],q,L))):(b+T<-O&&(Z[0]=0),b+A<-O&&(Z[1]=0),H+=Z[0],V+=Z[1],Z[0]||(H=Je(H,D)),Z[1]||(V=Je(V,D))),H=(e=Mt([H,V],S,M,N))[0],V=e[1];var $=[(T=(H=Math.round(H))-b)-y,(A=(V=Math.round(V))-x)-E];r.prevWidth=T,r.prevHeight=A;var K=Ur(t,H,V,W,G,g);if(R||!$.every(function(t){return!t})||!K.every(function(t){return!t})){var J=nr(t,n,{width:v+T,height:m+A,offsetWidth:H,offsetHeight:V,direction:z,dist:[T,A],delta:$,isPinch:!!s,drag:Hi.drag(t,Er(n,t.state,K,!!s,!1))});return rr(t,"onResize",J),J}}},dragControlAfter:function(t,n){var e=n.datas,r=e.isResize,i=e.startOffsetWidth,o=e.startOffsetHeight,a=e.prevWidth,s=e.prevHeight;if(r){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),p=3<Math.abs(l),f=3<Math.abs(c);return p&&(e.startWidth+=l,e.startOffsetWidth+=l,e.prevWidth+=l),f&&(e.startHeight+=c,e.startOffsetHeight+=c,e.prevHeight+=c),p||f?(this.dragControl(t,n),!0):void 0}},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isResize&&(e.isResize=!1,rr(t,"onResizeEnd",er(t,n,{})),r)},dragGroupControlCondition:mr,dragGroupControlStart:function(a,t){var n=t.datas,e=this.dragControlStart(a,t);if(!e)return!1;var s=e.direction,u=n.fixedOriginalPosition,r=Cr(a,this,"dragControlStart",t,function(t,n){var e=$r(t,s),r=kt(Wt(-a.rotation/180*Math.PI,3),[e[0]-u[0],e[1]-u[1],1],3),i=r[0],o=r[1];return n.datas.originalX=i,n.datas.originalY=o,n}),i=Qn(Qn({},e),{targets:a.props.targets,events:r}),o=rr(a,"onResizeGroupStart",i);return n.isResize=!1!==o,!!n.isResize&&e},dragGroupControl:function(o,t){var n=t.datas;if(n.isResize){var e=this.dragControl(o,t);if(e){var r=e.offsetWidth,i=e.offsetHeight,a=e.dist,s=o.props.keepRatio,u=[r/(r-a[0]),i/(i-a[1])],l=n.fixedOriginalPosition,c=Cr(o,this,"dragControl",t,function(t,n){var e=kt(Wt(o.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),r=e[0],i=e[1];return Qn(Qn({},n),{parentDist:null,parentScale:u,dragClient:At(l,[r,i]),parentKeepRatio:s})}),p=Qn({targets:o.props.targets,events:c},e);return rr(o,"onResizeGroup",p),p}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),Cr(t,this,"dragControlEnd",n),rr(t,"onResizeGroupEnd",er(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?e=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(e+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:n,parentDist:[e,r]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},io={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.edge;if(!r&&i)return(o?eo:no)(t,n)},dragControlCondition:mr,dragControlStart:function(t,n){var e=n.datas,r=n.isPinch,i=n.inputEvent,o=n.parentDirection||(r?[0,0]:Ze(i.target)),a=t.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target;if(!o||!c)return!1;r||Rr(t,n),Fr(n),e.datas={},e.transform=l,e.prevDist=[1,1],e.direction=o,e.width=s,e.height=u,e.startValue=[1,1],e.fixedDirection=o.map(function(t){return-t}),e.fixedPosition=$r(t,o);var p=nr(t,n,Qn(Qn({direction:o,set:function(t){e.startValue=t}},Xr(n)),{dragStart:Hi.dragStart(t,(new Sr).dragStart([0,0],n))}));return!1!==rr(t,"onScaleStart",p)&&(e.isScale=!0,t.state.snapRenderInfo={request:n.isRequest,direction:o}),!!e.isScale&&p},dragControl:function(t,n){Pr(n,"scale");var e=n.datas,r=n.distX,i=n.distY,o=n.parentScale,a=n.parentDistance,s=n.parentKeepRatio,u=n.parentFlag,l=n.isPinch,c=n.dragClient,p=n.parentDist,f=n.isRequest,d=e.prevDist,h=e.direction,g=e.width,v=e.height,m=e.isScale,b=e.startValue;if(!m)return!1;var x=t.props,y=x.throttleScale,E=x.parentMoveable,S=h;h[0]||h[1]||(S=[1,1]);var M,w,C,D,R,P,O,z,B=t.props.keepRatio||s,G=t.state,T=S[0]||!S[1],A=g*b[0],_=v*b[1],I=T?_/A:A/_,k=1,j=1,Y=c;c||(Y=!u&&l?$r(t,[0,0]):e.fixedPosition),p?(k=(g+p[0])/g,j=(v+p[1])/v):o?(k=o[0],j=o[1]):l?a&&(k=(g+a)/g,j=(v+a*v/g)/v):(M=Tr({datas:e,distX:r,distY:i}),w=S[0]*M[0],C=S[1]*M[1],B&&g&&v&&(D=Ct([0,0],M),R=Ct([0,0],S),P=Ct([0,0],[A,_]),O=Fe([w,C]),z=Math.cos(D-R)*O,S[0]?C=S[1]?(w=Math.cos(P)*z,Math.sin(P)*z):ar(w=z,T,I):w=sr(C=z,T,I)),k=(g+w)/g,j=(v+C)/v),k=S[0]||B?k*b[0]:b[0],j=S[1]||B?j*b[1]:b[1],0===k&&(k=1e-9*(0<d[0]?1:-1)),0===j&&(j=1e-9*(0<d[1]?1:-1));var X,F=[k/b[0],j/b[1]],N=[k,j];l||!t.props.groupable||pt(X=(G.snapRenderInfo||{}).direction)&&(X[0]||X[1])&&(G.snapRenderInfo={direction:h,request:n.isRequest});var q,L,W,H=[0,0];l||(H=Ai(t,F,h,e.fixedPosition,f,e)),B?(S[0]&&S[1]&&H[0]&&H[1]&&(Math.abs(H[0])>Math.abs(H[1])?H[1]=0:H[0]=0),(q=!H[0]&&!H[1])&&(T?F[0]=Je(F[0]*b[0],y)/b[0]:F[1]=Je(F[1]*b[1],y)/b[1]),S[0]&&!S[1]||H[0]&&!H[1]||q&&T?(F[0]+=H[0],L=ar(g*F[0]*b[0],T,I),F[1]=L/v/b[1]):(!S[0]&&S[1]||!H[0]&&H[1]||q&&!T)&&(F[1]+=H[1],W=sr(v*F[1]*b[1],T,I),F[0]=W/g/b[0])):(F[0]+=H[0],F[1]+=H[1],H[0]||(F[0]=Je(F[0]*b[0],y)/b[0]),H[1]||(F[1]=Je(F[1]*b[1],y)/b[1])),0===F[0]&&(F[0]=1e-9*(0<d[0]?1:-1)),0===F[1]&&(F[1]=1e-9*(0<d[1]?1:-1));var V,U,Z=[F[0]/d[0],F[1]/d[1]];U=b,N=[(V=F)[0]*U[0],V[1]*U[1]];var $,K,J,Q=($=h,K=Y,J=e,Wr(t,"scale("+F.join(", ")+")",K,$.map(function(t){return-t}),J)),tt=_t(Q,e.prevInverseDist||[0,0]);if(e.prevDist=F,e.prevInverseDist=Q,k===d[0]&&j===d[1]&&tt.every(function(t){return!t})&&!E)return!1;var nt=Or(e,"scale("+N.join(", ")+")","scale("+F.join(", ")+")"),et=nr(t,n,Qn({offsetWidth:g,offsetHeight:v,direction:h,scale:N,dist:F,delta:Z,isPinch:!!l},Lr(t,nt,tt,l,n)));return rr(t,"onScale",et),et},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isScale&&(e.isScale=!1,rr(t,"onScaleEnd",er(t,n,{})),r)},dragGroupControlCondition:mr,dragGroupControlStart:function(a,t){var n=t.datas,e=this.dragControlStart(a,t);if(!e)return!1;var s=e.direction,u=n.fixedPosition;n.moveableScale=a.scale;var r=Cr(a,this,"dragControlStart",t,function(t,n){var e=$r(t,s),r=kt(Wt(-a.rotation/180*Math.PI,3),[e[0]-u[0],e[1]-u[1],1],3),i=r[0],o=r[1];return n.datas.originalX=i,n.datas.originalY=o,n}),i=Qn(Qn({},e),{targets:a.props.targets,events:r}),o=rr(a,"onScaleGroupStart",i);return n.isScale=!1!==o,!!n.isScale&&i},dragGroupControl:function(o,t){var n=t.datas;if(n.isScale){var e=this.dragControl(o,t);if(e){var r=n.moveableScale;o.scale=[e.scale[0]*r[0],e.scale[1]*r[1]];var a=o.props.keepRatio,s=e.dist,u=e.scale,l=n.fixedPosition,i=Cr(o,this,"dragControl",t,function(t,n){var e=kt(Wt(o.rotation/180*Math.PI,3),[n.datas.originalX*s[0],n.datas.originalY*s[1],1],3),r=e[0],i=e[1];return Qn(Qn({},n),{parentDist:null,parentScale:u,parentKeepRatio:a,dragClient:At(l,[r,i])})}),c=Qn({targets:o.props.targets,events:i},e);return rr(o,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),Cr(t,this,"dragControlEnd",n),rr(t,"onScaleGroupEnd",er(t,n,{targets:t.props.targets})),e},request:function(){var n={},e=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return e+=t.deltaWidth,r+=t.deltaHeight,{datas:n,parentDist:[e,r]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function oo(t,a){return t.map(function(t,n){return e=t,r=a[n],(e*(o=2)+r*(i=1))/(i+o);var e,r,i,o})}function ao(t,n,e){var r=Ct(t,n),i=Ct(t,e)-r;return 0<=i?i:i+2*Math.PI}var so={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.warpable;if(r||i||!o)return[];var a=t.state,s=a.pos1,u=a.pos2,l=a.pos3,c=a.pos4,p=oo(s,u),f=oo(u,s),d=oo(s,l),h=oo(l,s),g=oo(l,c),v=oo(c,l),m=oo(u,c),b=oo(c,u);return te([n.createElement("div",{className:Ce("line"),key:"middeLine1",style:qe(p,g)}),n.createElement("div",{className:Ce("line"),key:"middeLine2",style:qe(f,v)}),n.createElement("div",{className:Ce("line"),key:"middeLine3",style:qe(d,m)}),n.createElement("div",{className:Ce("line"),key:"middeLine4",style:qe(h,b)})],no(t,n))},dragControlCondition:function(t){return!t.isRequest&&Rt(t.inputEvent.target,Ce("direction"))},dragControlStart:function(t,n){var r=n.datas,e=n.inputEvent,i=t.props.target,o=Ze(e.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,p=a.width,f=a.height,d=a.left,h=a.top;return r.datas={},r.targetTransform=l,r.warpTargetMatrix=u?c:Bt(c,3,4),r.targetInverseMatrix=Pt(Ot(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=d,r.top=h,Rr(t,n),Fr(n),r.poses=[[0,0],[p,0],[0,f],[p,f]].map(function(t){return _t(t,s)}),r.nextPoses=r.poses.map(function(t){var n=t[0],e=t[1];return kt(r.warpTargetMatrix,[n,e,0,1],4)}),r.startValue=Ht(4),r.prevMatrix=Ht(4),r.absolutePoses=Ke(a),r.posIndexes=Ar(o),!(a.snapRenderInfo={request:n.isRequest,direction:o})!==rr(t,"onWarpStart",nr(t,n,Qn({set:function(t){r.startValue=t}},Xr(n))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,n){var e,r,i,o,a=n.datas,s=n.isRequest,u=n.distX,l=n.distY,c=a.targetInverseMatrix,p=a.prevMatrix,f=a.isWarp,d=a.startValue,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!f)return!1;Pr(n,"matrix3d"),Si(t,"warpable")&&(1<(e=g.map(function(t){return v[t]})).length&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]),i=(r=Pi(t,s,e.map(function(t){return[t[0]+u,t[1]+l]}))).horizontal,o=r.vertical,l-=i.offset,u-=o.offset);var m=Tr({datas:a,distX:u,distY:l},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=At(b[t],m)}),!me.every(function(t){return n=t.map(function(t){return h[t]}),e=t.map(function(t){return b[t]}),r=ao(n[0],n[1],n[2]),i=ao(e[0],e[1],e[2]),!((o=Math.PI)<=r&&i<=o||r<=o&&o<=i);var n,e,r,i,o}))return!1;var x=Zt(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var y=Br(a,Tt(c,x,4),!0),E=Tt(Ot(p,4),y,4),S=Tt(d,a.prevMatrix=y,4),M=Or(a,"matrix3d("+S.join(", ")+")","matrix3d("+y.join(", ")+")");return qr(n,M),rr(t,"onWarp",nr(t,n,{delta:E,matrix:S,dist:y,multiply:Tt,transform:M})),!0},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isWarp&&(e.isWarp=!1,rr(t,"onWarpEnd",er(t,n,{})),r)}},uo=Ce("area-pieces"),lo=Ce("area-piece"),co=Ce("avoid");function po(t){var n,e,r,i=t.areaElement,o=t.state,a=o.width,s=o.height;e=co,(n=i).classList?n.classList.remove(e):(r=new RegExp("(\\s|^)"+e+"(\\s|$)"),n.className=n.className.replace(r," ")),i.style.cssText+="left: 0px; top: 0px; width: "+a+"px; height: "+s+"px"}function fo(t){return t.createElement("div",{key:"area_pieces",className:uo},t.createElement("div",{className:lo}),t.createElement("div",{className:lo}),t.createElement("div",{className:lo}),t.createElement("div",{className:lo}))}var ho={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var e=t.props,r=e.target,i=e.dragArea,o=e.groupable,a=e.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,p=a?Ce("area","pass"):Ce("area");if(o)return[n.createElement("div",{key:"area",ref:M(t,"areaElement"),className:p}),fo(n)];if(!r||!i)return[];var f=Zt([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=f.length?Ae(f,!0):"none";return[n.createElement("div",{key:"area",ref:M(t,"areaElement"),className:p,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),fo(n)]},dragStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;e.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,p=u.rootMatrix,f=u.is3d,d=l.left,h=l.top,g=je(c),v=g.left,m=g.top,b=g.width,x=g.height,y=fr(p,[r-d,i-h],f?4:3),E=y[0],S=y[1],M=[{left:v,top:m,width:b,height:(S-=m)-10},{left:v,top:m,width:(E-=v)-10,height:x},{left:v,top:m+S+10,width:b,height:x-S-10},{left:v+E+10,top:m,width:b-E-10,height:x}],w=[].slice.call(s.nextElementSibling.children);M.forEach(function(t,n){w[n].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),a=co,(o=s).classList?o.classList.add(a):o.className+=" "+a},drag:function(t,n){var e=n.datas;if(!n.inputEvent)return!1;e.isDragArea||(e.isDragArea=!0,po(t))},dragEnd:function(t,n){var e=n.inputEvent,r=n.datas;if(!e)return!1;r.isDragArea||po(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){po(t)}},go={name:"origin",props:{origin:Boolean},events:{},render:function(t,n){var e=t.state,r=e.beforeOrigin,i=e.rotation;return[n.createElement("div",{className:Ce("control","origin"),style:Le(i,r),key:"beforeOrigin"})]}};function vo(t){var n=t.scrollContainer;return[n.scrollLeft,n.scrollTop]}var mo={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(o,a){var t=o.props.scrollContainer,n=void 0===t?o.getContainer():t,e=new Sn;a.datas.dragScroll=e;var r=a.isControl?"controlGesto":"targetGesto",s=a.targets;e.on("scroll",function(t){var n=t.container,e=t.direction,r=nr(o,a,{scrollContainer:n,direction:e}),i=s?"onScrollGroup":"onScroll";s&&(r.targets=s),rr(o,i,r)}).on("move",function(t){var n=t.offsetX,e=t.offsetY;o[r].scrollBy(n,e,a.inputEvent,!1)}),e.dragStart(a,{container:n})},checkScroll:function(t,n){var e=n.datas.dragScroll;if(e){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,u=r.getScrollPosition,l=void 0===u?vo:u;return e.drag(n,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,Qn(Qn({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,Qn(Qn({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,Qn(Qn({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,Qn(Qn({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,Qn(Qn({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,Qn(Qn({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,Qn(Qn({},n),{targets:t.props.targets}))}},bo={name:"",props:{target:Object,dragTarget:Object,container:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,props:Object},events:{}},xo={name:"padding",props:{padding:Object},events:{},render:function(t,o){var n=t.props;if(n.dragArea)return[];var e=n.padding||{},r=e.left,i=void 0===r?0:r,a=e.top,s=void 0===a?0:a,u=e.right,l=void 0===u?0:u,c=e.bottom,p=void 0===c?0:c,f=t.state,d=f.renderPoses,h=[f.pos1,f.pos2,f.pos3,f.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<l&&g.push([1,3]),0<p&&g.push([2,3]),g.map(function(t,n){var e=t[0],r=t[1],i=Zt([0,0],[100,0],[0,100],[100,100],h[e],h[r],d[e],d[r]);if(i.length)return o.createElement("div",{key:"padding"+n,className:Ce("padding"),style:{transform:Ae(i,!0)}})})}},yo=["nw","ne","se","sw"];function Eo(t,n){var e=t[0]+t[1],r=n<e?n/e:1;return t[0]*=r,t[1]=n-t[1]*r,t}var So=[1,2,5,6],Mo=[0,3,4,7],wo=[1,-1,-1,1],Co=[1,1,-1,-1];function Do(t,a,s,u,l,c,p,f,d){void 0===c&&(c=0),void 0===p&&(p=0),void 0===f&&(f=u),void 0===d&&(d=l);var h=[],g=!1,n=t.map(function(t,n){var e=a[n],r=e.horizontal,i=e.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-p:d-t[1]);return h.push(gr(o,l,s)),o}o=Math.max(0,1===r?t[0]-c:f-t[0]);return h.push(gr(o,u,s)),o});return{styles:h,raws:n}}function Ro(t){for(var n=[0,0],e=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,e[0]=i+1),o.vertical&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:n,verticalRange:e}}function Po(t,r,i,o,a,n){var e,s,u;void 0===n&&(n=[0,0]);var l=t.indexOf("/"),c=(-1<l?t.slice(0,l):t).length,p=t.slice(0,c),f=t.slice(c+1),d=p[0],h=void 0===d?"0px":d,g=p[1],v=void 0===g?h:g,m=p[2],b=void 0===m?h:m,x=p[3],y=void 0===x?v:x,E=f[0],S=void 0===E?h:E,M=f[1],w=void 0===M?S:M,C=f[2],D=void 0===C?S:C,R=f[3],P=void 0===R?w:R,O=[h,v,b,y].map(function(t){return Et(t,r)}),z=[S,w,D,P].map(function(t){return Et(t,i)}),B=O.slice(),G=z.slice(),T=Eo([B[0],B[1]],r);B[0]=T[0],B[1]=T[1],e=Eo([B[3],B[2]],r),B[3]=e[0],B[2]=e[1],s=Eo([G[0],G[3]],i),G[0]=s[0],G[3]=s[1],u=Eo([G[1],G[2]],i),G[1]=u[0],G[2]=u[1];var A=B.slice(0,Math.max(n[0],p.length)),_=G.slice(0,Math.max(n[1],f.length));return te(A.map(function(t,n){var e=yo[n];return{horizontal:wo[n],vertical:0,pos:[o+t,a+(-1===Co[n]?i:0)],sub:!0,raw:O[n],direction:e}}),_.map(function(t,n){var e=yo[n];return{horizontal:0,vertical:Co[n],pos:[o+(-1===wo[n]?r:0),a+t],sub:!0,raw:z[n],direction:e}}))}function Oo(t,n,e,r,i){void 0===i&&(i=n.length);var o=Ro(t.slice(r)),a=o.horizontalRange,s=o.verticalRange,u=e-r,l=0;if(0==u)l=i;else if(0<u&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(e,l),n.splice(e,l)}function zo(t,n,e,r,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var p=Ro(t.slice(e)),f=p.horizontalRange,d=p.verticalRange;if(-1<r)for(var h=1===wo[r]?o-l:s-o,g=f[1];g<=r;++g){var v=1===Co[g]?c:u,m=0;if(r===g?m=o:0===g?m=l+h:-1===wo[g]&&(m=s-(n[e][0]-l)),t.splice(e+g,0,{horizontal:wo[g],vertical:0,pos:[m,v]}),n.splice(e+g,0,[m,v]),0===g)break}else if(-1<i){var b,x=1===Co[i]?a-c:u-a;0===f[1]&&0===d[1]&&(b=[l+x,c],t.push({horizontal:wo[0],vertical:0,pos:b}),n.push(b));for(var y=d[0],g=d[1];g<=i;++g){m=1===wo[g]?l:s,v=0;if(i===g?v=a:0===g?v=c+x:1===Co[g]?v=n[e+y][1]:-1===Co[g]&&(v=u-(n[e+y][1]-c)),t.push({horizontal:0,vertical:Co[g],pos:[m,v]}),n.push([m,v]),0===g)break}}}function Bo(t,e){return void 0===e&&(e=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?e[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?e[n]:null}).filter(function(t){return null!=t})}}var Go=[[0,-1,"n"],[1,0,"e"]],To=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ao(t,n,e){var r=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=n.type,u=n.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return e.map(function(t){return gr(t[0],o,r)+" "+gr(t[1],a,r)});if(l||"inset"===s){var p=e[1][1],f=e[3][0],d=e[7][0],h=e[5][1];if(l)return[p,f,h,d].map(function(t){return t+"px"});var g,v,m,b=[p,o-f,a-h,d].map(function(t,n){return gr(t,n%2?o:a,r)});return 8<e.length&&(v=(g=_t(e[4],e[0]))[0],m=g[1],b.push.apply(b,te(["round"],Do(e.slice(8),u.slice(8),r,v,m,d,p,f,h).styles))),b}if(c||"ellipse"===s){var x=e[0],y=gr(Math.abs(e[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,r);return(b=c?[y]:[gr(Math.abs(e[2][0]-x[0]),o,r),y]).push("at",gr(x[0],o,r),gr(x[1],a,r)),b}}function _o(t,n,e,r){var a=[r,(r+n)/2,n],s=[t,(t+e)/2,e];return To.map(function(t){var n=t[0],e=t[1],r=t[2],i=a[n+1],o=s[e+1];return{vertical:Math.abs(e),horizontal:Math.abs(n),direction:r,pos:[i,o]}})}function Io(t,i,o,n,e){var r,a,s,u=e;if(u||(u="none"!==(s=(a=getComputedStyle(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=n)){var l=mt(u),c=l.prefix,p=void 0===c?u:c,f=l.value,d=void 0===f?"":f,h="circle"===p,g=" ";if("polygon"===p){g=",";return{type:p,clipText:u,poses:B=(O=vt(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var n=t.split(" "),e=n[0],r=n[1];return{vertical:1,horizontal:1,pos:[Et(e,i),Et(r,o)]}}),splitter:g}}if(h||"ellipse"===p){var v,m,b,x,y,E,S,M,w,C="",D="",R=0,P=0,O=gt(d);P=h?(m="",m=void 0===(v=O[0])?"50%":v,C=void 0===(b=O[2])?"50%":b,D=void 0===(x=O[3])?"50%":x,R=Et(m,Math.sqrt((i*i+o*o)/2))):(M=E="",E=void 0===(y=O[0])?"50%":y,M=void 0===(S=O[1])?"50%":S,C=void 0===(w=O[3])?"50%":w,D=void 0===(r=O[4])?"50%":r,R=Et(E,i),Et(M,o));var z=[Et(C,i),Et(D,o)],B=te([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],Go.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[z[0]+t[0]*R,z[1]+t[1]*P]}}));return{type:p,clipText:u,radiusX:R,radiusY:P,left:z[0]-R,top:z[1]-P,poses:B,splitter:g}}if("inset"===p){var G=(O=gt(d||"0 0 0 0")).indexOf("round"),T=(-1<G?O.slice(0,G):O).length,A=O.slice(T+1),_=O.slice(0,T),I=_[0],k=_[1],j=void 0===k?I:k,Y=_[2],X=void 0===Y?I:Y,F=_[3],N=void 0===F?j:F,q=[I,X].map(function(t){return Et(t,o)}),L=q[0],W=q[1],H=[N,j].map(function(t){return Et(t,i)}),V=H[0],U=H[1],Z=i-U,$=o-W,K=Po(A,Z-V,$-L,V,L);return{type:"inset",clipText:u,poses:B=te(_o(L,Z,$,V),K),top:L,left:V,right:Z,bottom:$,radius:A,splitter:g}}if("rect"===p){g=",";var J=(O=vt(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t){return bt(t).value});return{type:"rect",clipText:u,poses:B=_o(L=J[0],U=J[1],W=J[2],V=J[3]),top:L,right:U,bottom:W,left:V,values:O,splitter:g}}}}var ko={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,s){var n=t.props,e=n.customClipPath,r=n.defaultClipPath,i=n.clipArea,o=n.zoom,a=t.state,u=a.target,l=a.width,c=a.height,p=a.allMatrix,f=a.is3d,d=a.left,h=a.top,g=a.pos1,v=a.pos2,m=a.pos3,b=a.pos4,x=a.clipPathState,y=a.snapBoundInfos;if(!u)return[];var E=Io(u,l,c,r||"inset",x||e);if(!E)return[];var S,M,w,C,D,R,P=f?4:3,O=E.type,z=E.poses.map(function(t){var n=Ie(p,t.pos,P);return[n[0]-d,n[1]-h]}),B=[],G=[],T="rect"===O,A="inset"===O,_="polygon"===O;if((T||A||_)&&(S=A?z.slice(0,8):z,G=S.map(function(t,n){var e=0===n?S[S.length-1]:S[n-1],r=Ct(e,t),i=Ne(e,t);return s.createElement("div",{key:"clipLine"+n,className:Ce("line","clip-line","snap-control"),"data-clip-index":n,style:{width:i+"px",transform:"translate("+e[0]+"px, "+e[1]+"px) rotate("+r+"rad)"}})})),B=z.map(function(t,n){return s.createElement("div",{key:"clipControl"+n,className:Ce("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})}),A&&B.push.apply(B,z.slice(8).map(function(t,n){return s.createElement("div",{key:"clipRadiusControl"+n,className:Ce("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})})),"circle"===O||"ellipse"===O){var I=E.left,k=E.top,j=E.radiusX,Y=E.radiusY,X=_t(Ie(p,[I,k],P),Ie(p,[0,0],P)),F=X[0],N=X[1],q="none";if(!i){for(var L=Math.max(10,j/5,Y/5),W=[],H=0;H<=L;++H){var V=2*Math.PI/L*H;W.push([j+(j-o)*Math.cos(V),Y+(Y-o)*Math.sin(V)])}W.push([j,-2]),W.push([-2,-2]),W.push([-2,2*Y+2]),W.push([2*j+2,2*Y+2]),W.push([2*j+2,-2]),W.push([j,-2]),q="polygon("+W.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}B.push(s.createElement("div",{key:"clipEllipse",className:Ce("clip-ellipse","snap-control"),style:{width:2*j+"px",height:2*Y+"px",clipPath:q,transform:"translate("+(-d+F)+"px, "+(-h+N)+"px) "+Ae(p)}}))}return i&&(w=(M=je(te([g,v,m,b],z))).width,C=M.height,D=M.left,R=M.top,(_||T||A)&&(W=A?z.slice(0,8):z,B.push(s.createElement("div",{key:"clipArea",className:Ce("clip-area","snap-control"),style:{width:w+"px",height:C+"px",transform:"translate("+D+"px, "+R+"px)",clipPath:"polygon("+W.map(function(t){return t[0]-D+"px "+(t[1]-R)+"px"}).join(", ")+")"}})))),y&&["vertical","horizontal"].forEach(function(o){var t=y[o],a="horizontal"===o;t.isSnap&&G.push.apply(G,t.snap.posInfos.map(function(t,n){var e=t.pos,r=_t(Ie(p,a?[0,e]:[e,0],P),[d,h]),i=_t(Ie(p,a?[l,e]:[e,c],P),[d,h]);return to(s,"",r,i,"clip"+o+"snap"+n,"guideline")})),t.isBound&&G.push.apply(G,t.bounds.map(function(t,n){var e=t.pos,r=_t(Ie(p,a?[0,e]:[e,0],P),[d,h]),i=_t(Ie(p,a?[l,e]:[e,c],P),[d,h]);return to(s,"",r,i,"clip"+o+"bounds"+n,"guideline","bounds","bold")}))}),te(B,G)},dragControlCondition:function(t){return t.inputEvent&&-1<(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,n){var e=t.props.dragWithClip;return void 0!==e&&!e&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,n)},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var e=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,a=e.target,s=e.width,u=e.height,l=n.inputEvent?n.inputEvent.target:null,c=l?l.getAttribute("class"):"",p=n.datas,f=Io(a,s,u,i||"inset",o);if(!f)return!1;var d=f.clipText;return!1===rr(t,"onClipStart",nr(t,n,{clipType:f.type,clipStyle:d,poses:f.poses.map(function(t){return t.pos})}))?p.isClipStart=!1:(p.isControl=-1<c.indexOf("clip-control"),p.isLine=-1<c.indexOf("clip-line"),p.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),p.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,p.clipPath=f,p.isClipStart=!0,e.clipPathState=d,Rr(t,n),!0)},dragControl:function(t,n){var e=n.datas,r=n.originalDatas;if(!e.isClipStart)return!1;var i=r&&r.draggable||{},o=e.isControl,a=e.isLine,s=e.isArea,u=e.index,l=e.clipPath;if(!l)return!1;var c=i.isDrag?i.prevDist:Tr(n),p=c[0],f=c[1],d=t.props,h=t.state,g=h.width,v=h.height,m=!s&&!o&&!a,b=l.type,x=l.poses,y=l.splitter,E=x.map(function(t){return t.pos});m&&(p=-p,f=-f);var S,M,w,C,D,R,P,O,z,B,G,T,A,_,I,k=!o||"nesw"===x[u].direction,j="inset"===b||"rect"===b,Y=x.map(function(){return[0,0]});o&&!k?(M=(S=x[u]).horizontal,w=S.vertical,C=[p*Math.abs(M),f*Math.abs(w)],P=C,O=j,G=(D=x)[R=u],T=G.direction,A=G.sub,_=D.map(function(){return[0,0]}),I=T?T.split(""):[],O&&R<8?(z=I.filter(function(t){return"w"===t||"e"===t})[0],B=I.filter(function(t){return"n"===t||"s"===t})[0],_[R]=P,D.forEach(function(t,n){var e=t.direction;e&&(-1<e.indexOf(z)&&(_[n][0]=P[0]),-1<e.indexOf(B)&&(_[n][1]=P[1]))}),z&&(_[1][0]=P[0]/2,_[5][0]=P[0]/2),B&&(_[3][1]=P[1]/2,_[7][1]=P[1]/2)):T&&!A?I.forEach(function(o){var a="n"===o||"s"===o;D.forEach(function(t,n){var e=t.direction,r=t.horizontal,i=t.vertical;e&&-1!==e.indexOf(o)&&(_[n]=[a||!r?0:P[0],a&&i?P[1]:0])})}):_[R]=P,Y=_):k&&(Y=E.map(function(){return[p,f]}));var X=E.map(function(t,n){return At(t,Y[n])}),F=te(X);h.snapBoundInfos=null;var N,q,L,W,H,V,U="circle"===l.type,Z="ellipse"===l.type;(U||Z)&&(N=je(X),q=Math.abs(N.bottom-N.top),L=Math.abs(Z?N.right-N.left:q),W=X[0][1]+q,H=X[0][0]-L,V=X[0][0]+L,U&&(F.push([V,N.bottom]),Y.push([1,0])),F.push([N.left,W]),Y.push([0,1]),F.push([H,N.bottom]),Y.push([1,0]));var $,K=Jr([],g,v,(d.clipHorizontalGuidelines||[]).map(function(t){return Et(""+t,v)}),(d.clipVerticalGuidelines||[]).map(function(t){return Et(""+t,g)})),J=[],Q=[];Q=U||Z?(J=[F[4][0],F[2][0]],[F[1][1],F[3][1]]):j?(nt=[F[0],F[2],F[4],F[6]],$=[Y[0],Y[2],Y[4],Y[6]],J=nt.filter(function(t,n){return $[n][0]}).map(function(t){return t[0]}),nt.filter(function(t,n){return $[n][1]}).map(function(t){return t[1]})):(J=F.filter(function(t,n){return Y[n][0]}).map(function(t){return t[0]}),F.filter(function(t,n){return Y[n][1]}).map(function(t){return t[1]}));for(var tt=0;tt<2;++tt){if("break"===function(){var t=Oi(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,{snapThreshold:5}),n=t.horizontal,e=t.vertical,r=n.offset,i=e.offset;if(!Z&&!U||0!==Y[0][0]||0!==Y[0][1])return F.forEach(function(t,n){var e=Y[n];e[0]&&(t[0]-=i),e[1]&&(t[1]-=r)}),"break";var o=je(X),a=o.bottom-o.top,s=Z?o.right-o.left:a;s-=e.isBound?Math.abs(i):0===e.snapIndex?-i:i,a-=n.isBound?Math.abs(r):0===n.snapIndex?-r:r,U&&(s=a=0<ii(e,n)?a:s);var u=F[0];F[1][1]=u[1]-a,F[2][0]=u[0]+s,F[3][1]=u[1]+a,F[4][0]=u[0]-s}())break}var nt,et=Ao(t,l,X),rt=b+"("+et.join(y)+")";return h.clipPathState=rt,Q=U||Z?(J=[F[4][0],F[2][0]],[F[1][1],F[3][1]]):j?(nt=[F[0],F[2],F[4],F[6]],J=nt.map(function(t){return t[0]}),nt.map(function(t){return t[1]})):(J=F.map(function(t){return t[0]}),F.map(function(t){return t[1]})),h.snapBoundInfos=Oi(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,{snapThreshold:1}),rr(t,"onClip",nr(t,n,{clipEventType:"changed",clipType:b,poses:X,clipStyle:rt,clipStyles:et,distX:p,distY:f})),!0},dragControlEnd:function(t,n){this.unset(t);var e=n.isDrag,r=n.datas,i=n.isDouble,o=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(rr(t,"onClipEnd",er(t,n,{})),i&&(s?function(t,n){var e=n.datas,r=e.clipPath,i=e.index,o=r.type,a=r.poses,s=r.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(Oo(a,u,i,8,l),l===a.length)return}var c=Ao(t,r,u);rr(t,"onClip",nr(t,n,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(s)+")",distX:0,distY:0}))}(t,n):o&&function(t,n){var e=Dr(t,n),r=e[0],i=e[1],o=n.datas,a=o.clipPath,s=o.index,u=a.type,l=a.poses,c=a.splitter,p=l.map(function(t){return t.pos});if("polygon"===u)p.splice(s,0,[r,i]);else{if("inset"!==u)return;var f=So.indexOf(s),d=Mo.indexOf(s),h=l.length;if(zo(l,p,8,f,d,r,i,p[4][0],p[4][1],p[0][0],p[0][1]),h===l.length)return}var g=Ao(t,a,p);rr(t,"onClip",nr(t,n,{clipEventType:"added",clipType:u,poses:p,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,n)),i||e)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},jo={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:Rt(t.inputEvent.target,Ce("origin"))},dragControlStart:function(t,n){var e=n.datas;Rr(t,n);var r=nr(t,n,{dragStart:Hi.dragStart(t,(new Sr).dragStart([0,0],n))}),i=rr(t,"onDragOriginStart",r);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],!(e.isDragOrigin=!0)===i?e.isDragOrigin=!1:r},dragControl:function(t,n){var e=n.datas,r=n.isPinch,i=n.isRequest;if(!e.isDragOrigin)return!1;var o,a=Tr(n),s=a[0],u=a[1],l=t.state,c=l.width,p=l.height,f=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,b=[s,u];!i||((o=n.distOrigin)[0]||o[1])&&(b=o);var x=At(e.startOrigin,b),y=At(e.startTargetOrigin,b),E=_t(b,e.prevOrigin),S=jr(f,d,x,m),M=t.getRect(),w=je(ke(S,c,p,m)),C=[M.left-w.left,M.top-w.top],D=nr(t,n,{width:c,height:p,origin:x,dist:e.prevOrigin=b,delta:E,transformOrigin:[gr(y[0],c,v),gr(y[1],p,v)].join(" "),drag:Hi.drag(t,Er(n,t.state,C,!!r,!1))});return rr(t,"onDragOrigin",D),D},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(rr(t,"onDragOriginEnd",er(t,n,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){var e=this.dragControl(t,n);return!!e&&(t.transformOrigin=e.transformOrigin,!0)},request:function(t){var n={},e=t.getRect(),r=0,i=0,o=e.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Yo(t,n,e,r,i){void 0===r&&(r=[0,0]);var o,a;return Po(!(a=i||((o=window.getComputedStyle(t))&&o.borderRadius||""))||!i&&"0px"===a?[]:gt(a),n,e,0,0,r)}function Xo(t,n,e,r,i,o){var a=t.state,s=a.width,u=a.height,l=Do(o,i,t.props.roundRelative,s,u),c=l.raws,p=l.styles,f=Bo(i,c),d=f.horizontals,h=f.verticals,g=p.join(" ");rr(t,"onRound",nr(t,n,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:r,dist:e}))}var Fo={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,i){var n=t.state,e=n.target,r=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,l=n.top,c=n.borderRadiusState,p=t.props,f=p.minRoundControls,d=void 0===f?[0,0]:f,h=p.maxRoundControls,g=void 0===h?[4,4]:h;if(!e)return null;var v=s?4:3,m=Yo(e,r,o,d,c);if(!m)return null;var b=0,x=0;return m.map(function(t,n){x+=Math.abs(t.horizontal),b+=Math.abs(t.vertical);var e=_t(Ie(a,t.pos,v),[u,l]),r=t.vertical?b<=g[1]:x<=g[0];return i.createElement("div",{key:"borderRadiusControl"+n,className:Ce("control","border-radius"),"data-radius-index":n,style:{display:r?"block":"none",transform:"translate("+e[0]+"px, "+e[1]+"px)"}})})},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var n=t.inputEvent.target.getAttribute("class")||"";return-1<n.indexOf("border-radius")||-1<n.indexOf("moveable-line")&&-1<n.indexOf("moveable-direction")},dragControlStart:function(t,n){var e=n.inputEvent,r=n.datas,i=e.target,o=i.getAttribute("class")||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===rr(t,"onRoundStart",nr(t,n,{})))return!1;r.lineIndex=l,r.controlIndex=u,r.isControl=a,r.isLine=s,Rr(t,n);var c=t.props,p=c.roundRelative,f=c.minRoundControls,d=void 0===f?[0,0]:f,h=t.state,g=h.target,v=h.width,m=h.height;r.isRound=!0,r.prevDist=[0,0];var b=Yo(g,v,m,d)||[];return r.controlPoses=b,h.borderRadiusState=Do(b.map(function(t){return t.pos}),b,p,v,m).styles.join(" "),!0},dragControl:function(t,n){var e=n.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var r=e.controlIndex,i=e.controlPoses,o=Tr(n),a=o[0],s=o[1],u=[a,s],l=_t(u,e.prevDist),c=t.props.maxRoundControls,p=void 0===c?[4,4]:c,f=t.state,d=f.width,h=f.height,g=i[r],v=g.vertical,m=g.horizontal,b=i.map(function(t,n){var e=t.horizontal,r=t.vertical,i=[e*m*u[0],r*v*u[1]];if(e){if(1===p[0])return i;if(p[0]<4&&e!==m)return i}else{if(0===p[1])return i[1]=r*m*u[0]/d*h,i;if(v){if(1===p[1])return i;if(p[1]<4&&r!==v)return i}}return[0,0]});b[r]=u;var x=i.map(function(t,n){return At(t.pos,b[n])});return e.prevDist=[a,s],Xo(t,n,u,l,i,x),!0},dragControlEnd:function(t,n){var e=t.state;e.borderRadiusState="";var r=n.datas,i=n.isDouble;if(!r.isRound)return!1;var o,a,s,u,l,c,p,f,d,h,g,v,m,b,x,y,E,S=e.width,M=e.height,w=r.isControl,C=r.controlIndex,D=r.isLine,R=r.lineIndex,P=r.controlPoses,O=P.map(function(t){return t.pos}),z=O.length,B=t.props.roundClickable;return i&&(void 0===B||B)&&(w?Oo(P,O,C,0):D&&(a=(o=Dr(t,n))[0],s=o[1],l=O,c=R,p=a,f=s,d=S,h=M,g=Bo(u=P),v=g.horizontals,m=g.verticals,b=v.length,x=m.length,E=y=-1,0===c?0===b?y=0:1===b&&(y=1):3===c&&(b<=2?y=2:b<=3&&(y=3)),2===c?0===x?E=0:x<4&&(E=3):1===c&&(x<=1?E=1:x<=2&&(E=2)),zo(u,l,0,y,E,p,f,d,h)),z!==P.length&&Xo(t,n,[0,0],[0,0],P,O),rr(t,"onRoundEnd",er(t,n,{}))),!(e.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}},No={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,n){var e=t.state,r=e.is3d,i=e.targetMatrix,o=r?"matrix3d("+i.join(",")+")":"matrix("+It(i,!0)+")";n.datas.startTransforms=[o]},resetTransform:function(t,n){n.datas.nextTransforms=n.datas.startTransforms,n.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return nr(t,n,{setTransform:function(t){n.datas.startTransforms=pt(t)?t:gt(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return nr(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),rr(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(t,n),rr(t,"onBeforeRender",nr(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){rr(t,"onBeforeRenderEnd",nr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var r=this;this.dragStart(t,n);var e=Mr(t,"beforeRenderable",n),i=t.moveables,o=e.map(function(t,n){var e=i[n];return r.setTransform(e,t),r.fillDragStartParams(e,t)});rr(t,"onBeforeRenderGroupStart",nr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,n){var r=this;this.drag(t,n);var e=Mr(t,"beforeRenderable",n),i=t.moveables,o=e.map(function(t,n){var e=i[n];return r.resetTransform(e,t),r.fillDragParams(e,t)});rr(t,"onBeforeRenderGroup",nr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),rr(t,"onBeforeRenderGroupEnd",nr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},qo={name:"Renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,n){rr(t,"onRenderStart",nr(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){rr(t,"onRender",nr(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){rr(t,"onRenderEnd",nr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){rr(t,"onRenderGroupStart",nr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){rr(t,"onRenderGroup",nr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,n){rr(t,"onRenderGroupEnd",nr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}};function Lo(r,t,n,e,i,o,a){var s="Start"===i,u=r.state.target,l=o.isRequest;if(!u||s&&-1<e.indexOf("Control")&&!l&&r.areaElement===o.inputEvent.target)return!1;var c=""+n+e+i,p=""+n+e+"Condition",f="End"===i,d=-1<i.indexOf("After"),h=!(!s||r.targetGesto&&r.controlGesto&&r.targetGesto.isFlag()&&r.controlGesto.isFlag());h&&r.updateRect(i,!0,!1),""!==i||d||dr(r.state,o);var g,v=-1<e.indexOf("Group"),m=te([No],r[t].slice(),[qo]);if(l&&(g=o.requestAble,m.some(function(t){return t.name===g})||m.push.apply(m,r.props.ables.filter(function(t){return t.name===g}))),!m.length)return!1;var b=m.filter(function(t){return t[c]}),x=o.datas;h&&b.forEach(function(t){t.unset&&t.unset(r)});var y,E=o.inputEvent;f&&E&&(y=document.elementFromPoint(o.clientX,o.clientY)||E.target);var S=b.filter(function(t){var n=t.name,e=x[n]||(x[n]={});return s&&(e.isEventStart=!t[p]||t[p](o,r)),!!e.isEventStart&&t[c](r,Qn(Qn({},o),{datas:e,originalDatas:x,inputTarget:y}))}),M=S.length,w=s&&b.length&&!M;return(f||w)&&(r.state.gesto=null,r.moveables&&r.moveables.forEach(function(t){t.state.gesto=null})),h&&w&&b.forEach(function(t){t.unset&&t.unset(r)}),!r.isUnmounted&&!w&&((!s&&M&&!a||f)&&(S.some(function(t){return t.updateRect})&&!v?r.updateRect(i,!1,!1):r.updateRect(i,!0,!1),r.forceUpdate()),s||f||d||!M||a||Lo(r,t,n,e,i+"After",o),!0)}function Wo(e,t,n){var r=e.controlBox.getElement(),i=[];i.push(r),e.props.dragArea||i.push(t);function o(t){var n=t.inputEvent.target;return n===e.areaElement||!e.isMoveableElement(n)||Rt(n,"moveable-area")||Rt(n,"moveable-padding")}return Ho(e,i,"targetAbles",n,{dragStart:o,pinchStart:o})}function Ho(i,t,o,a,s){void 0===s&&(s={});var n=i.props,e=n.pinchOutside,r=n.pinchThreshold,u={container:window,pinchThreshold:r,pinchOutside:e},l=new In(t,u);return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){l.on(""+r+e,function(t){var n=t.eventType;(!s[n]||s[n](t))&&Lo(i,o,r,a,e,t)||t.stop()})})}),l}var Vo=function(){function t(t,n,e){var i=this;this.target=t,this.moveable=n,this.eventName=e,this.ables=[],this.onEvent=function(n){var e=i.eventName,r=i.moveable;i.ables.forEach(function(t){t[e]({inputEvent:n},r)})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),Uo=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.state=Qn({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]]},He(null)),t.enabledAbles=[],t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isUnmounted=!1,t.events={mouseEnter:null,mouseLeave:null},t}Jn(t,n);var e=t.prototype;return e.render=function(){var t=this.props,n=this.state,e=t.edge,r=t.parentPosition,i=t.className,o=t.target,a=t.zoom,s=t.cspNonce,u=t.translateZ,l=t.cssStyled;this.checkUpdate(),this.updateRenderPoses();var c=r||{left:0,top:0},p=c.left,f=c.top,d=n.left,h=n.top,g=n.target,v=n.direction,m=n.renderPoses,b=t.targets,x=(b&&b.length||o)&&g,y=this.isDragging(),E={},S={createElement:O};return this.getEnabledAbles().forEach(function(t){E["data-able-"+t.name.toLowerCase()]=!0}),O(l,Qn({cspNonce:s,ref:M(this,"controlBox"),className:Ce("control-box",-1===v?"reverse":"",y?"dragging":"")+" "+i},E,{style:{position:"absolute",display:x?"block":"none",transform:"translate("+(d-p)+"px, "+(h-f)+"px) translateZ("+u+"px)","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),to(S,e?"n":"",m[0],m[1],0),to(S,e?"e":"",m[1],m[3],1),to(S,e?"w":"",m[0],m[2],2),to(S,e?"s":"",m[2],m[3],3))},e.componentDidMount=function(){this.controlBox.getElement();var t=this.props,n=t.parentMoveable,e=t.container,r=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),e||n||r||this.updateRect("",!1,!0),this.updateCheckInput()},e.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},e.componentWillUnmount=function(){this.isUnmounted=!0,tr(this,"targetGesto"),tr(this,"controlGesto");var t=this.events;for(var n in t){var e=t[n];e&&e.destroy()}},e.getContainer=function(){var t=this.props,n=t.parentMoveable,e=t.wrapperMoveable;return t.container||e&&e.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(ge)},e.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},e.hitTest=function(t){var n,e,r=this.state,i=r.target,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.targetClientRect;if(!i)return 0;var c=(e=t instanceof Element?{left:(n=t.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}:Qn({width:0,height:0},t)).left,p=e.top,f=e.width,d=e.height,h=ln([o,a,u,s],l),g=vn(h,[[c,p],[c+f,p],[c+f,p+d],[c,p+d]]),v=un(h);return g&&v?Math.min(100,g/v*100):0},e.isInside=function(t,n){var e=this.state,r=e.target,i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=e.targetClientRect;return!!r&&pn([t,n],ln([i,o,s,a],u))},e.updateRect=function(t,n,e){void 0===e&&(e=!0);var r=this.props,i=r.parentMoveable,o=this.state,a=o.target||this.props.target,s=this.getContainer(),u=i?i.props.rootContainer:r.rootContainer;this.updateState(He(this.controlBox&&this.controlBox.getElement(),a,s,s,u||s,n?o:void 0),!i&&e)},e.isTargetChanged=function(t,n){var e=this.props,r=e.dragTarget||e.target,i=t.dragTarget||t.target,o=e.dragArea,a=t.dragArea;return!o&&i!==r||(n||o)&&a!==o},e.updateNativeEvents=function(t){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,n=yt(s);if(this.isTargetChanged(t))for(var e in s){var r=s[e];r&&r.destroy(),s[e]=null}a&&(i=this.enabledAbles,n.forEach(function(t){var n=or(i,[t]),e=0<n.length,r=s[t];e?(r||(r=new Vo(a,o,t),s[t]=r),r.setAbles(n)):r&&(r.destroy(),s[t]=null)}))},e.updateEvent=function(t){var n=this.controlBox.getElement(),e=this.targetAbles.length,r=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=this.isTargetChanged(t,!0),s=!e&&this.targetGesto||a;s&&(tr(this,"targetGesto"),this.updateState({gesto:null})),r||tr(this,"controlGesto"),o&&e&&!this.targetGesto&&(this.targetGesto=Wo(this,o,"")),!this.controlGesto&&r&&(this.controlGesto=Ho(this,n,"controlAbles","Control")),s&&this.unsetAbles()},e.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},e.updateTarget=function(t){this.updateRect(t,!0)},e.getRect=function(){var t=this.state,n=Ke(this.state),e=n[0],r=n[1],i=n[2],o=n[3],a=je(n),s=t.width,u=t.height,l=a.width,c=a.height,p=a.left,f=a.top,d=[t.left,t.top],h=At(d,t.origin);return{width:l,height:c,left:p,top:f,pos1:e,pos2:r,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:At(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.getManager=function(){return this},e.getRotation=function(){var t=this.state,n=t.pos1,e=t.pos2,r=t.direction,i=Ct(n,e)/Math.PI*180;return i=0<=(i=0<=r?i:180-i)?i:360+i},e.request=function(n,t,e){void 0===t&&(t={});var r=this.props,i=r.ables,o=r.groupable,a=i.filter(function(t){return t.name===n})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=e||t.isInstant,c=u.isControl?"controlAbles":"targetAbles",p=(o?"Group":"")+(u.isControl?"Control":""),f={request:function(t){return Lo(s,c,"drag",p,"",Qn(Qn({},u.request(t)),{requestAble:n,isRequest:!0}),l),this},requestEnd:function(){return Lo(s,c,"drag",p,"End",Qn(Qn({},u.requestEnd()),{requestAble:n,isRequest:!0}),l),this}};return Lo(s,c,"drag",p,"Start",Qn(Qn({},u.requestStart(t)),{requestAble:n,isRequest:!0}),l),l?f.request(t).requestEnd():f},e.destroy=function(){this.componentWillUnmount()},e.updateRenderPoses=function(){var t=this.state,n=this.props,e=t.beforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,p=t.top,f=n.padding||{},d=f.left,h=void 0===d?0:d,g=f.top,v=void 0===g?0:g,m=f.bottom,b=void 0===m?0:m,x=f.right,y=void 0===x?0:x,E=o?4:3,S=n.groupable?e:At(e,[c,p]);t.renderPoses=[At(a,hr(i,[-h,-v],r,S,E)),At(s,hr(i,[y,-v],r,S,E)),At(u,hr(i,[-h,b],r,S,E)),At(l,hr(i,[y,b],r,S,E))]},e.checkUpdate=function(){var t=this.props,n=t.target,e=t.container,r=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||n)&&(this.updateAbles(),ur(o,n)&&ur(a,e)||(this.updateState({target:n,container:e}),r||!e&&!this.controlBox||this.updateRect("End",!1,!1)))},e.triggerEvent=function(t,n){var e=this.props[t];return e&&e(n)},e.unsetAbles=function(){var n=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(n),!0)}).length&&this.forceUpdate()},e.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var e=this.props,r=e.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always||e[t.name])}),o="drag"+n+"ControlStart",a=or(i,["drag"+n+"Start","pinch"+n+"Start"],r),s=or(i,[o],r);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=s},e.updateState=function(t,n){if(n)this.setState(t);else{var e=this.state;for(var r in t)e[r]=t[r]}},e.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(t){return t&&n[t.name]})},e.renderAbles=function(){var i,o,a,s,n=this,t=this.props.triggerAblesSimultaneously,e={createElement:O};return i=cr(or(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(n,e)||[]})).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,n){var e=o(t,n,i),r=s[e];r||(r=[],s[e]=r,a.push(r)),r.push(t)}),a.map(function(t){return t[0]})},e.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:50,cssStyled:null,props:{}},t}(Y),Zo={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(e,r){var t=e.props.targets||[];e.moveables=[];var n=e.state,i={left:n.left,top:n.top};return t.map(function(t,n){return r.createElement(Uo,{key:"moveable"+n,ref:o(e,"moveables",n),target:t,origin:!1,cssStyled:e.props.cssStyled,parentMoveable:e,parentPosition:i})})}};function $o(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),Qn(Qn({},t),{datas:n})}var Ko={name:"edgeDraggable",props:{edgeDraggable:Boolean},events:{},dragControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var e=t.inputEvent.target;return Rt(e,Ce("direction"))&&Rt(e,Ce("line"))},dragControlStart:function(t,n){return Hi.dragStart(t,$o(n))},dragControl:function(t,n){return Hi.drag(t,$o(n))},dragControlEnd:function(t,n){return Hi.dragEnd(t,$o(n))},dragGroupControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var e=t.inputEvent.target;return Rt(e,Ce("direction"))&&Rt(e,Ce("line"))},dragGroupControlStart:function(t,n){return Hi.dragGroupStart(t,$o(n))},dragGroupControl:function(t,n){return Hi.dragGroup(t,$o(n))},dragGroupControlEnd:function(t,n){return Hi.dragGroupEnd(t,$o(n))},unset:function(t){t.state.dragInfo=null}},Jo={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Qo=[No,bo,Wi,yr,Hi,Ko,Ji,ro,io,so,mo,xo,go,jo,ko,Fo,Zo,Jo,{name:"clickable",props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(){},dragGroupStart:function(t,n){n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){var e,r=t.state.target,i=n.inputEvent,o=n.inputTarget;i&&o&&!n.isDrag&&!t.isMoveableElement(o)&&(e=r.contains(o),rr(t,"onClick",nr(t,n,{isDouble:n.isDouble,inputTarget:o,isTarget:r===o,containsTarget:e})))},dragGroupEnd:function(t,n){var e,r,i,o,a=n.inputEvent,s=n.inputTarget;a&&s&&!n.isDrag&&!t.isMoveableElement(s)&&n.datas.inputTarget!==s&&(i=-1<(r=(e=t.props.targets).indexOf(s)),o=!1,-1===r&&(o=-1<(r=xt(e,function(t){return t.contains(s)}))),rr(t,"onClickGroup",nr(t,n,{isDouble:n.isDouble,targets:e,inputTarget:s,targetIndex:r,isTarget:i,containsTarget:o})))}},ho,qo],ta=Qo.reduce(function(t,n){return Qn(Qn({},t),n.events)},{}),na=Qo.reduce(function(t,n){return Qn(Qn({},t),n.props)},{}),ea=br(ta),ra=Object.keys(ea),ia=Object.keys(na);function oa(t,o){return Math.max.apply(Math,t.map(function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return Math.max(n[o],e[o],r[o],i[o])}))}function aa(t,o){return Math.min.apply(Math,t.map(function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return Math.min(n[o],e[o],r[o],i[o])}))}var sa=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.differ=new Xn,t.moveables=[],t.transformOrigin="50% 50%",t}Jn(t,r);var n=t.prototype;return n.updateEvent=function(t){var n=this.state,e=this.props;n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=Wo(this,n.target,"Group"),this.controlGesto=Ho(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var r=!ur(t.container,e.container);r&&(n.container=e.container);var i=this.differ.update(e.targets),o=i.added,a=i.changed,s=i.removed;(r||o.length||a.length||s.length)&&this.updateRect()},n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(n,t,e){var r,i,o,a,s,u,l,c,p,f,d,h,g,v,m,b;void 0===e&&(e=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(n,!1,!1)}),r=this.state,i=this.props,o=r.target||i.target,(!t||""!==n&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),a=this.rotation,s=this.scale,l=(u=function(t,n){if(!t.length)return[0,0,0,0];var o,i,a,r,s,e,u,l=t.map(function(t){return Ke(t.state)}),c=xe,p=xe,f=0,d=0,h=Je(n,be);return h%90?(o=n/180*Math.PI,i=Math.tan(o),a=-1/i,r=[ye,xe],s=[ye,xe],l.forEach(function(t){t.forEach(function(t){var n=t[1]-i*t[0],e=t[1]-a*t[0];r[0]=Math.max(r[0],n),r[1]=Math.min(r[1],n),s[0]=Math.max(s[0],e),s[1]=Math.min(s[1],e)})}),r.forEach(function(r){s.forEach(function(t){var n=(t-r)/(i-a),e=i*n+r;c=Math.min(c,n),p=Math.min(p,e)})}),f=oa(e=l.map(function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return[Nt(n,-o),Nt(e,-o),Nt(r,-o),Nt(i,-o)]}),0)-aa(e,0),d=oa(e,1)-aa(e,1)):(c=aa(l,0),p=aa(l,1),f=oa(l,0)-c,d=oa(l,1)-p,h%180&&(u=f,f=d,d=u)),[c,p,f,d]}(this.moveables,a))[0],c=u[1],p=u[2],f=u[3],o.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+p+"px; height:"+f+"px;transform:rotate("+a+"deg) scale("+(0<=s[0]?1:-1)+", "+(0<=s[1]?1:-1)+")",r.width=p,r.height=f,d=this.getContainer(),g=[(h=He(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||d,r)).left,h.top],v=Ke(h),h.pos1=v[0],h.pos2=v[1],h.pos3=v[2],h.pos4=v[3],h.origin=At(g,h.origin),h.beforeOrigin=At(g,h.beforeOrigin),(m=h.targetClientRect).top+=c-h.top-r.top,m.left+=l-h.left-r.left,b=0<s[0]*s[1]?1:-1,this.updateState(Qn(Qn({},h),{direction:b,beforeDirection:b,left:l-h.left,top:c-h.top}),e))},n.getRect=function(){return Qn(Qn({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.triggerEvent=function(t,n,e){if(e||-1<t.indexOf("Group"))return r.prototype.triggerEvent.call(this,t,n)},n.updateAbles=function(){r.prototype.updateAbles.call(this,te(this.props.ables,[Zo]),"Group")},t.defaultProps=Qn(Qn({},Uo.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(Uo),ua=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.moveables=[],t}Jn(t,n);var e=t.prototype;return e.render=function(){var e=this,t=this.props,n=t.cspNonce,r=t.cssStyled,i=t.targets;return O(r,{cspNonce:n,ref:M(this,"controlBox"),className:Ce("control-box")},i.map(function(t,n){return O(Uo,Qn({key:"moveable"+n,ref:o(e,"moveables",n)},e.props,{target:t,wrapperMoveable:e}))}))},e.componentDidUpdate=function(){},e.updateRect=function(n,e,r){void 0===r&&(r=!0),this.moveables.forEach(function(t){t.updateRect(n,e,r)})},e.getRect=function(){return Qn(Qn({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},e.dragStart=function(){return this},e.hitTest=function(){return 0},e.isInside=function(){return!1},e.isDragging=function(){return!1},e.updateRenderPoses=function(){},e.updateEvent=function(){},e.checkUpdate=function(){},e.triggerEvent=function(){},e.updateAbles=function(){},t}(Uo),la=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Jn(n,t),n.defaultAbles=Qo,n}(function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t}Jn(t,n);var e,r,i=t.prototype;return t.makeStyled=function(){var e={};this.getTotalAbles().forEach(function(t){var n=t.css;n&&n.forEach(function(t){e[t]=!0})});var r,t,i,o,n=yt(e).join("\n");this.defaultStyled=(r="div",o=ge,t=(ve+n).replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+o+"$1")+"{"}),i=Hn(t),function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=i,t.tag=r,t}return Un(t,n),t}($n))},t.getTotalAbles=function(){return te([bo,Zo,Jo,ho],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var n,e,r,i=this.props,o=i.ables,a=i.props,s=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}(i,["ables","props"]),u=xr(s.target||s.targets),l=(n=u,e=this.selectorMap,r=[],n.forEach(function(t){t&&(ft(t)?e[t]&&r.push.apply(r,e[t]):r.push(t))}),r);this.refTargets=u;var c=1<l.length,p=te(t.getTotalAbles(),o||[]),f=Qn(Qn(Qn({},s),a||{}),{ables:p});return c?s.individualGroupable?O(ua,Qn({key:"individual-group",ref:M(this,"moveable"),cssStyled:t.defaultStyled},f,{target:null,targets:l})):O(sa,Qn({key:"group",ref:M(this,"moveable"),cssStyled:t.defaultStyled},f,{target:null,targets:l})):O(Uo,Qn({key:"single",ref:M(this,"moveable"),cssStyled:t.defaultStyled},f,{target:l[0]}))},i.componentDidMount=function(){this.updateRefs()},i.componentDidUpdate=function(){this.updateRefs()},i.updateRefs=function(t){var r=xr(this.props.target||this.props.targets),n=this.refTargets.some(function(t,n){var e=r[n];return!(!t&&!e)&&t!==e}),e=t?{}:this.selectorMap,i={};this.refTargets.forEach(function(t){ft(t)&&(e[t]?i[t]=e[t]:(n=!0,i[t]=[].slice.call(document.querySelectorAll(t))))}),this.selectorMap=i,n&&this.forceUpdate()},i.getManager=function(){return this.moveable},t.defaultAbles=[],t.defaultStyled=null,function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,e,a):i(n,e))||a);3<o&&a&&Object.defineProperty(n,e,a)}([(e=we,void 0===r&&(r={}),function(n,o){e.forEach(function(i){var t=r[i]||i;n[t]||(n[t]=function(){for(var t,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=(t=this[o])[i].apply(t,n);return r===this[o]?this:r})})})],t.prototype,"moveable",void 0),t}(Y)),ca=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.state=n.props,n}return i(t,e),t.prototype.render=function(){return t=O(la,u({ref:M(this,"moveable")},this.state)),n=this.state.parentElement,O(X,{element:t,container:n});var t,n},t}(j),pa=ia,fa=we,da=ra,ha=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(function(s){function t(t,n){void 0===n&&(n={});var e=s.call(this)||this;e.tempElement=document.createElement("div");var r=u({container:t||document.body},n),i={};da.forEach(function(n){i[("on "+n).replace(/[\s-_]([a-z])/g,function(t,n){return n.toUpperCase()})]=function(t){return e.trigger(n,t)}}),L(O(ca,u({ref:M(e,"innerMoveable"),parentElement:t},r,i)),e.tempElement);var o,a=r.target;return o=a,Array.isArray(o)&&1<a.length&&e.updateRect(),e}i(t,s);var n=t.prototype;return n.setState=function(t,n){this.innerMoveable.setState(t,n)},n.destroy=function(){L(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,e,a):i(n,e))||a);return 3<o&&a&&Object.defineProperty(n,e,a),a}([e(fa,function(t,r){t[r]||(t[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=this.getMoveable();if(e&&e[r])return e[r].apply(e,t)})}),e(pa,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})})],t)}(xn));var ga={__proto__:null,default:ha,PROPERTIES:pa,METHODS:fa,EVENTS:da,getElementInfo:function(t,n,e){return r=n,void 0===(i=e)&&(i=r),Te(t,r,i,!0);var r,i}};for(var va in ga)ha[va]=ga[va];return ha});
//# sourceMappingURL=moveable.min.js.map
