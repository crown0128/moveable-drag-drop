/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.29.2
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Moveable=e()}(this,function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}function S(e,n){return function(t){t&&(e[n]=t)}}function a(e,n,r){return function(t){t&&(e[n][r]=t)}}function o(n,r){return function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),o=-1===i?n.length:i;n[o]=t,r[o]=e},t}(),x=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),E="function"==typeof Map,f=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var y=function(){function t(t,e,n,r,i,o,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t,n,s,u,e=(t=this.changedBeforeAdded,n=this.fixed,s=[],u=[],t.forEach(function(t){var e=t[0],n=t[1],r=new f;s[e]=r,u[n]=r}),s.forEach(function(t,e){t.connect(s[e-1])}),t.filter(function(t,e){return!n[e]}).map(function(t,e){var n=t[0],r=t[1];if(n===r)return[0,0];var i=s[n],o=u[r-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})),l=this.changed,c=[];this.cacheOrdered=e.filter(function(t,e){var n=t[0],r=t[1],i=l[e],o=i[0],a=i[1];if(n!==r)return c.push([o,a]),!0}),this.cachePureChanged=c},t}();function l(t,e,n){var r=E?Map:n?x:b,i=n||function(t){return t},o=[],a=[],s=[],u=t.map(i),l=e.map(i),c=new r,f=new r,p=[],d=[],h={},g=[],v=0,m=0;return u.forEach(function(t,e){c.set(t,e)}),l.forEach(function(t,e){f.set(t,e)}),u.forEach(function(t,e){var n=f.get(t);void 0===n?(++m,a.push(e)):h[n]=m}),l.forEach(function(t,e){var n=c.get(t);void 0===n?(o.push(e),++v):(s.push([n,e]),m=h[e]||0,p.push([n-m,e-v]),d.push(e===n),n!==e&&g.push([n,e]))}),a.reverse(),new y(t,e,o,a,g,s,p,d)}var t=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=l(this.list,e,this.findKeyCallback);return this.list=e,n},t}(),e="string",s="number",c="undefined";function p(t){return typeof t===e}function h(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,e,n){return""+e+r+n.toLowerCase()})}var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function g(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function m(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function M(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function R(i,o){var a=Object.keys(i),n=Object.keys(o),t=l(a,n,function(t){return t}),r={},s={},u={};return t.added.forEach(function(t){var e=n[t];r[e]=o[e]}),t.removed.forEach(function(t){var e=a[t];s[e]=i[e]}),t.maintained.forEach(function(t){var e=t[0],n=a[e],r=[i[n],o[n]];i[n]!==o[n]&&(u[n]=r)}),{added:r,removed:s,changed:u}}function D(t){t.forEach(function(t){t()})}function w(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function C(t,e,n,r){return p(t)||typeof t===s?new _("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?A:t.type.prototype.render?j:F)(t.type,e,n,r,t.ref,t.props)}function O(t){var n=[];return t.forEach(function(t){var e;n=n.concat((e=t,Array.isArray(e)?O(t):t))}),n}function P(t){var e=t.className,n=m(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function B(t,e){if(!e)return t;for(var n in e)typeof t[n]===c&&(t[n]=e[n]);return t}function z(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},o=i.key,a=i.ref,s=m(i,["key","ref"]);return{type:t,key:o,ref:a,props:v(v({},s),{children:O(n).filter(function(t){return null!=t&&!1!==t})})}}var G=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!p(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var i=this.props;return p(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?i:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function T(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}g(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){n?e._mounted():e._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(G),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events={},t._isSVG=!1,t}g(t,e);var n=t.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return M(this.props,t)},n._render=function(t,e){var n,r,i,o=this,a=!this.base;a&&(n=this._hasSVG(),this._isSVG=n,(i=this.props.portalContainer)||(r=this.type,i=n?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r)),this.base=i),H(this,this._providers,this.props.children,t,null);var s=this.base,u=T(e),l=u.attributes,c=u.events,f=T(this.props),p=f.attributes,d=f.events;return function(t,e,n){var r=R(t,e),i=r.added,o=r.removed,a=r.changed;for(var s in i)n.setAttribute(s,i[s]);for(var s in a)n.setAttribute(s,a[s][1]);for(var s in o)n.removeAttribute(s)}(P(l),P(p),s),function(t,e,n){var r=R(t,e),i=r.added,o=r.removed,a=r.changed;for(var s in o)n.removeEventListener(s);for(var s in i)n.addEventListener(s,i[s]);for(var s in a)n.removeEventListener(s),n.addEventListener(s,a[s][1]);for(var s in o)n.removeEventListener(s)}(c,d,this),function(t,e,n){var r=n.style,i=R(t,e),o=i.added,a=i.removed,s=i.changed;for(var u in o){var l=h(u,"-");r.setProperty?r.setProperty(l,o[u]):r[l]=o[u]}for(var u in s){l=h(u,"-");r.setProperty?r.setProperty(l,s[u][1]):r[l]=s[u][1]}for(var u in a){l=h(u,"-");r.removeProperty?r.removeProperty(l):r[l]=""}}(e.style||{},this.props.style||{},s),t.push(function(){a?o._mounted():o._updated()}),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach(function(t){t._unmount()}),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},n._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=k(this.container);return t&&"ownerSVGElement"in t},t}(G);function k(t){if(!t)return null;var e=t.base;return e instanceof Node?e:k(t.container)}function I(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?I(e[0].base):null}var F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}g(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return H(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(G),N=function(n){function t(t){var e=n.call(this,"container","container",0,null)||this;return e.base=t,e}g(t,n);var e=t.prototype;return e._render=function(){return!0},e._unmount=function(){},t}(G),j=function(a){function t(t,e,n,r,i,o){return void 0===o&&(o={}),a.call(this,t,e,n,r,i,B(o,t.defaultProps))||this}g(t,a);var e=t.prototype;return e._should=function(t,e){return this.base.shouldComponentUpdate(B(t,this.type.defaultProps),e||this.base.state)},e._render=function(t,e,n){var r=this;this.props=B(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),H(this,this._providers,s?[s]:[],t,n,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(e,a))})},e._setState=function(t){t&&(this.base.state=t)},e._unmount=function(){this._providers.forEach(function(t){t._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},t}(G),Y=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=v(v({},this.$_state),t),n?this.$_setState(e,n):this.$_timer=setTimeout(function(){r.$_timer=0,r.$_setState(e,n)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_provider;H(r.container,[r],[r.original],n,v(v({},this.state),this.$_state),e)&&(t&&n.push(t),D(n))},t}(),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.shouldComponentUpdate=function(t,e){return M(this.props,t)||M(this.state,e)},e}(Y),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}g(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new N(n),L(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;L(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){L(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(q);function W(i,a,o){var s=o.map(function(t){return p(t)?null:t.key}),t=l(w(a.map(function(t){return t.key})),w(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var e=t[0],n=t[1],r=a.splice(e,1)[0];a.splice(n,0,r);var i=I(r.base),o=I(a[n+1]&&a[n+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,C(o[t],s[t],t,i))});var e=t.maintained.filter(function(t){t[0];var e=t[1],n=o[e],r=a[e];return(p(n)?"text_"+n:n.type)!==r.type?(r._unmount(),a.splice(e,1,C(n,s[e],e,i)),!0):(r.index=e,!1)});return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.added,e.map(function(t){t[0];return t[1]}))}function H(i,o,n,r,a,s){var t=W(i,o,n),e=o.filter(function(t,e){return t._update(r,n[e],a,s)}),u=k(i);return u&&t.reverse().forEach(function(t){var e,n=o[t],r=I(n.base);r&&(u===r||r.parentNode||(e=function(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var o=I(n[i].base);if(o)return o}return null}(i,n),u.insertBefore(r,e)))}),0<e.length}function L(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r,i,o,a,s=!!n;return n=n||new N(e),i=t?[t]:[],a=[],H(r=n,r._providers,i,a,o),D(a),s||(e.__REACT_COMPAT__=n),n}function V(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),L(t,e,r),n&&n()}var U="simple-1.1.0";function $(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Z(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function K(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function J(t){return t.replace(/_/g,".")}function Q(t,i){var o=null,a="-1";return $(t,function(t){var e,n,r=K("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",i);return r&&!t.brand&&(o=t,a=r[3]||"-1",t.versionAlias?a=t.versionAlias:t.versionTest&&(e=t.versionTest.toLowerCase(),n=K("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",i),a=(n?n[3]:"")||a),a=J(a),1)}),{preset:o,version:a}}function tt(t,n){var r={brand:"",version:"-1"};return $(t,function(t){var e=et(n,t);return e&&(r.brand=t.id,r.version=t.versionAlias||e.version,"-1"!==r.version)}),r}function et(t,n){return Z(t,function(t){var e=t.brand;return K(""+n.test,e.toLowerCase())})}var nt=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],rt=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],it=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],ot=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],at=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function st(t){var e,n=function(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}(t),r=!!/mobi/g.exec(n),i={name:"unknown",version:"-1",majorVersion:-1,webview:!!Q(ot,n).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},o={name:"unknown",version:"-1",majorVersion:-1},a=Q(nt,n),s=a.preset,u=a.version,l=Q(at,n),c=l.preset,f=l.version,p=Q(rt,n);return i.chromium=!!p.preset,i.chromiumVersion=p.version,i.chromium||(e=Q(it,n),i.webkit=!!e.preset,i.webkitVersion=e.version),c&&(o.name=c.id,o.version=f,o.majorVersion=parseInt(f,10)),s&&(i.name=s.id,i.version=u,i.webview&&"ios"===o.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:o,isMobile:r,isHints:!1}}function ut(t){return void 0===t&&function(){if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData){var t=navigator.userAgentData,e=t.brands||t.uaList;return e&&e.length}}()?function(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],o=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),a={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!tt(ot,n).brand},s={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&$(it,function(t){return et(n,t)});var u,l=tt(rt,n);a.chromium=!!l.brand,a.chromiumVersion=l.version,a.chromium||(u=tt(it,n),a.webkit=!!u.brand,a.webkitVersion=u.version);var c=Z(at,function(t){return new RegExp(""+t.test,"g").exec(o)});s.name=c?c.id:"",t&&(s.version=t.platformVersion);var f=tt(nt,n);return f.brand&&(a.name=f.brand,a.version=t?t.uaFullVersion:f.version),a.webkit&&(s.name=r?"ios":"mac"),"ios"===s.name&&a.webview&&(a.version="-1"),s.version=J(s.version),a.version=J(a.version),s.majorVersion=parseInt(s.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:s,isMobile:r,isHints:!0}}():st(t)}var lt="function",ct="object",ft="string",pt="undefined",dt=typeof window!==pt,ht=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],gt=1e-7,vt={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function mt(t){return typeof t===pt}function bt(t){return t&&typeof t===ct}function xt(t){return Array.isArray(t)}function Et(t){return typeof t===ft}function St(t){return typeof t===lt}function yt(t,e,n,r,i){return Mt(t,e,n)?n:function(i,o,t,a,s){for(var u,e=t;e<a;++e){var n=function(t){var e=o[t].trim();if(e===i.close&&!Mt(i,o,t))return{value:t};var n=t,r=zt(s,function(t){return t.open===e});if(r&&(n=yt(r,o,t,a,s)),-1===n)return u=t,"break";u=t=n}(e);if(e=u,"object"==typeof n)return n.value;if("break"===n)break}return-1}(t,e,n+1,r,i)}function Mt(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Rt(t,e){var n=Et(e)?{separator:e}:e,r=n.separator,s=void 0===r?",":r,u=n.isSeparateFirst,l=n.isSeparateOnlyOpenClose,i=n.isSeparateOpenClose,c=void 0===i?l:i,o=n.openCloseCharacters,f=void 0===o?ht:o,a=f.map(function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n}).join("|"),p=new RegExp("(\\s*"+s+"\\s*|"+a+"|\\s+)","g"),d=t.split(p).filter(Boolean),h=d.length,g=[],v=[];function m(){return v.length&&(g.push(v.join("")),v=[])}for(var b,x=0;x<h;++x){var E=function(t){var e,n,r=d[t].trim(),i=t,o=zt(f,function(t){return t.open===r}),a=zt(f,function(t){return t.close===r});if(o){if(-1!==(i=yt(o,d,t,h,f))&&c)return m()&&u?(b=t,"break"):(g.push(d.slice(t,i+1).join("")),t=i,u?(b=t,"break"):(b=t,"continue"))}else{if(a&&!Mt(a,d,t))throw new Error("invalid format: "+a.close);if(e=r,!((""!==(n=s)&&" "!=n||""!==e&&" "!=e)&&e!==n||l))return m(),u?(b=t,"break"):(b=t,"continue")}-1===i&&(i=h-1),v.push(d.slice(t,i+1).join("")),b=t=i}(x),x=b;if("break"===E)break}return v.length&&g.push(v.join("")),g}function Dt(t){return Rt(t,"")}function wt(t){return Rt(t,",")}function Ct(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Ot(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function Pt(){return Date.now?Date.now():(new Date).getTime()}function Bt(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function zt(t,e,n){var r=Bt(t,e);return-1<r?t[r]:n}var Gt=function(){var n=Pt(),t=dt&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(t){var e=Pt();return window.setTimeout(function(){t(e-n)},1e3/60)}}(),Tt=function(){var t=dt&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function _t(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function At(t,e){var n=Ot(t),r=n.value,i=n.unit;if(bt(e)){var o=e[i];if(o){if(St(o))return o(r);if(vt[i])return vt[i](r,o)}}else if("%"===i)return r*e/100;return vt[i]?vt[i](r):r}function kt(t,n,r){return[[qt(n[0],gt),qt(n[0]*t[1]/t[0],gt)],[qt(n[1]*t[0]/t[1],gt),qt(n[1],gt)]].filter(function(t){return t.every(function(t,e){return r?t<=n[e]:t>=n[e]})})[0]||t}function It(t,o,a,e){if(!e)return t.map(function(t,e){return n=t,r=o[e],i=a[e],Math.max(r,Math.min(n,i));var n,r,i});var n=t[0],r=t[1],i=kt(t,o,!1),s=i[0],u=i[1],l=kt(t,a,!0),c=l[0],f=l[1];return n<s||r<u?(n=s,r=u):(c<n||f<r)&&(n=c,r=f),[n,r]}function Ft(t){for(var e=t.length,n=0,r=e-1;0<=r;--r)n+=t[r];return e?n/e:0}function Nt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return 0<=i?i:i+2*Math.PI}function jt(t){var n,e=(n=t,[0,1].map(function(e){return Ft(n.map(function(t){return t[e]}))})),r=Nt(e,t[0]),i=Nt(e,t[1]);return r<i&&i-r<Math.PI||i<r&&i-r<-Math.PI?1:-1}function Yt(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function qt(t,e){return e?Math.round(t/e)*e:t}function Xt(n,r){return n.forEach(function(t,e){n[e]=qt(n[e],r)}),n}function Wt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Ht(t,e,n,r){t.removeEventListener(e,n,r)}var Lt=1e-7;function Vt(t,e){return e?Math.round(t/e)*e:t}function Ut(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function $t(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=ge(e),i=0;i<e;++i){var o=e*i+i;if(!Vt(n[o],Lt))for(var a=i+1;a<e;++a)if(n[e*i+a]){!function(t,e,n,r,i){for(var o=0;o<i;++o){var a=n+o*i,s=r+o*i,u=t[a],l=e[a];t[a]=t[s],t[s]=u,e[a]=e[s],e[s]=l}}(n,r,i,a,e);break}if(!Vt(n[o],Lt))return[];!function(t,e,n,r,i){for(var o=0;o<r;++o){var a=n+o*r;t[a]/=i,e[a]/=i}}(n,r,i,e,n[o]);for(a=0;a<e;++a){var s=a,u=n[a+i*e];Vt(u,Lt)&&i!==a&&function(t,e,n,r,i,o){for(var a=0;a<i;++a){var s=n+a*i,u=r+a*i;t[s]+=t[u]*o,e[s]+=e[u]*o}}(n,r,s,i,e,-u)}}return r}function Zt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Kt(t,e){for(var n=ge(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Jt(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Qt(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=ge(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*n+a]=t[o*e+a];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function te(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=ge(e);return t.forEach(function(t){r=ee(r,t,e)}),r}function ee(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<n;++a)for(var s=0;s<o;++s)for(var u=r[s*n+a]=0;u<i;++u)r[s*n+a]+=t[u*n+a]*e[s*i+u];return r}function ne(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function re(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function ie(t,e){return void 0===e&&(e=6===t.length),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function oe(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function ae(t,e,n){void 0===n&&(n=e.length);var r=ee(t,e,n),i=r[n-1];return r.map(function(t){return t/i})}function se(t,e){return ee(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function ue(t,e){return ee(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function le(t,e){return ee(t,he(e,4))}function ce(t,e){var n=e[0],r=void 0===n?1:n,i=e[1],o=void 0===i?1:i,a=e[2];return ee(t,[r,0,0,0,0,o,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function fe(t,e){return ae(he(e,3),Jt(t,3))}function pe(t,e){var n=e[0],r=void 0===n?0:n,i=e[1],o=void 0===i?0:i,a=e[2];return ee(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===a?0:a,1],4)}function de(t,e){return ee(t,e,4)}function he(t,e){var n=Math.cos(t),r=Math.sin(t),i=ge(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function ge(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function ve(t,e){for(var n=ge(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function me(t,e){for(var n=ge(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function be(t,e,n,r,i,o,a,s){var u=t[0],l=t[1],c=e[0],f=e[1],p=n[0],d=n[1],h=r[0],g=r[1],v=i[0],m=i[1],b=o[0],x=o[1],E=a[0],S=a[1],y=s[0],M=s[1],R=$t([u,0,c,0,p,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,c,0,p,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,-v*u,-m*u,-b*c,-x*c,-E*p,-S*p,-y*h,-M*h,-v*l,-m*l,-b*f,-x*f,-E*d,-S*d,-y*g,-M*g],8);if(!R.length)return[];var D=ee(R,[v,m,b,x,E,S,y,M],8);return D[8]=1,Qt(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}(D),3,4)}var xe="string",Ee=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];function Se(t,e,n,r,i){return ye(t,e,n)?n:function(i,o,t,a,s){for(var u,e=t;e<a;++e){var n=function(t){var e=o[t].trim();if(e===i.close&&!ye(i,o,t))return{value:t};var n=t,r=De(s,function(t){return t.open===e});if(r&&(n=Se(r,o,t,a,s)),-1===n)return u=t,"break";u=t=n}(e);if(e=u,"object"==typeof n)return n.value;if("break"===n)break}return-1}(t,e,n+1,r,i)}function ye(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Me(t,e){var n=typeof e===xe?{separator:e}:e,r=n.separator,s=void 0===r?",":r,u=n.isSeparateFirst,l=n.isSeparateOnlyOpenClose,i=n.isSeparateOpenClose,c=void 0===i?l:i,o=n.openCloseCharacters,f=void 0===o?Ee:o,a=f.map(function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n}).join("|"),p=new RegExp("(\\s*"+s+"\\s*|"+a+"|\\s+)","g"),d=t.split(p).filter(Boolean),h=d.length,g=[],v=[];function m(){return v.length&&(g.push(v.join("")),v=[])}for(var b,x=0;x<h;++x){var E=function(t){var e,n,r=d[t].trim(),i=t,o=De(f,function(t){return t.open===r}),a=De(f,function(t){return t.close===r});if(o){if(-1!==(i=Se(o,d,t,h,f))&&c)return m()&&u?(b=t,"break"):(g.push(d.slice(t,i+1).join("")),t=i,u?(b=t,"break"):(b=t,"continue"))}else{if(a&&!ye(a,d,t))throw new Error("invalid format: "+a.close);if(e=r,!((""!==(n=s)&&" "!=n||""!==e&&" "!=e)&&e!==n||l))return m(),u?(b=t,"break"):(b=t,"continue")}-1===i&&(i=h-1),v.push(d.slice(t,i+1).join("")),b=t=i}(x),x=b;if("break"===E)break}return v.length&&g.push(v.join("")),g}function Re(t){return Me(t,",")}function De(t,e,n){var r=function(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}(t,e);return-1<r?t[r]:n}function we(t){return Oe(Pe(t))}function Ce(t,e){var n=ae(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Oe(t){var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var e=t.matrixFunction,n=t.functionValue;e&&(r=e(r,n))}),r}function Pe(t){var e;return(e=t,Array.isArray(e)?t:Me(t,"")).map(function(t){var e,n,r,i,o,a,s,u,l,c,f,p,d=!(e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t))||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]},h=d.prefix,g=d.value,v=null,m=h,b="";return"translate"===h||"translateX"===h||"translate3d"===h?(v=pe,b=[(n=Re(g).map(function(t){return parseFloat(t)}))[0],void 0===(r=n[1])?0:r,void 0===(i=n[2])?0:i]):"translateY"===h?(v=pe,b=[0,parseFloat(g),0]):"translateZ"===h?(v=pe,b=[0,0,parseFloat(g)]):"scale"===h||"scale3d"===h?(v=ce,b=[u=(o=Re(g).map(function(t){return parseFloat(t)}))[0],void 0===(a=o[1])?u:a,void 0===(s=o[2])?1:s]):"scaleX"===h?(v=ce,b=[u=parseFloat(g),1,1]):"scaleY"===h?(v=ce,b=[1,parseFloat(g),1]):"scaleZ"===h?(v=ce,b=[1,1,parseFloat(g)]):"rotate"===h||"rotateZ"===h||"rotateX"===h||"rotateY"===h?(c=(l=function(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}(g)).unit,f=l.value,"rotate"===h||"rotateZ"===h?(m="rotateZ",v=le):"rotateX"===h?v=se:"rotateY"===h&&(v=ue),b="rad"===c?f:f*Math.PI/180):"matrix3d"===h?(v=de,b=Re(g).map(function(t){return parseFloat(t)})):"matrix"===h?(v=de,b=[(p=Re(g).map(function(t){return parseFloat(t)}))[0],p[1],0,0,p[2],p[3],0,0,0,0,1,0,p[4],p[5],0,1]):m="",{name:h,functionName:m,value:g,matrixFunction:v,functionValue:b}})}var Be=function(t,e){return(Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ze,Ge="function"==typeof Map?void 0:(ze=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++ze)}),Te=function(e){function t(){this.constructor=n}var n,r;function i(t){return void 0===t&&(t=[]),e.call(this,t,Ge)||this}return Be(n=i,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),i}(t);function _e(t,e){return l(t,e,Ge)}function Ae(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function ke(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return 0<=i?i:i+2*Math.PI}function Ie(t){return[0,1].map(function(e){return function(t){for(var e=t.length,n=0,r=e-1;0<=r;--r)n+=t[r];return e?n/e:0}(t.map(function(t){return t[e]}))})}function Fe(t){var e=Ie(t),n=ke(e,t[0]),r=ke(e,t[1]);return n<r&&r-n<Math.PI||r<n&&r-n<-Math.PI?1:-1}function Ne(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function je(r){return r.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;0<=n;--n)e+=t[n];return e}(r.map(function(t,e){var n=r[e+1]||r[0];return t[0]*n[1]-n[0]*t[1]})))/2}function Ye(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,a=qe(t),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,f=n/(l-s),p=r/(c-u);return t.map(function(t){return[i+(t[0]-s)*f,o+(t[1]-u)*p]})}function qe(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Xe(t,e,n){var i=t[0],o=t[1],r=qe(e),a=r.minX,s=r.minY,u=r.maxX,l=r.maxY,c=[[a,o],[u,o]],f=[[i,s],[i,l]],p=We(c[0],c[1]),d=We(f[0],f[1]),h=Ve(e),g=[],v=[];return h.forEach(function(t){var e=We(t[0],t[1]),n=Le(He(p,e),[c,t]),r=Le(He(d,e),[f,t]);1===n.length&&t[0][1]===o||g.push.apply(g,n),1===r.length&&t[0][0]===i||v.push.apply(v,r),e[0]||g.push.apply(g,n),e[1]||v.push.apply(v,r)}),!n&&(-1<Ae(g,function(t){return t[0]===i})||-1<Ae(v,function(t){return t[1]===o}))||!!(g.filter(function(t){return t[0]>i}).length%2&&v.filter(function(t){return t[1]>o}).length%2)}function We(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];if(n===i&&r===o)return[0,0,0];if(n===i)return[1,0,-n];if(r===o)return[0,1,-r];var a=(i-n)/(r-o);return[1,a,-n-a*r]}function He(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],l=e[2],c=0===i&&0===s,f=0===o&&0===u;if(c&&f)return[];if(c){var p=-a/o;return p!=-l/u?[]:[[-1/0,p],[1/0,p]]}if(f){var d=-a/i;return d!=-l/s?[]:[[d,-1/0],[d,1/0]]}return 0!==i?0!==s?0!==o?0!==u?[[n=(o*l-u*a)/(u*i-o*s),r=-(i*n+a)/o]]:[[n=-l/s,r=-(i*n+a)/o]]:[[n=-a/i,r=-(s*n+l)/u]]:[[n=-(o*(r=-l/u)+a)/i,r]]:[[n=-(u*(r=-a/o)+l)/s,r]]}function Le(t,e){var n=e.map(function(e){return[0,1].map(function(t){return[Math.min(e[0][t],e[1][t]),Math.max(e[0][t],e[1][t])]})});if(2===t.length){var r=t[0],i=r[0],o=r[1];if(i===t[1][0]){var a=Math.max.apply(Math,n.map(function(t){return t[1][0]})),s=Math.min.apply(Math,n.map(function(t){return t[1][1]}));return s<a?[]:[[i,a],[i,s]]}if(o===t[1][1]){var u=Math.max.apply(Math,n.map(function(t){return t[0][0]})),l=Math.min.apply(Math,n.map(function(t){return t[0][1]}));return l<u?[]:[[u,o],[l,o]]}}return t.filter(function(e){return n.every(function(t){return t[0][0]<=e[0]&&e[0]<=t[0][1]&&t[1][0]<=e[1]&&e[1]<=t[1][1]})})}function Ve(n){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(n.slice(1),[n[0]]).map(function(t,e){return[n[e],t]})}function Ue(t,e){return je(function(t,e){var n=t.slice(),s=e.slice();-1===Fe(n)&&n.reverse(),-1===Fe(s)&&s.reverse();var u=Ve(n),l=Ve(s),r=u.map(function(t){return We(t[0],t[1])}),c=l.map(function(t){return We(t[0],t[1])}),f=[];r.forEach(function(r,i){var o=u[i],a=[];c.forEach(function(t,e){var n=Le(He(r,t),[o,l[e]]);a.push.apply(a,n.map(function(t){return{index1:i,index2:e,pos:t}}))}),a.sort(function(t,e){return Ne(o[0],t.pos)-Ne(o[0],e.pos)}),f.push.apply(f,a),Xe(o[1],s)&&f.push({index1:i,index2:-1,pos:o[1]})}),l.forEach(function(t,r){var i,e;Xe(t[1],n)&&(i=!1,-1===(e=Ae(f,function(t){return t.index2!==r?!!i:void(i=!0)}))&&(i=!1,e=Ae(f,function(t){var e=t.index1,n=t.index2;if(-1!==e||n+1!==r)return!!i;i=!0})),-1===e?f.push({index1:-1,index2:r,pos:t[1]}):f.splice(e,0,{index1:-1,index2:r,pos:t[1]}))});var i=f.map(function(t){return t.pos}),o={};return i.filter(function(t){var e=t[0]+"x"+t[1];return!o[e]&&(o[e]=!0)})}(t,e))}function $e(t){return t&&"object"==typeof t}var Ze=function(){return(Ze=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Ke=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if($e(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if($e(t))for(var n in t)this.off(n);else{var r,i;e?!(r=this._events[t])||-1<(i=function(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}(r,function(t){return t.listener===e}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var r=this;void 0===n&&(n={});var t=this._events[e];if(!e||!t)return!0;var i=!1;return n.eventType=e,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(n),t.once&&r.off(e,t.listener)}),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Ze({listener:e},n))},t}();var Je=function(t,e){return(Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Qe=function(){return(Qe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function tn(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}var en=function(e){function t(){this.constructor=n}var n,r;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._startRect=null,t._startPos=[],t._prevTime=0,t._timer=0,t._prevScrollPos=[0,0],t._isWait=!1,t}Je(n=i,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var o=i.prototype;return o.dragStart=function(t,e){var n,r=e.container,i=0,o=0,a=0,s=0;s=r===document.body?(a=window.innerWidth,window.innerHeight):(i=(n=r.getBoundingClientRect()).top,o=n.left,a=n.width,n.height),this._startPos=[t.clientX,t.clientY],this._startRect={top:i,left:o,width:a,height:s},this._prevScrollPos=this._getScrollPosition([0,0],e)},o.drag=function(t,e){var n=t.clientX,r=t.clientY,i=e.threshold,o=void 0===i?0:i,a=this._startRect,s=this._startPos,u=[0,0];return a.top>r-o?(s[1]>a.top||r<s[1])&&(u[1]=-1):a.top+a.height<r+o&&(s[1]<a.top+a.height||r>s[1])&&(u[1]=1),a.left>n-o?(s[0]>a.left||n<s[0])&&(u[0]=-1):a.left+a.width<n+o&&(s[0]<a.left+a.width||n>s[0])&&(u[0]=1),clearTimeout(this._timer),!(!u[0]&&!u[1])&&this._continueDrag(Qe(Qe({},e),{direction:u,inputEvent:t,isDrag:!0}))},o.checkScroll=function(t){var e=this;if(this._isWait)return!1;var n=t.prevScrollPos,r=void 0===n?this._prevScrollPos:n,i=t.direction,o=t.throttleTime,a=void 0===o?0:o,s=t.inputEvent,u=t.isDrag,l=this._getScrollPosition(i||[0,0],t),c=l[0]-r[0],f=l[1]-r[1],p=i||[c?Math.abs(c)/c:0,f?Math.abs(f)/f:0];return this._prevScrollPos=l,!(!c&&!f)&&(this.trigger("move",{offsetX:p[0]?c:0,offsetY:p[1]?f:0,inputEvent:s}),a&&u&&(this._timer=window.setTimeout(function(){e._continueDrag(t)},a)),!0)},o.dragEnd=function(){clearTimeout(this._timer)},o._getScrollPosition=function(t,e){var n=e.container,r=e.getScrollPosition;return(void 0===r?tn:r)({container:n,direction:t})},o._continueDrag=function(t){var e=this,n=t.container,r=t.direction,i=t.throttleTime,o=t.useScroll,a=t.isDrag,s=t.inputEvent;if(!a||!this._isWait){var u=Date.now?Date.now():(new Date).getTime(),l=Math.max(i+this._prevTime-u,0);if(0<l)return this._timer=window.setTimeout(function(){e._continueDrag(t)},l),!1;this._prevTime=u;var c=this._getScrollPosition(r,t);return this._prevScrollPos=c,a&&(this._isWait=!0),this.trigger("scroll",{container:n,direction:r,inputEvent:s}),this._isWait=!1,o||this.checkScroll(Qe(Qe({},t),{prevScrollPos:c,direction:r,inputEvent:s}))}},i}(Ke);function nn(){return Date.now?Date.now():(new Date).getTime()}function rn(t,e,n,r){t.addEventListener(e,n,r)}function on(t,e,n,r){t.removeEventListener(e,n,r)}var an=function(t,e){return(an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var sn=function(){return(sn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function un(t){return 180*(e=[t[0].clientX,t[0].clientY],n=[t[1].clientX,t[1].clientY],r=n[0]-e[0],i=n[1]-e[1],(0<=(o=Math.atan2(i,r))?o:o+2*Math.PI)/Math.PI);var e,n,r,i,o}function ln(t){return t.touches?function(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(pn(t[r]));return n}(t.touches):[pn(t)]}function cn(t,e,n){var r=n.length,i=dn(t,r),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,l=dn(e,r),c=l.clientX,f=l.clientY,p=dn(n,r);return{clientX:s,clientY:u,deltaX:o-c,deltaY:a-f,distX:o-p.clientX,distY:a-p.clientY}}function fn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function pn(t){return{clientX:t.clientX,clientY:t.clientY}}function dn(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var hn=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.getAngle=function(t){return void 0===t&&(t=this.prevClients),un(t)},e.getRotation=function(t){return void 0===t&&(t=this.prevClients),un(t)-un(this.startClients)},e.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var n=cn(t||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,n},e.getPositions=function(n){void 0===n&&(n=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,e){return cn([n[e]],[r[e]],[t])})},e.getMovement=function(t){var e=this.movement;if(!t)return e;var n=dn(t,this.length),r=dn(this.prevClients,this.length),i=n.clientX-r.clientX,o=n.clientY-r.clientY;return Math.sqrt(i*i+o*o)+e},e.getDistance=function(t){return void 0===t&&(t=this.prevClients),fn(t)},e.getScale=function(t){return void 0===t&&(t=this.prevClients),fn(t)/fn(this.startClients)},e.move=function(e,n){this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n})},t}(),gn=["textarea","input"],vn=function(u){function t(){this.constructor=e}var e,n;function r(t,e){void 0===e&&(e={});var b=u.call(this)||this;b.options={},b.flag=!1,b.pinchFlag=!1,b.datas={},b.isDrag=!1,b.isPinch=!1,b.isMouse=!1,b.isTouch=!1,b.clientStores=[],b.targets=[],b.prevTime=0,b.doubleFlag=!1,b._dragFlag=!1,b.onDragStart=function(t,e){if(void 0===e&&(e=!0),b.flag||!1!==t.cancelable){var n=b.options,r=n.container,i=n.pinchOutside,o=n.preventRightClick,a=n.preventDefault,s=n.checkInput,u=b.isTouch,l=!b.flag;if(l){var c,f=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),h=-1<gn.indexOf(d),g=p.isContentEditable;if(h||g){if(s||f===p)return!1;if(f&&g&&f.isContentEditable&&f.contains(p))return!1}else{(a||"touchstart"===t.type)&&f&&(c=f.tagName,(f.isContentEditable||-1<gn.indexOf(c))&&f.blur())}if(b.clientStores=[new hn(ln(t))],b.flag=!0,b.isDrag=!1,b._dragFlag=!0,b.datas={},o&&(3===t.which||2===t.button))return b.initDrag(),!1;b.doubleFlag=nn()-b.prevTime<200,!1===b.emit("dragStart",sn({datas:b.datas,inputEvent:t,isTrusted:e,isDouble:b.doubleFlag},b.getCurrentStore().getPosition(),{preventDefault:function(){t.preventDefault()},preventDrag:function(){b._dragFlag=!1}}))&&b.initDrag(),b.flag&&a&&t.preventDefault()}if(!b.flag)return!1;var v,m=0;if(l&&u&&i&&(m=setTimeout(function(){rn(r,"touchstart",b.onDragStart,{passive:!1})})),!l&&u&&i&&on(r,"touchstart",b.onDragStart),b.flag&&((v=t).touches&&2<=v.touches.length)){if(clearTimeout(m),l&&t.touches.length!==t.changedTouches.length)return;b.pinchFlag||b.onPinchStart(t)}}},b.onDrag=function(t,e){if(b.flag){var n=ln(t),r=b.moveClients(n,t,!1);if(b._dragFlag){if(b.pinchFlag||r.deltaX||r.deltaY)if(!1===b.emit("drag",sn({},r,{isScroll:!!e,inputEvent:t})))return void b.stop();b.pinchFlag&&b.onPinch(t,n)}b.getCurrentStore().getPosition(n,!0)}},b.onDragEnd=function(t){var e,n,r,i,o,a;b.flag&&(n=(e=b.options).pinchOutside,r=e.container,b.isTouch&&n&&on(r,"touchstart",b.onDragStart),b.flag=!1,i=b._getPosition(),o=nn(),a=!b.isDrag&&b.doubleFlag,b.prevTime=b.isDrag||a?0:o,b.emit("dragEnd",sn({datas:b.datas,isDouble:a,isDrag:b.isDrag,isClick:!b.isDrag,inputEvent:t},i)),b.pinchFlag&&b.onPinchEnd(t),b.clientStores=[])},b.onBlur=function(){b.onDragEnd()};var n=[].concat(t);b.options=sn({checkInput:!1,container:1<n.length?window:n[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},e);var r,i=b.options,o=i.container,a=i.events,s=i.checkWindowBlur;return b.isTouch=-1<a.indexOf("touch"),b.isMouse=-1<a.indexOf("mouse"),b.targets=n,b.isMouse&&(n.forEach(function(t){rn(t,"mousedown",b.onDragStart)}),rn(o,"mousemove",b.onDrag),rn(o,"mouseup",b.onDragEnd),rn(o,"contextmenu",b.onDragEnd)),s&&rn(window,"blur",b.onBlur),b.isTouch&&(r={passive:!1},n.forEach(function(t){rn(t,"touchstart",b.onDragStart,r)}),rn(o,"touchmove",b.onDrag,r),rn(o,"touchend",b.onDragEnd,r),rn(o,"touchcancel",b.onDragEnd,r)),b}an(e=r,n=u),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t);var i=r.prototype;return i.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},i.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},i.isDragging=function(){return this.isDrag},i.isFlag=function(){return this.flag},i.isPinchFlag=function(){return this.pinchFlag},i.isDoubleFlag=function(){return this.doubleFlag},i.isPinching=function(){return this.isPinch},i.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},i.move=function(t,e){var r=t[0],i=t[1],n=this.getCurrentStore().prevClients;return this.moveClients(n.map(function(t){var e=t.clientX,n=t.clientY;return{clientX:e+r,clientY:n+i,originalClientX:e,originalClientY:n}}),e,!0)},i.triggerDragStart=function(t){this.onDragStart(t,!1)},i.setEventDatas=function(t){var e=this.datas;for(var n in t)e[n]=t[n];return this},i.getCurrentEvent=function(t){return sn({datas:this.datas},this._getPosition(),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},i.getEventDatas=function(){return this.datas},i.unset=function(){var e=this,t=this.targets,n=this.options.container;this.off(),on(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){on(t,"mousedown",e.onDragStart)}),on(n,"mousemove",this.onDrag),on(n,"mouseup",this.onDragEnd),on(n,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){on(t,"touchstart",e.onDragStart)}),on(n,"touchstart",this.onDragStart),on(n,"touchmove",this.onDrag),on(n,"touchend",this.onDragEnd),on(n,"touchcancel",this.onDragEnd))},i.onPinchStart=function(t){var e,n=this.options.pinchThreshold;this.isDrag&&this.getMovement()>n||(e=new hn(ln(t)),this.pinchFlag=!0,this.clientStores.splice(0,0,e),!1===this.emit("pinchStart",sn({datas:this.datas,angle:e.getAngle(),touches:this.getCurrentStore().getPositions()},e.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1))},i.onPinch=function(t,e){var n;!this.flag||!this.pinchFlag||e.length<2||(n=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",sn({datas:this.datas,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e),{inputEvent:t})))},i.onPinchEnd=function(t){var e,n;this.pinchFlag&&(e=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,n=this.getCurrentStore(),this.emit("pinchEnd",sn({datas:this.datas,isPinch:e,touches:n.getPositions()},n.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1)},i.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},i.getCurrentStore=function(){return this.clientStores[0]},i.moveClients=function(t,e,n){var r=this._getPosition(t,n);return(r.deltaX||r.deltaY)&&(this.isDrag=!0),sn({datas:this.datas},r,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},i._getPosition=function(t,e){var n=this.getCurrentStore().getPosition(t,e),r=this.clientStores.slice(1).reduce(function(t,e){var n=e.getPosition();return t.distX+=n.distX,t.distY+=n.distY,t},n),i=r.distX,o=r.distY;return sn({},n,{distX:i,distY:o})},r}(Ke),mn="string",bn=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];function xn(t,e,n,r,i){return En(t,e,n)?n:function(i,o,t,a,s){for(var u,e=t;e<a;++e){var n=function(t){var e=o[t].trim();if(e===i.close&&!En(i,o,t))return{value:t};var n=t,r=yn(s,function(t){return t.open===e});if(r&&(n=xn(r,o,t,a,s)),-1===n)return u=t,"break";u=t=n}(e);if(e=u,"object"==typeof n)return n.value;if("break"===n)break}return-1}(t,e,n+1,r,i)}function En(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Sn(t,e){var n=typeof e===mn?{separator:e}:e,r=n.separator,s=void 0===r?",":r,u=n.isSeparateFirst,l=n.isSeparateOnlyOpenClose,i=n.isSeparateOpenClose,c=void 0===i?l:i,o=n.openCloseCharacters,f=void 0===o?bn:o,a=f.map(function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n}).join("|"),p=new RegExp("(\\s*"+s+"\\s*|"+a+"|\\s+)","g"),d=t.split(p).filter(Boolean),h=d.length,g=[],v=[];function m(){return v.length&&(g.push(v.join("")),v=[])}for(var b,x=0;x<h;++x){var E=function(t){var e,n,r=d[t].trim(),i=t,o=yn(f,function(t){return t.open===r}),a=yn(f,function(t){return t.close===r});if(o){if(-1!==(i=xn(o,d,t,h,f))&&c)return m()&&u?(b=t,"break"):(g.push(d.slice(t,i+1).join("")),t=i,u?(b=t,"break"):(b=t,"continue"))}else{if(a&&!En(a,d,t))throw new Error("invalid format: "+a.close);if(e=r,!((""!==(n=s)&&" "!=n||""!==e&&" "!=e)&&e!==n||l))return m(),u?(b=t,"break"):(b=t,"continue")}-1===i&&(i=h-1),v.push(d.slice(t,i+1).join("")),b=t=i}(x),x=b;if("break"===E)break}return v.length&&g.push(v.join("")),g}function yn(t,e,n){var r=function(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}(t,e);return-1<r?t[r]:n}var Mn=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function Rn(r,t,e){return e.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,e){var n=e.trim();return(n?Sn(n,","):[""]).map(function(t){var e=t.trim();return 0===e.indexOf("@")?e:-1<e.indexOf(":global")?e.replace(/\:global/g,""):-1<e.indexOf(":host")?""+e.replace(/\:host/g,"."+r):e?"."+r+" "+e:"."+r}).join(", ")+" {"})}function Dn(c){var f,p="rCS"+Mn(c).toString(36),d=0;return{className:p,inject:function(t,e){void 0===e&&(e={});var n,r,i,o,a,s,u=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),l=0===d;return(u||l)&&(r=p,i=c,o=e,a=u,(s=document.createElement("style")).setAttribute("type","text/css"),s.setAttribute("data-styled-id",r),o.nonce&&s.setAttribute("nonce",o.nonce),s.innerHTML=Rn(r,i,o),(a||document.head||document.body).appendChild(s),n=s),l&&(f=n),u||++d,{destroy:function(){u?(t.removeChild(n),n=null):(0<d&&--d,0===d&&f&&(f.parentNode.removeChild(f),f=null))}}}}}var wn=function(t,e){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Cn(t,e){function n(){this.constructor=t}wn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var On=function(){return(On=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Pn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}Cn(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=(t.cspNonce,t.portalContainer),i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,a=this.tag,s={};return-1<U.indexOf("simple")&&r&&(s={portalContainer:r}),z(a,On({ref:S(this,"element"),"data-styled-id":o,className:n+" "+o},s,i))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},t}(Y);function Bn(n,t){var r=Dn(t);return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injector=r,t.tag=n,t}return Cn(t,e),t}(Pn)}var zn=function(){return(zn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Gn=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(bt(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(bt(t))for(var n in t)this.off(n);else{var r,i;e?!(r=this._events[t])||-1<(i=Bt(r,function(t){return t.listener===e}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var r=this;void 0===n&&(n={});var t=this._events[e];if(!e||!t)return!0;var i=!1;return n.eventType=e,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(n),t.once&&r.off(e,t.listener)}),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(zn({listener:e},n))},t}(),Tn=function(t,e){return(Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function _n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Tn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var An=function(){return(An=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function kn(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function In(t,e){var n;return An({events:{},props:((n={})[t]=Boolean,n),name:t},e)}var Fn,Nn,jn=ut().browser.webkit,Yn=jn&&(Fn="undefined"==typeof window?{userAgent:""}:window.navigator,!!(Nn=/applewebkit\/([^\s]+)/g.exec(Fn.userAgent.toLowerCase()))&&parseFloat(Nn[1])<605),qn="moveable-",Xn="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(r='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*(n=1)+'px" height="'+32*n+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+(e=t)+'deg);transform-origin: 16px 16px"></path></svg>',i=45*Math.round(e/45)%180,o="ns-resize",135==i?o="nwse-resize":45==i?o="nesw-resize":90==i&&(o="ew-resize"),"cursor:"+o+";cursor: url('"+r+"') 16 16, "+o+";")+"\n}\n";var e,n,r,i,o}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(Yn?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",Wn=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Hn=1e-4,Ln=1e-7,Vn=Math.pow(10,10),Un=-Vn,$n=["n","w","s","e","nw","ne","sw","se"],Zn={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Kn={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Jn=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate"];function Qn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(void 0,kn([qn],t))}function tr(t,e,n){return te(e,me(n,e),t,me(n.map(function(t){return-t}),e))}function er(s){return nr(Tr(s,":before")).map(function(t,e){var n,r,i=Ot(t),o=i.value,a=i.unit;return o*(n=s,r=0===e,"%"!==a?1:cr(n.ownerSVGElement)[r?"width":"height"]/100)})}function nr(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function rr(t,e,n){for(var r=document.body,i=!t||n?t:t.parentElement,o=t===e||i===e,a="relative";i&&i!==r;){e===i&&(o=!0);var s=Tr(i),u=s.transform,a=s.position;if("svg"===i.tagName.toLowerCase()||"static"!==a||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function ir(t,e,n,r){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;r&&(s-=(o=(e||document.documentElement).getBoundingClientRect()).left,u-=o.top);var l,c,f=mt(s),p=!f;return p||"svg"===a?c=(l=nr(n).map(function(t){return parseFloat(t)})).slice():(c=(l=Yn?er(t):nr(n).map(function(t){return parseFloat(t)})).slice(),p=!0,s=(i=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),r=cr(t.ownerSVGElement),i=n.x-r.x,o=n.y-r.y;return[i,o,e[0]-i,e[1]-o]}(t,l))[0],u=i[1],l[0]=i[2],l[1]=i[3]),{tagName:a,isSVG:f,hasOffset:p,offset:[s||0,u||0],origin:l,targetOrigin:c}}function or(t,e,n){void 0===n&&(n=Tr(t));var r=Tr(document.body),i=r.position;if(!(e||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(a=0),"auto"===n.left&&"auto"===n.right||(o=0)),[o,a]}function ar(t){t.forEach(function(t){var e=t.matrix;e&&(t.matrix=Qt(e,3,4))})}function sr(t,e,n){for(var r,i,o,a,s=t,u=[],l=!n&&t===e,c=l,f=!1,p=3,d=rr(e,e,!0).offsetParent;s&&!c;){c=l;var h=Tr(s),g=h.position,v="fixed"===g,m=ie((a=h.transform)&&"none"!==a?bt(a)?a:Ct(a).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]),b=m.length;f||16!==b||(f=!0,p=4,ar(u),o=o&&Qt(o,3,4)),f&&9===b&&(m=Qt(m,3,4));var x=ir(s,e,h,v),E=x.tagName,S=x.hasOffset,y=x.isSVG,M=x.origin,R=x.targetOrigin,D=x.offset,w=D[0],C=D[1];"svg"===E&&o?(u.push({type:"target",target:s,matrix:function(t,e){var n=cr(t),r=n.width,i=n.height,o=n.clientWidth,a=n.clientHeight,s=o/r,u=a/i,l=t.preserveAspectRatio.baseVal,c=l.align,f=l.meetOrSlice,p=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),p[0]=r*g/2,p[1]=i*v/2,m=2===f?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(o-r)/2*g,h[1]=(a-i)/2*v)}var b=ve(d,e);return b[e*(e-1)]=h[0],b[e*(e-1)+1]=h[1],tr(b,e,p)}(s,p)}),u.push({type:"offset",target:s,matrix:ge(p)})):"g"===E&&t!==s&&(C=w=0);var O=rr(s,e),P=O.offsetParent,B=O.isEnd,z=O.isStatic;jn&&S&&!y&&z&&("relative"===g||"static"===g)&&(w-=P.offsetLeft,C-=P.offsetTop,l=l||B);var G,T=0,_=0;if(S&&d!==P&&(T=P.clientLeft,_=P.clientTop),S&&P===document.body&&(w+=(G=or(s,!1,h))[0],C+=G[1]),u.push({type:"target",target:s,matrix:tr(m,p,M)}),S?u.push({type:"offset",target:s,matrix:me([w-s.scrollLeft+T,C-s.scrollTop+_],p)}):u.push({type:"offset",target:s,origin:M}),o=o||m,r=r||M,i=i||R,c||v)break;s=P,l=B,n&&s!==document.body||(c=l)}return{offsetContainer:d,matrixes:u,targetMatrix:o=o||ge(p),transformOrigin:r=r||[0,0],targetOrigin:i=i||[0,0],is3d:f}}function ur(t,e,n,r){void 0===n&&(n=e);var i,o,a,s,u=0,l=0,c=0,f={};t&&(u=(i=Er(t)).offsetWidth,l=i.offsetHeight),t&&(a=gr((o=function(t,e,n,r){var i;void 0===n&&(n=e);var o=sr(t,e),a=o.matrixes,s=o.is3d,u=o.targetMatrix,l=o.transformOrigin,c=o.targetOrigin,f=sr(o.offsetContainer,n,!0),p=f.matrixes,d=f.is3d,h=r||d||s,g=h?4:3,v="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,m=u,b=ge(g),x=ge(g),E=ge(g),S=ge(g),y=a.length;p.reverse(),a.reverse(),!s&&h&&(m=Qt(m,3,4),ar(a));!d&&h&&ar(p);p.forEach(function(t){x=ee(x,t.matrix,g)});var M=n||document.body,R=(null===(i=p[0])||void 0===i?void 0:i.target)||rr(M,M,!0).offsetParent,D=p.slice(1).reduce(function(t,e){return ee(t,e.matrix,g)},ge(g));a.forEach(function(t,e){var n;y-2===e&&(E=b.slice()),y-1===e&&(S=b.slice()),t.matrix||(n=function(t,e,n,r,i){var o,a=t.target,s=t.origin,u=e.matrix,l=Er(a),c=l.offsetWidth,f=l.offsetHeight,p=n.getBoundingClientRect(),d=[0,0];n===document.body&&(d=or(a,!0));var h=a.getBoundingClientRect(),g=h.left-p.left+n.scrollLeft-(n.clientLeft||0)+d[0],v=h.top-p.top+n.scrollTop-(n.clientTop||0)+d[1],m=h.width,b=h.height,x=te(r,i,u),E=hr(x,c,f,r),S=E.left,y=E.top,M=E.width,R=E.height,D=fr(x,s,r),w=re(D,[S,y]),C=[g+w[0]*m/M,v+w[1]*b/R],O=[0,0],P=0;for(;++P<10;){var B=$t(i,r);o=re(fr(B,C,r),fr(B,D,r)),O[0]=o[0],O[1]=o[1];var z=hr(te(r,i,me(O,r),u),c,f,r),G=z.left,T=z.top,_=G-g,A=T-v;if(Math.abs(_)<2&&Math.abs(A)<2)break;C[0]-=_,C[1]-=A}return O.map(function(t){return Math.round(t)})}(t,a[e+1],R,g,ee(D,b,g)),t.matrix=me(n,g)),b=ee(b,t.matrix,g)});var w=!v&&s;m=m||ge(w?4:3);var C=lr(v&&16===m.length?Qt(m,4,3):m,w);return{rootMatrix:x=Ut(x,g,g),beforeMatrix:E,offsetMatrix:S,allMatrix:b,targetMatrix:m,targetTransform:C,transformOrigin:l,targetOrigin:c,is3d:h}}(t,e,n,r)).allMatrix,o.transformOrigin,u,l),f=An(An({},o),a),c=Sr([(s=gr(o.allMatrix,[50,50],100,100)).pos1,s.pos2],s.direction));var p=r?4:3;return An({width:u,height:l,rotation:c,rootMatrix:ge(p),beforeMatrix:ge(p),offsetMatrix:ge(p),allMatrix:ge(p),targetMatrix:ge(p),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},f)}function lr(t,e){return void 0===e&&(e=9<t.length),(e?"matrix3d":"matrix")+"("+oe(t,!e).join(",")+")"}function cr(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function fr(t,e,n){return ae(t,Jt(e,n),n)}function pr(e,t,n,r){return[[0,0],[t,0],[0,n],[t,n]].map(function(t){return fr(e,t,r)})}function dr(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function hr(t,e,n,r){return dr(pr(t,e,n,r))}function gr(t,e,n,r){var i=16===t.length?4:3,o=pr(t,n,r,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],f=l[1],p=o[2],d=p[0],h=p[1],g=o[3],v=g[0],m=g[1],b=fr(t,e,i),x=b[0],E=b[1],S=Math.min(s,c,d,v),y=Math.min(u,f,h,m);return{left:S,top:y,right:Math.max(s,c,d,v),bottom:Math.max(u,f,h,m),origin:[x=x-S||0,E=E-y||0],pos1:[s=s-S||0,u=u-y||0],pos2:[c=c-S||0,f=f-y||0],pos3:[d=d-S||0,h=h-y||0],pos4:[v=v-S||0,m=m-y||0],direction:jt(o)}}function vr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function mr(t,e){return vr([e[0]-t[0],e[1]-t[1]])}function br(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=Nt(t,e));var i=mr(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad) scaleY("+n+")",width:i+"px"}}function xr(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length;return{transform:"translateZ(0px) translate("+n.reduce(function(t,e){return t+e[0]},0)/i+"px, "+n.reduce(function(t,e){return t+e[1]},0)/i+"px) rotate("+t+"rad) scale("+e+")"}}function Er(t,e){if(void 0===e&&(e=Tr(t)),!mt(t.offsetWidth)||"svg"===t.tagName.toLowerCase()){var n="border-box"===e.boxSizing,r=parseFloat(e.borderLeftWidth)||0,i=parseFloat(e.borderRightWidth)||0,o=parseFloat(e.borderTopWidth)||0,a=parseFloat(e.borderBottomWidth)||0,s=parseFloat(e.paddingLeft)||0,u=parseFloat(e.paddingRight)||0,l=parseFloat(e.paddingTop)||0,c=parseFloat(e.paddingBottom)||0,f=parseFloat(e.width),p=parseFloat(e.height),d=f,h=p,g=s+u,v=l+c,m=g+(r+i),b=v+(o+a);return n?(f=d-m,p=h-b):(d=f+m,h=p+b),{svg:!1,offsetWidth:d,offsetHeight:h,clientWidth:f+g,clientHeight:p+v,cssWidth:f,cssHeight:p}}var d,h,x=t.getBBox();return{svg:!0,offsetWidth:d=x.width,offsetHeight:h=x.height,clientWidth:d,clientHeight:h,cssWidth:d,cssHeight:h}}function Sr(t,e){return Nt(0<e?t[0]:t[1],0<e?t[1]:t[0])}function yr(t,e,n,r,i){var o,a,s=1,u=[0,0],l=Mr(),c=Mr(),f=Mr(),p=ur(e,n,i,!1);return e&&(o=p.is3d?4:3,s=(a=gr(p.offsetMatrix,ne(p.transformOrigin,Zt(p.targetMatrix,o)),p.width,p.height)).direction,u=ne(a.origin,[a.left-p.left,a.top-p.top]),l=Rr(e),c=Rr(rr(r,r,!0).offsetParent||document.body,!0),t&&(f=Rr(t))),An({targetClientRect:l,containerClientRect:c,moveableClientRect:f,beforeDirection:s,beforeOrigin:u,originalBeforeOrigin:u,target:e},p)}function Mr(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Rr(t,e){var n,r=0,i=0,o=0,a=0;t===document.body||t===document.documentElement?(o=window.innerWidth,a=window.innerHeight,r=-(document.documentElement.scrollLeft||document.body.scrollLeft),i=-(document.documentElement.scrollTop||document.body.scrollTop)):(r=(n=t.getBoundingClientRect()).left,i=n.top,o=n.width,a=n.height);var s={left:r,right:r+o,top:i,bottom:i+a,width:o,height:a};return e&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==Tr(t).overflow),s}function Dr(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return-1<e.indexOf("w")&&(n[0]=-1),-1<e.indexOf("e")&&(n[0]=1),-1<e.indexOf("n")&&(n[1]=-1),-1<e.indexOf("s")&&(n[1]=1),n}}}function wr(t,e){return[ne(e,t[0]),ne(e,t[1]),ne(e,t[2]),ne(e,t[3])]}function Cr(t){var e=t.left,n=t.top;return wr([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function Or(t,e){var n;null!==(n=t[e])&&void 0!==n&&n.unset(),t[e]=null}function Pr(t,e,n){var r=e.datas;r.datas||(r.datas={});var i=An(An({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:r.datas});return r.isStartEvent?r.lastEvent=i:r.isStartEvent=!0,i}function Br(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),An(An({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function zr(t,e,n){t._emitter.on(e,n)}function Gr(t,e,n,r){return t.triggerEvent(e,n,r)}function Tr(t,e){return window.getComputedStyle(t,e)}function _r(t,n,r){var i={},o={};return t.filter(function(e){var t=e.name;if(i[t]||!n.some(function(t){return e[t]}))return!1;if(!r&&e.ableGroup){if(o[e.ableGroup])return!1;o[e.ableGroup]=!0}return i[t]=!0})}function Ar(t,e){return t===e||null==t&&null==e}function kr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function Ir(t,e,n){return ae($t(t,n),Jt(e,n),n)}function Fr(t,e){var n=t.is3d?4:3,r=Ir(t.rootMatrix,[e.distX,e.distY],n);return e.distX=r[0],e.distY=r[1],e}function Nr(t,e,n,r,i){return re(fr(t,ne(n,e),i),r)}function jr(t,e,n){return n?t/e*100+"%":t+"px"}function Yr(t){return Math.abs(t)<=Ln?0:t}function qr(t,e){return e.isRequest?("resizable"===e.requestAble||"scalable"===e.requestAble)&&e.parentDirection:Wt(e.inputEvent.target,Qn("direction"))}function Xr(t){var e={};for(var n in t)e[t[n]]=n;return e}function Wr(t,e){return t?Et(t)?e?document.querySelector(t):t:St(t)?t():"current"in t?t.current:t:null}function Hr(t,n){return t?((e=t)&&bt(e)&&!(e instanceof Element)&&(xt(e)||"length"in e)?[].slice.call(t):[t]).reduce(function(t,e){return Et(e)&&n?kn(kn([],t),[].slice.call(document.querySelectorAll(e))):(t.push(Wr(e,n)),t)},[]):[];var e}function Lr(t,e){var n=t.rootMatrix,r=t.is3d,i=$t(n,r?4:3);return r||(i=Qt(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Ce(i,e)}var Vr=In("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(n,r){var t=r.datas,e=r.targets,i=r.angle,o=r.originalDatas,a=n.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(e?"Group":"")+"Start",c="drag"+(e?"Group":"")+"ControlStart",f=(!0===s?n.controlAbles:u.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),p=Pr(n,r,{});e&&(p.targets=e);var d=Gr(n,l,p);t.isPinch=!1!==d,t.ables=f;var h=t.isPinch;return!!h&&(f.forEach(function(t){var e;o[t.name]=o[t.name]||{},t[c]&&(e=An(An({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](n,e))}),n.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},h)},pinch:function(e,n){var t=n.datas,r=n.scale,i=n.distance,o=n.originalDatas,a=n.inputEvent,s=n.targets,u=n.angle;if(t.isPinch){var l=i*(1-1/r),c=Pr(e,n,{});s&&(c.targets=s),Gr(e,"onPinch"+(s?"Group":""),c);var f=t.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach(function(t){t[p]&&t[p](e,An(An({},n),{datas:o[t.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(e,n){var t=n.datas,r=n.isPinch,i=n.inputEvent,o=n.targets,a=n.originalDatas;if(t.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=Br(e,n,{isDrag:r});o&&(u.targets=o),Gr(e,s,u);var l=t.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(t){t[c]&&t[c](e,An(An({},n),{isDrag:r,datas:a[t.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,An(An({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,An(An({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,An(An({},e),{targets:t.props.targets}))}});function Ur(t,e,n,r,i){var o=e.gesto.move(n,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return An(An({},i?Fr(e,o):o),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var $r=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return(this.datas=n).draggable||(n.draggable={}),An(An({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=n,clientY:this.prevY=r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Zr(t,n,r){var e=r.originalDatas;e.groupable=e.groupable||{};var i=e.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,e){return o[e]=o[e]||{},o[e][n]=o[e][n]||{},An(An({},r),{datas:o[e][n],originalDatas:o[e]})})}function Kr(t,o,a,s,e,u){var l=!!a.match(/Start$/g),c=!!a.match(/End$/g),f=e.isPinch,p=e.datas,n=Zr(t,o.name,e),d=t.moveables,r=n.map(function(t,e){var n=d[e],r=t,r=l?(new $r).dragStart(s,t):(n.state.gesto||(n.state.gesto=p.childGestos[e]),Ur(t,n.state,s,f,u)),i=o[a](n,An(An({},r),{parentFlag:!0}));return c&&(n.state.gesto=null),i});return l&&(p.childGestos=d.map(function(t){return t.state.gesto})),r}function Jr(t,o,a,e,s,u){void 0===s&&(s=function(t,e){return e});var l=!!a.match(/End$/g),n=Zr(t,o.name,e),c=t.moveables;return n.map(function(t,e){var n=c[e],r=s(n,t),i=o[a](n,An(An({},r),{parentFlag:!0}));return i&&u&&u(n,t,i,e),l&&(n.state.gesto=null),i})}function Qr(t,e){var n=e.clientX,r=e.clientY,i=e.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=re(Ir(s,[n-a.left,r-a.top],u?4:3),l),f=oi({datas:i,distX:c[0],distY:c[1]});return[f[0],f[1]]}function ti(t,e){var n=e.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,l=r.origin,c=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,d=a?4:3;n.is3d=a,n.matrix=i,n.targetMatrix=f,n.beforeMatrix=o,n.offsetMatrix=c,n.transformOrigin=p,n.inverseMatrix=$t(i,d),n.inverseBeforeMatrix=$t(o,d),n.absoluteOrigin=Jt(ne([s,u],l),d),n.startDragBeforeDist=ae(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=ae(n.inverseMatrix,n.absoluteOrigin,d)}function ei(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,i=n.transformIndex,o=r.nextTransforms,a=r.nextTransformAppendedIndexes,s=0;-1===i?(s=o.length,n.transformIndex=s):s=i+a.filter(function(t){return t<i}).length;var u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,R,D=(l=s,c=(u=o).slice(0,l<0?void 0:l),f=u.slice(0,l<0?void 0:l+1),p=u[l]||"",d=l<0?[]:u.slice(l),h=l<0?[]:u.slice(l+1),g=Pe(c),v=Pe(f),m=Pe([p]),b=Pe(d),x=Pe(h),E=Oe(g),S=Oe(v),y=Oe(b),M=Oe(x),R=ee(E,y,4),{transforms:u,beforeFunctionMatrix:E,beforeFunctionMatrix2:S,targetFunctionMatrix:Oe(m),afterFunctionMatrix:y,afterFunctionMatrix2:M,allFunctionMatrix:R,beforeFunctions:g,beforeFunctions2:v,targetFunction:m[0],afterFunctions:b,afterFunctions2:x,beforeFunctionTexts:c,beforeFunctionTexts2:f,targetFunctionText:p,afterFunctionTexts:d,afterFunctionTexts2:h}),w=D.targetFunction,C="rotate"===e?"rotateZ":e;n.beforeFunctionTexts=D.beforeFunctionTexts,n.afterFunctionTexts=D.afterFunctionTexts,n.beforeTransform=D.beforeFunctionMatrix,n.beforeTransform2=D.beforeFunctionMatrix2,n.targetTansform=D.targetFunctionMatrix,n.afterTransform=D.afterFunctionMatrix,n.afterTransform2=D.afterFunctionMatrix2,n.targetAllTransform=D.allFunctionMatrix,w.functionName===C?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=kn(kn([],a),[s]))}function ni(t,e,n){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?n:e)+" "+t.afterFunctionTexts.join(" ")}function ri(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=n?ee(s,e,4):ee(e,s,4),l=ee($t(n?o:r,4),u,4);return ee(l,$t(n?a:i,4),4)}function ii(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,a=e.startDragBeforeDist,s=o?4:3;return re(ae(i,ne(e.absoluteOrigin,[n,r]),s),a)}function oi(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,a=n.inverseMatrix,s=n.is3d,u=n.startDragBeforeDist,l=n.startDragDist,c=s?4:3;return re(ae(e?o:a,ne(n.absoluteOrigin,[r,i]),c),e?u:l)}function ai(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function si(e,t){return ai(t).map(function(t){return e[t]})}function ui(t,e){var n=si(t,e);return[Ft(n.map(function(t){return t[0]})),Ft(n.map(function(t){return t[1]}))]}function li(t,e,n,r){return ee(t,tr(e,r,n),r)}function ci(n){var r=n.originalDatas.beforeRenderable;return{setTransform:function(t,e){void 0===e&&(e=-1),r.startTransforms=xt(t)?t:Dt(t),pi(n,e)},setTransformIndex:function(t){pi(n,t)}}}function fi(t,e){pi(t,Bt(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf(e+"(")}))}function pi(t,e){var n,r,i=t.originalDatas.beforeRenderable,o=t.datas;-1===(o.transformIndex=e)||(n=i.startTransforms[e])&&(r=Pe([n]),o.startValue=r[0].functionValue)}function di(t,e){t.originalDatas.beforeRenderable.nextTransforms=Dt(e)}function hi(t){return t.originalDatas.beforeRenderable.nextTransforms.join(" ")}function gi(t,e,n,r,i){return di(i,e),{transform:e,drag:Eo.drag(t,Ur(i,t.state,n,r,!1))}}function vi(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h=t.state,g=h.left,v=h.top,m=t.props.groupable,b=m?g:0,x=m?v:0,E=re(r,bi(t,n,(o=t.state,a=i,s=e,u=o.transformOrigin,l=o.offsetMatrix,c=o.is3d,f=a.beforeTransform,p=a.afterTransform,d=c?4:3,li(l,Qt(ee(ee(f,we([s]),4),p,4),4,d),u,d))));return re(E,[b,x])}function mi(t){var e=t.state,n=e.width,r=e.height,i=e.transformOrigin;return[i[0]/(n/2)-1,i[1]/(r/2)-1]}function bi(t,e,n){void 0===n&&(n=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,a=r.is3d?4:3;return fr(n,[i/2*(1+e[0]),o/2*(1+e[1])],a)}function xi(t,e,n,r,i,o){var a,s,u,l,c,f,p,d,h,g=t.props.groupable,v=t.state,m=v.transformOrigin,b=v.targetMatrix,x=v.offsetMatrix,E=v.is3d,S=v.width,y=v.height,M=v.left,R=v.top,D=E?4:3,w=g?M:0,C=g?R:0,O=li(x,b,(s=e,u=n,void 0===(l=S)&&(l=s),void 0===(c=y)&&(c=u),void 0===(f=m)&&(f=[0,0]),(a=o)?a.map(function(t,e){var n=Ot(t),r=n.value,i=n.unit,o=e?c:l,a=e?u:s;return"%"===t||isNaN(r)?a*(o?f[e]/o:0):"%"!==i?r:a*r/100}):f),D);return re((p=i,d=r,h=ui(pr(O,e,n,D),d),[p[0]-h[0],p[1]-h[1]]),[w,C])}function Ei(t,e){return ui(Cr(t.state),e)}var Si=["left","right","center"],yi=["top","bottom","middle"],Mi={start:"left",end:"right",center:"center"},Ri={start:"top",end:"bottom",center:"middle"};function Di(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,u=n.snapGridWidth,l=n.snapGridHeight,c=t.state,f=c.guidelines,p=c.enableSnap;return r&&p&&!(e&&!0!==r&&r.indexOf(e)<0)&&!!(u||l||i||o||f&&f.length||a&&a.length||s&&s.length)}function wi(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Ci(t,e){var n=function(t,e){var n=wi(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}(t,e),r=yi.filter(function(t){return t in n}),i=Si.filter(function(t){return t in n});return{horizontal:r.map(function(t){return n[t]}),vertical:i.map(function(t){return n[t]})}}function Oi(t,e,n,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],u=a.left,l=a.top,c=a.bottom,f=n+a.right-u,p=r+c-l;return t&&t.forEach(function(t){s.push({type:"horizontal",pos:[u,qt(t-o+l,.1)],size:f})}),e&&e.forEach(function(t){s.push({type:"vertical",pos:[qt(t-i+u,.1),l],size:p})}),s}function Pi(t,e){if(!e.length)return[];var n,r,i,o=t.state,a=o.containerClientRect,s=o.targetClientRect,u=s.top,l=s.left,p=o.rootMatrix,d=o.is3d?4:3,c=(r=d,i=fr(p,[(n=a).clientLeft,n.clientTop],r),[n.left+i[0],n.top+i[1]]),h=c[0],g=c[1],f=qe(Cr(o)),v=re([f.minX,f.minY],Ir(p,[l-h,u-g],d)).map(function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e}),m=v[0],b=v[1];return e.map(function(t){var e=t.element.getBoundingClientRect(),n=e.left-h,r=e.top-g,i=r+e.height,o=n+e.width,a=Ir(p,[n,r],d),s=a[0],u=a[1],l=Ir(p,[o,i],d),c=l[0],f=l[1];return An(An({},t),{rect:{left:s+m,right:c+m,top:u+b,bottom:f+b,center:(s+c)/2+m,middle:(u+f)/2+b}})})}function Bi(t){var e,n,r,i,o,a,x,l,E,s=t.state,u=s.snapOffset,c=s.containerClientRect,f=c.overflow,p=c.scrollHeight,d=c.scrollWidth,h=c.clientHeight,g=c.clientWidth,v=c.clientLeft,m=c.clientTop,b=t.props,S=b.snapGap,y=void 0===S||S,M=b.verticalGuidelines,R=b.horizontalGuidelines,D=b.snapThreshold,w=void 0===D?5:D,C=b.snapGridWidth,O=void 0===C?0:C,P=b.snapGridHeight,B=void 0===P?0:P,z=kn([],function(t){var e=t.state,n=t.props.elementGuidelines,r=void 0===n?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(t){return!t.refresh}),o=r.map(function(t){return bt(t)&&"element"in t?t:{element:Wr(t,!0)}}).filter(function(t){return t.element}),a=_e(i.map(function(t){return t.element}),o.map(function(t){return t.element})),s=a.maintained,u=a.added,l=[];s.forEach(function(t){var e=t[0],n=t[1];l[n]=i[e]}),Pi(t,u.map(function(t){return o[t]})).map(function(t,e){l[u[e]]=t}),e.elementRects=l;var R=wi(t.props.elementSnapDirections),D=[];return l.forEach(function(e){var n=e.element,t=e.top,r=void 0===t?R.top:t,i=e.left,o=void 0===i?R.left:i,a=e.right,s=void 0===a?R.right:a,u=e.bottom,l=void 0===u?R.bottom:u,c=e.center,f=void 0===c?R.center:c,p=e.middle,d=void 0===p?R.middle:p,h=e.className,g=e.rect,v=Ci({top:r,right:s,left:o,bottom:l,center:f,middle:d},g),m=v.horizontal,b=v.vertical,x=g.top,E=g.left,S=g.right-E,y=g.bottom-x,M=[S,y];b.forEach(function(t){D.push({type:"vertical",element:n,pos:[qt(t,.1),x],size:y,sizes:M,className:h,elementRect:e})}),m.forEach(function(t){D.push({type:"horizontal",element:n,pos:[E,qt(t,.1)],size:S,sizes:M,className:h,elementRect:e})})}),D}(t));return y&&(n=(e=dr(Cr(t.state))).top,r=e.left,i=e.bottom,o=e.right,z.push.apply(z,(a={top:n,left:r,bottom:i,right:o,center:(r+o)/2,middle:(n+i)/2},x=w,l=t.state.elementRects,E=[],[["vertical",Mi,Ri],["horizontal",Ri,Mi]].forEach(function(t){var h=t[0],g=t[1],s=t[2],v=a[g.start],m=a[g.end],b=a[g.center],n=a[s.start],r=a[s.end];function i(t){var e=t.rect;return e[g.end]<v+x?v-e[g.end]:m-x<e[g.start]?e[g.start]-m:-1}var e=l.filter(function(t){var e=t.rect;return!(e[s.start]>r||e[s.end]<n)&&0<i(t)}).sort(function(t,e){return i(t)-i(e)}),u=[];e.forEach(function(a){e.forEach(function(t){var e,n,r,i,o;a!==t&&(e=a.rect,n=t.rect,r=e[s.start],i=e[s.end],o=n[s.start],n[s.end]<r||i<o||u.push([a,t]))})}),u.forEach(function(t){var e=t[0],n=t[1],r=e.rect,i=n.rect,o=r[g.start],a=r[g.end],s=i[g.start],u=i[g.end],l=0,c=0,f=!1,p=!1,d=!1;if(a<=v&&m<=s){if(p=!0,c=a+(l=(s-a-(m-v))/2)+(m-v)/2,Math.abs(c-b)>x)return}else if(a<s&&u<v+x){if(f=!0,c=u+(l=s-a),Math.abs(c-v)>x)return}else{if(!(a<s&&m-x<o))return;if(d=!0,c=o-(l=s-a),Math.abs(c-m)>x)return}l&&E.push({type:h,pos:"vertical"===h?[c,0]:[0,c],element:n.element,size:0,className:n.className,isStart:f,isCenter:p,isEnd:d,gap:l,hide:!0,gapRects:[e,n]})})}),E))),z.push.apply(z,function(t,e,n,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(e)for(var s=0;s<=r;s+=e)a.push({type:"horizontal",pos:[0,qt(s-o,.1)],size:n,hide:!0});if(t)for(s=0;s<=n;s+=t)a.push({type:"vertical",pos:[qt(s-i,.1),0],size:r,hide:!0});return a}(O,B,f?d:g,f?p:h,v,m)),z.push.apply(z,Oi(R||!1,M||!1,f?d:g,f?p:h,v,m,u)),z}function zi(t,e,n,r){var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!mt(i))return i}return t[n]}(r,t.props.snapThreshold,5);return Gi(t.state.guidelines,e,n,i)}function Gi(t,e,n,r){return{vertical:Ai(t,"vertical",e,r),horizontal:Ai(t,"horizontal",n,r)}}function Ti(t,e,n){var r=Ci(t.props.snapDirections,e);return zi(t,r.vertical,r.horizontal,n)}function _i(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:a}}function Ai(n,i,t,o){if(!n||!n.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,e=t.map(function(r,t){var e=n.map(function(t){var e=t.pos,n=r-e[a];return{offset:n,dist:Math.abs(n),guideline:t}}).filter(function(t){var e=t.guideline,n=t.dist;return!(e.type!==i||o<n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,index:t,guidelineInfos:e}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}),r=0<e.length;return{isSnap:r,index:r?e[0].index:-1,posInfos:e}}function ki(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ln?1:r<Ln?-1:n-r}function Ii(t,a){return t.slice().sort(function(t,e){var n=t.sign[a],r=e.sign[a],i=t.offset[a],o=e.offset[a];return n?r?ki({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:e.isBound,isSnap:e.isSnap,offset:o}):-1:1})[0]}function Fi(t,e){var n=Ft([e[0][0],e[1][0]]),r=Ft([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Ni(t,e){var n,r,i=e[0],o=e[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<Ln&&(a=0),Math.abs(s)<Ln&&(s=0),r=a?(n=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(n=i[0],t[0]),n-r}function ji(t,n,r){void 0===r&&(r=Ln);var i=Ni(t[0],n)<=0;return t.slice(1).every(function(t){var e=Ni(t,n);return e<=0==i||Math.abs(e)<=r})}function Yi(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function qi(t,e,n,r,i){var o=t[0],a=t[1],s=e[0],u=e[1],l=Yr(a[1]-o[1]),c=Yr(a[0]-o[0]),f=Yr(u[1]-s[1]);if(!Yr(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return Yi(l/c*(s[0]-o[0])+o[1],s[1],u[1],n,r);var p=s[0]-o[0];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}if(f)return{isBound:!1,offset:0};if(i&&!c)return{isBound:!1,offset:0};if(l)return Yi((s[1]-o[1])/(l/c)+o[0],s[0],u[0],n,r);var d,p=s[1]-o[1];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}function Xi(c,t,f,p){return t.map(function(t){var n=t[0],e=t[1],r=t[2],i=function(t,e,n){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=r.left,o=r.top,a=r.width,s=r.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],f=[[i,o+s],[i+a,o+s]],p=Fi(n,e),d=p.horizontal,h=p.vertical;if(ji([n,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=qi(e,l,h),v=qi(e,f,h),m=qi(e,u,d),b=qi(e,c,d),x=g.isBound&&v.isBound,E=g.isBound||v.isBound,S=m.isBound&&b.isBound,y=m.isBound||b.isBound,M=kr(g.offset,v.offset),R=kr(m.offset,b.offset),D=[0,0],w=!1;return{isAllBound:Math.abs(R)<Math.abs(M)?(D=[M,0],w=E,x):(D=[0,R],w=y,S),isVerticalBound:E,isHorizontalBound:y,isBound:w,offset:D}}(c,[e,r],f),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=oi({datas:p,distX:a[0],distY:a[1]}).map(function(t,e){return t*(n[e]?2/n[e]:0)});return{sign:n,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function Wi(t,e,n){var r,i,o,a,s,u,l,c,f,p,d,h,g,v=Xi(t,Hi(e,[0,0],!1).map(function(t){var e=t[0],n=t[1],r=t[2];return[e.map(function(t){return 2*Math.abs(t)}),n,r]}),ui(e,[0,0]),n),m=Ii(v,0),b=Ii(v,1),x=0,E=0,S=m.isVerticalBound||b.isVerticalBound,y=m.isHorizontalBound||b.isHorizontalBound;return(S||y)&&(i={datas:n,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,l=a.beforeMatrix,c=a.matrix,f=a.is3d,p=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=f?4:3,x=(r=re(ae(o?l:c,ne(o?p:d,[s,u]),g),h))[0],E=r[1]),{vertical:{isBound:S,offset:x},horizontal:{isBound:y,offset:E}}}function Hi(i,t,e){return r=e,o=[],a=(n=t)[0],s=n[1],a&&s?o.push([[0,2*s],n,[-a,s]],[[2*a,0],n,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),r&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),r&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var e=t[0],n=t[1],r=t[2];return[e,ui(i,n),ui(i,r)]});var n,r,o,a,s}function Li(t,e,n,r){var i=r?t.map(function(t){return fe(t,r)}):t,o=kn([n],e);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t){return!ji(o,t)})}function Vi(t,e,n,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,f=s-r[0],p=s+l-r[0],d=u-r[1],h=u+c-r[1],g=[[f,d],[p,d],[f,h],[p,h]],v=ui(n,[0,0]);if(!Li(n,g,v,0))return[];var m=[],b=g.map(function(t){return[vr(t),Nt([0,0],t)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(t){var i=Nt([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return[e[0],0];if(!i)return[0,e[1]];var o=i/r,a=-o*e[0]+e[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var o=i/r;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var e=t[0];return e&&o<=e}).map(function(t){var e=t[0],n=t[1],r=Math.acos(e?o/e:0);return[a+(n+r)-i,a+(n-r)-i]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!Li(e,g,v,t)}).map(function(t){return qt(180*t/Math.PI,Ln)}))}),m}function Ui(t,e,n){var r=t||{},i=r.position,o=r.left,a=r.top,s=r.right,u=r.bottom,l={position:void 0===i?"client":i,left:void 0===o?-1/0:o,top:void 0===a?-1/0:a,right:void 0===s?1/0:s,bottom:void 0===u?1/0:u};return{vertical:Zi(l,e,!0),horizontal:Zi(l,n,!1)}}function $i(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,s=r.clientTop,u=n.snapOffset,l=u.left,c=u.top,f=u.right,p=u.bottom,d=e||t.props.bounds||{},h="css"===(d.position||"client"),g=d.left,v=d.top,m=d.right,b=void 0===m?h?-1/0:1/0:m,x=d.bottom,E=void 0===x?h?-1/0:1/0:x;return h&&(b=o+f-l-b,E=i+p-c-E),{left:(void 0===g?-1/0:g)+l-a,right:b+l-a,top:(void 0===v?-1/0:v)+c-s,bottom:E+c-s}}function Zi(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,e),a=Math.max.apply(Math,e),s=[];return o<r+1&&s.push({isBound:!0,offset:o-r,pos:r}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)})}function Ki(t,e,n){return(n?t.map(function(t){return fe(t,n)}):t).some(function(t){return t[0]<e.left&&.1<Math.abs(t[0]-e.left)||t[0]>e.right&&.1<Math.abs(t[0]-e.right)||t[1]<e.top&&.1<Math.abs(t[1]-e.top)||t[1]>e.bottom&&.1<Math.abs(t[1]-e.bottom)})}function Ji(t,l,e,n,r){if(!t.props.bounds)return[];var c=r*Math.PI/180,i=$i(t),o=i.left,a=i.top,s=i.right,u=i.bottom,f=o-n[0],p=s-n[0],d=a-n[1],h=u-n[1],g={left:f,top:d,right:p,bottom:h};if(!Ki(e,g,0))return[];var v=[];return[[f,0],[p,0],[d,1],[h,1]].forEach(function(t){var s=t[0],u=t[1];e.forEach(function(t){var n,e,r,i,o,a=Nt([0,0],t);v.push.apply(v,(e=s,r=u,i=vr(n=t),[o=Math.sqrt(i*i-e*e)||0,-o].sort(function(t,e){return Math.abs(t-n[r?0:1])-Math.abs(e-n[r?0:1])}).map(function(t){return Nt([0,0],r?[t,e]:[e,t])}).map(function(t){return c+t-a}).filter(function(t){return!Ki(l,g,t)}).map(function(t){return qt(180*t/Math.PI,Ln)})))})}),v}function Qi(t,e){return n=An(An({},t),{classNames:kn([Qn("line","guideline",t.direction)],t.classNames).filter(function(t){return t}),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map(function(t){return qt(t,.1)+"px"})}),r=e,o=n.direction,a=n.classNames,s=n.size,u=n.pos,l=n.zoom,c=n.key,p=(f="horizontal"===o)?"Y":"X",r.createElement("div",{key:c,className:a.join(" "),style:((i={})[f?"width":"height"]=""+s,i.transform="translate("+u[0]+", "+u[1]+") translate"+p+"(-50%) scale"+p+"("+l+")",i)});var n,r,i,o,a,s,u,l,c,f,p}function to(t,o,e,a,s,u,l,c){var f=t.props.zoom;return e.map(function(t,e){var n=t.type,r=t.pos,i=[0,0];return i[l]=a,i[l?0:1]=-s+r,Qi({key:o+"TargetGuideline"+e,classNames:[Qn("target","bold",n)],posValue:i,sizeValue:u,zoom:f,direction:o},c)})}function eo(t,a,e,s,n,u){var r=t.props,l=r.zoom,i=r.isDisplayInnerSnapDigit,o="horizontal"===a?Mi:Ri,c=n[o.start],f=n[o.end];return e.filter(function(t){var e=t.hide,n=t.elementRect;if(e)return!1;if(i&&n){var r=n.rect;if(r[o.start]<=c&&f<=r[o.end])return!1}return!0}).map(function(t,e){var n=t.pos,r=t.size,i=t.element,o=[-s[0]+n[0],-s[1]+n[1]];return Qi({key:a+"-default-guideline-"+e,classNames:i?[Qn("bold")]:[],direction:a,posValue:o,sizeValue:r,zoom:l},u)})}function no(t,e,n,r,i,o,a,s){var u,l=t.props,c=l.snapDigit,f=void 0===c?0:c,p=l.isDisplaySnapDigit,d=void 0===p||p,h=l.snapDistFormat,g=void 0===h?function(t){return t}:h,v=l.zoom,m="horizontal"===e?"X":"Y",b="vertical"===e?"height":"width",x=Math.abs(i),E=d?parseFloat(x.toFixed(f)):0;return s.createElement("div",{key:e+"-"+n+"-guideline-"+r,className:Qn("guideline-group",e),style:((u={left:o[0]+"px",top:o[1]+"px"})[b]=x+"px",u)},Qi({direction:e,classNames:[Qn(n),a],size:"100%",posValue:[0,0],sizeValue:x,zoom:v},s),s.createElement("div",{className:Qn("size-value","gap"),style:{transform:"translate"+m+"(-50%) scale("+v+")"}},0<E?g(E):""))}function ro(M,i,R,D,w){var C=M.props.isDisplayInnerSnapDigit,O=[];return["vertical","horizontal"].forEach(function(s){var p,t,e,d,o,a,u,l,h,g,v,m,b,n=i.filter(function(t){return t.type===s}),c="vertical"===s?1:0,f=c?0:1,r=(t=n,d=C,g="vertical"===(p=s)?1:0,m=(e=D)[(v=(h="vertical"===p?0:1)?Mi:Ri).start],b=e[v.end],a=function(t){return t.pos[h]},u=[],l=[],(o=t).forEach(function(t,e){var n=a(t,e,o),r=l.indexOf(n),i=u[r]||[];-1===r&&(l.push(n),u.push(i)),i.push(t)}),u.map(function(t){var c=[],f=[];return t.forEach(function(t){var e,n,r,i,o,a,s,u=t.element,l=t.elementRect.rect;l[v.end]<m?c.push(t):b<l[v.start]?f.push(t):l[v.start]<=m&&b<=l[v.end]&&d&&(r=t.pos,i={element:u,rect:An(An({},l),((e={})[v.end]=l[v.start],e))},o={element:u,rect:An(An({},l),((n={})[v.start]=l[v.end],n))},s=[0,0],(a=[0,0])[h]=r[h],a[g]=r[g],s[h]=r[h],s[g]=r[g]+t.size,c.push({type:p,pos:a,size:0,elementRect:i}),f.push({type:p,pos:s,size:0,elementRect:o}))}),c.sort(function(t,e){return e.pos[g]-t.pos[g]}),f.sort(function(t,e){return t.pos[g]-e.pos[g]}),{total:t,start:c,end:f,inner:[]}})),x=c?Ri:Mi,E=c?Mi:Ri,S=D[x.start],y=D[x.end];r.forEach(function(t){var e=t.total,n=t.start,r=t.end,i=t.inner,a=R[f]+e[0].pos[f]-D[E.start],o=D;n.forEach(function(t){var e,n=t.elementRect.rect,r=o[x.start]-n[x.end];0<r&&((e=[0,0])[c]=R[c]+o[x.start]-S-r,e[f]=a,O.push(no(M,s,"dashed",O.length,r,e,t.className,w))),o=n}),o=D,r.forEach(function(t){var e,n=t.elementRect.rect,r=n[x.start]-o[x.end];0<r&&((e=[0,0])[c]=R[c]+o[x.end]-S,e[f]=a,O.push(no(M,s,"dashed",O.length,r,e,t.className,w))),o=n}),i.forEach(function(t){var e=t.elementRect.rect,n=S-e[x.start],r=e[x.end]-y,i=[0,0],o=[0,0];i[c]=R[c]-n,i[f]=a,o[c]=R[c]+y-S,o[f]=a,O.push(no(M,s,"dashed",O.length,n,i,t.className,w)),O.push(no(M,s,"dashed",O.length,r,o,t.className,w))})})}),O}function io(t,e,n,r,i){var o=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];if(Math.abs(i)<gt&&(i=0),Math.abs(o)<gt&&(o=0),!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var a=o/i,s=t[1]-a*t[0];return r?[n,a*(e[0]+n)+s-e[1]]:[(e[1]+n-s)/a-e[0],n]}(t,e,n,r);if(!o)return{isOutside:!1,offset:[0,0]};var a=Yt(t,e),s=Yt(o,t),u=Yt(o,e),l=a<s||a<u,c=oi({datas:i,distX:o[0],distY:o[1]});return{offset:[c[0],c[1]],isOutside:l}}function oo(t,e){return t.isBound?t.offset:e.isSnap?_i(e).offset:0}function ao(t,e,n,r,i,o){if(!Di(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,R,D=wr(o.absolutePoses,[e,n]),w=dr(D),C=w.left,O=w.right,P=w.top,B=w.bottom,z={horizontal:D.map(function(t){return t[1]}),vertical:D.map(function(t){return t[0]})},G=so(t,i,Ci(wi(t.props.snapDirections),{left:C,right:O,top:P,bottom:B,center:(C+O)/2,middle:(P+B)/2}),z),T=G.vertical,_=G.horizontal,A=Wi(t,D,o),k=A.vertical,I=A.horizontal,F=T.isSnap,N=_.isSnap,j=T.isBound||k.isBound,Y=_.isBound||I.isBound,q=kr(T.offset,k.offset),X=kr(_.offset,I.offset),W=(a=r,u=[j,Y],l=[F,N],c=[q,X],g=(s=[e,n])[0],v=s[1],m=u[0],b=u[1],x=l[0],E=l[1],S=c[0],y=c[1],M=-S,R=-y,a&&g&&v?(R=M=0,f=[],m&&b?f.push([0,y],[S,0]):m?f.push([S,0]):b?f.push([0,y]):x&&E?f.push([0,y],[S,0]):x?f.push([S,0]):E&&f.push([0,y]),f.length&&(f.sort(function(t,e){return vr(re([g,v],t))-vr(re([g,v],e))}),(p=f[0])[0]&&Math.abs(g)>gt?(M=-p[0],R=v*Math.abs(g+M)/Math.abs(g)-v):p[1]&&Math.abs(v)>gt&&(d=v,R=-p[1],M=g*Math.abs(v+R)/Math.abs(d)-g),a&&b&&m&&(Math.abs(M)>gt&&Math.abs(M)<Math.abs(S)?(M*=h=Math.abs(S)/Math.abs(M),R*=h):Math.abs(R)>gt&&Math.abs(R)<Math.abs(y)?(M*=h=Math.abs(y)/Math.abs(R),R*=h):(M=kr(-S,M),R=kr(-y,R))))):(M=g||m?-S:0,R=v||b?-y:0),[M,R]);return[{isBound:j,isSnap:F,offset:W[0]},{isBound:Y,isSnap:N,offset:W[1]}]}function so(t,e,n,r){void 0===r&&(r=n);var i=Ui($i(t),r.vertical,r.horizontal),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:zi(t,n.vertical,n.horizontal),u=s.horizontal,l=s.vertical,c=oo(o[0],u),f=oo(a[0],l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l}}}function uo(t,e,n,r,i){var o=Ui(e,n,r),a=o.horizontal,s=o.vertical,u=Gi(t,n,r,i),l=u.horizontal,c=u.vertical,f=oo(a[0],l),p=oo(s[0],c),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:h,bounds:s,snap:c}}}function lo(H,L,t,V,U,$){return t.map(function(t){var e,n,r,i,o,a,s,u,l,c,f,p,d,h,g=t[0],v=t[1],m=ui(L,g),b=ui(L,v),x=V?(i=U,o=function(t,e,n){var r=$i(t),i=r.left,o=r.top,a=r.right,s=r.bottom,u=n[0],l=n[1],c=re(n,e),f=c[0],p=c[1];Math.abs(f)<Ln&&(f=0),Math.abs(p)<Ln&&(p=0);var d,h,g,v,m,b=0<p,x=0<f,E={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};return 0===f&&0===p||(0===f?b?s<l&&(S.pos=s,S.offset=l-s):l<o&&(S.pos=o,S.offset=l-o):0===p?x?a<u&&(E.pos=a,E.offset=u-a):u<i&&(E.pos=i,E.offset=u-i):(d=p/f,h=n[1]-d*u,v=g=0,m=!1,x&&a<=u?(g=d*a+h,v=a,m=!0):!x&&u<=i&&(g=d*i+h,v=i,m=!0),m&&(g<o||s<g)&&(m=!1),m||(b&&s<=l?(v=((g=s)-h)/d,m=!0):!b&&l<=o&&(v=((g=o)-h)/d,m=!0)),m&&(E.isBound=!0,E.pos=v,E.offset=u-v,S.isBound=!0,S.pos=g,S.offset=l-g))),{vertical:E,horizontal:S}}(e=H,n=m,r=b),a=o.horizontal,s=o.vertical,u=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],i=n[1],o=e[0],a=e[1],s=re(n,e),u=s[0],l=0<(f=s[1]),c=0<u,u=Yr(u),f=Yr(f),p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===f)return{vertical:p,horizontal:d};var h=zi(t,u?[r]:[],f?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var e=t.pos;return c?o<=e:e<=o}),v.posInfos.filter(function(t){var e=t.pos;return l?a<=e:e<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,x,E,S,y=_i(g),M=y.isSnap,R=y.guideline,D=_i(v),w=D.isSnap,C=D.guideline,O=w?C.pos[1]:0,P=M?R.pos[0]:0;return 0===u?w&&(d.isSnap=!0,d.pos=C.pos[1],d.offset=i-d.pos):0===f?M&&(p.isSnap=!0,p.pos=P,p.offset=r-P):(m=f/u,b=n[1]-m*r,E=x=0,S=!1,M?(x=m*(E=P)+b,S=!0):w&&(E=((x=O)-b)/m,S=!0),S&&(p.isSnap=!0,p.pos=E,p.offset=r-E,d.isSnap=!0,d.pos=x,d.offset=i-x)),{vertical:p,horizontal:d}}(e,n,r),l=u.horizontal,c=u.vertical,f=co(a,l),p=co(s,c),d=Math.abs(f),h=Math.abs(p),{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:d},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:p,dist:h}}):so(H,U,{vertical:[b[0]],horizontal:[b[1]]}),E=x.horizontal,S=E.offset,y=E.isBound,M=E.isSnap,R=x.vertical,D=R.offset,w=R.isBound,C=R.isSnap,O=re(v,g);if(!D&&!S)return{isBound:w||y,isSnap:C||M,sign:O,offset:[0,0]};var P,B,z,G,T,_,A,k,I,F,N,j,Y,q=(P=x,B=V,z=Nt(m,b)/Math.PI*180,G=P.vertical,T=G.isBound,_=G.isSnap,A=G.dist,k=P.horizontal,I=k.isBound,F=k.isSnap,j=(N=z%180)<3||177<N,Y=87<N&&N<93,k.dist<A&&(T||_&&!Y&&(!B||!j))?"vertical":!I&&(!F||j||B&&Y)?"":"horizontal");if(!q)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var X="vertical"==q,W=io(m,b,-(X?D:S),X,$).offset.map(function(t,e){return t*(O[e]?2/O[e]:0)});return{sign:O,isBound:X?w:y,isSnap:X?C:M,offset:W}})}function co(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function fo(t){var e,n,r,i,o,a,s,u,l=t.state;l.guidelines&&l.guidelines.length||(e=t.state.container,n=t.props.snapContainer||e,r=l.containerClientRect,i={left:0,top:0,bottom:0,right:0},e===n||(o=Wr(n,!0))&&(s=Lr(l,[(a=Rr(o)).left-r.left,a.top-r.top]),u=Lr(l,[a.right-r.right,a.bottom-r.bottom]),i.left=qt(s[0],.1),i.top=qt(s[1],.1),i.right=qt(u[0],.1),i.bottom=qt(u[1],.1)),l.snapOffset=i,l.guidelines=Bi(t),l.enableSnap=!0)}function po(t,e,n,r,i,o){var a=pr(t,e,n,o?4:3);return wr(a,re(i,ui(a,r)))}function ho(t,e,n,r,i,o){var a,s,u,l=o.fixedDirection,c=(a=n,s=l,u=[],r?(1!==Math.abs(s[0])||1!==Math.abs(s[1])?u.push([s,[-1,-1]],[s,[-1,1]],[s,[1,-1]],[s,[1,1]]):u.push([s,[a[0],-a[1]]],[s,[-a[0],a[1]]],[s,a]),u.push([s,a])):a[0]&&a[1]?u.push([s,[a[0],-a[1]]],[s,[-a[0],a[1]]]):a[0]?(1===Math.abs(s[0])?[1]:[1,-1]).forEach(function(t){u.push([[s[0],-1],[t*a[0],-1]],[[s[0],0],[t*a[0],0]],[[s[0],1],[t*a[0],1]])}):a[1]?(1===Math.abs(s[1])?[1]:[1,-1]).forEach(function(t){u.push([[-1,s[1]],[-1,t*a[1]]],[[0,s[1]],[0,t*a[1]]],[[1,s[1]],[1,t*a[1]]])}):u.push([s,[1,0]],[s,[-1,0]],[s,[0,-1]],[s,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),u),f=Hi(e,n,r),p=kn(kn([],lo(t,e,c,r,i,o)),Xi(t,f,ui(e,[0,0]),o)),d=Ii(p,0),h=Ii(p,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function go(t,e,n,r,i,o,a,s){for(var u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,R,D,w,C,O,P,B,z,G,T=Cr(t.state),_=t.props.keepRatio,A=0,k=0,I=0;I<2;++I){var F,N,j=ho(t,e(A,k),i,_,a,s),Y=j.width,q=j.height,X=Y.isBound,W=q.isBound,H=Y.offset,L=q.offset;if(1===I&&(X||(H=0),W||(L=0)),0===I&&a&&!X&&!W)return[0,0];_&&(F=Math.abs(H)*(n?1/n:1),N=Math.abs(L)*(r?1/r:1),(X&&W?F<N:W||!X&&F<N)?H=n*L/r:L=r*H/n),A+=H,k+=L}return i[0]&&i[1]&&(p=t,d=T,g=o,v=s,w=[-(h=i)[0],-h[1]],C=p.state,O=C.width,P=C.height,B=p.props.bounds,G=z=1/0,B&&(m=[[h[0],-h[1]],[-h[0],h[1]]],b=B.left,x=void 0===b?-1/0:b,E=B.top,S=void 0===E?-1/0:E,y=B.right,M=void 0===y?1/0:y,R=B.bottom,D=void 0===R?1/0:R,m.forEach(function(t){var e,n,r,i,o,a,s,u=t[0]!==w[0],l=t[1]!==w[1],c=ui(d,t),f=360*Nt(g,c)/Math.PI;l&&(i=c.slice(),(Math.abs(f-360)<2||Math.abs(f-180)<2)&&(i[1]=g[1]),n=(e=io(g,i,(g[1]<c[1]?D:S)-c[1],!1,v)).offset[1],r=e.isOutside,isNaN(n)||(G=P+(r?1:-1)*Math.abs(n))),u&&(i=c.slice(),(Math.abs(f-90)<2||Math.abs(f-270)<2)&&(i[0]=g[0]),a=(o=io(g,i,(g[0]<c[0]?M:x)-c[0],!0,v)).offset[0],s=o.isOutside,isNaN(a)||(z=O+(s?1:-1)*Math.abs(a)))})),l=(u={maxWidth:z,maxHeight:G}).maxWidth,c=u.maxHeight,A+=H=(f=function(t,e,n,r,i,o,a,s,u){var l=ui(e,a),c=so(t,s,{vertical:[l[0]],horizontal:[l[1]]}),f=c.horizontal.offset,p=c.vertical.offset;if(p||f){var d=oi({datas:u,distX:-p,distY:-f}),h=d[0],g=d[1];return[Math.min(i||1/0,n+a[0]*h)-n,Math.min(o||1/0,r+a[1]*g)-r]}return[0,0]}(t,e(A,k).map(function(t){return t.map(function(t){return qt(t,Hn)})}),n+A,r+k,l,c,i,a,s))[0],k+=L=f[1]),[A,k]}function vo(t,s,e,n,u){var l=u.width,c=u.height,f=u.fixedPosition,p=u.fixedDirection;if(!Di(t,"scalable"))return[0,0];var d=u.is3d,r=go(t,function(t,e){return po((n=u,r=ne(s,[t/l,e/c]),i=n.transformOrigin,o=n.offsetMatrix,a=n.is3d?4:3,li(o,ee(n.targetMatrix,ve(r,a),a),i,a)),l,c,p,f,d);var n,r,i,o,a},l,c,e,f,n,u);return[r[0]/l,r[1]/c]}function mo(t){var n=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var e=t.guideline;-1<n.indexOf(e)||n.push(e)})}),n}function bo(t,e,n,i,o,r){var a=Ui($i(t,r),e,n),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})});var l=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,i=n.pos2,o=n.pos3,a=n.pos4,u=ui([r,i,o,a],[0,0]),l=e.left,c=e.top,f=e.width,p=e.height,d=[[l,c],[l,c+p]],h=[[l,c],[l+f,c]],g=[[l+f,c],[l+f,c+p]],v=[[l,c+p],[l+f,c+p]],m=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return[[r,i],[i,a],[a,o],[o,r]].forEach(function(t){var e=Fi(u,t),n=e.horizontal,r=e.vertical,i=qi(t,h,r,1,!0),o=qi(t,v,r,1,!0),a=qi(t,d,n,1,!0),s=qi(t,g,n,1,!0);i.isBound&&!x.top&&(m.push(c),x.top=!0),o.isBound&&!x.bottom&&(m.push(c+p),x.bottom=!0),a.isBound&&!x.left&&(b.push(l),x.left=!0),s.isBound&&!x.right&&(b.push(l+f),x.right=!0)}),{horizontal:m,vertical:b}}(t),c=l.vertical,f=l.horizontal;c.forEach(function(r){0<=Bt(i,function(t){var e=t.type,n=t.pos;return"bounds"===e&&n===r})||i.push({type:"bounds",pos:r})}),f.forEach(function(r){0<=Bt(o,function(t){var e=t.type,n=t.pos;return"bounds"===e&&n===r})||o.push({type:"bounds",pos:r})})}var xo={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,a=n.pos2,s=n.pos3,u=n.pos4,l=n.snapRenderInfo;if(!l||!Di(t,""))return[];n.guidelines=Bi(t);var c,f=Math.min(o[0],a[0],s[0],u[0]),p=Math.min(o[1],a[1],s[1],u[1]),d=l.externalPoses||[],h=Cr(t.state),g=[],v=[],m=[],b=[],x=[],E=dr(h),S=E.width,y=E.height,M=E.top,R=E.left,D=E.bottom,w=E.right,C={left:R,right:w,top:M,bottom:D,center:(R+w)/2,middle:(M+D)/2},O=0<d.length,P=O?dr(d):{};l.request||(l.direction&&x.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(t){return ui(e,t)});else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(t){return ui(e,t)}):1<(r=si(e,n)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return zi(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),1)}(t,h,l.direction)),l.snap&&(c=dr(h),l.center&&(c.middle=(c.top+c.bottom)/2,c.center=(c.left+c.right)/2),x.push(Ti(t,c,1))),O&&(l.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),x.push(Ti(t,P,1))),x.forEach(function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;g.push.apply(g,e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),v.push.apply(v,n.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),m.push.apply(m,mo(e)),b.push.apply(b,mo(n))})),bo(t,[R,w],[M,D],g,v),O&&bo(t,[P.left,P.right],[P.top,P.bottom],g,v,l.externalBounds);var B,z,G,T,_,A,k=kn(kn([],m),b),I=k.filter(function(t){return t.element&&!t.gapRects}),F=k.filter(function(t){return t.gapRects});return Gr(t,"onSnap",{guidelines:k.filter(function(t){return!t.element}),elements:I,gaps:F},!0),kn(kn(kn(kn(kn(kn([],ro(t,I,[f,p],C,e)),(B=t,z=F,G=[f,p],T=C,_=e,A=[],["horizontal","vertical"].forEach(function(e){var t=z.filter(function(t){return t.type===e}),s="vertical"===e?0:1,u=s?0:1,l=s?Ri:Mi,c=s?Mi:Ri,f=T[l.start],p=T[l.end],d=T[c.start],h=T[c.end];t.forEach(function(t){var r=t.gap,e=t.gapRects,i=t.className,n=Math.max.apply(Math,kn([d],e.map(function(t){return t.rect[c.start]}))),o=Math.min.apply(Math,kn([h],e.map(function(t){return t.rect[c.end]}))),a=(n+o)/2;n!==o&&a!=(d+h)/2&&e.forEach(function(t){var e=t.rect,n=[G[0],G[1]];if(e[l.end]<f)n[s]+=e[l.end]-f;else{if(!(p<e[l.start]))return;n[s]+=e[l.start]-f-r}n[u]+=a-d,A.push(no(B,s?"vertical":"horizontal","gap",A.length,r,n,i,_))})})}),A)),eo(t,"horizontal",b,[i,r],C,e)),eo(t,"vertical",m,[i,r],C,e)),to(t,"horizontal",v,f,r,S,0,e)),to(t,"vertical",g,p,i,y,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},fo(t)},drag:function(t){t.state.guidelines=Bi(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!qr(0,e)&&!Po(t,e))||(!e.isRequest&&e.inputEvent?Wt(e.inputEvent.target,Qn("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,fo(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,fo(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}},Eo={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,i=n.zoom,o=t.state,a=o.dragInfo,s=o.beforeOrigin;if(!r||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var l=vr(u),c=Nt(u,[0,0]);return[e.createElement("div",{className:Qn("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:l+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+c+"rad) scaleY("+i+")"}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s,u=Tr(a);n.datas={},n.left=parseFloat(u.left||"")||0,n.top=parseFloat(u.top||"")||0,n.bottom=parseFloat(u.bottom||"")||0,n.right=parseFloat(u.right||"")||0,n.startValue=[0,0],ti(t,e),fi(e,"translate"),s=t,n.absolutePoses=Cr(s.state),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0],n.distOffset=[0,0];var l=Pr(t,e,An({set:function(t){n.startValue=t}},ci(e)));return!1!==(r||Gr(t,"onDragStart",l))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,n.isPinch=!1),!!n.isDrag&&l},drag:function(t,e){if(e){ei(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.distX,u=e.distY,l=n.isDrag,c=n.prevDist,f=n.prevBeforeDist,p=n.startValue,d=n.distOffset;if(l){s+=d[0],u+=d[1];var h,g,v,m,b,x,E,S,y,M,R,D,w=t.props,C=w.parentMoveable,O=!r&&w.throttleDrag||0,P=!r&&w.throttleDragRotate||0,B=!1,z=0;!r&&0<P&&(s||u)&&(g=qt((h=w.startDragRotate||0)+180*Nt([0,0],[s,u])/Math.PI,P)-h,v=u*Math.abs(Math.cos((g-90)/180*Math.PI)),m=vr([s*Math.abs(Math.cos(g/180*Math.PI)),v]),z=g*Math.PI/180,s=m*Math.cos(z),u=m*Math.sin(z)),o||r||i||P&&!s&&!u||(x=(b=ao(t,s,u,P,a,n))[0],E=b[1],S=x.isSnap,y=x.isBound,M=x.offset,R=E.isSnap,D=E.isBound,B=S||R||y||D,s+=M,u+=E.offset);var G,T,_,A=ne(ii({datas:n,distX:s,distY:u}),p),k=ne((T=(G={datas:n,distX:s,distY:u}).datas,_=ii({datas:T,distX:G.distX,distY:G.distY}),ae(ri(T,Kt([_[0],_[1]],4)),Jt([0,0,0],4),4)),p);P||B||(Xt(k,O),Xt(A,O));var I=re(A,p),F=re(k,p),N=re(F,c),j=re(I,f);n.prevDist=F,n.prevBeforeDist=I,n.passDelta=N,n.passDist=F;var Y=n.left+I[0],q=n.top+I[1],X=n.right-I[0],W=n.bottom-I[1],H=ni(n,"translate("+k[0]+"px, "+k[1]+"px)","translate("+F[0]+"px, "+F[1]+"px)");if(di(e,H),t.state.dragInfo.dist=r?[0,0]:F,r||C||!N.every(function(t){return!t})||!j.some(function(t){return!t})){var L=t.state,V=Pr(t,e,{transform:H,dist:F,delta:N,translate:k,beforeDist:I,beforeDelta:j,beforeTranslate:A,left:Y,top:q,right:X,bottom:W,width:L.width,height:L.height,isPinch:o});return r||Gr(t,"onDrag",V),V}}}},dragAfter:function(t,e){var n=e.datas,r=e.datas,i=r.deltaOffset,o=r.distOffset;return!(!i[0]&&!i[1])&&(n.deltaOffset=[0,0],o[0]=i[0],o[1]=i[1],this.drag(t,e))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag){r.isDrag=!1;var i=Br(t,e,{});return n||Gr(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var a=Kr(t,this,"dragStart",[r||0,i||0],e,!1),s=Gr(t,"onDragGroupStart",An(An({},o),{targets:t.props.targets,events:a}));return n.isDrag=!1!==s,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=Kr(t,this,"drag",e.datas.passDelta,e,!1);if(n){var i=An({targets:t.props.targets,events:r},n);return Gr(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var r=Kr(t,this,"dragEnd",[0,0],e,!1);return Gr(t,"onDragGroupEnd",Br(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function So(t,e,r,i){void 0===i&&(i="");var n=t.state,o=n.renderPoses,a=n.rotation,s=n.direction,u=t.props,l=u.renderDirections,c=void 0===l?e:l,f=u.zoom,p={};if(!c)return[];var d=0<s?1:-1,h=!0===c?$n:c,g=a/Math.PI*180;return h.forEach(function(t){p[t]=!0}),h.map(function(t){var e=Zn[t];if(!e||!p[t])return null;var n=(qt(g,15)+d*Kn[t]+720)%180;return r.createElement("div",{className:Qn("control","direction",t,i),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:xr.apply(void 0,kn([a,f],e.map(function(t){return o[t]})))})})}function yo(t,e,n,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=Nt(n,r),l=e?qt(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:Qn.apply(void 0,kn(["line","direction",e],a)),"data-rotation":l,"data-line-index":o,"data-direction":e,style:br(n,r,i,u)})}function Mo(t,e){return So(t,$n,e)}function Ro(t,e){return So(t,["nw","ne","sw","se"],e)}function Do(t,e,n,r,i,o){var a=t.state.is3d?4:3,s=fr(t.state.rootMatrix,i,a),u=ne([o.left,o.top],s);e.startAbsoluteOrigin=u,e.prevDeg=Nt(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0}function wo(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,a=Math.floor(i/360);o<0&&(o+=360),t<o&&270<o&&t<90?++a:o<t&&o<90&&270<t&&--a;var s=e*(360*a+t-r);return n.prevDeg=r+s,s}function Co(t,e,n,r){return wo(Nt(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Oo(t,e,n,r,i,o){var a=t.props.throttleRotate,s=void 0===a?0:a,u=r,l=n.prevSnapDeg;o&&(u=function(t,e,n,r){if(!Di(t,"rotatable"))return r;var i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=r*Math.PI/180,l=[i,o,a,s].map(function(t){return re(t,n)}),c=l.map(function(t){return fe(t,u)}),f=kn(kn([],Ji(t,l,c,n,r)),Vi(t,l,c,n,r));return f.sort(function(t,e){return Math.abs(t-r)-Math.abs(e-r)}),f.length?f[0]:r}(t,e,n.origin,u));var c=qt(i+u,s),f=c-i;return[(n.prevSnapDeg=f)-l,u,c]}function Po(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(Wt(n,Qn("rotation-control")))return!0;var r=t.props.rotationTarget;return!!r&&Hr(r,!0).some(function(t){return!!t&&(n===t||n.contains(t))})}var Bo={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,e){var n=t.props,r=n.rotatable,i=n.rotationPosition,o=n.zoom,a=n.renderDirections,s=t.state,u=s.renderPoses,l=s.direction;if(!r)return null;var c,f,p=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],c=[r,i];"left"===u?c=[o,r]:"right"===u?c=[i,a]:"bottom"===u&&(c=[a,o]);var f,p,d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],h=Sr(c,n);return l&&(p="bottom"===u||"left"===u,d=c[(f="top"===l||"left"===l)&&!p||!f&&p?0:1]),[d,h]}}(i,u,l),d=[];return p&&(c=p[0],f=p[1],d.push(e.createElement("div",{key:"rotation",className:Qn("rotation"),style:{transform:"translate(-50%) translate("+c[0]+"px, "+c[1]+"px) rotate("+f+"rad)"}},e.createElement("div",{className:Qn("line rotation-line"),style:{transform:"scaleX("+o+")"}}),e.createElement("div",{className:Qn("control rotation-control"),style:{transform:"translate(0.5px) scale("+o+")"}})))),a&&d.push.apply(d,So(t,[],e)),d},dragControlCondition:Po,dragControlStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,u=e.isRequest,l=t.state,c=l.target,f=l.left,p=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform,b=l.moveableClientRect;if(!u&&!c)return!1;var x,E=t.getRect();n.rect=E,n.transform=m,n.left=f,n.top=p,n.fixedPosition=bi(t,mi(t)),u||s||a?(x=o||0,n.beforeInfo={origin:E.beforeOrigin,prevDeg:x,defaultDeg:x,prevSnapDeg:0},n.afterInfo=An(An({},n.beforeInfo),{origin:E.origin}),n.absoluteInfo=An(An({},n.beforeInfo),{origin:E.origin,startValue:x})):(n.beforeInfo={origin:E.beforeOrigin},n.afterInfo={origin:E.origin},n.absoluteInfo={origin:E.origin,startValue:E.rotation},Do(t,n.beforeInfo,r,i,h,b),Do(t,n.afterInfo,r,i,d,b),Do(t,n.absoluteInfo,r,i,d,b)),n.direction=g,n.beforeDirection=v,n.startValue=0,n.datas={},fi(e,"rotate");var S=Pr(t,e,An(An({set:function(t){n.startValue=t*Math.PI/180}},ci(e)),{dragStart:Eo.dragStart(t,(new $r).dragStart([0,0],e))})),y=Gr(t,"onRotateStart",S);return n.isRotate=!1!==y,t.state.snapRenderInfo={request:e.isRequest},!!n.isRotate&&S},dragControl:function(t,e){var n,r,i,o=e.datas,a=e.clientX,s=e.clientY,u=e.parentRotate,l=e.parentFlag,c=e.isPinch,f=e.groupDelta,p=o.beforeDirection,d=o.beforeInfo,h=o.afterInfo,g=o.absoluteInfo,v=o.isRotate,m=o.startValue,b=o.rect;if(v){ei(e,"rotate");var x,E,S,y,M,R,D,w,C,O,P=p*gr(e.datas.beforeTransform,[50,50],100,100).direction,B=t.props.parentMoveable,z=180/Math.PI*m,G=g.startValue,T=!1;if(!l&&"parentDist"in e?(D=e.parentDist,O=C=w=D):c||l?(w=wo(u,p,d),C=wo(u,P,h),O=wo(u,P,g)):(w=Co(a,s,p,d),C=Co(a,s,P,h),O=Co(a,s,P,g),T=!0),Gr(t,"onBeforeRotate",Pr(t,e,{beforeRotation:z+w,rotation:z+C,absoluteRotation:G+O,setRotation:function(t){O=w=C=t-z}})),x=(n=Oo(t,b,d,w,z,T))[0],w=n[1],E=n[2],S=(r=Oo(t,b,h,C,z,T))[0],C=r[1],y=r[2],M=(i=Oo(t,b,g,O,G,T))[0],O=i[1],R=i[2],M||S||x||B){var _,A,k,I,F=ni(o,"rotate("+y+"deg)","rotate("+C+"deg)"),N=(_=t,A=C,k=o.fixedPosition,I=o,vi(_,"rotate("+A+"deg)",mi(_),k,I)),j=re(ne(f||[0,0],N),o.prevInverseDist||[0,0]);o.prevInverseDist=N,o.requestValue=null;var Y=Pr(t,e,An({delta:S,dist:C,rotate:y,rotation:y,beforeDist:w,beforeDelta:x,beforeRotate:E,beforeRotation:E,absoluteDist:O,absoluteDelta:M,absoluteRotate:R,absoluteRotation:R,isPinch:!!c},gi(t,F,j,c,e)));return Gr(t,"onRotate",Y),Y}}},dragControlAfter:function(t,e){e.datas.requestValue},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=Br(t,e,{});return Gr(t,"onRotateEnd",r),r}},dragGroupControlCondition:Po,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,s=r.left,u=r.top,l=r.beforeOrigin,i=this.dragControlStart(t,e);if(!i)return!1;i.set(n.beforeDirection*t.rotation);var o=Jr(t,this,"dragControlStart",e,function(t,e){var n=t.state,r=n.left,i=n.top,o=n.beforeOrigin,a=ne(re([r,i],[s,u]),re(o,l));return e.datas.groupClient=a,An(An({},e),{parentRotate:0})}),a=Gr(t,"onRotateGroupStart",An(An({},i),{targets:t.props.targets,events:o}));return n.isRotate=!1!==a,!!n.isRotate&&i},dragGroupControl:function(e,n){var t=n.datas;if(t.isRotate){zr(e,"onBeforeRotate",function(t){Gr(e,"onBeforeRotateGroup",Pr(e,n,An(An({},t),{targets:e.props.targets})))});var r=this.dragControl(e,n);if(r){var l=t.beforeDirection,c=r.beforeDist,f=r.beforeDelta/180*Math.PI,i=Jr(e,this,"dragControl",n,function(t,e){var n=e.datas.groupClient,r=n[0],i=n[1],o=fe([r,i],f*l),a=o[0],s=o[1],u=[a-r,s-i];return e.datas.groupClient=[a,s],An(An({},e),{parentRotate:c,groupDelta:u})});e.rotation=l*r.beforeRotation;var o=An({targets:e.props.targets,events:i,set:function(t){e.rotation=t},setGroupRotation:function(t){e.rotation=t}},r);return Gr(e,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var r=Jr(t,this,"dragControlEnd",e);return Gr(t,"onRotateGroupEnd",Br(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},zo={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.edge;if(r)return(i?Ro:Mo)(t,e)},dragControlCondition:qr,dragControlStart:function(t,e){var n,r,i=e.inputEvent,o=e.isPinch,a=e.parentDirection,s=e.datas,u=e.parentFlag,l=a||(o?[0,0]:Dr(i.target)),c=t.state,f=c.target,p=c.width,d=c.height;if(!l||!f)return!1;o||ti(t,e),s.datas={},s.direction=l,s.startOffsetWidth=p,s.startOffsetHeight=d,s.prevWidth=0,s.prevHeight=0,r=Tr(f),n=[parseFloat(r.width),parseFloat(r.height)],s.startWidth=n[0],s.startHeight=n[1];var h,g,v,m,b,x,E,S,y,M,R,D=[Math.max(0,p-s.startWidth),Math.max(0,d-s.startHeight)];s.minSize=D,s.maxSize=[1/0,1/0],u||(g=(h=Tr(f)).position,v=h.minWidth,m=h.minHeight,b=h.maxWidth,x=h.maxHeight,M=p,R=d,(S=(E="static"===g||"relative"===g)?f.parentElement:f.offsetParent)&&(M=S.clientWidth,R=S.clientHeight,E&&(y=Tr(S),M-=parseFloat(y.paddingLeft)||0,R-=parseFloat(y.paddingTop)||0)),s.minSize=ne([At(v,M)||0,At(m,R)||0],D),s.maxSize=ne([At(b,M)||1/0,At(x,R)||1/0],D));var w=t.props.transformOrigin||"% %";function C(t){s.ratio=t&&isFinite(t)?t:0}function O(t){s.fixedDirection=t,s.fixedPosition=ui(s.startPositions,t)}s.transformOrigin=w&&Et(w)?w.split(" "):w,s.isWidth=!l[0]&&!l[1]||l[0]||!l[1],s.startPositions=Cr(t.state),C(p/d),O([-l[0],-l[1]]);var P=Pr(t,e,{direction:l,set:function(t){var e=t[0],n=t[1];s.startWidth=e,s.startHeight=n},setMin:function(t){s.minSize=t},setMax:function(t){s.maxSize=[t[0]||1/0,t[1]||1/0]},setRatio:C,setFixedDirection:s.setFixedDirection=O,setOrigin:function(t){s.transformOrigin=t},dragStart:Eo.dragStart(t,(new $r).dragStart([0,0],e))});return!1!==Gr(t,"onResizeStart",P)&&(s.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:l}),!!s.isResize&&P},dragControl:function(t,e){var n,d=e.datas,h=e.distX,g=e.distY,r=e.parentFlag,v=e.isPinch,m=e.parentDistance,b=e.parentScale,i=e.parentKeepRatio,o=e.dragClient,x=e.parentDist,a=e.isRequest,s=d.isResize,u=d.transformOrigin,l=d.startWidth,c=d.startHeight,f=d.prevWidth,p=d.prevHeight,E=d.minSize,S=d.maxSize,y=d.ratio,M=d.isWidth,R=d.startOffsetWidth,D=d.startOffsetHeight;if(s){var w=t.props,C=w.resizeFormat,O=w.throttleResize,P=void 0===O?1:O,B=w.parentMoveable,z=w.snapThreshold,G=void 0===z?5:z,T=d.direction,_=T,A=0,k=0;T[0]||T[1]||(_=[1,1]);var I=y&&(null!=i?i:w.keepRatio)||!1,F=V(),N=F[0],j=F[1];d.setFixedDirection(d.fixedDirection),Gr(t,"onBeforeResize",Pr(t,e,{setFixedDirection:function(t){var e;return d.setFixedDirection(t),e=V(),N=e[0],j=e[1],[N,j]},boundingWidth:N,boundingHeight:j,setSize:function(t){N=t[0],j=t[1]}}));var Y=o;o||(Y=!r&&v?Ei(t,[0,0]):d.fixedPosition);var q,X=[0,0];v||(X=function(t,n,r,e,i,o,a){if(!Di(t,"resizable"))return[0,0];var s=a.fixedDirection,u=t.state,l=u.allMatrix,c=u.is3d;return go(t,function(t,e){return po(l,n+t,r+e,s,i,c)},n,r,e,i,o,a)}(t,N,j,T,Y,a,d)),x&&(x[0]||(X[0]=0),x[1]||(X[1]=0)),I?(_[0]&&_[1]&&X[0]&&X[1]&&(Math.abs(X[0])>Math.abs(X[1])?X[1]=0:X[0]=0),(q=!X[0]&&!X[1])&&U(),_[0]&&!_[1]||X[0]&&!X[1]||q&&M?(N+=X[0],j=N/y):(!_[0]&&_[1]||!X[0]&&X[1]||q&&!M)&&(j+=X[1],N=j*y)):(R+A<-G&&(X[0]=0),R+k<-G&&(X[1]=0),N+=X[0],j+=X[1]),n=It([N,j],E,S,I),N=n[0],j=n[1],U();var W=[(A=N-R)-f,(k=j-D)-p];d.prevWidth=A,d.prevHeight=k;var H=xi(t,N,j,d.fixedDirection,Y,u);if(B||!W.every(function(t){return!t})||!H.every(function(t){return!t})){var L=Pr(t,e,{width:l+A,height:c+k,offsetWidth:Math.round(N),offsetHeight:Math.round(j),boundingWidth:N,boundingHeight:j,direction:T,dist:[A,k],delta:W,isPinch:!!v,drag:Eo.drag(t,Ur(e,t.state,H,!!v,!1))});return Gr(t,"onResize",L),L}}function V(){var t,e,n,r,i,o,a,s,u,l,c=d.fixedDirection;x?(A=x[0],k=x[1],I&&(A?k=k||A/y:A=k*y)):b?(A=(b[0]-1)*R,k=(b[1]-1)*D):v?m&&(k=(A=m)*D/R):(l=oi({datas:d,distX:h,distY:g}),l=[0,1].map(function(t){var e=Math.abs(_[t]-c[t]);return 0!==e&&(e=2/e),l[t]*e}),I&&R&&D?(t=Nt([0,0],l),e=Nt([0,0],_),n=vr([A,k]),r=Math.cos(t-e)*n,_[0]?k=_[1]?(i=2*_[0]*R,o=2*_[1]*D,a=vr([i+l[0],o+l[1]])-vr([i,o]),s=Nt([0,0],[y,1]),A=Math.cos(s)*a,Math.sin(s)*a):(A=r)*y:A=(k=r)/y):I||(u=kn([],T),R||(l[0]<0?u[0]=-1:0<l[0]&&(u[0]=1)),D||(l[1]<0?u[1]=-1:0<l[1]&&(u[1]=1)),A=(_=T=u)[0]*l[0],k=_[1]*l[1]));var f=_[0]||I?Math.max(R+A,Ln):R,p=_[1]||I?Math.max(D+k,Ln):D;return I&&R&&D&&(M?p=f/y:f=p*y),[f,p]}function U(){var t;C&&(t=C([N,j]),N=t[0],j=t[1]),N=qt(N,P),j=qt(j,P)}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),f=3<Math.abs(l),p=3<Math.abs(c);return f&&(n.startWidth+=l,n.startOffsetWidth+=l,n.prevWidth+=l),p&&(n.startHeight+=c,n.startOffsetHeight+=c,n.prevHeight+=c),f||p?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var n=e.datas;if(n.isResize){n.isResize=!1;var r=Br(t,e,{});return Gr(t,"onResizeEnd",r),r}},dragGroupControlCondition:qr,dragGroupControlStart:function(u,t){var l=t.datas,e=this.dragControlStart(u,t);if(!e)return!1;var r=Zr(u,"resizable",t);function i(t,e){var n=l.fixedDirection,r=l.fixedPosition,i=ui(e.datas.startPositions||Cr(t.state),n),o=ae(he(-u.rotation/180*Math.PI,3),[i[0]-r[0],i[1]-r[1],1],3),a=o[0],s=o[1];return e.datas.originalX=a,e.datas.originalY=s,e}function n(n){e.setFixedDirection(n),o.forEach(function(t,e){t.setFixedDirection(n),i(t.moveable,r[e])})}var o=Jr(u,this,"dragControlStart",t,i);l.setFixedDirection=n;var a=An(An({},e),{targets:u.props.targets,events:o,setFixedDirection:n}),s=Gr(u,"onResizeGroupStart",a);return l.isResize=!1!==s,!!l.isResize&&e},dragGroupControl:function(o,e){var t=e.datas;if(t.isResize){zr(o,"onBeforeResize",function(t){Gr(o,"onBeforeResizeGroup",Pr(o,e,An(An({},t),{targets:o.props.targets})))});var n=this.dragControl(o,e);if(n){var r=n.boundingWidth,i=n.boundingHeight,a=n.dist,s=o.props.keepRatio,u=[r/(r-a[0]),i/(i-a[1])],l=t.fixedPosition,c=Jr(o,this,"dragControl",e,function(t,e){var n=ae(he(o.rotation/180*Math.PI,3),[e.datas.originalX*u[0],e.datas.originalY*u[1],1],3),r=n[0],i=n[1];return An(An({},e),{parentDist:null,parentScale:u,dragClient:ne(l,[r,i]),parentKeepRatio:s})}),f=An({targets:o.props.targets,events:c},n);return Gr(o,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var r=Jr(t,this,"dragControlEnd",e);return Gr(t,"onResizeGroupEnd",Br(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Go={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.edge;if(!r&&i)return(o?Ro:Mo)(t,e)},dragControlCondition:qr,dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.parentDirection||(r?[0,0]:Dr(i.target)),a=t.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,f=a.pos1,p=a.pos2,d=a.pos4;if(!o||!c)return!1;r||ti(t,e),n.datas={},n.transform=l,n.prevDist=[1,1],n.direction=o,n.width=s,n.height=u,n.startValue=[1,1];var h=Yt(f,p),g=Yt(p,d),v=!o[0]&&!o[1]||o[0]||!o[1];function m(t){n.ratio=t&&isFinite(t)?t:0}function b(t){n.fixedDirection=t,n.fixedPosition=ui(n.startPositions,t)}n.scaleWidth=h,n.scaleHeight=g,n.scaleXRatio=h/s,n.scaleYRatio=g/u,fi(e,"scale"),n.isWidth=v,n.startPositions=Cr(t.state),n.setFixedDirection=b,m(Yt(f,p)/Yt(p,d)),b([-o[0],-o[1]]);var x=Pr(t,e,An(An({direction:o,set:function(t){n.startValue=t},setRatio:m,setFixedDirection:b},ci(e)),{dragStart:Eo.dragStart(t,(new $r).dragStart([0,0],e))}));return!1!==Gr(t,"onScaleStart",x)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!n.isScale&&x},dragControl:function(t,e){ei(e,"scale");var n=e.datas,r=e.distX,i=e.distY,o=e.parentScale,a=e.parentDistance,s=e.parentKeepRatio,u=e.parentFlag,l=e.isPinch,c=e.dragClient,f=e.parentDist,p=e.isRequest,d=n.prevDist,h=n.direction,g=n.width,v=n.height,m=n.isScale,b=n.startValue,x=n.isWidth,E=n.ratio,S=n.scaleXRatio,y=n.scaleYRatio;if(!m)return!1;var M=t.props,R=M.throttleScale,D=M.parentMoveable,w=h;h[0]||h[1]||(w=[1,1]);var C,O,P,B,z,G,T,_,A=E&&(null!=s?s:M.keepRatio)||!1,k=t.state,I=1,F=1;f?(I=(g+f[0])/g,F=(v+f[1])/v):o?(I=o[0],F=o[1]):l?a&&(I=(g+a)/g,F=(v+a*v/g)/v):(C=oi({datas:n,distX:r,distY:i}),T=w[0]*C[0]*S,_=w[1]*C[1]*y,A&&g&&v&&(w[0]?_=w[1]?(O=vr([T,_]),P=Nt([0,0],C),B=Nt([0,0],w),z=Math.cos(P-B)*O,G=Nt([0,0],[E,1]),T=Math.cos(G)*z,Math.sin(G)*z):T/E:T=_*E),I=(g+T/S)/g,F=(v+_/y)/v),I=w[0]||A?I*b[0]:b[0],F=w[1]||A?F*b[1]:b[1],0===I&&(I=1e-9*(0<d[0]?1:-1)),0===F&&(F=1e-9*(0<d[1]?1:-1));var N,j=[I/b[0],F/b[1]],Y=[I,F];l||!t.props.groupable||xt(N=(k.snapRenderInfo||{}).direction)&&(N[0]||N[1])&&(k.snapRenderInfo={direction:h,request:e.isRequest}),Gr(t,"onBeforeScale",Pr(t,e,{scale:Y,setFixedDirection:n.setFixedDirection,setScale:function(t){j=[(Y=t)[0]/b[0],Y[1]/b[1]]}}));var q,X,W,H=c,L=[0,0];c||(H=!u&&l?Ei(t,[0,0]):n.fixedPosition),l||(L=vo(t,j,h,p,n)),A?(w[0]&&w[1]&&L[0]&&L[1]&&(Math.abs(L[0]*g)>Math.abs(L[1]*v)?L[1]=0:L[0]=0),(q=!L[0]&&!L[1])&&(x?j[0]=qt(j[0]*b[0],R)/b[0]:j[1]=qt(j[1]*b[1],R)/b[1]),w[0]&&!w[1]||L[0]&&!L[1]||q&&x?(j[0]+=L[0],X=g*j[0]*b[0]/E,j[1]=X/v/b[1]):(!w[0]&&w[1]||!L[0]&&L[1]||q&&!x)&&(j[1]+=L[1],W=v*j[1]*b[1]*E,j[0]=W/g/b[0])):(j[0]+=L[0],j[1]+=L[1],L[0]||(j[0]=qt(j[0]*b[0],R)/b[0]),L[1]||(j[1]=qt(j[1]*b[1],R)/b[1])),0===j[0]&&(j[0]=1e-9*(0<d[0]?1:-1)),0===j[1]&&(j[1]=1e-9*(0<d[1]?1:-1));var V,U,$=[j[0]/d[0],j[1]/d[1]];U=b,Y=[(V=j)[0]*U[0],V[1]*U[1]];var Z,K,J,Q,tt,et=(Z=t,K=j,J=n.fixedDirection,Q=H,tt=n,vi(Z,"scale("+K.join(", ")+")",J,Q,tt)),nt=re(et,n.prevInverseDist||[0,0]);if(n.prevDist=j,n.prevInverseDist=et,I===d[0]&&F===d[1]&&nt.every(function(t){return!t})&&!D)return!1;var rt=ni(n,"scale("+Y.join(", ")+")","scale("+j.join(", ")+")"),it=Pr(t,e,An({offsetWidth:g,offsetHeight:v,direction:h,scale:Y,dist:j,delta:$,isPinch:!!l},gi(t,rt,nt,l,e)));return Gr(t,"onScale",it),it},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,Gr(t,"onScaleEnd",Br(t,e,{})),r)},dragGroupControlCondition:qr,dragGroupControlStart:function(u,t){var l=t.datas,e=this.dragControlStart(u,t);if(!e)return!1;var r=Zr(u,"resizable",t);function i(t,e){var n=l.fixedDirection,r=l.fixedPosition,i=ui(e.datas.startPositions||Cr(t.state),n),o=ae(he(-u.rotation/180*Math.PI,3),[i[0]-r[0],i[1]-r[1],1],3),a=o[0],s=o[1];return e.datas.originalX=a,e.datas.originalY=s,e}l.moveableScale=u.scale;function n(n){e.setFixedDirection(n),o.forEach(function(t,e){t.setFixedDirection(n),i(t.moveable,r[e])})}var o=Jr(u,this,"dragControlStart",t,i);l.setFixedDirectionGroup=n;var a=An(An({},e),{targets:u.props.targets,events:o,setFixedDirection:n}),s=Gr(u,"onScaleGroupStart",a);return l.isScale=!1!==s,!!l.isScale&&a},dragGroupControl:function(o,e){var n=e.datas;if(n.isScale){zr(o,"onBeforeScale",function(t){Gr(o,"onBeforeScaleGroup",Pr(o,e,An(An({},t),{targets:o.props.targets,setFixedDirection:n.setFixedDirectionGroup})))});var t=this.dragControl(o,e);if(t){var r=n.moveableScale;o.scale=[t.scale[0]*r[0],t.scale[1]*r[1]];var a=o.props.keepRatio,s=t.dist,u=t.scale,l=n.fixedPosition,i=Jr(o,this,"dragControl",e,function(t,e){var n=ae(he(o.rotation/180*Math.PI,3),[e.datas.originalX*s[0],e.datas.originalY*s[1],1],3),r=n[0],i=n[1];return An(An({},e),{parentDist:null,parentScale:u,parentKeepRatio:a,dragClient:ne(l,[r,i])})}),c=An({targets:o.props.targets,events:i},t);return Gr(o,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var r=Jr(t,this,"dragControlEnd",e);return Gr(t,"onScaleGroupEnd",Br(t,e,{targets:t.props.targets,events:r})),n}},request:function(){var e={},n=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return n+=t.deltaWidth,r+=t.deltaHeight,{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function To(t,a){return t.map(function(t,e){return n=t,r=a[e],(n*(o=2)+r*(i=1))/(i+o);var n,r,i,o})}function _o(t,e,n){var r=Nt(t,e),i=Nt(t,n)-r;return 0<=i?i:i+2*Math.PI}var Ao={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,a=n.zoom;if(r||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,p=To(u,l),d=To(l,u),h=To(u,c),g=To(c,u),v=To(c,f),m=To(f,c),b=To(l,f),x=To(f,l);return kn([e.createElement("div",{className:Qn("line"),key:"middeLine1",style:br(p,v,a)}),e.createElement("div",{className:Qn("line"),key:"middeLine2",style:br(d,m,a)}),e.createElement("div",{className:Qn("line"),key:"middeLine3",style:br(h,b,a)}),e.createElement("div",{className:Qn("line"),key:"middeLine4",style:br(g,x,a)})],Mo(t,e))},dragControlCondition:function(t,e){return!e.isRequest&&Wt(e.inputEvent.target,Qn("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,o=Dr(n.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,f=a.width,p=a.height,d=a.left,h=a.top;return r.datas={},r.targetTransform=l,r.warpTargetMatrix=u?c:Qt(c,3,4),r.targetInverseMatrix=Ut($t(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=d,r.top=h,r.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(t){return re(t,s)}),r.nextPoses=r.poses.map(function(t){var e=t[0],n=t[1];return ae(r.warpTargetMatrix,[e,n,0,1],4)}),r.startValue=ge(4),r.prevMatrix=ge(4),r.absolutePoses=Cr(a),r.posIndexes=ai(o),ti(t,e),fi(e,"matrix3d"),!(a.snapRenderInfo={request:e.isRequest,direction:o})!==Gr(t,"onWarpStart",Pr(t,e,An({set:function(t){r.startValue=t}},ci(e))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var n,r,i,o,a=e.datas,s=e.isRequest,u=e.distX,l=e.distY,c=a.targetInverseMatrix,f=a.prevMatrix,p=a.isWarp,d=a.startValue,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!p)return!1;ei(e,"matrix3d"),Di(t,"warpable")&&(1<(n=g.map(function(t){return v[t]})).length&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),i=(r=so(t,s,{horizontal:n.map(function(t){return t[1]+l}),vertical:n.map(function(t){return t[0]+u})})).horizontal,o=r.vertical,l-=i.offset,u-=o.offset);var m=oi({datas:a,distX:u,distY:l},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=ne(b[t],m)}),!Wn.every(function(t){return e=t.map(function(t){return h[t]}),n=t.map(function(t){return b[t]}),r=_o(e[0],e[1],e[2]),i=_o(n[0],n[1],n[2]),!((o=Math.PI)<=r&&i<=o||r<=o&&o<=i);var e,n,r,i,o}))return!1;var x=be(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var E=ri(a,ee(c,x,4),!0),S=ee($t(f,4),E,4),y=ee(d,a.prevMatrix=E,4),M=ni(a,"matrix3d("+y.join(", ")+")","matrix3d("+E.join(", ")+")");return di(e,M),Gr(t,"onWarp",Pr(t,e,{delta:S,matrix:y,dist:E,multiply:ee,transform:M})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,Gr(t,"onWarpEnd",Br(t,e,{})),r)}},ko=Qn("area-pieces"),Io=Qn("area-piece"),Fo=Qn("avoid");function No(t){var e,n,r,i,o,a,s=t.areaElement;s&&(n=(e=t.state).width,r=e.height,o=Fo,(i=s).classList?i.classList.remove(o):(a=new RegExp("(\\s|^)"+o+"(\\s|$)"),i.className=i.className.replace(a," ")),s.style.cssText+="left: 0px; top: 0px; width: "+n+"px; height: "+r+"px")}function jo(t){return t.createElement("div",{key:"area_pieces",className:ko},t.createElement("div",{className:Io}),t.createElement("div",{className:Io}),t.createElement("div",{className:Io}),t.createElement("div",{className:Io}))}var Yo={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,a=n.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,f=a?Qn("area","pass"):Qn("area");if(o)return[e.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f}),jo(e)];if(!r||!i)return[];var p=be([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=p.length?lr(p,!0):"none";return[e.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),jo(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,f=u.rootMatrix,p=u.is3d,d=l.left,h=l.top,g=dr(c),v=g.left,m=g.top,b=g.width,x=g.height,E=Ir(f,[r-d,i-h],p?4:3),S=E[0],y=E[1],M=[{left:v,top:m,width:b,height:(y-=m)-10},{left:v,top:m,width:(S-=v)-10,height:x},{left:v,top:m+y+10,width:b,height:x-y-10},{left:v+S+10,top:m,width:b-S-10,height:x}],R=[].slice.call(s.nextElementSibling.children);M.forEach(function(t,e){R[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),a=Fo,(o=s).classList?o.classList.add(a):o.className+=" "+a,u.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,No(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||No(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){No(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Gt(function(){e.disableNativeEvent=!1})}},qo=In("origin",{render:function(t,e){var n=t.props.zoom,r=t.state,i=r.beforeOrigin,o=r.rotation;return[e.createElement("div",{className:Qn("control","origin"),style:xr(o,n,i),key:"beforeOrigin"})]}});function Xo(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Wo={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(o,a){var t=o.props.scrollContainer,e=void 0===t?o.getContainer():t,n=new en,r=Wr(e,!0);a.datas.dragScroll=n;var i=a.isControl?"controlGesto":"targetGesto",s=a.targets;n.on("scroll",function(t){var e=t.container,n=t.direction,r=Pr(o,a,{scrollContainer:e,direction:n}),i=s?"onScrollGroup":"onScroll";s&&(r.targets=s),Gr(o,i,r)}).on("move",function(t){var e=t.offsetX,n=t.offsetY;o[i].scrollBy(e,n,a.inputEvent,!1)}),n.dragStart(a,{container:r})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,u=r.getScrollPosition,l=void 0===u?Xo:u;return n.drag(e,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,An(An({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,An(An({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,An(An({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,An(An({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,An(An({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,An(An({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,An(An({},e),{targets:t.props.targets}))}},Ho={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},Lo=In("padding",{render:function(t,o){var e=t.props;if(e.dragArea)return[];var n=e.padding||{},r=n.left,i=void 0===r?0:r,a=n.top,s=void 0===a?0:a,u=n.right,l=void 0===u?0:u,c=n.bottom,f=void 0===c?0:c,p=t.state,d=p.renderPoses,h=[p.pos1,p.pos2,p.pos3,p.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<l&&g.push([1,3]),0<f&&g.push([2,3]),g.map(function(t,e){var n=t[0],r=t[1],i=be([0,0],[100,0],[0,100],[100,100],h[n],h[r],d[n],d[r]);if(i.length)return o.createElement("div",{key:"padding"+e,className:Qn("padding"),style:{transform:lr(i,!0)}})})}}),Vo=["nw","ne","se","sw"];function Uo(t,e){var n=t[0]+t[1],r=e<n?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var $o=[1,2,5,6],Zo=[0,3,4,7],Ko=[1,-1,-1,1],Jo=[1,1,-1,-1];function Qo(t,a,s,u,l,c,f,p,d){void 0===c&&(c=0),void 0===f&&(f=0),void 0===p&&(p=u),void 0===d&&(d=l);var h=[],g=!1,e=t.map(function(t,e){var n=a[e],r=n.horizontal,i=n.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-f:d-t[1]);return h.push(jr(o,l,s)),o}o=Math.max(0,1===r?t[0]-c:p-t[0]);return h.push(jr(o,u,s)),o});return{styles:h,raws:e}}function ta(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function ea(t,r,i,o,a,e){var n,s,u;void 0===e&&(e=[0,0]);var l=t.indexOf("/"),c=(-1<l?t.slice(0,l):t).length,f=t.slice(0,c),p=t.slice(c+1),d=f[0],h=void 0===d?"0px":d,g=f[1],v=void 0===g?h:g,m=f[2],b=void 0===m?h:m,x=f[3],E=void 0===x?v:x,S=p[0],y=void 0===S?h:S,M=p[1],R=void 0===M?y:M,D=p[2],w=void 0===D?y:D,C=p[3],O=void 0===C?R:C,P=[h,v,b,E].map(function(t){return At(t,r)}),B=[y,R,w,O].map(function(t){return At(t,i)}),z=P.slice(),G=B.slice(),T=Uo([z[0],z[1]],r);z[0]=T[0],z[1]=T[1],n=Uo([z[3],z[2]],r),z[3]=n[0],z[2]=n[1],s=Uo([G[0],G[3]],i),G[0]=s[0],G[3]=s[1],u=Uo([G[1],G[2]],i),G[1]=u[0],G[2]=u[1];var _=z.slice(0,Math.max(e[0],f.length)),A=G.slice(0,Math.max(e[1],p.length));return kn(kn([],_.map(function(t,e){var n=Vo[e];return{horizontal:Ko[e],vertical:0,pos:[o+t,a+(-1===Jo[e]?i:0)],sub:!0,raw:P[e],direction:n}})),A.map(function(t,e){var n=Vo[e];return{horizontal:0,vertical:Jo[e],pos:[o+(-1===Ko[e]?r:0),a+t],sub:!0,raw:B[e],direction:n}}))}function na(t,e,n,r,i){void 0===i&&(i=e.length);var o=ta(t.slice(r)),a=o.horizontalRange,s=o.verticalRange,u=n-r,l=0;if(0==u)l=i;else if(0<u&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(n,l),e.splice(n,l)}function ra(t,e,n,r,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=ta(t.slice(n)),p=f.horizontalRange,d=f.verticalRange;if(-1<r)for(var h=1===Ko[r]?o-l:s-o,g=p[1];g<=r;++g){var v=1===Jo[g]?c:u,m=0;if(r===g?m=o:0===g?m=l+h:-1===Ko[g]&&(m=s-(e[n][0]-l)),t.splice(n+g,0,{horizontal:Ko[g],vertical:0,pos:[m,v]}),e.splice(n+g,0,[m,v]),0===g)break}else if(-1<i){var b,x=1===Jo[i]?a-c:u-a;0===p[1]&&0===d[1]&&(b=[l+x,c],t.push({horizontal:Ko[0],vertical:0,pos:b}),e.push(b));for(var E=d[0],g=d[1];g<=i;++g){m=1===Ko[g]?l:s,v=0;if(i===g?v=a:0===g?v=c+x:1===Jo[g]?v=e[n+E][1]:-1===Jo[g]&&(v=u-(e[n+E][1]-c)),t.push({horizontal:0,vertical:Jo[g],pos:[m,v]}),e.push([m,v]),0===g)break}}}function ia(t,n){return void 0===n&&(n=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,e){return t.horizontal?n[e]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,e){return t.vertical?n[e]:null}).filter(function(t){return null!=t})}}var oa=[[0,-1,"n"],[1,0,"e"]],aa=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function sa(t,e,n){var r=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=e.type,u=e.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return n.map(function(t){return jr(t[0],o,r)+" "+jr(t[1],a,r)});if(l||"inset"===s){var f=n[1][1],p=n[3][0],d=n[7][0],h=n[5][1];if(l)return[f,p,h,d].map(function(t){return t+"px"});var g,v,m,b=[f,o-p,a-h,d].map(function(t,e){return jr(t,e%2?o:a,r)});return 8<n.length&&(v=(g=re(n[4],n[0]))[0],m=g[1],b.push.apply(b,kn(["round"],Qo(n.slice(8),u.slice(8),r,v,m,d,f,p,h).styles))),b}if(c||"ellipse"===s){var x=n[0],E=jr(Math.abs(n[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,r);return(b=c?[E]:[jr(Math.abs(n[2][0]-x[0]),o,r),E]).push("at",jr(x[0],o,r),jr(x[1],a,r)),b}}function ua(t,e,n,r){var a=[r,(r+e)/2,e],s=[t,(t+n)/2,n];return aa.map(function(t){var e=t[0],n=t[1],r=t[2],i=a[e+1],o=s[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:r,pos:[i,o]}})}function la(t,i,o,e,n){var r,a,s,u=n;if(u||(u="none"!==(s=(a=Tr(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=e)){var l=Ct(u),c=l.prefix,f=void 0===c?u:c,p=l.value,d=void 0===p?"":p,h="circle"===f,g=" ";if("polygon"===f){g=",";return{type:f,clipText:u,poses:z=(P=wt(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var e=t.split(" "),n=e[0],r=e[1];return{vertical:1,horizontal:1,pos:[At(n,i),At(r,o)]}}),splitter:g}}if(h||"ellipse"===f){var v,m,b,x,E,S,y,M,R,D="",w="",C=0,O=0,P=Dt(d);O=h?(m="",m=void 0===(v=P[0])?"50%":v,D=void 0===(b=P[2])?"50%":b,w=void 0===(x=P[3])?"50%":x,C=At(m,Math.sqrt((i*i+o*o)/2))):(M=S="",S=void 0===(E=P[0])?"50%":E,M=void 0===(y=P[1])?"50%":y,D=void 0===(R=P[3])?"50%":R,w=void 0===(r=P[4])?"50%":r,C=At(S,i),At(M,o));var B=[At(D,i),At(w,o)],z=kn([{vertical:1,horizontal:1,pos:B,direction:"nesw"}],oa.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[B[0]+t[0]*C,B[1]+t[1]*O]}}));return{type:f,clipText:u,radiusX:C,radiusY:O,left:B[0]-C,top:B[1]-O,poses:z,splitter:g}}if("inset"===f){var G=(P=Dt(d||"0 0 0 0")).indexOf("round"),T=(-1<G?P.slice(0,G):P).length,_=P.slice(T+1),A=P.slice(0,T),k=A[0],I=A[1],F=void 0===I?k:I,N=A[2],j=void 0===N?k:N,Y=A[3],q=void 0===Y?F:Y,X=[k,j].map(function(t){return At(t,o)}),W=X[0],H=X[1],L=[q,F].map(function(t){return At(t,i)}),V=L[0],U=L[1],$=i-U,Z=o-H,K=ea(_,$-V,Z-W,V,W);return{type:"inset",clipText:u,poses:z=kn(kn([],ua(W,$,Z,V)),K),top:W,left:V,right:$,bottom:Z,radius:_,splitter:g}}if("rect"===f){g=",";var J=(P=wt(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t){return Ot(t).value});return{type:"rect",clipText:u,poses:z=ua(W=J[0],U=J[1],H=J[2],V=J[3]),top:W,right:U,bottom:H,left:V,values:P,splitter:g}}}}var ca={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,s){var e=t.props,n=e.customClipPath,r=e.defaultClipPath,i=e.clipArea,u=e.zoom,o=t.state,a=o.target,l=o.width,c=o.height,f=o.allMatrix,p=o.is3d,d=o.left,h=o.top,g=o.pos1,v=o.pos2,m=o.pos3,b=o.pos4,x=o.clipPathState,E=o.snapBoundInfos,S=o.rotation;if(!a)return[];var y=la(a,l,c,r||"inset",x||n);if(!y)return[];var M,R,D,w,C,O,P=p?4:3,B=y.type,z=y.poses.map(function(t){var e=fr(f,t.pos,P);return[e[0]-d,e[1]-h]}),G=[],T=[],_="rect"===B,A="inset"===B,k="polygon"===B;if((_||A||k)&&(M=A?z.slice(0,8):z,T=M.map(function(t,e){var n=0===e?M[M.length-1]:M[e-1],r=Nt(n,t),i=mr(n,t);return s.createElement("div",{key:"clipLine"+e,className:Qn("line","clip-line","snap-control"),"data-clip-index":e,style:{width:i+"px",transform:"translate("+n[0]+"px, "+n[1]+"px) rotate("+r+"rad) scaleY("+u+")"}})})),G=z.map(function(t,e){return s.createElement("div",{key:"clipControl"+e,className:Qn("control","clip-control","snap-control"),"data-clip-index":e,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+S+"rad) scale("+u+")"}})}),A&&G.push.apply(G,z.slice(8).map(function(t,e){return s.createElement("div",{key:"clipRadiusControl"+e,className:Qn("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+e,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+S+"rad) scale("+u+")"}})})),"circle"===B||"ellipse"===B){var I=y.left,F=y.top,N=y.radiusX,j=y.radiusY,Y=re(fr(f,[I,F],P),fr(f,[0,0],P)),q=Y[0],X=Y[1],W="none";if(!i){for(var H=Math.max(10,N/5,j/5),L=[],V=0;V<=H;++V){var U=2*Math.PI/H*V;L.push([N+(N-u)*Math.cos(U),j+(j-u)*Math.sin(U)])}L.push([N,-2]),L.push([-2,-2]),L.push([-2,2*j+2]),L.push([2*N+2,2*j+2]),L.push([2*N+2,-2]),L.push([N,-2]),W="polygon("+L.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}G.push(s.createElement("div",{key:"clipEllipse",className:Qn("clip-ellipse","snap-control"),style:{width:2*N+"px",height:2*j+"px",clipPath:W,transform:"translate("+(-d+q)+"px, "+(-h+X)+"px) "+lr(f)}}))}return i&&(D=(R=dr(kn([g,v,m,b],z))).width,w=R.height,C=R.left,O=R.top,(k||_||A)&&(L=A?z.slice(0,8):z,G.push(s.createElement("div",{key:"clipArea",className:Qn("clip-area","snap-control"),style:{width:D+"px",height:w+"px",transform:"translate("+C+"px, "+O+"px)",clipPath:"polygon("+L.map(function(t){return t[0]-C+"px "+(t[1]-O)+"px"}).join(", ")+")"}})))),E&&["vertical","horizontal"].forEach(function(o){var t=E[o],a="horizontal"===o;t.isSnap&&T.push.apply(T,t.snap.posInfos.map(function(t,e){var n=t.pos,r=re(fr(f,a?[0,n]:[n,0],P),[d,h]),i=re(fr(f,a?[l,n]:[n,c],P),[d,h]);return yo(s,"",r,i,u,"clip"+o+"snap"+e,"guideline")})),t.isBound&&T.push.apply(T,t.bounds.map(function(t,e){var n=t.pos,r=re(fr(f,a?[0,n]:[n,0],P),[d,h]),i=re(fr(f,a?[l,n]:[n,c],P),[d,h]);return yo(s,"",r,i,u,"clip"+o+"bounds"+e,"guideline","bounds","bold")}))}),kn(kn([],G),T)},dragControlCondition:function(t,e){return e.inputEvent&&-1<(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,e){var n=t.props.dragWithClip;return void 0!==n&&!n&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,e)},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,a=n.target,s=n.width,u=n.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",f=e.datas,p=la(a,s,u,i||"inset",o);if(!p)return!1;var d=p.clipText;return!1===Gr(t,"onClipStart",Pr(t,e,{clipType:p.type,clipStyle:d,poses:p.poses.map(function(t){return t.pos})}))?f.isClipStart=!1:(f.isControl=c&&-1<c.indexOf("clip-control"),f.isLine=-1<c.indexOf("clip-line"),f.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),f.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,n.clipPathState=d,ti(t,e),!0)},dragControl:function(t,e){var n=e.datas,r=e.originalDatas;if(!n.isClipStart)return!1;var i=n.isControl,o=n.isLine,a=n.isArea,s=n.index,u=n.clipPath;if(!u)return!1;var l=oi(e),c=l[0],f=l[1],p=t.props,d=t.state,h=d.width,g=d.height,v=!a&&!i&&!o,m=u.type,b=u.poses,x=u.splitter,E=b.map(function(t){return t.pos});v&&(c=-c,f=-f);var S,y,M,R,D,w,C,O,P,B,z,G,T,_,A,k=!i||"nesw"===b[s].direction,I="inset"===m||"rect"===m,F=b.map(function(){return[0,0]});i&&!k?(y=(S=b[s]).horizontal,M=S.vertical,R=[c*Math.abs(y),f*Math.abs(M)],C=R,O=I,z=(D=b)[w=s],G=z.direction,T=z.sub,_=D.map(function(){return[0,0]}),A=G?G.split(""):[],O&&w<8?(P=A.filter(function(t){return"w"===t||"e"===t})[0],B=A.filter(function(t){return"n"===t||"s"===t})[0],_[w]=C,D.forEach(function(t,e){var n=t.direction;n&&(-1<n.indexOf(P)&&(_[e][0]=C[0]),-1<n.indexOf(B)&&(_[e][1]=C[1]))}),P&&(_[1][0]=C[0]/2,_[5][0]=C[0]/2),B&&(_[3][1]=C[1]/2,_[7][1]=C[1]/2)):G&&!T?A.forEach(function(o){var a="n"===o||"s"===o;D.forEach(function(t,e){var n=t.direction,r=t.horizontal,i=t.vertical;n&&-1!==n.indexOf(o)&&(_[e]=[a||!r?0:C[0],a&&i?C[1]:0])})}):_[w]=C,F=_):k&&(F=E.map(function(){return[c,f]}));var N=E.map(function(t,e){return ne(t,F[e])}),j=kn([],N);d.snapBoundInfos=null;var Y,q,X,W,H,L,V="circle"===u.type,U="ellipse"===u.type;(V||U)&&(Y=dr(N),q=Math.abs(Y.bottom-Y.top),X=Math.abs(U?Y.right-Y.left:q),W=N[0][1]+q,H=N[0][0]-X,L=N[0][0]+X,V&&(j.push([L,Y.bottom]),F.push([1,0])),j.push([Y.left,W]),F.push([0,1]),j.push([H,Y.bottom]),F.push([1,0]));var $,Z=Oi((p.clipHorizontalGuidelines||[]).map(function(t){return At(""+t,g)}),(p.clipVerticalGuidelines||[]).map(function(t){return At(""+t,h)}),h,g),K=[],J=[];J=V||U?(K=[j[4][0],j[2][0]],[j[1][1],j[3][1]]):I?(et=[j[0],j[2],j[4],j[6]],$=[F[0],F[2],F[4],F[6]],K=et.filter(function(t,e){return $[e][0]}).map(function(t){return t[0]}),et.filter(function(t,e){return $[e][1]}).map(function(t){return t[1]})):(K=j.filter(function(t,e){return F[e][0]}).map(function(t){return t[0]}),j.filter(function(t,e){return F[e][1]}).map(function(t){return t[1]}));for(var Q=[0,0],tt=0;tt<2;++tt){if("break"===function(){var t=uo(Z,p.clipTargetBounds&&{left:0,top:0,right:h,bottom:g},K,J,5),e=t.horizontal,n=t.vertical,r=e.offset,i=n.offset;if(e.isBound&&(Q[1]+=r),n.isBound&&(Q[0]+=i),!U&&!V||0!==F[0][0]||0!==F[0][1])return j.forEach(function(t,e){var n=F[e];n[0]&&(t[0]-=i),n[1]&&(t[1]-=r)}),"break";var o=dr(N),a=o.bottom-o.top,s=U?o.right-o.left:a;s-=n.isBound?Math.abs(i):0===n.snapIndex?-i:i,a-=e.isBound?Math.abs(r):0===e.snapIndex?-r:r,V&&(s=a=0<ki(n,e)?a:s);var u=j[0];j[1][1]=u[1]-a,j[2][0]=u[0]+s,j[3][1]=u[1]+a,j[4][0]=u[0]-s}())break}var et,nt,rt,it=sa(t,u,N),ot=m+"("+it.join(x)+")";return d.clipPathState=ot,J=V||U?(K=[j[4][0],j[2][0]],[j[1][1],j[3][1]]):I?(et=[j[0],j[2],j[4],j[6]],K=et.map(function(t){return t[0]}),et.map(function(t){return t[1]})):(K=j.map(function(t){return t[0]}),j.map(function(t){return t[1]})),d.snapBoundInfos=uo(Z,p.clipTargetBounds&&{left:0,top:0,right:h,bottom:g},K,J,1),r.draggable&&(nt=d.is3d?4:3,rt=ee(d.allMatrix,[Q[0],Q[1],0,0],nt),Q[0]=rt[0],Q[1]=rt[1],r.draggable.deltaOffset=Q),Gr(t,"onClip",Pr(t,e,{clipEventType:"changed",clipType:m,poses:N,clipStyle:ot,clipStyles:it,distX:c,distY:f})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(Gr(t,"onClipEnd",Br(t,e,{})),i&&(s?function(t,e){var n=e.datas,r=n.clipPath,i=n.index,o=r.type,a=r.poses,s=r.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(na(a,u,i,8,l),l===a.length)return}var c=sa(t,r,u);Gr(t,"onClip",Pr(t,e,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(s)+")",distX:0,distY:0}))}(t,e):o&&function(t,e){var n=Qr(t,e),r=n[0],i=n[1],o=e.datas,a=o.clipPath,s=o.index,u=a.type,l=a.poses,c=a.splitter,f=l.map(function(t){return t.pos});if("polygon"===u)f.splice(s,0,[r,i]);else{if("inset"!==u)return;var p=$o.indexOf(s),d=Zo.indexOf(s),h=l.length;if(ra(l,f,8,p,d,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),h===l.length)return}var g=sa(t,a,f);Gr(t,"onClip",Pr(t,e,{clipEventType:"added",clipType:u,poses:f,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,e)),i||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},fa={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:Wt(e.inputEvent.target,Qn("origin"))},dragControlStart:function(t,e){var n=e.datas;ti(t,e);var r=Pr(t,e,{dragStart:Eo.dragStart(t,(new $r).dragStart([0,0],e))}),i=Gr(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],!(n.isDragOrigin=!0)===i?n.isDragOrigin=!1:r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o,a=oi(e),s=a[0],u=a[1],l=t.state,c=l.width,f=l.height,p=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,b=[s,u];!i||((o=e.distOrigin)[0]||o[1])&&(b=o);var x=ne(n.startOrigin,b),E=ne(n.startTargetOrigin,b),S=re(b,n.prevOrigin),y=li(p,d,x,m),M=t.getRect(),R=dr(pr(y,c,f,m)),D=[M.left-R.left,M.top-R.top],w=Pr(t,e,{width:c,height:f,origin:x,dist:n.prevOrigin=b,delta:S,transformOrigin:[jr(E[0],c,v),jr(E[1],f,v)].join(" "),drag:Eo.drag(t,Ur(e,t.state,D,!!r,!1))});return Gr(t,"onDragOrigin",w),w},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(Gr(t,"onDragOriginEnd",Br(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function pa(t,e,n,r,i){void 0===r&&(r=[0,0]);var o,a;return ea(!(a=i||((o=Tr(t))&&o.borderRadius||""))||!i&&"0px"===a?[]:Dt(a),e,n,0,0,r)}function da(t,e,n,r,i,o){var a=t.state,s=a.width,u=a.height,l=Qo(o,i,t.props.roundRelative,s,u),c=l.raws,f=l.styles,p=ia(i,c),d=p.horizontals,h=p.verticals,g=f.join(" ");Gr(t,"onRound",Pr(t,e,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:r,dist:n}))}var ha={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,i){var e=t.state,n=e.target,r=e.width,o=e.height,a=e.allMatrix,s=e.is3d,u=e.left,l=e.top,c=e.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,g=void 0===h?[4,4]:h,v=f.zoom;if(!n)return null;var m=s?4:3,b=pa(n,r,o,d,c);if(!b)return null;var x=0,E=0;return b.map(function(t,e){E+=Math.abs(t.horizontal),x+=Math.abs(t.vertical);var n=re(fr(a,t.pos,m),[u,l]),r=t.vertical?x<=g[1]:E<=g[0];return i.createElement("div",{key:"borderRadiusControl"+e,className:Qn("control","border-radius"),"data-radius-index":e,style:{display:r?"block":"none",transform:"translate("+n[0]+"px, "+n[1]+"px) scale("+v+")"}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return-1<n.indexOf("border-radius")||-1<n.indexOf("moveable-line")&&-1<n.indexOf("moveable-direction")},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,o=i.getAttribute("class")||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===Gr(t,"onRoundStart",Pr(t,e,{})))return!1;r.lineIndex=l,r.controlIndex=u,r.isControl=a,r.isLine=s,ti(t,e);var c=t.props,f=c.roundRelative,p=c.minRoundControls,d=void 0===p?[0,0]:p,h=t.state,g=h.target,v=h.width,m=h.height;r.isRound=!0,r.prevDist=[0,0];var b=pa(g,v,m,d)||[];return r.controlPoses=b,h.borderRadiusState=Qo(b.map(function(t){return t.pos}),b,f,v,m).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var r=n.controlIndex,i=n.controlPoses,o=oi(e),a=o[0],s=o[1],u=[a,s],l=re(u,n.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,p=t.state,d=p.width,h=p.height,g=i[r],v=g.vertical,m=g.horizontal,b=i.map(function(t){var e=t.horizontal,n=t.vertical,r=[e*m*u[0],n*v*u[1]];if(e){if(1===f[0])return r;if(f[0]<4&&e!==m)return r}else{if(0===f[1])return r[1]=n*m*u[0]/d*h,r;if(v){if(1===f[1])return r;if(f[1]<4&&n!==v)return r}}return[0,0]});b[r]=u;var x=i.map(function(t,e){return ne(t.pos,b[e])});return n.prevDist=[a,s],da(t,e,u,l,i,x),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y=n.width,M=n.height,R=r.isControl,D=r.controlIndex,w=r.isLine,C=r.lineIndex,O=r.controlPoses,P=O.map(function(t){return t.pos}),B=P.length,z=t.props.roundClickable;return i&&(void 0===z||z)&&(R?na(O,P,D,0):w&&(a=(o=Qr(t,e))[0],s=o[1],l=P,c=C,f=a,p=s,d=y,h=M,g=ia(u=O),v=g.horizontals,m=g.verticals,b=v.length,x=m.length,S=E=-1,0===c?0===b?E=0:1===b&&(E=1):3===c&&(b<=2?E=2:b<=3&&(E=3)),2===c?0===x?S=0:x<4&&(S=3):1===c&&(x<=1?S=1:x<=2&&(S=2)),ra(u,l,0,E,S,f,p,d,h)),B!==O.length&&da(t,e,[0,0],[0,0],O,P)),Gr(t,"onRoundEnd",Br(t,e,{})),!(n.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}};var ga={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n,r=t.state,i=r.is3d,o=r.target,a=r.targetMatrix,s=null==o?void 0:o.style.transform,u=i?"matrix3d("+a.join(",")+")":"matrix("+oe(a,!0)+")",l=s&&"none"!==s?s:u;e.datas.startTransforms=(n=l)===(i?"matrix3d("+ge(4):"matrix("+ge(3)+")")||"matrix(1,0,0,1,0,0)"===n?[]:Dt(l)},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Pr(t,e,{setTransform:function(t){e.datas.startTransforms=xt(t)?t:Dt(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Pr(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),Gr(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(e),Gr(t,"onBeforeRender",Pr(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){Gr(t,"onBeforeRenderEnd",Pr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=Zr(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.setTransform(n,t),r.fillDragStartParams(n,t)});Gr(t,"onBeforeRenderGroupStart",Pr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=Zr(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.resetTransform(t),r.fillDragParams(n,t)});Gr(t,"onBeforeRenderGroup",Pr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Gr(t,"onBeforeRenderGroupEnd",Pr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},va={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){Gr(t,"onRenderStart",Pr(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Gr(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){Gr(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Gr(t,"onRenderGroupStart",Pr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=Zr(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.fillDragParams(n,t)});Gr(t,"onRenderGroup",Pr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,transform:hi(e),events:o}))},dragGroupEnd:function(t,e){var r=this,n=Zr(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.fillDragEndParams(n,t)});Gr(t,"onRenderGroupEnd",Pr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return Pr(t,e,{isPinch:!!e.isPinch,transform:hi(e)})},fillDragEndParams:function(t,e){return Pr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag})}};function ma(i,t,e,n,r,o,a){var s="Start"===r,u=i.state.target,l=o.isRequest;if(!u||s&&-1<n.indexOf("Control")&&!l&&i.areaElement===o.inputEvent.target)return!1;var c=""+e+n+r,f=""+e+n+"Condition",p="End"===r,d="After"===r,h=!(!s||i.targetGesto&&i.controlGesto&&i.targetGesto.isFlag()&&i.controlGesto.isFlag());h&&i.updateRect(r,!0,!1),""!==r||l||Fr(i.state,o);var g,v=kn([],i[t]);if(l&&(g=o.requestAble,v.some(function(t){return t.name===g})||v.push.apply(v,i.props.ables.filter(function(t){return t.name===g}))),!v.length)return!1;var m=kn(kn([ga],v),[va]).filter(function(t){return t[c]}),b=o.datas;h&&m.forEach(function(t){t.unset&&t.unset(i)});var x,E=o.inputEvent;p&&E&&(x=document.elementFromPoint(o.clientX,o.clientY)||E.target);var S=0,y=m.filter(function(t){var e=t.name,n=b[e]||(b[e]={});if(s&&(n.isEventStart=!t[f]||t[f](i,o)),n.isEventStart){var r=t[c](i,An(An({},o),{resultCount:S,datas:n,originalDatas:b,inputTarget:x}));return i._emitter.off(),s&&!1===r&&(n.isEventStart=!1),S+=r?1:0,r}return!1}).length,M=!1;return s&&m.length&&!y&&(M=0===m.filter(function(t){var e=t.name,n=b[e];return!!n.isEventStart&&("strong"!==t.dragRelation||(n.isEventStart=!1))}).length),(p||M)&&(i.state.gesto=null,i.moveables&&i.moveables.forEach(function(t){t.state.gesto=null})),h&&M&&m.forEach(function(t){t.unset&&t.unset(i)}),s&&!l&&y&&null!=o&&o.preventDefault(),!i.isUnmounted&&!M&&((!s&&y&&!a||p)&&(i.updateRect(p?r:"",!0,!1),i.forceUpdate()),s||p||d||!y||a||ma(i,t,e,n,r+"After",o),!0)}function ba(n,t,e){var r=n.controlBox.getElement(),i=[];i.push(r),n.props.dragArea&&!n.props.dragTarget||i.push(t);function o(t){var e=t.inputEvent.target;return e===n.areaElement||!n.isMoveableElement(e)&&!n.controlBox.getElement().contains(e)||Wt(e,"moveable-area")||Wt(e,"moveable-padding")}return xa(n,i,"targetAbles",e,{dragStart:o,pinchStart:o})}function xa(i,t,o,a,s){void 0===s&&(s={});var e=i.props,n=e.pinchOutside,r=e.pinchThreshold,u={preventDefault:!1,container:window,pinchThreshold:r,pinchOutside:n},l=new vn(t,u);return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(n){l.on(""+r+n,function(t){var e=t.eventType;(!s[e]||s[e](t))&&ma(i,o,r,a,n,t)||t.stop()})})}),l}var Ea=function(){function t(t,e,n){var i=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this.onEvent=function(e){var n=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach(function(t){t[n](r,{inputEvent:e})})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),Sa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=An({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},yr(null)),e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new Gn,e._prevTarget=null,e._prevDragArea=!1,e._observer=null,e._observerId=0,e.onPreventClick=function(t){t.stopPropagation(),Ht(window,"click",e.onPreventClick,!0)},e.checkUpdateRect=function(){var t;e.isDragging()||((t=e.props.parentMoveable)?t.checkUpdateRect():(Tt(e._observerId),e._observerId=Gt(function(){e.isDragging()||e.updateRect()})))},e}_n(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,l=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var c=n||{left:0,top:0},f=c.left,p=c.top,d=e.left,h=e.top,g=e.target,v=e.direction,m=t.targets,b=(m&&m.length||i)&&g,x=this.isDragging(),E={};return this.getEnabledAbles().forEach(function(t){E["data-able-"+t.name.toLowerCase()]=!0}),z(u,An({cspNonce:a,ref:S(this,"controlBox"),className:Qn("control-box",-1===v?"reverse":"",x?"dragging":"")+" "+r},E,{onClick:this.onPreventClick,portalContainer:l,style:{position:"absolute",display:b?"block":"none",transform:"translate3d("+(d-f)+"px, "+(h-p)+"px, "+s+")","--zoom":o,"--zoompx":o+"px"}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,r=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),n||e||r||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},n.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),Or(this,"targetGesto"),Or(this,"controlGesto");var t=this.events;for(var e in t){var n=t[e];n&&n.destroy()}},n.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(qn)},n.dragStart=function(t){var e=this.targetGesto;return e&&!e.isFlag()&&e.triggerDragStart(t),this},n.hitTest=function(t){var e,n,r=this.state,i=r.target,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.targetClientRect;if(!i)return 0;var c=(n=t instanceof Element?{left:(e=t.getBoundingClientRect()).left,top:e.top,width:e.width,height:e.height}:An({width:0,height:0},t)).left,f=n.top,p=n.width,d=n.height,h=Ye([o,a,u,s],l),g=Ue(h,[[c,f],[c+p,f],[c+p,f+d],[c,f+d]]),v=je(h);return g&&v?Math.min(100,g/v*100):0},n.isInside=function(t,e){var n=this.state,r=n.target,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=n.targetClientRect;return!!r&&Xe([t,e],Ye([i,o,s,a],u))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),s=i?i.props.rootContainer:r.rootContainer;this.updateState(yr(this.controlBox&&this.controlBox.getElement(),o,a,a,s||a),!i&&n)},n.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=Cr(this.state),n=e[0],r=e[1],i=e[2],o=e[3],a=dr(e),s=t.width,u=t.height,l=a.width,c=a.height,f=a.left,p=a.top,d=[t.left,t.top],h=ne(d,t.origin);return{width:l,height:c,left:f,top:p,pos1:n,pos2:r,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:ne(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var t,e,n=this.state,r=n.pos1,i=n.pos2,o=n.direction;return t=o,e=Nt(r,i)/Math.PI*180,e=0<=(e=0<=t?e:180-e)?e:360+e},n.request=function(e,t,n){void 0===t&&(t={});var r=this.props,i=r.ables,o=r.groupable,a=i.filter(function(t){return t.name===e})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=n||t.isInstant,c=u.isControl?"controlAbles":"targetAbles",f=(o?"Group":"")+(u.isControl?"Control":""),p={request:function(t){return ma(s,c,"drag",f,"",An(An({},u.request(t)),{requestAble:e,isRequest:!0}),l),this},requestEnd:function(){return ma(s,c,"drag",f,"End",An(An({},u.requestEnd()),{requestAble:e,isRequest:!0}),l),this}};return ma(s,c,"drag",f,"Start",An(An({},u.requestStart(t)),{requestAble:e,isRequest:!0}),l),l?p.request(t).requestEnd():p},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,f=t.top,p=e.padding||{},d=p.left,h=void 0===d?0:d,g=p.top,v=void 0===g?0:g,m=p.bottom,b=void 0===m?0:m,x=p.right,E=void 0===x?0:x,S=o?4:3,y=e.groupable?n:ne(n,[c,f]);t.renderPoses=[ne(a,Nr(i,[-h,-v],r,y,S)),ne(s,Nr(i,[E,-v],r,y,S)),ne(u,Nr(i,[-h,b],r,y,S)),ne(l,Nr(i,[E,b],r,y,S))]},n.checkUpdate=function(){var t,e=this.props,n=e.target,r=e.container,i=e.parentMoveable,o=this.state,a=o.target,s=o.container;(a||n)&&(this.updateAbles(),Ar(a,n)&&Ar(s,r)||((t=r||this.controlBox)&&this.unsetAbles(),this.updateState({target:n,container:r}),!i&&t&&this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){this._emitter.trigger(t,e);var n=this.props[t];return n&&n(e)},n.useCSS=function(t,e){var n=this.props.customStyledMap,r=t+e;return n[r]||(n[r]=Bn(t,e)),n[r]},n.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(t){t.unset&&t.unset(e)})},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always&&!1!==n[t.name]||n[t.name])}),o="drag"+e+"ControlStart",a=_r(i,["drag"+e+"Start","pinch"+e+"Start"],r),s=_r(i,[o],r);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=s},n.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var n=this.state;for(var r in t)n[r]=t[r]}},n.getEnabledAbles=function(){var e=this.props;return e.ables.filter(function(t){return t&&e[t.name]})},n.renderAbles=function(){var i,o,a,s,t,e=this,n=this.props.triggerAblesSimultaneously,r={createElement:z};return t=_r(this.getEnabledAbles(),["render"],n).map(function(t){return(0,t.render)(e,r)||[]}),i=t.reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,e){var n=o(t,e,i),r=s[n];r||(r=[],s[n]=r,a.push(r)),r.push(t)}),a.map(function(t){return t[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._updateObserver=function(t){var e,n,r=this.props,i=r.target;window.ResizeObserver&&i&&r.useResizeObserver?t.target===i&&this._observer||((n=new ResizeObserver(this.checkUpdateRect)).observe(i,{box:"border-box"}),this._observer=n):null!==(e=this._observer)&&void 0!==e&&e.disconnect()},n._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,r=this.props,i=r.dragTarget||r.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(Or(this,"targetGesto"),this.updateState({gesto:null})),n||Or(this,"controlGesto"),i&&e&&!this.targetGesto&&(this.targetGesto=ba(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=xa(this,t,"controlAbles","Control"))},n._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},n._renderLines=function(){var t=this.props,e=t.edge,n=t.zoom;if(t.hideDefaultLines)return[];var r=this.state.renderPoses,i={createElement:z};return[yo(i,e?"n":"",r[0],r[1],n,0),yo(i,e?"e":"",r[1],r[3],n,1),yo(i,e?"w":"",r[0],r[2],n,2),yo(i,e?"s":"",r[2],r[3],n,3)]},n._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevTarget,i=this._prevDragArea,o=e.dragArea;return!o&&r!==n||(t||o)&&i!==o},n._updateNativeEvents=function(){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,t=_t(s);if(this._isTargetChanged())for(var e in s){var n=s[e];n&&n.destroy(),s[e]=null}a&&(i=this.enabledAbles,t.forEach(function(t){var e=_r(i,[t]),n=0<e.length,r=s[t];n?(r||(r=new Ea(a,o,t),s[t]=r),r.setAbles(e)):r&&(r.destroy(),s[t]=null)}))},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},e}(q),ya={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(n,r){var t=n.props.targets||[];n.moveables=[];var e=n.state,i={left:e.left,top:e.top},o=n.props;return t.map(function(t,e){return r.createElement(Sa,{key:"moveable"+e,ref:a(n,"moveables",e),target:t,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,parentMoveable:n,parentPosition:i})})}},Ma=In("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,e){var n,r,i,o;e.isRequest||(n=window,r="click",i=t.onPreventClick,o=!0,n.addEventListener(r,i,o))},dragControlStart:function(t,e){this.dragStart(t,e)},dragGroupStart:function(t,e){this.dragStart(t,e),e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){this.endEvent(t);var n,r=t.state.target,i=e.inputEvent,o=e.inputTarget,a=!t.isMoveableElement(o)&&t.controlBox.getElement().contains(o);e.isDrag&&!a||this.unset(t),!i||!o||e.isDrag||t.isMoveableElement(o)||a||(n=r.contains(o),Gr(t,"onClick",Pr(t,e,{isDouble:e.isDouble,inputTarget:o,isTarget:r===o,containsTarget:n})))},dragGroupEnd:function(t,e){this.endEvent(t);var n,r,i,o,a=e.inputEvent,s=e.inputTarget;a&&s&&!e.isDrag&&!t.isMoveableElement(s)&&e.datas.inputTarget!==s&&(i=-1<(r=(n=t.props.targets).indexOf(s)),o=!1,-1===r&&(o=-1<(r=Bt(n,function(t){return t.contains(s)}))),Gr(t,"onClickGroup",Pr(t,e,{isDouble:e.isDouble,targets:n,inputTarget:s,targetIndex:r,isTarget:i,containsTarget:o})))},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)},endEvent:function(t){var e=this;Gt(function(){e.unset(t)})},unset:function(t){Ht(window,"click",t.onPreventClick,!0)}});function Ra(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),An(An({},t),{datas:e})}var Da=In("edgeDraggable",{dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return Wt(n,Qn("direction"))&&Wt(n,Qn("line"))},dragControlStart:function(t,e){return Eo.dragStart(t,Ra(e))},dragControl:function(t,e){return Eo.drag(t,Ra(e))},dragControlEnd:function(t,e){return Eo.dragEnd(t,Ra(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return Wt(n,Qn("direction"))&&Wt(n,Qn("line"))},dragGroupControlStart:function(t,e){return Eo.dragGroupStart(t,Ra(e))},dragGroupControl:function(t,e){return Eo.dragGroup(t,Ra(e))},dragGroupControlEnd:function(t,e){return Eo.dragGroupEnd(t,Ra(e))},unset:function(t){return Eo.unset(t)}}),wa={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Ca=[ga,Ho,xo,Vr,Eo,Da,Bo,zo,Go,Ao,Wo,Lo,qo,fa,ca,ha,ya,wa,Ma,Yo,va],Oa=Ca.reduce(function(t,e){return An(An({},t),"events"in e?e.events:{})},{}),Pa=Ca.reduce(function(t,e){return An(An({},t),e.props)},{}),Ba=Xr(Oa),za=Object.keys(Ba),Ga=Object.keys(Pa);function Ta(t,o){return Math.max.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.max(e[o],n[o],r[o],i[o])}))}function _a(t,o){return Math.min.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.min(e[o],n[o],r[o],i[o])}))}var Aa=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.differ=new Te,t.moveables=[],t.transformOrigin="50% 50%",t}_n(t,r);var e=t.prototype;return e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(e,t,n){var r,i,o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,R,D;void 0===n&&(n=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(e,!1,!1)}),r=this.state,i=this.props,o=r.target||i.target,(!t||""!==e&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),a=this.rotation,s=this.scale,l=(u=function(t,e){if(!t.length)return[0,0,0,0];var o,i,a,r,s,n,u,l=t.map(function(t){return Cr(t.state)}),c=Vn,f=Vn,p=0,d=0,h=qt(e,Ln);return h%90?(o=h/180*Math.PI,i=Math.tan(o),a=-1/i,r=[Un,Vn],s=[Un,Vn],l.forEach(function(t){t.forEach(function(t){var e=t[1]-i*t[0],n=t[1]-a*t[0];r[0]=Math.max(r[0],e),r[1]=Math.min(r[1],e),s[0]=Math.max(s[0],n),s[1]=Math.min(s[1],n)})}),r.forEach(function(r){s.forEach(function(t){var e=(t-r)/(i-a),n=i*e+r;c=Math.min(c,e),f=Math.min(f,n)})}),p=Ta(n=l.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return[fe(e,-o),fe(n,-o),fe(r,-o),fe(i,-o)]}),0)-_a(n,0),d=Ta(n,1)-_a(n,1)):(c=_a(l,0),f=_a(l,1),p=Ta(l,0)-c,d=Ta(l,1)-f,h%180&&(u=p,p=d,d=u)),[c,f,p,d]}(this.moveables,a))[0],c=u[1],f=u[2],p=u[3],d="rotate("+a+"deg) scale("+(0<=s[0]?1:-1)+", "+(0<=s[1]?1:-1)+")",o.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+f+"px; height:"+p+"px;transform:"+d,r.width=f,r.height=p,h=this.getContainer(),v=[(g=yr(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h)).left,g.top],M=[(y=qe([b=(m=Cr(g))[0],x=m[1],E=m[2],S=m[3]])).minX,y.minY],g.pos1=re(b,M),g.pos2=re(x,M),g.pos3=re(E,M),g.pos4=re(S,M),g.left=l-g.left+M[0],g.top=c-g.top+M[1],g.origin=re(ne(v,g.origin),M),g.beforeOrigin=re(ne(v,g.beforeOrigin),M),g.originalBeforeOrigin=ne(v,g.originalBeforeOrigin),R=g.targetClientRect,D=0<s[0]*s[1]?1:-1,R.top+=g.top-r.top,R.left+=g.left-r.left,o.style.transform="translate("+-M[0]+"px, "+-M[1]+"px) "+d,this.updateState(An(An({},g),{direction:D,beforeDirection:D}),n))},e.getRect=function(){return An(An({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.triggerEvent=function(t,e,n){if(n||-1<t.indexOf("Group"))return r.prototype.triggerEvent.call(this,t,e);this._emitter.trigger(t,e)},e.updateAbles=function(){r.prototype.updateAbles.call(this,kn(kn([],this.props.ables),[ya]),"Group")},e._updateTargets=function(){r.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},e._updateEvents=function(){var t=this.state,e=this.props,n=this._prevTarget,r=e.dragTarget||this.areaElement;n!==r&&(Or(this,"targetGesto"),Or(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=ba(this,r,"Group"),this.controlGesto=xa(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var i=!Ar(t.container,e.container);i&&(t.container=e.container);var o=this.differ.update(e.targets),a=o.added,s=o.changed,u=o.removed;(i||a.length||s.length||u.length)&&this.updateRect()},e._updateObserver=function(){},t.defaultProps=An(An({},Sa.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(Sa),ka=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveables=[],t}_n(t,e);var n=t.prototype;return n.render=function(){var n=this,t=this.props,e=t.cspNonce,r=t.cssStyled,i=t.targets;return z(r,{cspNonce:e,ref:S(this,"controlBox"),className:Qn("control-box")},i.map(function(t,e){return z(Sa,An({key:"moveable"+e,ref:a(n,"moveables",e)},n.props,{target:t,wrapperMoveable:n}))}))},n.componentDidUpdate=function(){},n.updateRect=function(e,n,r){void 0===r&&(r=!0),this.moveables.forEach(function(t){t.updateRect(e,n,r)})},n.getRect=function(){return An(An({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},t}(Sa),Ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _n(e,t),e.defaultAbles=Ca,e}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t}_n(t,e);var n,r,i=t.prototype;return t.makeStyled=function(){var n={};this.getTotalAbles().forEach(function(t){var e=t.css;e&&e.forEach(function(t){n[t]=!0})});var r,t=_t(n).join("\n");this.defaultStyled=Bn("div",(r=qn,(Xn+t).replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+r+"$1")+"{"})))},t.getTotalAbles=function(){return kn([Ho,ya,wa,Yo],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e,n,r,i=this.props,o=i.ables,a=i.props,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}(i,["ables","props"]),u=this._updateRefs(!0),l=(e=u,n=this.selectorMap,r=[],e.forEach(function(t){t&&(Et(t)?n[t]&&r.push.apply(r,n[t]):r.push(t))}),r),c=1<l.length,f=kn(kn([],t.getTotalAbles()),o||[]),p=An(An(An({},s),a||{}),{ables:f,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return c?s.individualGroupable?z(ka,An({key:"individual-group",ref:S(this,"moveable")},p,{target:null,targets:l})):z(Aa,An({key:"group",ref:S(this,"moveable")},p,{target:null,targets:l})):z(Sa,An({key:"single",ref:S(this,"moveable")},p,{target:l[0]}))},i.componentDidMount=function(){this._updateRefs()},i.componentDidUpdate=function(){this._updateRefs()},i.getManager=function(){return this.moveable},i._updateRefs=function(t){var e=this.refTargets,r=Hr(this.props.target||this.props.targets),n="undefined"!=typeof document,i=e.length!==r.length||e.some(function(t,e){var n=r[e];return!(!t&&!n)&&t!==n}),o=this.selectorMap,a={};return this.refTargets.forEach(function(t){Et(t)&&(o[t]?a[t]=o[t]:n&&(i=!0,a[t]=[].slice.call(document.querySelectorAll(t))))}),this.refTargets=r,this.selectorMap=a,!t&&i&&this.forceUpdate(),r},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);3<o&&a&&Object.defineProperty(e,n,a)}([(n=Jn,void 0===r&&(r={}),function(e,o){n.forEach(function(i){var t=r[i]||i;t in e||(e[t]=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(t=this[o])[i].apply(t,e);return r===this[o]?this:r})})})],t.prototype,"moveable",void 0),t}(q)),Fa=function(n){function t(t){var e=n.call(this,t)||this;return e.state={},e.state=e.props,e}return i(t,n),t.prototype.render=function(){return t=z(Ia,u({ref:S(this,"moveable")},this.state)),e=this.state.parentElement,z(X,{element:t,container:e});var t,e},t}(Y);var Na="function",ja="object",Ya="string",qa="undefined",Xa=typeof window!==qa,Wa=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Ha=1e-7,La={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function Va(t){return typeof t===qa}function Ua(t){return t&&typeof t===ja}function $a(t){return Array.isArray(t)}function Za(t){return typeof t===Ya}function Ka(t){return typeof t===Na}function Ja(t,e,n,r,i){return Qa(t,e,n)?n:function(i,o,t,a,s){for(var u,e=t;e<a;++e){var n=function(t){var e=o[t].trim();if(e===i.close&&!Qa(i,o,t))return{value:t};var n=t,r=ss(s,function(t){return t.open===e});if(r&&(n=Ja(r,o,t,a,s)),-1===n)return u=t,"break";u=t=n}(e);if(e=u,"object"==typeof n)return n.value;if("break"===n)break}return-1}(t,e,n+1,r,i)}function Qa(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function ts(t,e){var n=Za(e)?{separator:e}:e,r=n.separator,s=void 0===r?",":r,u=n.isSeparateFirst,l=n.isSeparateOnlyOpenClose,i=n.isSeparateOpenClose,c=void 0===i?l:i,o=n.openCloseCharacters,f=void 0===o?Wa:o,a=f.map(function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n}).join("|"),p=new RegExp("(\\s*"+s+"\\s*|"+a+"|\\s+)","g"),d=t.split(p).filter(Boolean),h=d.length,g=[],v=[];function m(){return v.length&&(g.push(v.join("")),v=[])}for(var b,x=0;x<h;++x){var E=function(t){var e,n,r=d[t].trim(),i=t,o=ss(f,function(t){return t.open===r}),a=ss(f,function(t){return t.close===r});if(o){if(-1!==(i=Ja(o,d,t,h,f))&&c)return m()&&u?(b=t,"break"):(g.push(d.slice(t,i+1).join("")),t=i,u?(b=t,"break"):(b=t,"continue"))}else{if(a&&!Qa(a,d,t))throw new Error("invalid format: "+a.close);if(e=r,!((""!==(n=s)&&" "!=n||""!==e&&" "!=e)&&e!==n||l))return m(),u?(b=t,"break"):(b=t,"continue")}-1===i&&(i=h-1),v.push(d.slice(t,i+1).join("")),b=t=i}(x),x=b;if("break"===E)break}return v.length&&g.push(v.join("")),g}function es(t){return ts(t,"")}function ns(t){return ts(t,",")}function rs(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function is(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function os(){return Date.now?Date.now():(new Date).getTime()}function as(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function ss(t,e,n){var r=as(t,e);return-1<r?t[r]:n}var us=function(){var n=os(),t=Xa&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(t){var e=os();return window.setTimeout(function(){t(e-n)},1e3/60)}}(),ls=function(){var t=Xa&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function cs(t,e){var n=is(t),r=n.value,i=n.unit;if(Ua(e)){var o=e[i];if(o){if(Ka(o))return o(r);if(La[i])return La[i](r,o)}}else if("%"===i)return r*e/100;return La[i]?La[i](r):r}function fs(t,n,r){return[[ms(n[0],Ha),ms(n[0]*t[1]/t[0],Ha)],[ms(n[1]*t[0]/t[1],Ha),ms(n[1],Ha)]].filter(function(t){return t.every(function(t,e){return r?t<=n[e]:t>=n[e]})})[0]||t}function ps(t,o,a,e){if(!e)return t.map(function(t,e){return n=t,r=o[e],i=a[e],Math.max(r,Math.min(n,i));var n,r,i});var n=t[0],r=t[1],i=fs(t,o,!1),s=i[0],u=i[1],l=fs(t,a,!0),c=l[0],f=l[1];return n<s||r<u?(n=s,r=u):(c<n||f<r)&&(n=c,r=f),[n,r]}function ds(t){for(var e=t.length,n=0,r=e-1;0<=r;--r)n+=t[r];return e?n/e:0}function hs(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return 0<=i?i:i+2*Math.PI}function gs(t){var n,e=(n=t,[0,1].map(function(e){return ds(n.map(function(t){return t[e]}))})),r=hs(e,t[0]),i=hs(e,t[1]);return r<i&&i-r<Math.PI||i<r&&i-r<-Math.PI?1:-1}function vs(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ms(t,e){return e?Math.round(t/e)*e:t}function bs(n,r){return n.forEach(function(t,e){n[e]=ms(n[e],r)}),n}function xs(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Es(t,e,n,r){t.removeEventListener(e,n,r)}var Ss=function(t,e){return(Ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ys(t,e){function n(){this.constructor=t}Ss(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ms=function(){return(Ms=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Rs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}ys(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=(t.cspNonce,t.portalContainer),i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,a=this.tag,s={};return-1<U.indexOf("simple")&&r&&(s={portalContainer:r}),z(a,Ms({ref:S(this,"element"),"data-styled-id":o,className:n+" "+o},s,i))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},t}(Y);var Ds=function(){return(Ds=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var ws=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(Ua(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(Ua(t))for(var n in t)this.off(n);else{var r,i;e?!(r=this._events[t])||-1<(i=as(r,function(t){return t.listener===e}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var r=this;void 0===n&&(n={});var t=this._events[e];if(!e||!t)return!0;var i=!1;return n.eventType=e,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(n),t.once&&r.off(e,t.listener)}),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Ds({listener:e},n))},t}(),Cs=function(t,e){return(Cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var Os=function(){return(Os=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ps(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Bs(t,e){var n;return Os({events:{},props:((n={})[t]=Boolean,n),name:t},e)}var zs,Gs,Ts=ut().browser.webkit,_s=Ts&&(zs="undefined"==typeof window?{userAgent:""}:window.navigator,!!(Gs=/applewebkit\/([^\s]+)/g.exec(zs.userAgent.toLowerCase()))&&parseFloat(Gs[1])<605),As="moveable-",ks=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Is=1e-4,Fs=1e-7,Ns=["n","w","s","e","nw","ne","sw","se"],js={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Ys={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function qs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(void 0,Ps([As],t))}function Xs(t,e,n){return te(e,me(n,e),t,me(n.map(function(t){return-t}),e))}function Ws(s){return Hs(yu(s,":before")).map(function(t,e){var n,r,i=is(t),o=i.value,a=i.unit;return o*(n=s,r=0===e,"%"!==a?1:Qs(n.ownerSVGElement)[r?"width":"height"]/100)})}function Hs(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Ls(t,e,n){for(var r=document.body,i=!t||n?t:t.parentElement,o=t===e||i===e,a="relative";i&&i!==r;){e===i&&(o=!0);var s=yu(i),u=s.transform,a=s.position;if("svg"===i.tagName.toLowerCase()||"static"!==a||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function Vs(t,e,n,r){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;r&&(s-=(o=(e||document.documentElement).getBoundingClientRect()).left,u-=o.top);var l,c,f=Va(s),p=!f;return p||"svg"===a?c=(l=Hs(n).map(function(t){return parseFloat(t)})).slice():(c=(l=_s?Ws(t):Hs(n).map(function(t){return parseFloat(t)})).slice(),p=!0,s=(i=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),r=Qs(t.ownerSVGElement),i=n.x-r.x,o=n.y-r.y;return[i,o,e[0]-i,e[1]-o]}(t,l))[0],u=i[1],l[0]=i[2],l[1]=i[3]),{tagName:a,isSVG:f,hasOffset:p,offset:[s||0,u||0],origin:l,targetOrigin:c}}function Us(t,e,n){void 0===n&&(n=yu(t));var r=yu(document.body),i=r.position;if(!(e||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(a=0),"auto"===n.left&&"auto"===n.right||(o=0)),[o,a]}function $s(t){t.forEach(function(t){var e=t.matrix;e&&(t.matrix=Qt(e,3,4))})}function Zs(t,e,n){for(var r,i,o,a,s=t,u=[],l=!n&&t===e,c=l,f=!1,p=3,d=Ls(e,e,!0).offsetParent;s&&!c;){c=l;var h=yu(s),g=h.position,v="fixed"===g,m=ie((a=h.transform)&&"none"!==a?Ua(a)?a:rs(a).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]),b=m.length;f||16!==b||(f=!0,p=4,$s(u),o=o&&Qt(o,3,4)),f&&9===b&&(m=Qt(m,3,4));var x=Vs(s,e,h,v),E=x.tagName,S=x.hasOffset,y=x.isSVG,M=x.origin,R=x.targetOrigin,D=x.offset,w=D[0],C=D[1];"svg"===E&&o?(u.push({type:"target",target:s,matrix:function(t,e){var n=Qs(t),r=n.width,i=n.height,o=n.clientWidth,a=n.clientHeight,s=o/r,u=a/i,l=t.preserveAspectRatio.baseVal,c=l.align,f=l.meetOrSlice,p=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),p[0]=r*g/2,p[1]=i*v/2,m=2===f?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(o-r)/2*g,h[1]=(a-i)/2*v)}var b=ve(d,e);return b[e*(e-1)]=h[0],b[e*(e-1)+1]=h[1],Xs(b,e,p)}(s,p)}),u.push({type:"offset",target:s,matrix:ge(p)})):"g"===E&&t!==s&&(C=w=0);var O=Ls(s,e),P=O.offsetParent,B=O.isEnd,z=O.isStatic;Ts&&S&&!y&&z&&("relative"===g||"static"===g)&&(w-=P.offsetLeft,C-=P.offsetTop,l=l||B);var G,T=0,_=0;if(S&&d!==P&&(T=P.clientLeft,_=P.clientTop),S&&P===document.body&&(w+=(G=Us(s,!1,h))[0],C+=G[1]),u.push({type:"target",target:s,matrix:Xs(m,p,M)}),S?u.push({type:"offset",target:s,matrix:me([w-s.scrollLeft+T,C-s.scrollTop+_],p)}):u.push({type:"offset",target:s,origin:M}),o=o||m,r=r||M,i=i||R,c||v)break;s=P,l=B,n&&s!==document.body||(c=l)}return{offsetContainer:d,matrixes:u,targetMatrix:o=o||ge(p),transformOrigin:r=r||[0,0],targetOrigin:i=i||[0,0],is3d:f}}function Ks(t,e,n,r){void 0===n&&(n=e);var i,o,a,s,u=0,l=0,c=0,f={};t&&(u=(i=lu(t)).offsetWidth,l=i.offsetHeight),t&&(a=iu((o=function(t,e,n,r){var i;void 0===n&&(n=e);var o=Zs(t,e),a=o.matrixes,s=o.is3d,u=o.targetMatrix,l=o.transformOrigin,c=o.targetOrigin,f=Zs(o.offsetContainer,n,!0),p=f.matrixes,d=f.is3d,h=r||d||s,g=h?4:3,v="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,m=u,b=ge(g),x=ge(g),E=ge(g),S=ge(g),y=a.length;p.reverse(),a.reverse(),!s&&h&&(m=Qt(m,3,4),$s(a));!d&&h&&$s(p);p.forEach(function(t){x=ee(x,t.matrix,g)});var M=n||document.body,R=(null===(i=p[0])||void 0===i?void 0:i.target)||Ls(M,M,!0).offsetParent,D=p.slice(1).reduce(function(t,e){return ee(t,e.matrix,g)},ge(g));a.forEach(function(t,e){var n;y-2===e&&(E=b.slice()),y-1===e&&(S=b.slice()),t.matrix||(n=function(t,e,n,r,i){var o,a=t.target,s=t.origin,u=e.matrix,l=lu(a),c=l.offsetWidth,f=l.offsetHeight,p=n.getBoundingClientRect(),d=[0,0];n===document.body&&(d=Us(a,!0));var h=a.getBoundingClientRect(),g=h.left-p.left+n.scrollLeft-(n.clientLeft||0)+d[0],v=h.top-p.top+n.scrollTop-(n.clientTop||0)+d[1],m=h.width,b=h.height,x=te(r,i,u),E=ru(x,c,f,r),S=E.left,y=E.top,M=E.width,R=E.height,D=tu(x,s,r),w=re(D,[S,y]),C=[g+w[0]*m/M,v+w[1]*b/R],O=[0,0],P=0;for(;++P<10;){var B=$t(i,r);o=re(tu(B,C,r),tu(B,D,r)),O[0]=o[0],O[1]=o[1];var z=ru(te(r,i,me(O,r),u),c,f,r),G=z.left,T=z.top,_=G-g,A=T-v;if(Math.abs(_)<2&&Math.abs(A)<2)break;C[0]-=_,C[1]-=A}return O.map(function(t){return Math.round(t)})}(t,a[e+1],R,g,ee(D,b,g)),t.matrix=me(n,g)),b=ee(b,t.matrix,g)});var w=!v&&s;m=m||ge(w?4:3);var C=Js(v&&16===m.length?Qt(m,4,3):m,w);return{rootMatrix:x=Ut(x,g,g),beforeMatrix:E,offsetMatrix:S,allMatrix:b,targetMatrix:m,targetTransform:C,transformOrigin:l,targetOrigin:c,is3d:h}}(t,e,n,r)).allMatrix,o.transformOrigin,u,l),f=Os(Os({},o),a),c=cu([(s=iu(o.allMatrix,[50,50],100,100)).pos1,s.pos2],s.direction));var p=r?4:3;return Os({width:u,height:l,rotation:c,rootMatrix:ge(p),beforeMatrix:ge(p),offsetMatrix:ge(p),allMatrix:ge(p),targetMatrix:ge(p),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},f)}function Js(t,e){return void 0===e&&(e=9<t.length),(e?"matrix3d":"matrix")+"("+oe(t,!e).join(",")+")"}function Qs(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function tu(t,e,n){return ae(t,Jt(e,n),n)}function eu(e,t,n,r){return[[0,0],[t,0],[0,n],[t,n]].map(function(t){return tu(e,t,r)})}function nu(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function ru(t,e,n,r){return nu(eu(t,e,n,r))}function iu(t,e,n,r){var i=16===t.length?4:3,o=eu(t,n,r,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],f=l[1],p=o[2],d=p[0],h=p[1],g=o[3],v=g[0],m=g[1],b=tu(t,e,i),x=b[0],E=b[1],S=Math.min(s,c,d,v),y=Math.min(u,f,h,m);return{left:S,top:y,right:Math.max(s,c,d,v),bottom:Math.max(u,f,h,m),origin:[x=x-S||0,E=E-y||0],pos1:[s=s-S||0,u=u-y||0],pos2:[c=c-S||0,f=f-y||0],pos3:[d=d-S||0,h=h-y||0],pos4:[v=v-S||0,m=m-y||0],direction:gs(o)}}function ou(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function au(t,e){return ou([e[0]-t[0],e[1]-t[1]])}function su(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=hs(t,e));var i=au(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad) scaleY("+n+")",width:i+"px"}}function uu(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length;return{transform:"translateZ(0px) translate("+n.reduce(function(t,e){return t+e[0]},0)/i+"px, "+n.reduce(function(t,e){return t+e[1]},0)/i+"px) rotate("+t+"rad) scale("+e+")"}}function lu(t,e){if(void 0===e&&(e=yu(t)),!Va(t.offsetWidth)||"svg"===t.tagName.toLowerCase()){var n="border-box"===e.boxSizing,r=parseFloat(e.borderLeftWidth)||0,i=parseFloat(e.borderRightWidth)||0,o=parseFloat(e.borderTopWidth)||0,a=parseFloat(e.borderBottomWidth)||0,s=parseFloat(e.paddingLeft)||0,u=parseFloat(e.paddingRight)||0,l=parseFloat(e.paddingTop)||0,c=parseFloat(e.paddingBottom)||0,f=parseFloat(e.width),p=parseFloat(e.height),d=f,h=p,g=s+u,v=l+c,m=g+(r+i),b=v+(o+a);return n?(f=d-m,p=h-b):(d=f+m,h=p+b),{svg:!1,offsetWidth:d,offsetHeight:h,clientWidth:f+g,clientHeight:p+v,cssWidth:f,cssHeight:p}}var d,h,x=t.getBBox();return{svg:!0,offsetWidth:d=x.width,offsetHeight:h=x.height,clientWidth:d,clientHeight:h,cssWidth:d,cssHeight:h}}function cu(t,e){return hs(0<e?t[0]:t[1],0<e?t[1]:t[0])}function fu(t,e,n,r,i){var o,a,s=1,u=[0,0],l=pu(),c=pu(),f=pu(),p=Ks(e,n,i,!1);return e&&(o=p.is3d?4:3,s=(a=iu(p.offsetMatrix,ne(p.transformOrigin,Zt(p.targetMatrix,o)),p.width,p.height)).direction,u=ne(a.origin,[a.left-p.left,a.top-p.top]),l=du(e),c=du(Ls(r,r,!0).offsetParent||document.body,!0),t&&(f=du(t))),Os({targetClientRect:l,containerClientRect:c,moveableClientRect:f,beforeDirection:s,beforeOrigin:u,originalBeforeOrigin:u,target:e},p)}function pu(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function du(t,e){var n,r=0,i=0,o=0,a=0;t===document.body||t===document.documentElement?(o=window.innerWidth,a=window.innerHeight,r=-(document.documentElement.scrollLeft||document.body.scrollLeft),i=-(document.documentElement.scrollTop||document.body.scrollTop)):(r=(n=t.getBoundingClientRect()).left,i=n.top,o=n.width,a=n.height);var s={left:r,right:r+o,top:i,bottom:i+a,width:o,height:a};return e&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==yu(t).overflow),s}function hu(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return-1<e.indexOf("w")&&(n[0]=-1),-1<e.indexOf("e")&&(n[0]=1),-1<e.indexOf("n")&&(n[1]=-1),-1<e.indexOf("s")&&(n[1]=1),n}}}function gu(t,e){return[ne(e,t[0]),ne(e,t[1]),ne(e,t[2]),ne(e,t[3])]}function vu(t){var e=t.left,n=t.top;return gu([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function mu(t,e){var n;null!==(n=t[e])&&void 0!==n&&n.unset(),t[e]=null}function bu(t,e,n){var r=e.datas;r.datas||(r.datas={});var i=Os(Os({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:r.datas});return r.isStartEvent?r.lastEvent=i:r.isStartEvent=!0,i}function xu(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),Os(Os({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function Eu(t,e,n){t._emitter.on(e,n)}function Su(t,e,n,r){return t.triggerEvent(e,n,r)}function yu(t,e){return window.getComputedStyle(t,e)}function Mu(t,n,r){var i={},o={};return t.filter(function(e){var t=e.name;if(i[t]||!n.some(function(t){return e[t]}))return!1;if(!r&&e.ableGroup){if(o[e.ableGroup])return!1;o[e.ableGroup]=!0}return i[t]=!0})}function Ru(t,e){return t===e||null==t&&null==e}function Du(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function wu(t,e,n){return ae($t(t,n),Jt(e,n),n)}function Cu(t,e){var n=t.is3d?4:3,r=wu(t.rootMatrix,[e.distX,e.distY],n);return e.distX=r[0],e.distY=r[1],e}function Ou(t,e,n,r,i){return re(tu(t,ne(n,e),i),r)}function Pu(t,e,n){return n?t/e*100+"%":t+"px"}function Bu(t){return Math.abs(t)<=Fs?0:t}function zu(t,e){return e.isRequest?("resizable"===e.requestAble||"scalable"===e.requestAble)&&e.parentDirection:xs(e.inputEvent.target,qs("direction"))}function Gu(t,e){return t?Za(t)?e?document.querySelector(t):t:Ka(t)?t():"current"in t?t.current:t:null}function Tu(t,n){return t?((e=t)&&Ua(e)&&!(e instanceof Element)&&($a(e)||"length"in e)?[].slice.call(t):[t]).reduce(function(t,e){return Za(e)&&n?Ps(Ps([],t),[].slice.call(document.querySelectorAll(e))):(t.push(Gu(e,n)),t)},[]):[];var e}function _u(t,e){var n=t.rootMatrix,r=t.is3d,i=$t(n,r?4:3);return r||(i=Qt(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Ce(i,e)}var Au=Bs("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(n,r){var t=r.datas,e=r.targets,i=r.angle,o=r.originalDatas,a=n.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(e?"Group":"")+"Start",c="drag"+(e?"Group":"")+"ControlStart",f=(!0===s?n.controlAbles:u.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),p=bu(n,r,{});e&&(p.targets=e);var d=Su(n,l,p);t.isPinch=!1!==d,t.ables=f;var h=t.isPinch;return!!h&&(f.forEach(function(t){var e;o[t.name]=o[t.name]||{},t[c]&&(e=Os(Os({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](n,e))}),n.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},h)},pinch:function(e,n){var t=n.datas,r=n.scale,i=n.distance,o=n.originalDatas,a=n.inputEvent,s=n.targets,u=n.angle;if(t.isPinch){var l=i*(1-1/r),c=bu(e,n,{});s&&(c.targets=s),Su(e,"onPinch"+(s?"Group":""),c);var f=t.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach(function(t){t[p]&&t[p](e,Os(Os({},n),{datas:o[t.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(e,n){var t=n.datas,r=n.isPinch,i=n.inputEvent,o=n.targets,a=n.originalDatas;if(t.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=xu(e,n,{isDrag:r});o&&(u.targets=o),Su(e,s,u);var l=t.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(t){t[c]&&t[c](e,Os(Os({},n),{isDrag:r,datas:a[t.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,Os(Os({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Os(Os({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Os(Os({},e),{targets:t.props.targets}))}});function ku(t,e,n,r,i){var o=e.gesto.move(n,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return Os(Os({},i?Cu(e,o):o),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var Iu=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return(this.datas=n).draggable||(n.draggable={}),Os(Os({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=n,clientY:this.prevY=r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Fu(t,n,r){var e=r.originalDatas;e.groupable=e.groupable||{};var i=e.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,e){return o[e]=o[e]||{},o[e][n]=o[e][n]||{},Os(Os({},r),{datas:o[e][n],originalDatas:o[e]})})}function Nu(t,o,a,s,e,u){var l=!!a.match(/Start$/g),c=!!a.match(/End$/g),f=e.isPinch,p=e.datas,n=Fu(t,o.name,e),d=t.moveables,r=n.map(function(t,e){var n=d[e],r=t,r=l?(new Iu).dragStart(s,t):(n.state.gesto||(n.state.gesto=p.childGestos[e]),ku(t,n.state,s,f,u)),i=o[a](n,Os(Os({},r),{parentFlag:!0}));return c&&(n.state.gesto=null),i});return l&&(p.childGestos=d.map(function(t){return t.state.gesto})),r}function ju(t,o,a,e,s,u){void 0===s&&(s=function(t,e){return e});var l=!!a.match(/End$/g),n=Fu(t,o.name,e),c=t.moveables;return n.map(function(t,e){var n=c[e],r=s(n,t),i=o[a](n,Os(Os({},r),{parentFlag:!0}));return i&&u&&u(n,t,i,e),l&&(n.state.gesto=null),i})}function Yu(t,e){var n=e.clientX,r=e.clientY,i=e.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=re(wu(s,[n-a.left,r-a.top],u?4:3),l),f=Vu({datas:i,distX:c[0],distY:c[1]});return[f[0],f[1]]}function qu(t,e){var n=e.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,l=r.origin,c=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,d=a?4:3;n.is3d=a,n.matrix=i,n.targetMatrix=f,n.beforeMatrix=o,n.offsetMatrix=c,n.transformOrigin=p,n.inverseMatrix=$t(i,d),n.inverseBeforeMatrix=$t(o,d),n.absoluteOrigin=Jt(ne([s,u],l),d),n.startDragBeforeDist=ae(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=ae(n.inverseMatrix,n.absoluteOrigin,d)}function Xu(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,i=n.transformIndex,o=r.nextTransforms,a=r.nextTransformAppendedIndexes,s=0;-1===i?(s=o.length,n.transformIndex=s):s=i+a.filter(function(t){return t<i}).length;var u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,R,D=(l=s,c=(u=o).slice(0,l<0?void 0:l),f=u.slice(0,l<0?void 0:l+1),p=u[l]||"",d=l<0?[]:u.slice(l),h=l<0?[]:u.slice(l+1),g=Pe(c),v=Pe(f),m=Pe([p]),b=Pe(d),x=Pe(h),E=Oe(g),S=Oe(v),y=Oe(b),M=Oe(x),R=ee(E,y,4),{transforms:u,beforeFunctionMatrix:E,beforeFunctionMatrix2:S,targetFunctionMatrix:Oe(m),afterFunctionMatrix:y,afterFunctionMatrix2:M,allFunctionMatrix:R,beforeFunctions:g,beforeFunctions2:v,targetFunction:m[0],afterFunctions:b,afterFunctions2:x,beforeFunctionTexts:c,beforeFunctionTexts2:f,targetFunctionText:p,afterFunctionTexts:d,afterFunctionTexts2:h}),w=D.targetFunction,C="rotate"===e?"rotateZ":e;n.beforeFunctionTexts=D.beforeFunctionTexts,n.afterFunctionTexts=D.afterFunctionTexts,n.beforeTransform=D.beforeFunctionMatrix,n.beforeTransform2=D.beforeFunctionMatrix2,n.targetTansform=D.targetFunctionMatrix,n.afterTransform=D.afterFunctionMatrix,n.afterTransform2=D.afterFunctionMatrix2,n.targetAllTransform=D.allFunctionMatrix,w.functionName===C?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=Ps(Ps([],a),[s]))}function Wu(t,e,n){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?n:e)+" "+t.afterFunctionTexts.join(" ")}function Hu(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=n?ee(s,e,4):ee(e,s,4),l=ee($t(n?o:r,4),u,4);return ee(l,$t(n?a:i,4),4)}function Lu(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,a=e.startDragBeforeDist,s=o?4:3;return re(ae(i,ne(e.absoluteOrigin,[n,r]),s),a)}function Vu(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,a=n.inverseMatrix,s=n.is3d,u=n.startDragBeforeDist,l=n.startDragDist,c=s?4:3;return re(ae(e?o:a,ne(n.absoluteOrigin,[r,i]),c),e?u:l)}function Uu(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function $u(e,t){return Uu(t).map(function(t){return e[t]})}function Zu(t,e){var n=$u(t,e);return[ds(n.map(function(t){return t[0]})),ds(n.map(function(t){return t[1]}))]}function Ku(t,e,n,r){return ee(t,Xs(e,r,n),r)}function Ju(n){var r=n.originalDatas.beforeRenderable;return{setTransform:function(t,e){void 0===e&&(e=-1),r.startTransforms=$a(t)?t:es(t),tl(n,e)},setTransformIndex:function(t){tl(n,t)}}}function Qu(t,e){tl(t,as(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf(e+"(")}))}function tl(t,e){var n,r,i=t.originalDatas.beforeRenderable,o=t.datas;-1===(o.transformIndex=e)||(n=i.startTransforms[e])&&(r=Pe([n]),o.startValue=r[0].functionValue)}function el(t,e){t.originalDatas.beforeRenderable.nextTransforms=es(e)}function nl(t){return t.originalDatas.beforeRenderable.nextTransforms.join(" ")}function rl(t,e,n,r,i){return el(i,e),{transform:e,drag:sc.drag(t,ku(i,t.state,n,r,!1))}}function il(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h=t.state,g=h.left,v=h.top,m=t.props.groupable,b=m?g:0,x=m?v:0,E=re(r,al(t,n,(o=t.state,a=i,s=e,u=o.transformOrigin,l=o.offsetMatrix,c=o.is3d,f=a.beforeTransform,p=a.afterTransform,d=c?4:3,Ku(l,Qt(ee(ee(f,we([s]),4),p,4),4,d),u,d))));return re(E,[b,x])}function ol(t){var e=t.state,n=e.width,r=e.height,i=e.transformOrigin;return[i[0]/(n/2)-1,i[1]/(r/2)-1]}function al(t,e,n){void 0===n&&(n=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,a=r.is3d?4:3;return tu(n,[i/2*(1+e[0]),o/2*(1+e[1])],a)}function sl(t,e,n,r,i,o){var a,s,u,l,c,f,p,d,h,g=t.props.groupable,v=t.state,m=v.transformOrigin,b=v.targetMatrix,x=v.offsetMatrix,E=v.is3d,S=v.width,y=v.height,M=v.left,R=v.top,D=E?4:3,w=g?M:0,C=g?R:0,O=Ku(x,b,(s=e,u=n,void 0===(l=S)&&(l=s),void 0===(c=y)&&(c=u),void 0===(f=m)&&(f=[0,0]),(a=o)?a.map(function(t,e){var n=is(t),r=n.value,i=n.unit,o=e?c:l,a=e?u:s;return"%"===t||isNaN(r)?a*(o?f[e]/o:0):"%"!==i?r:a*r/100}):f),D);return re((p=i,d=r,h=Zu(eu(O,e,n,D),d),[p[0]-h[0],p[1]-h[1]]),[w,C])}function ul(t,e){return Zu(vu(t.state),e)}var ll=["left","right","center"],cl=["top","bottom","middle"],fl={start:"left",end:"right",center:"center"},pl={start:"top",end:"bottom",center:"middle"};function dl(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,u=n.snapGridWidth,l=n.snapGridHeight,c=t.state,f=c.guidelines,p=c.enableSnap;return r&&p&&!(e&&!0!==r&&r.indexOf(e)<0)&&!!(u||l||i||o||f&&f.length||a&&a.length||s&&s.length)}function hl(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function gl(t,e){var n=function(t,e){var n=hl(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}(t,e),r=cl.filter(function(t){return t in n}),i=ll.filter(function(t){return t in n});return{horizontal:r.map(function(t){return n[t]}),vertical:i.map(function(t){return n[t]})}}function vl(t,e,n,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],u=a.left,l=a.top,c=a.bottom,f=n+a.right-u,p=r+c-l;return t&&t.forEach(function(t){s.push({type:"horizontal",pos:[u,ms(t-o+l,.1)],size:f})}),e&&e.forEach(function(t){s.push({type:"vertical",pos:[ms(t-i+u,.1),l],size:p})}),s}function ml(t,e){if(!e.length)return[];var n,r,i,o=t.state,a=o.containerClientRect,s=o.targetClientRect,u=s.top,l=s.left,p=o.rootMatrix,d=o.is3d?4:3,c=(r=d,i=tu(p,[(n=a).clientLeft,n.clientTop],r),[n.left+i[0],n.top+i[1]]),h=c[0],g=c[1],f=qe(vu(o)),v=re([f.minX,f.minY],wu(p,[l-h,u-g],d)).map(function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e}),m=v[0],b=v[1];return e.map(function(t){var e=t.element.getBoundingClientRect(),n=e.left-h,r=e.top-g,i=r+e.height,o=n+e.width,a=wu(p,[n,r],d),s=a[0],u=a[1],l=wu(p,[o,i],d),c=l[0],f=l[1];return Os(Os({},t),{rect:{left:s+m,right:c+m,top:u+b,bottom:f+b,center:(s+c)/2+m,middle:(u+f)/2+b}})})}function bl(t){var e,n,r,i,o,a,x,l,E,s=t.state,u=s.snapOffset,c=s.containerClientRect,f=c.overflow,p=c.scrollHeight,d=c.scrollWidth,h=c.clientHeight,g=c.clientWidth,v=c.clientLeft,m=c.clientTop,b=t.props,S=b.snapGap,y=void 0===S||S,M=b.verticalGuidelines,R=b.horizontalGuidelines,D=b.snapThreshold,w=void 0===D?5:D,C=b.snapGridWidth,O=void 0===C?0:C,P=b.snapGridHeight,B=void 0===P?0:P,z=Ps([],function(t){var e=t.state,n=t.props.elementGuidelines,r=void 0===n?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(t){return!t.refresh}),o=r.map(function(t){return Ua(t)&&"element"in t?t:{element:Gu(t,!0)}}).filter(function(t){return t.element}),a=_e(i.map(function(t){return t.element}),o.map(function(t){return t.element})),s=a.maintained,u=a.added,l=[];s.forEach(function(t){var e=t[0],n=t[1];l[n]=i[e]}),ml(t,u.map(function(t){return o[t]})).map(function(t,e){l[u[e]]=t}),e.elementRects=l;var R=hl(t.props.elementSnapDirections),D=[];return l.forEach(function(e){var n=e.element,t=e.top,r=void 0===t?R.top:t,i=e.left,o=void 0===i?R.left:i,a=e.right,s=void 0===a?R.right:a,u=e.bottom,l=void 0===u?R.bottom:u,c=e.center,f=void 0===c?R.center:c,p=e.middle,d=void 0===p?R.middle:p,h=e.className,g=e.rect,v=gl({top:r,right:s,left:o,bottom:l,center:f,middle:d},g),m=v.horizontal,b=v.vertical,x=g.top,E=g.left,S=g.right-E,y=g.bottom-x,M=[S,y];b.forEach(function(t){D.push({type:"vertical",element:n,pos:[ms(t,.1),x],size:y,sizes:M,className:h,elementRect:e})}),m.forEach(function(t){D.push({type:"horizontal",element:n,pos:[E,ms(t,.1)],size:S,sizes:M,className:h,elementRect:e})})}),D}(t));return y&&(n=(e=nu(vu(t.state))).top,r=e.left,i=e.bottom,o=e.right,z.push.apply(z,(a={top:n,left:r,bottom:i,right:o,center:(r+o)/2,middle:(n+i)/2},x=w,l=t.state.elementRects,E=[],[["vertical",fl,pl],["horizontal",pl,fl]].forEach(function(t){var h=t[0],g=t[1],s=t[2],v=a[g.start],m=a[g.end],b=a[g.center],n=a[s.start],r=a[s.end];function i(t){var e=t.rect;return e[g.end]<v+x?v-e[g.end]:m-x<e[g.start]?e[g.start]-m:-1}var e=l.filter(function(t){var e=t.rect;return!(e[s.start]>r||e[s.end]<n)&&0<i(t)}).sort(function(t,e){return i(t)-i(e)}),u=[];e.forEach(function(a){e.forEach(function(t){var e,n,r,i,o;a!==t&&(e=a.rect,n=t.rect,r=e[s.start],i=e[s.end],o=n[s.start],n[s.end]<r||i<o||u.push([a,t]))})}),u.forEach(function(t){var e=t[0],n=t[1],r=e.rect,i=n.rect,o=r[g.start],a=r[g.end],s=i[g.start],u=i[g.end],l=0,c=0,f=!1,p=!1,d=!1;if(a<=v&&m<=s){if(p=!0,c=a+(l=(s-a-(m-v))/2)+(m-v)/2,Math.abs(c-b)>x)return}else if(a<s&&u<v+x){if(f=!0,c=u+(l=s-a),Math.abs(c-v)>x)return}else{if(!(a<s&&m-x<o))return;if(d=!0,c=o-(l=s-a),Math.abs(c-m)>x)return}l&&E.push({type:h,pos:"vertical"===h?[c,0]:[0,c],element:n.element,size:0,className:n.className,isStart:f,isCenter:p,isEnd:d,gap:l,hide:!0,gapRects:[e,n]})})}),E))),z.push.apply(z,function(t,e,n,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(e)for(var s=0;s<=r;s+=e)a.push({type:"horizontal",pos:[0,ms(s-o,.1)],size:n,hide:!0});if(t)for(s=0;s<=n;s+=t)a.push({type:"vertical",pos:[ms(s-i,.1),0],size:r,hide:!0});return a}(O,B,f?d:g,f?p:h,v,m)),z.push.apply(z,vl(R||!1,M||!1,f?d:g,f?p:h,v,m,u)),z}function xl(t,e,n,r){var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!Va(i))return i}return t[n]}(r,t.props.snapThreshold,5);return El(t.state.guidelines,e,n,i)}function El(t,e,n,r){return{vertical:Ml(t,"vertical",e,r),horizontal:Ml(t,"horizontal",n,r)}}function Sl(t,e,n){var r=gl(t.props.snapDirections,e);return xl(t,r.vertical,r.horizontal,n)}function yl(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:a}}function Ml(n,i,t,o){if(!n||!n.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,e=t.map(function(r,t){var e=n.map(function(t){var e=t.pos,n=r-e[a];return{offset:n,dist:Math.abs(n),guideline:t}}).filter(function(t){var e=t.guideline,n=t.dist;return!(e.type!==i||o<n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,index:t,guidelineInfos:e}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}),r=0<e.length;return{isSnap:r,index:r?e[0].index:-1,posInfos:e}}function Rl(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Fs?1:r<Fs?-1:n-r}function Dl(t,a){return t.slice().sort(function(t,e){var n=t.sign[a],r=e.sign[a],i=t.offset[a],o=e.offset[a];return n?r?Rl({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:e.isBound,isSnap:e.isSnap,offset:o}):-1:1})[0]}function wl(t,e){var n=ds([e[0][0],e[1][0]]),r=ds([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Cl(t,e){var n,r,i=e[0],o=e[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<Fs&&(a=0),Math.abs(s)<Fs&&(s=0),r=a?(n=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(n=i[0],t[0]),n-r}function Ol(t,n,r){void 0===r&&(r=Fs);var i=Cl(t[0],n)<=0;return t.slice(1).every(function(t){var e=Cl(t,n);return e<=0==i||Math.abs(e)<=r})}function Pl(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Bl(t,e,n,r,i){var o=t[0],a=t[1],s=e[0],u=e[1],l=Bu(a[1]-o[1]),c=Bu(a[0]-o[0]),f=Bu(u[1]-s[1]);if(!Bu(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return Pl(l/c*(s[0]-o[0])+o[1],s[1],u[1],n,r);var p=s[0]-o[0];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}if(f)return{isBound:!1,offset:0};if(i&&!c)return{isBound:!1,offset:0};if(l)return Pl((s[1]-o[1])/(l/c)+o[0],s[0],u[0],n,r);var d,p=s[1]-o[1];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}function zl(c,t,f,p){return t.map(function(t){var n=t[0],e=t[1],r=t[2],i=function(t,e,n){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=r.left,o=r.top,a=r.width,s=r.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],f=[[i,o+s],[i+a,o+s]],p=wl(n,e),d=p.horizontal,h=p.vertical;if(Ol([n,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Bl(e,l,h),v=Bl(e,f,h),m=Bl(e,u,d),b=Bl(e,c,d),x=g.isBound&&v.isBound,E=g.isBound||v.isBound,S=m.isBound&&b.isBound,y=m.isBound||b.isBound,M=Du(g.offset,v.offset),R=Du(m.offset,b.offset),D=[0,0],w=!1;return{isAllBound:Math.abs(R)<Math.abs(M)?(D=[M,0],w=E,x):(D=[0,R],w=y,S),isVerticalBound:E,isHorizontalBound:y,isBound:w,offset:D}}(c,[e,r],f),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=Vu({datas:p,distX:a[0],distY:a[1]}).map(function(t,e){return t*(n[e]?2/n[e]:0)});return{sign:n,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function Gl(t,e,n){var r,i,o,a,s,u,l,c,f,p,d,h,g,v=zl(t,Tl(e,[0,0],!1).map(function(t){var e=t[0],n=t[1],r=t[2];return[e.map(function(t){return 2*Math.abs(t)}),n,r]}),Zu(e,[0,0]),n),m=Dl(v,0),b=Dl(v,1),x=0,E=0,S=m.isVerticalBound||b.isVerticalBound,y=m.isHorizontalBound||b.isHorizontalBound;return(S||y)&&(i={datas:n,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,l=a.beforeMatrix,c=a.matrix,f=a.is3d,p=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=f?4:3,x=(r=re(ae(o?l:c,ne(o?p:d,[s,u]),g),h))[0],E=r[1]),{vertical:{isBound:S,offset:x},horizontal:{isBound:y,offset:E}}}function Tl(i,t,e){return r=e,o=[],a=(n=t)[0],s=n[1],a&&s?o.push([[0,2*s],n,[-a,s]],[[2*a,0],n,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),r&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),r&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var e=t[0],n=t[1],r=t[2];return[e,Zu(i,n),Zu(i,r)]});var n,r,o,a,s}function _l(t,e,n,r){var i=r?t.map(function(t){return fe(t,r)}):t,o=Ps([n],e);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t){return!Ol(o,t)})}function Al(t,e,n,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,f=s-r[0],p=s+l-r[0],d=u-r[1],h=u+c-r[1],g=[[f,d],[p,d],[f,h],[p,h]],v=Zu(n,[0,0]);if(!_l(n,g,v,0))return[];var m=[],b=g.map(function(t){return[ou(t),hs([0,0],t)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(t){var i=hs([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return[e[0],0];if(!i)return[0,e[1]];var o=i/r,a=-o*e[0]+e[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var o=i/r;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var e=t[0];return e&&o<=e}).map(function(t){var e=t[0],n=t[1],r=Math.acos(e?o/e:0);return[a+(n+r)-i,a+(n-r)-i]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!_l(e,g,v,t)}).map(function(t){return ms(180*t/Math.PI,Fs)}))}),m}function kl(t,e,n){var r=t||{},i=r.position,o=r.left,a=r.top,s=r.right,u=r.bottom,l={position:void 0===i?"client":i,left:void 0===o?-1/0:o,top:void 0===a?-1/0:a,right:void 0===s?1/0:s,bottom:void 0===u?1/0:u};return{vertical:Fl(l,e,!0),horizontal:Fl(l,n,!1)}}function Il(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,s=r.clientTop,u=n.snapOffset,l=u.left,c=u.top,f=u.right,p=u.bottom,d=e||t.props.bounds||{},h="css"===(d.position||"client"),g=d.left,v=d.top,m=d.right,b=void 0===m?h?-1/0:1/0:m,x=d.bottom,E=void 0===x?h?-1/0:1/0:x;return h&&(b=o+f-l-b,E=i+p-c-E),{left:(void 0===g?-1/0:g)+l-a,right:b+l-a,top:(void 0===v?-1/0:v)+c-s,bottom:E+c-s}}function Fl(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,e),a=Math.max.apply(Math,e),s=[];return o<r+1&&s.push({isBound:!0,offset:o-r,pos:r}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)})}function Nl(t,e,n){return(n?t.map(function(t){return fe(t,n)}):t).some(function(t){return t[0]<e.left&&.1<Math.abs(t[0]-e.left)||t[0]>e.right&&.1<Math.abs(t[0]-e.right)||t[1]<e.top&&.1<Math.abs(t[1]-e.top)||t[1]>e.bottom&&.1<Math.abs(t[1]-e.bottom)})}function jl(t,l,e,n,r){if(!t.props.bounds)return[];var c=r*Math.PI/180,i=Il(t),o=i.left,a=i.top,s=i.right,u=i.bottom,f=o-n[0],p=s-n[0],d=a-n[1],h=u-n[1],g={left:f,top:d,right:p,bottom:h};if(!Nl(e,g,0))return[];var v=[];return[[f,0],[p,0],[d,1],[h,1]].forEach(function(t){var s=t[0],u=t[1];e.forEach(function(t){var n,e,r,i,o,a=hs([0,0],t);v.push.apply(v,(e=s,r=u,i=ou(n=t),[o=Math.sqrt(i*i-e*e)||0,-o].sort(function(t,e){return Math.abs(t-n[r?0:1])-Math.abs(e-n[r?0:1])}).map(function(t){return hs([0,0],r?[t,e]:[e,t])}).map(function(t){return c+t-a}).filter(function(t){return!Nl(l,g,t)}).map(function(t){return ms(180*t/Math.PI,Fs)})))})}),v}function Yl(t,e){return n=Os(Os({},t),{classNames:Ps([qs("line","guideline",t.direction)],t.classNames).filter(function(t){return t}),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map(function(t){return ms(t,.1)+"px"})}),r=e,o=n.direction,a=n.classNames,s=n.size,u=n.pos,l=n.zoom,c=n.key,p=(f="horizontal"===o)?"Y":"X",r.createElement("div",{key:c,className:a.join(" "),style:((i={})[f?"width":"height"]=""+s,i.transform="translate("+u[0]+", "+u[1]+") translate"+p+"(-50%) scale"+p+"("+l+")",i)});var n,r,i,o,a,s,u,l,c,f,p}function ql(t,o,e,a,s,u,l,c){var f=t.props.zoom;return e.map(function(t,e){var n=t.type,r=t.pos,i=[0,0];return i[l]=a,i[l?0:1]=-s+r,Yl({key:o+"TargetGuideline"+e,classNames:[qs("target","bold",n)],posValue:i,sizeValue:u,zoom:f,direction:o},c)})}function Xl(t,a,e,s,n,u){var r=t.props,l=r.zoom,i=r.isDisplayInnerSnapDigit,o="horizontal"===a?fl:pl,c=n[o.start],f=n[o.end];return e.filter(function(t){var e=t.hide,n=t.elementRect;if(e)return!1;if(i&&n){var r=n.rect;if(r[o.start]<=c&&f<=r[o.end])return!1}return!0}).map(function(t,e){var n=t.pos,r=t.size,i=t.element,o=[-s[0]+n[0],-s[1]+n[1]];return Yl({key:a+"-default-guideline-"+e,classNames:i?[qs("bold")]:[],direction:a,posValue:o,sizeValue:r,zoom:l},u)})}function Wl(t,e,n,r,i,o,a,s){var u,l=t.props,c=l.snapDigit,f=void 0===c?0:c,p=l.isDisplaySnapDigit,d=void 0===p||p,h=l.snapDistFormat,g=void 0===h?function(t){return t}:h,v=l.zoom,m="horizontal"===e?"X":"Y",b="vertical"===e?"height":"width",x=Math.abs(i),E=d?parseFloat(x.toFixed(f)):0;return s.createElement("div",{key:e+"-"+n+"-guideline-"+r,className:qs("guideline-group",e),style:((u={left:o[0]+"px",top:o[1]+"px"})[b]=x+"px",u)},Yl({direction:e,classNames:[qs(n),a],size:"100%",posValue:[0,0],sizeValue:x,zoom:v},s),s.createElement("div",{className:qs("size-value","gap"),style:{transform:"translate"+m+"(-50%) scale("+v+")"}},0<E?g(E):""))}function Hl(M,i,R,D,w){var C=M.props.isDisplayInnerSnapDigit,O=[];return["vertical","horizontal"].forEach(function(s){var p,t,e,d,o,a,u,l,h,g,v,m,b,n=i.filter(function(t){return t.type===s}),c="vertical"===s?1:0,f=c?0:1,r=(t=n,d=C,g="vertical"===(p=s)?1:0,m=(e=D)[(v=(h="vertical"===p?0:1)?fl:pl).start],b=e[v.end],a=function(t){return t.pos[h]},u=[],l=[],(o=t).forEach(function(t,e){var n=a(t,e,o),r=l.indexOf(n),i=u[r]||[];-1===r&&(l.push(n),u.push(i)),i.push(t)}),u.map(function(t){var c=[],f=[];return t.forEach(function(t){var e,n,r,i,o,a,s,u=t.element,l=t.elementRect.rect;l[v.end]<m?c.push(t):b<l[v.start]?f.push(t):l[v.start]<=m&&b<=l[v.end]&&d&&(r=t.pos,i={element:u,rect:Os(Os({},l),((e={})[v.end]=l[v.start],e))},o={element:u,rect:Os(Os({},l),((n={})[v.start]=l[v.end],n))},s=[0,0],(a=[0,0])[h]=r[h],a[g]=r[g],s[h]=r[h],s[g]=r[g]+t.size,c.push({type:p,pos:a,size:0,elementRect:i}),f.push({type:p,pos:s,size:0,elementRect:o}))}),c.sort(function(t,e){return e.pos[g]-t.pos[g]}),f.sort(function(t,e){return t.pos[g]-e.pos[g]}),{total:t,start:c,end:f,inner:[]}})),x=c?pl:fl,E=c?fl:pl,S=D[x.start],y=D[x.end];r.forEach(function(t){var e=t.total,n=t.start,r=t.end,i=t.inner,a=R[f]+e[0].pos[f]-D[E.start],o=D;n.forEach(function(t){var e,n=t.elementRect.rect,r=o[x.start]-n[x.end];0<r&&((e=[0,0])[c]=R[c]+o[x.start]-S-r,e[f]=a,O.push(Wl(M,s,"dashed",O.length,r,e,t.className,w))),o=n}),o=D,r.forEach(function(t){var e,n=t.elementRect.rect,r=n[x.start]-o[x.end];0<r&&((e=[0,0])[c]=R[c]+o[x.end]-S,e[f]=a,O.push(Wl(M,s,"dashed",O.length,r,e,t.className,w))),o=n}),i.forEach(function(t){var e=t.elementRect.rect,n=S-e[x.start],r=e[x.end]-y,i=[0,0],o=[0,0];i[c]=R[c]-n,i[f]=a,o[c]=R[c]+y-S,o[f]=a,O.push(Wl(M,s,"dashed",O.length,n,i,t.className,w)),O.push(Wl(M,s,"dashed",O.length,r,o,t.className,w))})})}),O}function Ll(t,e,n,r,i){var o=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];if(Math.abs(i)<Ha&&(i=0),Math.abs(o)<Ha&&(o=0),!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var a=o/i,s=t[1]-a*t[0];return r?[n,a*(e[0]+n)+s-e[1]]:[(e[1]+n-s)/a-e[0],n]}(t,e,n,r);if(!o)return{isOutside:!1,offset:[0,0]};var a=vs(t,e),s=vs(o,t),u=vs(o,e),l=a<s||a<u,c=Vu({datas:i,distX:o[0],distY:o[1]});return{offset:[c[0],c[1]],isOutside:l}}function Vl(t,e){return t.isBound?t.offset:e.isSnap?yl(e).offset:0}function Ul(t,e,n,r,i,o){if(!dl(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,R,D=gu(o.absolutePoses,[e,n]),w=nu(D),C=w.left,O=w.right,P=w.top,B=w.bottom,z={horizontal:D.map(function(t){return t[1]}),vertical:D.map(function(t){return t[0]})},G=$l(t,i,gl(hl(t.props.snapDirections),{left:C,right:O,top:P,bottom:B,center:(C+O)/2,middle:(P+B)/2}),z),T=G.vertical,_=G.horizontal,A=Gl(t,D,o),k=A.vertical,I=A.horizontal,F=T.isSnap,N=_.isSnap,j=T.isBound||k.isBound,Y=_.isBound||I.isBound,q=Du(T.offset,k.offset),X=Du(_.offset,I.offset),W=(a=r,u=[j,Y],l=[F,N],c=[q,X],g=(s=[e,n])[0],v=s[1],m=u[0],b=u[1],x=l[0],E=l[1],S=c[0],y=c[1],M=-S,R=-y,a&&g&&v?(R=M=0,f=[],m&&b?f.push([0,y],[S,0]):m?f.push([S,0]):b?f.push([0,y]):x&&E?f.push([0,y],[S,0]):x?f.push([S,0]):E&&f.push([0,y]),f.length&&(f.sort(function(t,e){return ou(re([g,v],t))-ou(re([g,v],e))}),(p=f[0])[0]&&Math.abs(g)>Ha?(M=-p[0],R=v*Math.abs(g+M)/Math.abs(g)-v):p[1]&&Math.abs(v)>Ha&&(d=v,R=-p[1],M=g*Math.abs(v+R)/Math.abs(d)-g),a&&b&&m&&(Math.abs(M)>Ha&&Math.abs(M)<Math.abs(S)?(M*=h=Math.abs(S)/Math.abs(M),R*=h):Math.abs(R)>Ha&&Math.abs(R)<Math.abs(y)?(M*=h=Math.abs(y)/Math.abs(R),R*=h):(M=Du(-S,M),R=Du(-y,R))))):(M=g||m?-S:0,R=v||b?-y:0),[M,R]);return[{isBound:j,isSnap:F,offset:W[0]},{isBound:Y,isSnap:N,offset:W[1]}]}function $l(t,e,n,r){void 0===r&&(r=n);var i=kl(Il(t),r.vertical,r.horizontal),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:xl(t,n.vertical,n.horizontal),u=s.horizontal,l=s.vertical,c=Vl(o[0],u),f=Vl(a[0],l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l}}}function Zl(t,e,n,r,i){var o=kl(e,n,r),a=o.horizontal,s=o.vertical,u=El(t,n,r,i),l=u.horizontal,c=u.vertical,f=Vl(a[0],l),p=Vl(s[0],c),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:h,bounds:s,snap:c}}}function Kl(H,L,t,V,U,$){return t.map(function(t){var e,n,r,i,o,a,s,u,l,c,f,p,d,h,g=t[0],v=t[1],m=Zu(L,g),b=Zu(L,v),x=V?(i=U,o=function(t,e,n){var r=Il(t),i=r.left,o=r.top,a=r.right,s=r.bottom,u=n[0],l=n[1],c=re(n,e),f=c[0],p=c[1];Math.abs(f)<Fs&&(f=0),Math.abs(p)<Fs&&(p=0);var d,h,g,v,m,b=0<p,x=0<f,E={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};return 0===f&&0===p||(0===f?b?s<l&&(S.pos=s,S.offset=l-s):l<o&&(S.pos=o,S.offset=l-o):0===p?x?a<u&&(E.pos=a,E.offset=u-a):u<i&&(E.pos=i,E.offset=u-i):(d=p/f,h=n[1]-d*u,v=g=0,m=!1,x&&a<=u?(g=d*a+h,v=a,m=!0):!x&&u<=i&&(g=d*i+h,v=i,m=!0),m&&(g<o||s<g)&&(m=!1),m||(b&&s<=l?(v=((g=s)-h)/d,m=!0):!b&&l<=o&&(v=((g=o)-h)/d,m=!0)),m&&(E.isBound=!0,E.pos=v,E.offset=u-v,S.isBound=!0,S.pos=g,S.offset=l-g))),{vertical:E,horizontal:S}}(e=H,n=m,r=b),a=o.horizontal,s=o.vertical,u=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],i=n[1],o=e[0],a=e[1],s=re(n,e),u=s[0],l=0<(f=s[1]),c=0<u,u=Bu(u),f=Bu(f),p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===f)return{vertical:p,horizontal:d};var h=xl(t,u?[r]:[],f?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var e=t.pos;return c?o<=e:e<=o}),v.posInfos.filter(function(t){var e=t.pos;return l?a<=e:e<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,x,E,S,y=yl(g),M=y.isSnap,R=y.guideline,D=yl(v),w=D.isSnap,C=D.guideline,O=w?C.pos[1]:0,P=M?R.pos[0]:0;return 0===u?w&&(d.isSnap=!0,d.pos=C.pos[1],d.offset=i-d.pos):0===f?M&&(p.isSnap=!0,p.pos=P,p.offset=r-P):(m=f/u,b=n[1]-m*r,E=x=0,S=!1,M?(x=m*(E=P)+b,S=!0):w&&(E=((x=O)-b)/m,S=!0),S&&(p.isSnap=!0,p.pos=E,p.offset=r-E,d.isSnap=!0,d.pos=x,d.offset=i-x)),{vertical:p,horizontal:d}}(e,n,r),l=u.horizontal,c=u.vertical,f=Jl(a,l),p=Jl(s,c),d=Math.abs(f),h=Math.abs(p),{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:d},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:p,dist:h}}):$l(H,U,{vertical:[b[0]],horizontal:[b[1]]}),E=x.horizontal,S=E.offset,y=E.isBound,M=E.isSnap,R=x.vertical,D=R.offset,w=R.isBound,C=R.isSnap,O=re(v,g);if(!D&&!S)return{isBound:w||y,isSnap:C||M,sign:O,offset:[0,0]};var P,B,z,G,T,_,A,k,I,F,N,j,Y,q=(P=x,B=V,z=hs(m,b)/Math.PI*180,G=P.vertical,T=G.isBound,_=G.isSnap,A=G.dist,k=P.horizontal,I=k.isBound,F=k.isSnap,j=(N=z%180)<3||177<N,Y=87<N&&N<93,k.dist<A&&(T||_&&!Y&&(!B||!j))?"vertical":!I&&(!F||j||B&&Y)?"":"horizontal");if(!q)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var X="vertical"==q,W=Ll(m,b,-(X?D:S),X,$).offset.map(function(t,e){return t*(O[e]?2/O[e]:0)});return{sign:O,isBound:X?w:y,isSnap:X?C:M,offset:W}})}function Jl(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Ql(t){var e,n,r,i,o,a,s,u,l=t.state;l.guidelines&&l.guidelines.length||(e=t.state.container,n=t.props.snapContainer||e,r=l.containerClientRect,i={left:0,top:0,bottom:0,right:0},e===n||(o=Gu(n,!0))&&(s=_u(l,[(a=du(o)).left-r.left,a.top-r.top]),u=_u(l,[a.right-r.right,a.bottom-r.bottom]),i.left=ms(s[0],.1),i.top=ms(s[1],.1),i.right=ms(u[0],.1),i.bottom=ms(u[1],.1)),l.snapOffset=i,l.guidelines=bl(t),l.enableSnap=!0)}function tc(t,e,n,r,i,o){var a=eu(t,e,n,o?4:3);return gu(a,re(i,Zu(a,r)))}function ec(t,e,n,r,i,o){var a,s,u,l=o.fixedDirection,c=(a=n,s=l,u=[],r?(1!==Math.abs(s[0])||1!==Math.abs(s[1])?u.push([s,[-1,-1]],[s,[-1,1]],[s,[1,-1]],[s,[1,1]]):u.push([s,[a[0],-a[1]]],[s,[-a[0],a[1]]],[s,a]),u.push([s,a])):a[0]&&a[1]?u.push([s,[a[0],-a[1]]],[s,[-a[0],a[1]]]):a[0]?(1===Math.abs(s[0])?[1]:[1,-1]).forEach(function(t){u.push([[s[0],-1],[t*a[0],-1]],[[s[0],0],[t*a[0],0]],[[s[0],1],[t*a[0],1]])}):a[1]?(1===Math.abs(s[1])?[1]:[1,-1]).forEach(function(t){u.push([[-1,s[1]],[-1,t*a[1]]],[[0,s[1]],[0,t*a[1]]],[[1,s[1]],[1,t*a[1]]])}):u.push([s,[1,0]],[s,[-1,0]],[s,[0,-1]],[s,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),u),f=Tl(e,n,r),p=Ps(Ps([],Kl(t,e,c,r,i,o)),zl(t,f,Zu(e,[0,0]),o)),d=Dl(p,0),h=Dl(p,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function nc(t,e,n,r,i,o,a,s){for(var u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,R,D,w,C,O,P,B,z,G,T=vu(t.state),_=t.props.keepRatio,A=0,k=0,I=0;I<2;++I){var F,N,j=ec(t,e(A,k),i,_,a,s),Y=j.width,q=j.height,X=Y.isBound,W=q.isBound,H=Y.offset,L=q.offset;if(1===I&&(X||(H=0),W||(L=0)),0===I&&a&&!X&&!W)return[0,0];_&&(F=Math.abs(H)*(n?1/n:1),N=Math.abs(L)*(r?1/r:1),(X&&W?F<N:W||!X&&F<N)?H=n*L/r:L=r*H/n),A+=H,k+=L}return i[0]&&i[1]&&(p=t,d=T,g=o,v=s,w=[-(h=i)[0],-h[1]],C=p.state,O=C.width,P=C.height,B=p.props.bounds,G=z=1/0,B&&(m=[[h[0],-h[1]],[-h[0],h[1]]],b=B.left,x=void 0===b?-1/0:b,E=B.top,S=void 0===E?-1/0:E,y=B.right,M=void 0===y?1/0:y,R=B.bottom,D=void 0===R?1/0:R,m.forEach(function(t){var e,n,r,i,o,a,s,u=t[0]!==w[0],l=t[1]!==w[1],c=Zu(d,t),f=360*hs(g,c)/Math.PI;l&&(i=c.slice(),(Math.abs(f-360)<2||Math.abs(f-180)<2)&&(i[1]=g[1]),n=(e=Ll(g,i,(g[1]<c[1]?D:S)-c[1],!1,v)).offset[1],r=e.isOutside,isNaN(n)||(G=P+(r?1:-1)*Math.abs(n))),u&&(i=c.slice(),(Math.abs(f-90)<2||Math.abs(f-270)<2)&&(i[0]=g[0]),a=(o=Ll(g,i,(g[0]<c[0]?M:x)-c[0],!0,v)).offset[0],s=o.isOutside,isNaN(a)||(z=O+(s?1:-1)*Math.abs(a)))})),l=(u={maxWidth:z,maxHeight:G}).maxWidth,c=u.maxHeight,A+=H=(f=function(t,e,n,r,i,o,a,s,u){var l=Zu(e,a),c=$l(t,s,{vertical:[l[0]],horizontal:[l[1]]}),f=c.horizontal.offset,p=c.vertical.offset;if(p||f){var d=Vu({datas:u,distX:-p,distY:-f}),h=d[0],g=d[1];return[Math.min(i||1/0,n+a[0]*h)-n,Math.min(o||1/0,r+a[1]*g)-r]}return[0,0]}(t,e(A,k).map(function(t){return t.map(function(t){return ms(t,Is)})}),n+A,r+k,l,c,i,a,s))[0],k+=L=f[1]),[A,k]}function rc(t,s,e,n,u){var l=u.width,c=u.height,f=u.fixedPosition,p=u.fixedDirection;if(!dl(t,"scalable"))return[0,0];var d=u.is3d,r=nc(t,function(t,e){return tc((n=u,r=ne(s,[t/l,e/c]),i=n.transformOrigin,o=n.offsetMatrix,a=n.is3d?4:3,Ku(o,ee(n.targetMatrix,ve(r,a),a),i,a)),l,c,p,f,d);var n,r,i,o,a},l,c,e,f,n,u);return[r[0]/l,r[1]/c]}function ic(t){var n=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var e=t.guideline;-1<n.indexOf(e)||n.push(e)})}),n}function oc(t,e,n,i,o,r){var a=kl(Il(t,r),e,n),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})});var l=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,i=n.pos2,o=n.pos3,a=n.pos4,u=Zu([r,i,o,a],[0,0]),l=e.left,c=e.top,f=e.width,p=e.height,d=[[l,c],[l,c+p]],h=[[l,c],[l+f,c]],g=[[l+f,c],[l+f,c+p]],v=[[l,c+p],[l+f,c+p]],m=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return[[r,i],[i,a],[a,o],[o,r]].forEach(function(t){var e=wl(u,t),n=e.horizontal,r=e.vertical,i=Bl(t,h,r,1,!0),o=Bl(t,v,r,1,!0),a=Bl(t,d,n,1,!0),s=Bl(t,g,n,1,!0);i.isBound&&!x.top&&(m.push(c),x.top=!0),o.isBound&&!x.bottom&&(m.push(c+p),x.bottom=!0),a.isBound&&!x.left&&(b.push(l),x.left=!0),s.isBound&&!x.right&&(b.push(l+f),x.right=!0)}),{horizontal:m,vertical:b}}(t),c=l.vertical,f=l.horizontal;c.forEach(function(r){0<=as(i,function(t){var e=t.type,n=t.pos;return"bounds"===e&&n===r})||i.push({type:"bounds",pos:r})}),f.forEach(function(r){0<=as(o,function(t){var e=t.type,n=t.pos;return"bounds"===e&&n===r})||o.push({type:"bounds",pos:r})})}var ac={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,a=n.pos2,s=n.pos3,u=n.pos4,l=n.snapRenderInfo;if(!l||!dl(t,""))return[];n.guidelines=bl(t);var c,f=Math.min(o[0],a[0],s[0],u[0]),p=Math.min(o[1],a[1],s[1],u[1]),d=l.externalPoses||[],h=vu(t.state),g=[],v=[],m=[],b=[],x=[],E=nu(h),S=E.width,y=E.height,M=E.top,R=E.left,D=E.bottom,w=E.right,C={left:R,right:w,top:M,bottom:D,center:(R+w)/2,middle:(M+D)/2},O=0<d.length,P=O?nu(d):{};l.request||(l.direction&&x.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(t){return Zu(e,t)});else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(t){return Zu(e,t)}):1<(r=$u(e,n)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return xl(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),1)}(t,h,l.direction)),l.snap&&(c=nu(h),l.center&&(c.middle=(c.top+c.bottom)/2,c.center=(c.left+c.right)/2),x.push(Sl(t,c,1))),O&&(l.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),x.push(Sl(t,P,1))),x.forEach(function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;g.push.apply(g,e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),v.push.apply(v,n.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),m.push.apply(m,ic(e)),b.push.apply(b,ic(n))})),oc(t,[R,w],[M,D],g,v),O&&oc(t,[P.left,P.right],[P.top,P.bottom],g,v,l.externalBounds);var B,z,G,T,_,A,k=Ps(Ps([],m),b),I=k.filter(function(t){return t.element&&!t.gapRects}),F=k.filter(function(t){return t.gapRects});return Su(t,"onSnap",{guidelines:k.filter(function(t){return!t.element}),elements:I,gaps:F},!0),Ps(Ps(Ps(Ps(Ps(Ps([],Hl(t,I,[f,p],C,e)),(B=t,z=F,G=[f,p],T=C,_=e,A=[],["horizontal","vertical"].forEach(function(e){var t=z.filter(function(t){return t.type===e}),s="vertical"===e?0:1,u=s?0:1,l=s?pl:fl,c=s?fl:pl,f=T[l.start],p=T[l.end],d=T[c.start],h=T[c.end];t.forEach(function(t){var r=t.gap,e=t.gapRects,i=t.className,n=Math.max.apply(Math,Ps([d],e.map(function(t){return t.rect[c.start]}))),o=Math.min.apply(Math,Ps([h],e.map(function(t){return t.rect[c.end]}))),a=(n+o)/2;n!==o&&a!=(d+h)/2&&e.forEach(function(t){var e=t.rect,n=[G[0],G[1]];if(e[l.end]<f)n[s]+=e[l.end]-f;else{if(!(p<e[l.start]))return;n[s]+=e[l.start]-f-r}n[u]+=a-d,A.push(Wl(B,s?"vertical":"horizontal","gap",A.length,r,n,i,_))})})}),A)),Xl(t,"horizontal",b,[i,r],C,e)),Xl(t,"vertical",m,[i,r],C,e)),ql(t,"horizontal",v,f,r,S,0,e)),ql(t,"vertical",g,p,i,y,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Ql(t)},drag:function(t){t.state.guidelines=bl(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!zu(0,e)&&!vc(t,e))||(!e.isRequest&&e.inputEvent?xs(e.inputEvent.target,qs("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,Ql(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Ql(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}},sc={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,i=n.zoom,o=t.state,a=o.dragInfo,s=o.beforeOrigin;if(!r||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var l=ou(u),c=hs(u,[0,0]);return[e.createElement("div",{className:qs("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:l+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+c+"rad) scaleY("+i+")"}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s,u=yu(a);n.datas={},n.left=parseFloat(u.left||"")||0,n.top=parseFloat(u.top||"")||0,n.bottom=parseFloat(u.bottom||"")||0,n.right=parseFloat(u.right||"")||0,n.startValue=[0,0],qu(t,e),Qu(e,"translate"),s=t,n.absolutePoses=vu(s.state),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0],n.distOffset=[0,0];var l=bu(t,e,Os({set:function(t){n.startValue=t}},Ju(e)));return!1!==(r||Su(t,"onDragStart",l))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,n.isPinch=!1),!!n.isDrag&&l},drag:function(t,e){if(e){Xu(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.distX,u=e.distY,l=n.isDrag,c=n.prevDist,f=n.prevBeforeDist,p=n.startValue,d=n.distOffset;if(l){s+=d[0],u+=d[1];var h,g,v,m,b,x,E,S,y,M,R,D,w=t.props,C=w.parentMoveable,O=!r&&w.throttleDrag||0,P=!r&&w.throttleDragRotate||0,B=!1,z=0;!r&&0<P&&(s||u)&&(g=ms((h=w.startDragRotate||0)+180*hs([0,0],[s,u])/Math.PI,P)-h,v=u*Math.abs(Math.cos((g-90)/180*Math.PI)),m=ou([s*Math.abs(Math.cos(g/180*Math.PI)),v]),z=g*Math.PI/180,s=m*Math.cos(z),u=m*Math.sin(z)),o||r||i||P&&!s&&!u||(x=(b=Ul(t,s,u,P,a,n))[0],E=b[1],S=x.isSnap,y=x.isBound,M=x.offset,R=E.isSnap,D=E.isBound,B=S||R||y||D,s+=M,u+=E.offset);var G,T,_,A=ne(Lu({datas:n,distX:s,distY:u}),p),k=ne((T=(G={datas:n,distX:s,distY:u}).datas,_=Lu({datas:T,distX:G.distX,distY:G.distY}),ae(Hu(T,Kt([_[0],_[1]],4)),Jt([0,0,0],4),4)),p);P||B||(bs(k,O),bs(A,O));var I=re(A,p),F=re(k,p),N=re(F,c),j=re(I,f);n.prevDist=F,n.prevBeforeDist=I,n.passDelta=N,n.passDist=F;var Y=n.left+I[0],q=n.top+I[1],X=n.right-I[0],W=n.bottom-I[1],H=Wu(n,"translate("+k[0]+"px, "+k[1]+"px)","translate("+F[0]+"px, "+F[1]+"px)");if(el(e,H),t.state.dragInfo.dist=r?[0,0]:F,r||C||!N.every(function(t){return!t})||!j.some(function(t){return!t})){var L=t.state,V=bu(t,e,{transform:H,dist:F,delta:N,translate:k,beforeDist:I,beforeDelta:j,beforeTranslate:A,left:Y,top:q,right:X,bottom:W,width:L.width,height:L.height,isPinch:o});return r||Su(t,"onDrag",V),V}}}},dragAfter:function(t,e){var n=e.datas,r=e.datas,i=r.deltaOffset,o=r.distOffset;return!(!i[0]&&!i[1])&&(n.deltaOffset=[0,0],o[0]=i[0],o[1]=i[1],this.drag(t,e))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag){r.isDrag=!1;var i=xu(t,e,{});return n||Su(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var a=Nu(t,this,"dragStart",[r||0,i||0],e,!1),s=Su(t,"onDragGroupStart",Os(Os({},o),{targets:t.props.targets,events:a}));return n.isDrag=!1!==s,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=Nu(t,this,"drag",e.datas.passDelta,e,!1);if(n){var i=Os({targets:t.props.targets,events:r},n);return Su(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var r=Nu(t,this,"dragEnd",[0,0],e,!1);return Su(t,"onDragGroupEnd",xu(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function uc(t,e,r,i){void 0===i&&(i="");var n=t.state,o=n.renderPoses,a=n.rotation,s=n.direction,u=t.props,l=u.renderDirections,c=void 0===l?e:l,f=u.zoom,p={};if(!c)return[];var d=0<s?1:-1,h=!0===c?Ns:c,g=a/Math.PI*180;return h.forEach(function(t){p[t]=!0}),h.map(function(t){var e=js[t];if(!e||!p[t])return null;var n=(ms(g,15)+d*Ys[t]+720)%180;return r.createElement("div",{className:qs("control","direction",t,i),"data-rotation":n,"data-direction":t,key:"direction-"+t,style:uu.apply(void 0,Ps([a,f],e.map(function(t){return o[t]})))})})}function lc(t,e,n,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=hs(n,r),l=e?ms(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:qs.apply(void 0,Ps(["line","direction",e],a)),"data-rotation":l,"data-line-index":o,"data-direction":e,style:su(n,r,i,u)})}function cc(t,e){return uc(t,Ns,e)}function fc(t,e){return uc(t,["nw","ne","sw","se"],e)}function pc(t,e,n,r,i,o){var a=t.state.is3d?4:3,s=tu(t.state.rootMatrix,i,a),u=ne([o.left,o.top],s);e.startAbsoluteOrigin=u,e.prevDeg=hs(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0}function dc(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,a=Math.floor(i/360);o<0&&(o+=360),t<o&&270<o&&t<90?++a:o<t&&o<90&&270<t&&--a;var s=e*(360*a+t-r);return n.prevDeg=r+s,s}function hc(t,e,n,r){return dc(hs(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function gc(t,e,n,r,i,o){var a=t.props.throttleRotate,s=void 0===a?0:a,u=r,l=n.prevSnapDeg;o&&(u=function(t,e,n,r){if(!dl(t,"rotatable"))return r;var i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=r*Math.PI/180,l=[i,o,a,s].map(function(t){return re(t,n)}),c=l.map(function(t){return fe(t,u)}),f=Ps(Ps([],jl(t,l,c,n,r)),Al(t,l,c,n,r));return f.sort(function(t,e){return Math.abs(t-r)-Math.abs(e-r)}),f.length?f[0]:r}(t,e,n.origin,u));var c=ms(i+u,s),f=c-i;return[(n.prevSnapDeg=f)-l,u,c]}function vc(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(xs(n,qs("rotation-control")))return!0;var r=t.props.rotationTarget;return!!r&&Tu(r,!0).some(function(t){return!!t&&(n===t||n.contains(t))})}var mc={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,e){var n=t.props,r=n.rotatable,i=n.rotationPosition,o=n.zoom,a=n.renderDirections,s=t.state,u=s.renderPoses,l=s.direction;if(!r)return null;var c,f,p=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],c=[r,i];"left"===u?c=[o,r]:"right"===u?c=[i,a]:"bottom"===u&&(c=[a,o]);var f,p,d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],h=cu(c,n);return l&&(p="bottom"===u||"left"===u,d=c[(f="top"===l||"left"===l)&&!p||!f&&p?0:1]),[d,h]}}(i,u,l),d=[];return p&&(c=p[0],f=p[1],d.push(e.createElement("div",{key:"rotation",className:qs("rotation"),style:{transform:"translate(-50%) translate("+c[0]+"px, "+c[1]+"px) rotate("+f+"rad)"}},e.createElement("div",{className:qs("line rotation-line"),style:{transform:"scaleX("+o+")"}}),e.createElement("div",{className:qs("control rotation-control"),style:{transform:"translate(0.5px) scale("+o+")"}})))),a&&d.push.apply(d,uc(t,[],e)),d},dragControlCondition:vc,dragControlStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,u=e.isRequest,l=t.state,c=l.target,f=l.left,p=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform,b=l.moveableClientRect;if(!u&&!c)return!1;var x,E=t.getRect();n.rect=E,n.transform=m,n.left=f,n.top=p,n.fixedPosition=al(t,ol(t)),u||s||a?(x=o||0,n.beforeInfo={origin:E.beforeOrigin,prevDeg:x,defaultDeg:x,prevSnapDeg:0},n.afterInfo=Os(Os({},n.beforeInfo),{origin:E.origin}),n.absoluteInfo=Os(Os({},n.beforeInfo),{origin:E.origin,startValue:x})):(n.beforeInfo={origin:E.beforeOrigin},n.afterInfo={origin:E.origin},n.absoluteInfo={origin:E.origin,startValue:E.rotation},pc(t,n.beforeInfo,r,i,h,b),pc(t,n.afterInfo,r,i,d,b),pc(t,n.absoluteInfo,r,i,d,b)),n.direction=g,n.beforeDirection=v,n.startValue=0,n.datas={},Qu(e,"rotate");var S=bu(t,e,Os(Os({set:function(t){n.startValue=t*Math.PI/180}},Ju(e)),{dragStart:sc.dragStart(t,(new Iu).dragStart([0,0],e))})),y=Su(t,"onRotateStart",S);return n.isRotate=!1!==y,t.state.snapRenderInfo={request:e.isRequest},!!n.isRotate&&S},dragControl:function(t,e){var n,r,i,o=e.datas,a=e.clientX,s=e.clientY,u=e.parentRotate,l=e.parentFlag,c=e.isPinch,f=e.groupDelta,p=o.beforeDirection,d=o.beforeInfo,h=o.afterInfo,g=o.absoluteInfo,v=o.isRotate,m=o.startValue,b=o.rect;if(v){Xu(e,"rotate");var x,E,S,y,M,R,D,w,C,O,P=p*iu(e.datas.beforeTransform,[50,50],100,100).direction,B=t.props.parentMoveable,z=180/Math.PI*m,G=g.startValue,T=!1;if(!l&&"parentDist"in e?(D=e.parentDist,O=C=w=D):c||l?(w=dc(u,p,d),C=dc(u,P,h),O=dc(u,P,g)):(w=hc(a,s,p,d),C=hc(a,s,P,h),O=hc(a,s,P,g),T=!0),Su(t,"onBeforeRotate",bu(t,e,{beforeRotation:z+w,rotation:z+C,absoluteRotation:G+O,setRotation:function(t){O=w=C=t-z}})),x=(n=gc(t,b,d,w,z,T))[0],w=n[1],E=n[2],S=(r=gc(t,b,h,C,z,T))[0],C=r[1],y=r[2],M=(i=gc(t,b,g,O,G,T))[0],O=i[1],R=i[2],M||S||x||B){var _,A,k,I,F=Wu(o,"rotate("+y+"deg)","rotate("+C+"deg)"),N=(_=t,A=C,k=o.fixedPosition,I=o,il(_,"rotate("+A+"deg)",ol(_),k,I)),j=re(ne(f||[0,0],N),o.prevInverseDist||[0,0]);o.prevInverseDist=N,o.requestValue=null;var Y=bu(t,e,Os({delta:S,dist:C,rotate:y,rotation:y,beforeDist:w,beforeDelta:x,beforeRotate:E,beforeRotation:E,absoluteDist:O,absoluteDelta:M,absoluteRotate:R,absoluteRotation:R,isPinch:!!c},rl(t,F,j,c,e)));return Su(t,"onRotate",Y),Y}}},dragControlAfter:function(t,e){e.datas.requestValue},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=xu(t,e,{});return Su(t,"onRotateEnd",r),r}},dragGroupControlCondition:vc,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,s=r.left,u=r.top,l=r.beforeOrigin,i=this.dragControlStart(t,e);if(!i)return!1;i.set(n.beforeDirection*t.rotation);var o=ju(t,this,"dragControlStart",e,function(t,e){var n=t.state,r=n.left,i=n.top,o=n.beforeOrigin,a=ne(re([r,i],[s,u]),re(o,l));return e.datas.groupClient=a,Os(Os({},e),{parentRotate:0})}),a=Su(t,"onRotateGroupStart",Os(Os({},i),{targets:t.props.targets,events:o}));return n.isRotate=!1!==a,!!n.isRotate&&i},dragGroupControl:function(e,n){var t=n.datas;if(t.isRotate){Eu(e,"onBeforeRotate",function(t){Su(e,"onBeforeRotateGroup",bu(e,n,Os(Os({},t),{targets:e.props.targets})))});var r=this.dragControl(e,n);if(r){var l=t.beforeDirection,c=r.beforeDist,f=r.beforeDelta/180*Math.PI,i=ju(e,this,"dragControl",n,function(t,e){var n=e.datas.groupClient,r=n[0],i=n[1],o=fe([r,i],f*l),a=o[0],s=o[1],u=[a-r,s-i];return e.datas.groupClient=[a,s],Os(Os({},e),{parentRotate:c,groupDelta:u})});e.rotation=l*r.beforeRotation;var o=Os({targets:e.props.targets,events:i,set:function(t){e.rotation=t},setGroupRotation:function(t){e.rotation=t}},r);return Su(e,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var r=ju(t,this,"dragControlEnd",e);return Su(t,"onRotateGroupEnd",xu(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},bc={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.edge;if(r)return(i?fc:cc)(t,e)},dragControlCondition:zu,dragControlStart:function(t,e){var n,r,i=e.inputEvent,o=e.isPinch,a=e.parentDirection,s=e.datas,u=e.parentFlag,l=a||(o?[0,0]:hu(i.target)),c=t.state,f=c.target,p=c.width,d=c.height;if(!l||!f)return!1;o||qu(t,e),s.datas={},s.direction=l,s.startOffsetWidth=p,s.startOffsetHeight=d,s.prevWidth=0,s.prevHeight=0,r=yu(f),n=[parseFloat(r.width),parseFloat(r.height)],s.startWidth=n[0],s.startHeight=n[1];var h,g,v,m,b,x,E,S,y,M,R,D=[Math.max(0,p-s.startWidth),Math.max(0,d-s.startHeight)];s.minSize=D,s.maxSize=[1/0,1/0],u||(g=(h=yu(f)).position,v=h.minWidth,m=h.minHeight,b=h.maxWidth,x=h.maxHeight,M=p,R=d,(S=(E="static"===g||"relative"===g)?f.parentElement:f.offsetParent)&&(M=S.clientWidth,R=S.clientHeight,E&&(y=yu(S),M-=parseFloat(y.paddingLeft)||0,R-=parseFloat(y.paddingTop)||0)),s.minSize=ne([cs(v,M)||0,cs(m,R)||0],D),s.maxSize=ne([cs(b,M)||1/0,cs(x,R)||1/0],D));var w=t.props.transformOrigin||"% %";function C(t){s.ratio=t&&isFinite(t)?t:0}function O(t){s.fixedDirection=t,s.fixedPosition=Zu(s.startPositions,t)}s.transformOrigin=w&&Za(w)?w.split(" "):w,s.isWidth=!l[0]&&!l[1]||l[0]||!l[1],s.startPositions=vu(t.state),C(p/d),O([-l[0],-l[1]]);var P=bu(t,e,{direction:l,set:function(t){var e=t[0],n=t[1];s.startWidth=e,s.startHeight=n},setMin:function(t){s.minSize=t},setMax:function(t){s.maxSize=[t[0]||1/0,t[1]||1/0]},setRatio:C,setFixedDirection:s.setFixedDirection=O,setOrigin:function(t){s.transformOrigin=t},dragStart:sc.dragStart(t,(new Iu).dragStart([0,0],e))});return!1!==Su(t,"onResizeStart",P)&&(s.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:l}),!!s.isResize&&P},dragControl:function(t,e){var n,d=e.datas,h=e.distX,g=e.distY,r=e.parentFlag,v=e.isPinch,m=e.parentDistance,b=e.parentScale,i=e.parentKeepRatio,o=e.dragClient,x=e.parentDist,a=e.isRequest,s=d.isResize,u=d.transformOrigin,l=d.startWidth,c=d.startHeight,f=d.prevWidth,p=d.prevHeight,E=d.minSize,S=d.maxSize,y=d.ratio,M=d.isWidth,R=d.startOffsetWidth,D=d.startOffsetHeight;if(s){var w=t.props,C=w.resizeFormat,O=w.throttleResize,P=void 0===O?1:O,B=w.parentMoveable,z=w.snapThreshold,G=void 0===z?5:z,T=d.direction,_=T,A=0,k=0;T[0]||T[1]||(_=[1,1]);var I=y&&(null!=i?i:w.keepRatio)||!1,F=V(),N=F[0],j=F[1];d.setFixedDirection(d.fixedDirection),Su(t,"onBeforeResize",bu(t,e,{setFixedDirection:function(t){var e;return d.setFixedDirection(t),e=V(),N=e[0],j=e[1],[N,j]},boundingWidth:N,boundingHeight:j,setSize:function(t){N=t[0],j=t[1]}}));var Y=o;o||(Y=!r&&v?ul(t,[0,0]):d.fixedPosition);var q,X=[0,0];v||(X=function(t,n,r,e,i,o,a){if(!dl(t,"resizable"))return[0,0];var s=a.fixedDirection,u=t.state,l=u.allMatrix,c=u.is3d;return nc(t,function(t,e){return tc(l,n+t,r+e,s,i,c)},n,r,e,i,o,a)}(t,N,j,T,Y,a,d)),x&&(x[0]||(X[0]=0),x[1]||(X[1]=0)),I?(_[0]&&_[1]&&X[0]&&X[1]&&(Math.abs(X[0])>Math.abs(X[1])?X[1]=0:X[0]=0),(q=!X[0]&&!X[1])&&U(),_[0]&&!_[1]||X[0]&&!X[1]||q&&M?(N+=X[0],j=N/y):(!_[0]&&_[1]||!X[0]&&X[1]||q&&!M)&&(j+=X[1],N=j*y)):(R+A<-G&&(X[0]=0),R+k<-G&&(X[1]=0),N+=X[0],j+=X[1]),n=ps([N,j],E,S,I),N=n[0],j=n[1],U();var W=[(A=N-R)-f,(k=j-D)-p];d.prevWidth=A,d.prevHeight=k;var H=sl(t,N,j,d.fixedDirection,Y,u);if(B||!W.every(function(t){return!t})||!H.every(function(t){return!t})){var L=bu(t,e,{width:l+A,height:c+k,offsetWidth:Math.round(N),offsetHeight:Math.round(j),boundingWidth:N,boundingHeight:j,direction:T,dist:[A,k],delta:W,isPinch:!!v,drag:sc.drag(t,ku(e,t.state,H,!!v,!1))});return Su(t,"onResize",L),L}}function V(){var t,e,n,r,i,o,a,s,u,l,c=d.fixedDirection;x?(A=x[0],k=x[1],I&&(A?k=k||A/y:A=k*y)):b?(A=(b[0]-1)*R,k=(b[1]-1)*D):v?m&&(k=(A=m)*D/R):(l=Vu({datas:d,distX:h,distY:g}),l=[0,1].map(function(t){var e=Math.abs(_[t]-c[t]);return 0!==e&&(e=2/e),l[t]*e}),I&&R&&D?(t=hs([0,0],l),e=hs([0,0],_),n=ou([A,k]),r=Math.cos(t-e)*n,_[0]?k=_[1]?(i=2*_[0]*R,o=2*_[1]*D,a=ou([i+l[0],o+l[1]])-ou([i,o]),s=hs([0,0],[y,1]),A=Math.cos(s)*a,Math.sin(s)*a):(A=r)*y:A=(k=r)/y):I||(u=Ps([],T),R||(l[0]<0?u[0]=-1:0<l[0]&&(u[0]=1)),D||(l[1]<0?u[1]=-1:0<l[1]&&(u[1]=1)),A=(_=T=u)[0]*l[0],k=_[1]*l[1]));var f=_[0]||I?Math.max(R+A,Fs):R,p=_[1]||I?Math.max(D+k,Fs):D;return I&&R&&D&&(M?p=f/y:f=p*y),[f,p]}function U(){var t;C&&(t=C([N,j]),N=t[0],j=t[1]),N=ms(N,P),j=ms(j,P)}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),f=3<Math.abs(l),p=3<Math.abs(c);return f&&(n.startWidth+=l,n.startOffsetWidth+=l,n.prevWidth+=l),p&&(n.startHeight+=c,n.startOffsetHeight+=c,n.prevHeight+=c),f||p?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var n=e.datas;if(n.isResize){n.isResize=!1;var r=xu(t,e,{});return Su(t,"onResizeEnd",r),r}},dragGroupControlCondition:zu,dragGroupControlStart:function(u,t){var l=t.datas,e=this.dragControlStart(u,t);if(!e)return!1;var r=Fu(u,"resizable",t);function i(t,e){var n=l.fixedDirection,r=l.fixedPosition,i=Zu(e.datas.startPositions||vu(t.state),n),o=ae(he(-u.rotation/180*Math.PI,3),[i[0]-r[0],i[1]-r[1],1],3),a=o[0],s=o[1];return e.datas.originalX=a,e.datas.originalY=s,e}function n(n){e.setFixedDirection(n),o.forEach(function(t,e){t.setFixedDirection(n),i(t.moveable,r[e])})}var o=ju(u,this,"dragControlStart",t,i);l.setFixedDirection=n;var a=Os(Os({},e),{targets:u.props.targets,events:o,setFixedDirection:n}),s=Su(u,"onResizeGroupStart",a);return l.isResize=!1!==s,!!l.isResize&&e},dragGroupControl:function(o,e){var t=e.datas;if(t.isResize){Eu(o,"onBeforeResize",function(t){Su(o,"onBeforeResizeGroup",bu(o,e,Os(Os({},t),{targets:o.props.targets})))});var n=this.dragControl(o,e);if(n){var r=n.boundingWidth,i=n.boundingHeight,a=n.dist,s=o.props.keepRatio,u=[r/(r-a[0]),i/(i-a[1])],l=t.fixedPosition,c=ju(o,this,"dragControl",e,function(t,e){var n=ae(he(o.rotation/180*Math.PI,3),[e.datas.originalX*u[0],e.datas.originalY*u[1],1],3),r=n[0],i=n[1];return Os(Os({},e),{parentDist:null,parentScale:u,dragClient:ne(l,[r,i]),parentKeepRatio:s})}),f=Os({targets:o.props.targets,events:c},n);return Su(o,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var r=ju(t,this,"dragControlEnd",e);return Su(t,"onResizeGroupEnd",xu(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},xc={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.edge;if(!r&&i)return(o?fc:cc)(t,e)},dragControlCondition:zu,dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.parentDirection||(r?[0,0]:hu(i.target)),a=t.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,f=a.pos1,p=a.pos2,d=a.pos4;if(!o||!c)return!1;r||qu(t,e),n.datas={},n.transform=l,n.prevDist=[1,1],n.direction=o,n.width=s,n.height=u,n.startValue=[1,1];var h=vs(f,p),g=vs(p,d),v=!o[0]&&!o[1]||o[0]||!o[1];function m(t){n.ratio=t&&isFinite(t)?t:0}function b(t){n.fixedDirection=t,n.fixedPosition=Zu(n.startPositions,t)}n.scaleWidth=h,n.scaleHeight=g,n.scaleXRatio=h/s,n.scaleYRatio=g/u,Qu(e,"scale"),n.isWidth=v,n.startPositions=vu(t.state),n.setFixedDirection=b,m(vs(f,p)/vs(p,d)),b([-o[0],-o[1]]);var x=bu(t,e,Os(Os({direction:o,set:function(t){n.startValue=t},setRatio:m,setFixedDirection:b},Ju(e)),{dragStart:sc.dragStart(t,(new Iu).dragStart([0,0],e))}));return!1!==Su(t,"onScaleStart",x)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!n.isScale&&x},dragControl:function(t,e){Xu(e,"scale");var n=e.datas,r=e.distX,i=e.distY,o=e.parentScale,a=e.parentDistance,s=e.parentKeepRatio,u=e.parentFlag,l=e.isPinch,c=e.dragClient,f=e.parentDist,p=e.isRequest,d=n.prevDist,h=n.direction,g=n.width,v=n.height,m=n.isScale,b=n.startValue,x=n.isWidth,E=n.ratio,S=n.scaleXRatio,y=n.scaleYRatio;if(!m)return!1;var M=t.props,R=M.throttleScale,D=M.parentMoveable,w=h;h[0]||h[1]||(w=[1,1]);var C,O,P,B,z,G,T,_,A=E&&(null!=s?s:M.keepRatio)||!1,k=t.state,I=1,F=1;f?(I=(g+f[0])/g,F=(v+f[1])/v):o?(I=o[0],F=o[1]):l?a&&(I=(g+a)/g,F=(v+a*v/g)/v):(C=Vu({datas:n,distX:r,distY:i}),T=w[0]*C[0]*S,_=w[1]*C[1]*y,A&&g&&v&&(w[0]?_=w[1]?(O=ou([T,_]),P=hs([0,0],C),B=hs([0,0],w),z=Math.cos(P-B)*O,G=hs([0,0],[E,1]),T=Math.cos(G)*z,Math.sin(G)*z):T/E:T=_*E),I=(g+T/S)/g,F=(v+_/y)/v),I=w[0]||A?I*b[0]:b[0],F=w[1]||A?F*b[1]:b[1],0===I&&(I=1e-9*(0<d[0]?1:-1)),0===F&&(F=1e-9*(0<d[1]?1:-1));var N,j=[I/b[0],F/b[1]],Y=[I,F];l||!t.props.groupable||$a(N=(k.snapRenderInfo||{}).direction)&&(N[0]||N[1])&&(k.snapRenderInfo={direction:h,request:e.isRequest}),Su(t,"onBeforeScale",bu(t,e,{scale:Y,setFixedDirection:n.setFixedDirection,setScale:function(t){j=[(Y=t)[0]/b[0],Y[1]/b[1]]}}));var q,X,W,H=c,L=[0,0];c||(H=!u&&l?ul(t,[0,0]):n.fixedPosition),l||(L=rc(t,j,h,p,n)),A?(w[0]&&w[1]&&L[0]&&L[1]&&(Math.abs(L[0]*g)>Math.abs(L[1]*v)?L[1]=0:L[0]=0),(q=!L[0]&&!L[1])&&(x?j[0]=ms(j[0]*b[0],R)/b[0]:j[1]=ms(j[1]*b[1],R)/b[1]),w[0]&&!w[1]||L[0]&&!L[1]||q&&x?(j[0]+=L[0],X=g*j[0]*b[0]/E,j[1]=X/v/b[1]):(!w[0]&&w[1]||!L[0]&&L[1]||q&&!x)&&(j[1]+=L[1],W=v*j[1]*b[1]*E,j[0]=W/g/b[0])):(j[0]+=L[0],j[1]+=L[1],L[0]||(j[0]=ms(j[0]*b[0],R)/b[0]),L[1]||(j[1]=ms(j[1]*b[1],R)/b[1])),0===j[0]&&(j[0]=1e-9*(0<d[0]?1:-1)),0===j[1]&&(j[1]=1e-9*(0<d[1]?1:-1));var V,U,$=[j[0]/d[0],j[1]/d[1]];U=b,Y=[(V=j)[0]*U[0],V[1]*U[1]];var Z,K,J,Q,tt,et=(Z=t,K=j,J=n.fixedDirection,Q=H,tt=n,il(Z,"scale("+K.join(", ")+")",J,Q,tt)),nt=re(et,n.prevInverseDist||[0,0]);if(n.prevDist=j,n.prevInverseDist=et,I===d[0]&&F===d[1]&&nt.every(function(t){return!t})&&!D)return!1;var rt=Wu(n,"scale("+Y.join(", ")+")","scale("+j.join(", ")+")"),it=bu(t,e,Os({offsetWidth:g,offsetHeight:v,direction:h,scale:Y,dist:j,delta:$,isPinch:!!l},rl(t,rt,nt,l,e)));return Su(t,"onScale",it),it},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,Su(t,"onScaleEnd",xu(t,e,{})),r)},dragGroupControlCondition:zu,dragGroupControlStart:function(u,t){var l=t.datas,e=this.dragControlStart(u,t);if(!e)return!1;var r=Fu(u,"resizable",t);function i(t,e){var n=l.fixedDirection,r=l.fixedPosition,i=Zu(e.datas.startPositions||vu(t.state),n),o=ae(he(-u.rotation/180*Math.PI,3),[i[0]-r[0],i[1]-r[1],1],3),a=o[0],s=o[1];return e.datas.originalX=a,e.datas.originalY=s,e}l.moveableScale=u.scale;function n(n){e.setFixedDirection(n),o.forEach(function(t,e){t.setFixedDirection(n),i(t.moveable,r[e])})}var o=ju(u,this,"dragControlStart",t,i);l.setFixedDirectionGroup=n;var a=Os(Os({},e),{targets:u.props.targets,events:o,setFixedDirection:n}),s=Su(u,"onScaleGroupStart",a);return l.isScale=!1!==s,!!l.isScale&&a},dragGroupControl:function(o,e){var n=e.datas;if(n.isScale){Eu(o,"onBeforeScale",function(t){Su(o,"onBeforeScaleGroup",bu(o,e,Os(Os({},t),{targets:o.props.targets,setFixedDirection:n.setFixedDirectionGroup})))});var t=this.dragControl(o,e);if(t){var r=n.moveableScale;o.scale=[t.scale[0]*r[0],t.scale[1]*r[1]];var a=o.props.keepRatio,s=t.dist,u=t.scale,l=n.fixedPosition,i=ju(o,this,"dragControl",e,function(t,e){var n=ae(he(o.rotation/180*Math.PI,3),[e.datas.originalX*s[0],e.datas.originalY*s[1],1],3),r=n[0],i=n[1];return Os(Os({},e),{parentDist:null,parentScale:u,parentKeepRatio:a,dragClient:ne(l,[r,i])})}),c=Os({targets:o.props.targets,events:i},t);return Su(o,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var r=ju(t,this,"dragControlEnd",e);return Su(t,"onScaleGroupEnd",xu(t,e,{targets:t.props.targets,events:r})),n}},request:function(){var e={},n=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return n+=t.deltaWidth,r+=t.deltaHeight,{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Ec(t,a){return t.map(function(t,e){return n=t,r=a[e],(n*(o=2)+r*(i=1))/(i+o);var n,r,i,o})}function Sc(t,e,n){var r=hs(t,e),i=hs(t,n)-r;return 0<=i?i:i+2*Math.PI}var yc={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,a=n.zoom;if(r||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,p=Ec(u,l),d=Ec(l,u),h=Ec(u,c),g=Ec(c,u),v=Ec(c,f),m=Ec(f,c),b=Ec(l,f),x=Ec(f,l);return Ps([e.createElement("div",{className:qs("line"),key:"middeLine1",style:su(p,v,a)}),e.createElement("div",{className:qs("line"),key:"middeLine2",style:su(d,m,a)}),e.createElement("div",{className:qs("line"),key:"middeLine3",style:su(h,b,a)}),e.createElement("div",{className:qs("line"),key:"middeLine4",style:su(g,x,a)})],cc(t,e))},dragControlCondition:function(t,e){return!e.isRequest&&xs(e.inputEvent.target,qs("direction"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,o=hu(n.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,f=a.width,p=a.height,d=a.left,h=a.top;return r.datas={},r.targetTransform=l,r.warpTargetMatrix=u?c:Qt(c,3,4),r.targetInverseMatrix=Ut($t(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=d,r.top=h,r.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(t){return re(t,s)}),r.nextPoses=r.poses.map(function(t){var e=t[0],n=t[1];return ae(r.warpTargetMatrix,[e,n,0,1],4)}),r.startValue=ge(4),r.prevMatrix=ge(4),r.absolutePoses=vu(a),r.posIndexes=Uu(o),qu(t,e),Qu(e,"matrix3d"),!(a.snapRenderInfo={request:e.isRequest,direction:o})!==Su(t,"onWarpStart",bu(t,e,Os({set:function(t){r.startValue=t}},Ju(e))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var n,r,i,o,a=e.datas,s=e.isRequest,u=e.distX,l=e.distY,c=a.targetInverseMatrix,f=a.prevMatrix,p=a.isWarp,d=a.startValue,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!p)return!1;Xu(e,"matrix3d"),dl(t,"warpable")&&(1<(n=g.map(function(t){return v[t]})).length&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]),i=(r=$l(t,s,{horizontal:n.map(function(t){return t[1]+l}),vertical:n.map(function(t){return t[0]+u})})).horizontal,o=r.vertical,l-=i.offset,u-=o.offset);var m=Vu({datas:a,distX:u,distY:l},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=ne(b[t],m)}),!ks.every(function(t){return e=t.map(function(t){return h[t]}),n=t.map(function(t){return b[t]}),r=Sc(e[0],e[1],e[2]),i=Sc(n[0],n[1],n[2]),!((o=Math.PI)<=r&&i<=o||r<=o&&o<=i);var e,n,r,i,o}))return!1;var x=be(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var E=Hu(a,ee(c,x,4),!0),S=ee($t(f,4),E,4),y=ee(d,a.prevMatrix=E,4),M=Wu(a,"matrix3d("+y.join(", ")+")","matrix3d("+E.join(", ")+")");return el(e,M),Su(t,"onWarp",bu(t,e,{delta:S,matrix:y,dist:E,multiply:ee,transform:M})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,Su(t,"onWarpEnd",xu(t,e,{})),r)}},Mc=qs("area-pieces"),Rc=qs("area-piece"),Dc=qs("avoid");function wc(t){var e,n,r,i,o,a,s=t.areaElement;s&&(n=(e=t.state).width,r=e.height,o=Dc,(i=s).classList?i.classList.remove(o):(a=new RegExp("(\\s|^)"+o+"(\\s|$)"),i.className=i.className.replace(a," ")),s.style.cssText+="left: 0px; top: 0px; width: "+n+"px; height: "+r+"px")}function Cc(t){return t.createElement("div",{key:"area_pieces",className:Mc},t.createElement("div",{className:Rc}),t.createElement("div",{className:Rc}),t.createElement("div",{className:Rc}),t.createElement("div",{className:Rc}))}var Oc={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,a=n.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,f=a?qs("area","pass"):qs("area");if(o)return[e.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f}),Cc(e)];if(!r||!i)return[];var p=be([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=p.length?Js(p,!0):"none";return[e.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),Cc(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,f=u.rootMatrix,p=u.is3d,d=l.left,h=l.top,g=nu(c),v=g.left,m=g.top,b=g.width,x=g.height,E=wu(f,[r-d,i-h],p?4:3),S=E[0],y=E[1],M=[{left:v,top:m,width:b,height:(y-=m)-10},{left:v,top:m,width:(S-=v)-10,height:x},{left:v,top:m+y+10,width:b,height:x-y-10},{left:v+S+10,top:m,width:b-S-10,height:x}],R=[].slice.call(s.nextElementSibling.children);M.forEach(function(t,e){R[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),a=Dc,(o=s).classList?o.classList.add(a):o.className+=" "+a,u.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,wc(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||wc(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){wc(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&us(function(){e.disableNativeEvent=!1})}},Pc=Bs("origin",{render:function(t,e){var n=t.props.zoom,r=t.state,i=r.beforeOrigin,o=r.rotation;return[e.createElement("div",{className:qs("control","origin"),style:uu(o,n,i),key:"beforeOrigin"})]}});function Bc(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var zc={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(o,a){var t=o.props.scrollContainer,e=void 0===t?o.getContainer():t,n=new en,r=Gu(e,!0);a.datas.dragScroll=n;var i=a.isControl?"controlGesto":"targetGesto",s=a.targets;n.on("scroll",function(t){var e=t.container,n=t.direction,r=bu(o,a,{scrollContainer:e,direction:n}),i=s?"onScrollGroup":"onScroll";s&&(r.targets=s),Su(o,i,r)}).on("move",function(t){var e=t.offsetX,n=t.offsetY;o[i].scrollBy(e,n,a.inputEvent,!1)}),n.dragStart(a,{container:r})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,u=r.getScrollPosition,l=void 0===u?Bc:u;return n.drag(e,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Os(Os({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Os(Os({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Os(Os({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Os(Os({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Os(Os({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,Os(Os({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Os(Os({},e),{targets:t.props.targets}))}},Gc={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},Tc=Bs("padding",{render:function(t,o){var e=t.props;if(e.dragArea)return[];var n=e.padding||{},r=n.left,i=void 0===r?0:r,a=n.top,s=void 0===a?0:a,u=n.right,l=void 0===u?0:u,c=n.bottom,f=void 0===c?0:c,p=t.state,d=p.renderPoses,h=[p.pos1,p.pos2,p.pos3,p.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<l&&g.push([1,3]),0<f&&g.push([2,3]),g.map(function(t,e){var n=t[0],r=t[1],i=be([0,0],[100,0],[0,100],[100,100],h[n],h[r],d[n],d[r]);if(i.length)return o.createElement("div",{key:"padding"+e,className:qs("padding"),style:{transform:Js(i,!0)}})})}}),_c=["nw","ne","se","sw"];function Ac(t,e){var n=t[0]+t[1],r=e<n?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var kc=[1,2,5,6],Ic=[0,3,4,7],Fc=[1,-1,-1,1],Nc=[1,1,-1,-1];function jc(t,a,s,u,l,c,f,p,d){void 0===c&&(c=0),void 0===f&&(f=0),void 0===p&&(p=u),void 0===d&&(d=l);var h=[],g=!1,e=t.map(function(t,e){var n=a[e],r=n.horizontal,i=n.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-f:d-t[1]);return h.push(Pu(o,l,s)),o}o=Math.max(0,1===r?t[0]-c:p-t[0]);return h.push(Pu(o,u,s)),o});return{styles:h,raws:e}}function Yc(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function qc(t,r,i,o,a,e){var n,s,u;void 0===e&&(e=[0,0]);var l=t.indexOf("/"),c=(-1<l?t.slice(0,l):t).length,f=t.slice(0,c),p=t.slice(c+1),d=f[0],h=void 0===d?"0px":d,g=f[1],v=void 0===g?h:g,m=f[2],b=void 0===m?h:m,x=f[3],E=void 0===x?v:x,S=p[0],y=void 0===S?h:S,M=p[1],R=void 0===M?y:M,D=p[2],w=void 0===D?y:D,C=p[3],O=void 0===C?R:C,P=[h,v,b,E].map(function(t){return cs(t,r)}),B=[y,R,w,O].map(function(t){return cs(t,i)}),z=P.slice(),G=B.slice(),T=Ac([z[0],z[1]],r);z[0]=T[0],z[1]=T[1],n=Ac([z[3],z[2]],r),z[3]=n[0],z[2]=n[1],s=Ac([G[0],G[3]],i),G[0]=s[0],G[3]=s[1],u=Ac([G[1],G[2]],i),G[1]=u[0],G[2]=u[1];var _=z.slice(0,Math.max(e[0],f.length)),A=G.slice(0,Math.max(e[1],p.length));return Ps(Ps([],_.map(function(t,e){var n=_c[e];return{horizontal:Fc[e],vertical:0,pos:[o+t,a+(-1===Nc[e]?i:0)],sub:!0,raw:P[e],direction:n}})),A.map(function(t,e){var n=_c[e];return{horizontal:0,vertical:Nc[e],pos:[o+(-1===Fc[e]?r:0),a+t],sub:!0,raw:B[e],direction:n}}))}function Xc(t,e,n,r,i){void 0===i&&(i=e.length);var o=Yc(t.slice(r)),a=o.horizontalRange,s=o.verticalRange,u=n-r,l=0;if(0==u)l=i;else if(0<u&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(n,l),e.splice(n,l)}function Wc(t,e,n,r,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=Yc(t.slice(n)),p=f.horizontalRange,d=f.verticalRange;if(-1<r)for(var h=1===Fc[r]?o-l:s-o,g=p[1];g<=r;++g){var v=1===Nc[g]?c:u,m=0;if(r===g?m=o:0===g?m=l+h:-1===Fc[g]&&(m=s-(e[n][0]-l)),t.splice(n+g,0,{horizontal:Fc[g],vertical:0,pos:[m,v]}),e.splice(n+g,0,[m,v]),0===g)break}else if(-1<i){var b,x=1===Nc[i]?a-c:u-a;0===p[1]&&0===d[1]&&(b=[l+x,c],t.push({horizontal:Fc[0],vertical:0,pos:b}),e.push(b));for(var E=d[0],g=d[1];g<=i;++g){m=1===Fc[g]?l:s,v=0;if(i===g?v=a:0===g?v=c+x:1===Nc[g]?v=e[n+E][1]:-1===Nc[g]&&(v=u-(e[n+E][1]-c)),t.push({horizontal:0,vertical:Nc[g],pos:[m,v]}),e.push([m,v]),0===g)break}}}function Hc(t,n){return void 0===n&&(n=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,e){return t.horizontal?n[e]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,e){return t.vertical?n[e]:null}).filter(function(t){return null!=t})}}var Lc=[[0,-1,"n"],[1,0,"e"]],Vc=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Uc(t,e,n){var r=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=e.type,u=e.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return n.map(function(t){return Pu(t[0],o,r)+" "+Pu(t[1],a,r)});if(l||"inset"===s){var f=n[1][1],p=n[3][0],d=n[7][0],h=n[5][1];if(l)return[f,p,h,d].map(function(t){return t+"px"});var g,v,m,b=[f,o-p,a-h,d].map(function(t,e){return Pu(t,e%2?o:a,r)});return 8<n.length&&(v=(g=re(n[4],n[0]))[0],m=g[1],b.push.apply(b,Ps(["round"],jc(n.slice(8),u.slice(8),r,v,m,d,f,p,h).styles))),b}if(c||"ellipse"===s){var x=n[0],E=Pu(Math.abs(n[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,r);return(b=c?[E]:[Pu(Math.abs(n[2][0]-x[0]),o,r),E]).push("at",Pu(x[0],o,r),Pu(x[1],a,r)),b}}function $c(t,e,n,r){var a=[r,(r+e)/2,e],s=[t,(t+n)/2,n];return Vc.map(function(t){var e=t[0],n=t[1],r=t[2],i=a[e+1],o=s[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:r,pos:[i,o]}})}function Zc(t,i,o,e,n){var r,a,s,u=n;if(u||(u="none"!==(s=(a=yu(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=e)){var l=rs(u),c=l.prefix,f=void 0===c?u:c,p=l.value,d=void 0===p?"":p,h="circle"===f,g=" ";if("polygon"===f){g=",";return{type:f,clipText:u,poses:z=(P=ns(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var e=t.split(" "),n=e[0],r=e[1];return{vertical:1,horizontal:1,pos:[cs(n,i),cs(r,o)]}}),splitter:g}}if(h||"ellipse"===f){var v,m,b,x,E,S,y,M,R,D="",w="",C=0,O=0,P=es(d);O=h?(m="",m=void 0===(v=P[0])?"50%":v,D=void 0===(b=P[2])?"50%":b,w=void 0===(x=P[3])?"50%":x,C=cs(m,Math.sqrt((i*i+o*o)/2))):(M=S="",S=void 0===(E=P[0])?"50%":E,M=void 0===(y=P[1])?"50%":y,D=void 0===(R=P[3])?"50%":R,w=void 0===(r=P[4])?"50%":r,C=cs(S,i),cs(M,o));var B=[cs(D,i),cs(w,o)],z=Ps([{vertical:1,horizontal:1,pos:B,direction:"nesw"}],Lc.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[B[0]+t[0]*C,B[1]+t[1]*O]}}));return{type:f,clipText:u,radiusX:C,radiusY:O,left:B[0]-C,top:B[1]-O,poses:z,splitter:g}}if("inset"===f){var G=(P=es(d||"0 0 0 0")).indexOf("round"),T=(-1<G?P.slice(0,G):P).length,_=P.slice(T+1),A=P.slice(0,T),k=A[0],I=A[1],F=void 0===I?k:I,N=A[2],j=void 0===N?k:N,Y=A[3],q=void 0===Y?F:Y,X=[k,j].map(function(t){return cs(t,o)}),W=X[0],H=X[1],L=[q,F].map(function(t){return cs(t,i)}),V=L[0],U=L[1],$=i-U,Z=o-H,K=qc(_,$-V,Z-W,V,W);return{type:"inset",clipText:u,poses:z=Ps(Ps([],$c(W,$,Z,V)),K),top:W,left:V,right:$,bottom:Z,radius:_,splitter:g}}if("rect"===f){g=",";var J=(P=ns(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t){return is(t).value});return{type:"rect",clipText:u,poses:z=$c(W=J[0],U=J[1],H=J[2],V=J[3]),top:W,right:U,bottom:H,left:V,values:P,splitter:g}}}}var Kc={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,s){var e=t.props,n=e.customClipPath,r=e.defaultClipPath,i=e.clipArea,u=e.zoom,o=t.state,a=o.target,l=o.width,c=o.height,f=o.allMatrix,p=o.is3d,d=o.left,h=o.top,g=o.pos1,v=o.pos2,m=o.pos3,b=o.pos4,x=o.clipPathState,E=o.snapBoundInfos,S=o.rotation;if(!a)return[];var y=Zc(a,l,c,r||"inset",x||n);if(!y)return[];var M,R,D,w,C,O,P=p?4:3,B=y.type,z=y.poses.map(function(t){var e=tu(f,t.pos,P);return[e[0]-d,e[1]-h]}),G=[],T=[],_="rect"===B,A="inset"===B,k="polygon"===B;if((_||A||k)&&(M=A?z.slice(0,8):z,T=M.map(function(t,e){var n=0===e?M[M.length-1]:M[e-1],r=hs(n,t),i=au(n,t);return s.createElement("div",{key:"clipLine"+e,className:qs("line","clip-line","snap-control"),"data-clip-index":e,style:{width:i+"px",transform:"translate("+n[0]+"px, "+n[1]+"px) rotate("+r+"rad) scaleY("+u+")"}})})),G=z.map(function(t,e){return s.createElement("div",{key:"clipControl"+e,className:qs("control","clip-control","snap-control"),"data-clip-index":e,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+S+"rad) scale("+u+")"}})}),A&&G.push.apply(G,z.slice(8).map(function(t,e){return s.createElement("div",{key:"clipRadiusControl"+e,className:qs("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+e,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+S+"rad) scale("+u+")"}})})),"circle"===B||"ellipse"===B){var I=y.left,F=y.top,N=y.radiusX,j=y.radiusY,Y=re(tu(f,[I,F],P),tu(f,[0,0],P)),q=Y[0],X=Y[1],W="none";if(!i){for(var H=Math.max(10,N/5,j/5),L=[],V=0;V<=H;++V){var U=2*Math.PI/H*V;L.push([N+(N-u)*Math.cos(U),j+(j-u)*Math.sin(U)])}L.push([N,-2]),L.push([-2,-2]),L.push([-2,2*j+2]),L.push([2*N+2,2*j+2]),L.push([2*N+2,-2]),L.push([N,-2]),W="polygon("+L.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}G.push(s.createElement("div",{key:"clipEllipse",className:qs("clip-ellipse","snap-control"),style:{width:2*N+"px",height:2*j+"px",clipPath:W,transform:"translate("+(-d+q)+"px, "+(-h+X)+"px) "+Js(f)}}))}return i&&(D=(R=nu(Ps([g,v,m,b],z))).width,w=R.height,C=R.left,O=R.top,(k||_||A)&&(L=A?z.slice(0,8):z,G.push(s.createElement("div",{key:"clipArea",className:qs("clip-area","snap-control"),style:{width:D+"px",height:w+"px",transform:"translate("+C+"px, "+O+"px)",clipPath:"polygon("+L.map(function(t){return t[0]-C+"px "+(t[1]-O)+"px"}).join(", ")+")"}})))),E&&["vertical","horizontal"].forEach(function(o){var t=E[o],a="horizontal"===o;t.isSnap&&T.push.apply(T,t.snap.posInfos.map(function(t,e){var n=t.pos,r=re(tu(f,a?[0,n]:[n,0],P),[d,h]),i=re(tu(f,a?[l,n]:[n,c],P),[d,h]);return lc(s,"",r,i,u,"clip"+o+"snap"+e,"guideline")})),t.isBound&&T.push.apply(T,t.bounds.map(function(t,e){var n=t.pos,r=re(tu(f,a?[0,n]:[n,0],P),[d,h]),i=re(tu(f,a?[l,n]:[n,c],P),[d,h]);return lc(s,"",r,i,u,"clip"+o+"bounds"+e,"guideline","bounds","bold")}))}),Ps(Ps([],G),T)},dragControlCondition:function(t,e){return e.inputEvent&&-1<(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,e){var n=t.props.dragWithClip;return void 0!==n&&!n&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,e)},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,a=n.target,s=n.width,u=n.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",f=e.datas,p=Zc(a,s,u,i||"inset",o);if(!p)return!1;var d=p.clipText;return!1===Su(t,"onClipStart",bu(t,e,{clipType:p.type,clipStyle:d,poses:p.poses.map(function(t){return t.pos})}))?f.isClipStart=!1:(f.isControl=c&&-1<c.indexOf("clip-control"),f.isLine=-1<c.indexOf("clip-line"),f.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),f.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,n.clipPathState=d,qu(t,e),!0)},dragControl:function(t,e){var n=e.datas,r=e.originalDatas;if(!n.isClipStart)return!1;var i=n.isControl,o=n.isLine,a=n.isArea,s=n.index,u=n.clipPath;if(!u)return!1;var l=Vu(e),c=l[0],f=l[1],p=t.props,d=t.state,h=d.width,g=d.height,v=!a&&!i&&!o,m=u.type,b=u.poses,x=u.splitter,E=b.map(function(t){return t.pos});v&&(c=-c,f=-f);var S,y,M,R,D,w,C,O,P,B,z,G,T,_,A,k=!i||"nesw"===b[s].direction,I="inset"===m||"rect"===m,F=b.map(function(){return[0,0]});i&&!k?(y=(S=b[s]).horizontal,M=S.vertical,R=[c*Math.abs(y),f*Math.abs(M)],C=R,O=I,z=(D=b)[w=s],G=z.direction,T=z.sub,_=D.map(function(){return[0,0]}),A=G?G.split(""):[],O&&w<8?(P=A.filter(function(t){return"w"===t||"e"===t})[0],B=A.filter(function(t){return"n"===t||"s"===t})[0],_[w]=C,D.forEach(function(t,e){var n=t.direction;n&&(-1<n.indexOf(P)&&(_[e][0]=C[0]),-1<n.indexOf(B)&&(_[e][1]=C[1]))}),P&&(_[1][0]=C[0]/2,_[5][0]=C[0]/2),B&&(_[3][1]=C[1]/2,_[7][1]=C[1]/2)):G&&!T?A.forEach(function(o){var a="n"===o||"s"===o;D.forEach(function(t,e){var n=t.direction,r=t.horizontal,i=t.vertical;n&&-1!==n.indexOf(o)&&(_[e]=[a||!r?0:C[0],a&&i?C[1]:0])})}):_[w]=C,F=_):k&&(F=E.map(function(){return[c,f]}));var N=E.map(function(t,e){return ne(t,F[e])}),j=Ps([],N);d.snapBoundInfos=null;var Y,q,X,W,H,L,V="circle"===u.type,U="ellipse"===u.type;(V||U)&&(Y=nu(N),q=Math.abs(Y.bottom-Y.top),X=Math.abs(U?Y.right-Y.left:q),W=N[0][1]+q,H=N[0][0]-X,L=N[0][0]+X,V&&(j.push([L,Y.bottom]),F.push([1,0])),j.push([Y.left,W]),F.push([0,1]),j.push([H,Y.bottom]),F.push([1,0]));var $,Z=vl((p.clipHorizontalGuidelines||[]).map(function(t){return cs(""+t,g)}),(p.clipVerticalGuidelines||[]).map(function(t){return cs(""+t,h)}),h,g),K=[],J=[];J=V||U?(K=[j[4][0],j[2][0]],[j[1][1],j[3][1]]):I?(et=[j[0],j[2],j[4],j[6]],$=[F[0],F[2],F[4],F[6]],K=et.filter(function(t,e){return $[e][0]}).map(function(t){return t[0]}),et.filter(function(t,e){return $[e][1]}).map(function(t){return t[1]})):(K=j.filter(function(t,e){return F[e][0]}).map(function(t){return t[0]}),j.filter(function(t,e){return F[e][1]}).map(function(t){return t[1]}));for(var Q=[0,0],tt=0;tt<2;++tt){if("break"===function(){var t=Zl(Z,p.clipTargetBounds&&{left:0,top:0,right:h,bottom:g},K,J,5),e=t.horizontal,n=t.vertical,r=e.offset,i=n.offset;if(e.isBound&&(Q[1]+=r),n.isBound&&(Q[0]+=i),!U&&!V||0!==F[0][0]||0!==F[0][1])return j.forEach(function(t,e){var n=F[e];n[0]&&(t[0]-=i),n[1]&&(t[1]-=r)}),"break";var o=nu(N),a=o.bottom-o.top,s=U?o.right-o.left:a;s-=n.isBound?Math.abs(i):0===n.snapIndex?-i:i,a-=e.isBound?Math.abs(r):0===e.snapIndex?-r:r,V&&(s=a=0<Rl(n,e)?a:s);var u=j[0];j[1][1]=u[1]-a,j[2][0]=u[0]+s,j[3][1]=u[1]+a,j[4][0]=u[0]-s}())break}var et,nt,rt,it=Uc(t,u,N),ot=m+"("+it.join(x)+")";return d.clipPathState=ot,J=V||U?(K=[j[4][0],j[2][0]],[j[1][1],j[3][1]]):I?(et=[j[0],j[2],j[4],j[6]],K=et.map(function(t){return t[0]}),et.map(function(t){return t[1]})):(K=j.map(function(t){return t[0]}),j.map(function(t){return t[1]})),d.snapBoundInfos=Zl(Z,p.clipTargetBounds&&{left:0,top:0,right:h,bottom:g},K,J,1),r.draggable&&(nt=d.is3d?4:3,rt=ee(d.allMatrix,[Q[0],Q[1],0,0],nt),Q[0]=rt[0],Q[1]=rt[1],r.draggable.deltaOffset=Q),Su(t,"onClip",bu(t,e,{clipEventType:"changed",clipType:m,poses:N,clipStyle:ot,clipStyles:it,distX:c,distY:f})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(Su(t,"onClipEnd",xu(t,e,{})),i&&(s?function(t,e){var n=e.datas,r=n.clipPath,i=n.index,o=r.type,a=r.poses,s=r.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(Xc(a,u,i,8,l),l===a.length)return}var c=Uc(t,r,u);Su(t,"onClip",bu(t,e,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(s)+")",distX:0,distY:0}))}(t,e):o&&function(t,e){var n=Yu(t,e),r=n[0],i=n[1],o=e.datas,a=o.clipPath,s=o.index,u=a.type,l=a.poses,c=a.splitter,f=l.map(function(t){return t.pos});if("polygon"===u)f.splice(s,0,[r,i]);else{if("inset"!==u)return;var p=kc.indexOf(s),d=Ic.indexOf(s),h=l.length;if(Wc(l,f,8,p,d,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),h===l.length)return}var g=Uc(t,a,f);Su(t,"onClip",bu(t,e,{clipEventType:"added",clipType:u,poses:f,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,e)),i||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Jc={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:xs(e.inputEvent.target,qs("origin"))},dragControlStart:function(t,e){var n=e.datas;qu(t,e);var r=bu(t,e,{dragStart:sc.dragStart(t,(new Iu).dragStart([0,0],e))}),i=Su(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],!(n.isDragOrigin=!0)===i?n.isDragOrigin=!1:r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o,a=Vu(e),s=a[0],u=a[1],l=t.state,c=l.width,f=l.height,p=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,b=[s,u];!i||((o=e.distOrigin)[0]||o[1])&&(b=o);var x=ne(n.startOrigin,b),E=ne(n.startTargetOrigin,b),S=re(b,n.prevOrigin),y=Ku(p,d,x,m),M=t.getRect(),R=nu(eu(y,c,f,m)),D=[M.left-R.left,M.top-R.top],w=bu(t,e,{width:c,height:f,origin:x,dist:n.prevOrigin=b,delta:S,transformOrigin:[Pu(E[0],c,v),Pu(E[1],f,v)].join(" "),drag:sc.drag(t,ku(e,t.state,D,!!r,!1))});return Su(t,"onDragOrigin",w),w},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(Su(t,"onDragOriginEnd",xu(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Qc(t,e,n,r,i){void 0===r&&(r=[0,0]);var o,a;return qc(!(a=i||((o=yu(t))&&o.borderRadius||""))||!i&&"0px"===a?[]:es(a),e,n,0,0,r)}function tf(t,e,n,r,i,o){var a=t.state,s=a.width,u=a.height,l=jc(o,i,t.props.roundRelative,s,u),c=l.raws,f=l.styles,p=Hc(i,c),d=p.horizontals,h=p.verticals,g=f.join(" ");Su(t,"onRound",bu(t,e,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:r,dist:n}))}var ef={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,i){var e=t.state,n=e.target,r=e.width,o=e.height,a=e.allMatrix,s=e.is3d,u=e.left,l=e.top,c=e.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,g=void 0===h?[4,4]:h,v=f.zoom;if(!n)return null;var m=s?4:3,b=Qc(n,r,o,d,c);if(!b)return null;var x=0,E=0;return b.map(function(t,e){E+=Math.abs(t.horizontal),x+=Math.abs(t.vertical);var n=re(tu(a,t.pos,m),[u,l]),r=t.vertical?x<=g[1]:E<=g[0];return i.createElement("div",{key:"borderRadiusControl"+e,className:qs("control","border-radius"),"data-radius-index":e,style:{display:r?"block":"none",transform:"translate("+n[0]+"px, "+n[1]+"px) scale("+v+")"}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return-1<n.indexOf("border-radius")||-1<n.indexOf("moveable-line")&&-1<n.indexOf("moveable-direction")},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,o=i.getAttribute("class")||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===Su(t,"onRoundStart",bu(t,e,{})))return!1;r.lineIndex=l,r.controlIndex=u,r.isControl=a,r.isLine=s,qu(t,e);var c=t.props,f=c.roundRelative,p=c.minRoundControls,d=void 0===p?[0,0]:p,h=t.state,g=h.target,v=h.width,m=h.height;r.isRound=!0,r.prevDist=[0,0];var b=Qc(g,v,m,d)||[];return r.controlPoses=b,h.borderRadiusState=jc(b.map(function(t){return t.pos}),b,f,v,m).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var r=n.controlIndex,i=n.controlPoses,o=Vu(e),a=o[0],s=o[1],u=[a,s],l=re(u,n.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,p=t.state,d=p.width,h=p.height,g=i[r],v=g.vertical,m=g.horizontal,b=i.map(function(t){var e=t.horizontal,n=t.vertical,r=[e*m*u[0],n*v*u[1]];if(e){if(1===f[0])return r;if(f[0]<4&&e!==m)return r}else{if(0===f[1])return r[1]=n*m*u[0]/d*h,r;if(v){if(1===f[1])return r;if(f[1]<4&&n!==v)return r}}return[0,0]});b[r]=u;var x=i.map(function(t,e){return ne(t.pos,b[e])});return n.prevDist=[a,s],tf(t,e,u,l,i,x),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y=n.width,M=n.height,R=r.isControl,D=r.controlIndex,w=r.isLine,C=r.lineIndex,O=r.controlPoses,P=O.map(function(t){return t.pos}),B=P.length,z=t.props.roundClickable;return i&&(void 0===z||z)&&(R?Xc(O,P,D,0):w&&(a=(o=Yu(t,e))[0],s=o[1],l=P,c=C,f=a,p=s,d=y,h=M,g=Hc(u=O),v=g.horizontals,m=g.verticals,b=v.length,x=m.length,S=E=-1,0===c?0===b?E=0:1===b&&(E=1):3===c&&(b<=2?E=2:b<=3&&(E=3)),2===c?0===x?S=0:x<4&&(S=3):1===c&&(x<=1?S=1:x<=2&&(S=2)),Wc(u,l,0,E,S,f,p,d,h)),B!==O.length&&tf(t,e,[0,0],[0,0],O,P)),Su(t,"onRoundEnd",xu(t,e,{})),!(n.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}};var nf={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n,r=t.state,i=r.is3d,o=r.target,a=r.targetMatrix,s=null==o?void 0:o.style.transform,u=i?"matrix3d("+a.join(",")+")":"matrix("+oe(a,!0)+")",l=s&&"none"!==s?s:u;e.datas.startTransforms=(n=l)===(i?"matrix3d("+ge(4):"matrix("+ge(3)+")")||"matrix(1,0,0,1,0,0)"===n?[]:es(l)},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return bu(t,e,{setTransform:function(t){e.datas.startTransforms=$a(t)?t:es(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return bu(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),Su(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(e),Su(t,"onBeforeRender",bu(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){Su(t,"onBeforeRenderEnd",bu(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=Fu(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.setTransform(n,t),r.fillDragStartParams(n,t)});Su(t,"onBeforeRenderGroupStart",bu(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=Fu(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.resetTransform(t),r.fillDragParams(n,t)});Su(t,"onBeforeRenderGroup",bu(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Su(t,"onBeforeRenderGroupEnd",bu(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},rf={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){Su(t,"onRenderStart",bu(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Su(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){Su(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Su(t,"onRenderGroupStart",bu(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=Fu(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.fillDragParams(n,t)});Su(t,"onRenderGroup",bu(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,transform:nl(e),events:o}))},dragGroupEnd:function(t,e){var r=this,n=Fu(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.fillDragEndParams(n,t)});Su(t,"onRenderGroupEnd",bu(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return bu(t,e,{isPinch:!!e.isPinch,transform:nl(e)})},fillDragEndParams:function(t,e){return bu(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag})}};function of(i,t,e,n,r,o,a){var s="Start"===r,u=i.state.target,l=o.isRequest;if(!u||s&&-1<n.indexOf("Control")&&!l&&i.areaElement===o.inputEvent.target)return!1;var c=""+e+n+r,f=""+e+n+"Condition",p="End"===r,d="After"===r,h=!(!s||i.targetGesto&&i.controlGesto&&i.targetGesto.isFlag()&&i.controlGesto.isFlag());h&&i.updateRect(r,!0,!1),""!==r||l||Cu(i.state,o);var g,v=Ps([],i[t]);if(l&&(g=o.requestAble,v.some(function(t){return t.name===g})||v.push.apply(v,i.props.ables.filter(function(t){return t.name===g}))),!v.length)return!1;var m=Ps(Ps([nf],v),[rf]).filter(function(t){return t[c]}),b=o.datas;h&&m.forEach(function(t){t.unset&&t.unset(i)});var x,E=o.inputEvent;p&&E&&(x=document.elementFromPoint(o.clientX,o.clientY)||E.target);var S=0,y=m.filter(function(t){var e=t.name,n=b[e]||(b[e]={});if(s&&(n.isEventStart=!t[f]||t[f](i,o)),n.isEventStart){var r=t[c](i,Os(Os({},o),{resultCount:S,datas:n,originalDatas:b,inputTarget:x}));return i._emitter.off(),s&&!1===r&&(n.isEventStart=!1),S+=r?1:0,r}return!1}).length,M=!1;return s&&m.length&&!y&&(M=0===m.filter(function(t){var e=t.name,n=b[e];return!!n.isEventStart&&("strong"!==t.dragRelation||(n.isEventStart=!1))}).length),(p||M)&&(i.state.gesto=null,i.moveables&&i.moveables.forEach(function(t){t.state.gesto=null})),h&&M&&m.forEach(function(t){t.unset&&t.unset(i)}),s&&!l&&y&&null!=o&&o.preventDefault(),!i.isUnmounted&&!M&&((!s&&y&&!a||p)&&(i.updateRect(p?r:"",!0,!1),i.forceUpdate()),s||p||d||!y||a||of(i,t,e,n,r+"After",o),!0)}function af(n,t,e){var r=n.controlBox.getElement(),i=[];i.push(r),n.props.dragArea&&!n.props.dragTarget||i.push(t);function o(t){var e=t.inputEvent.target;return e===n.areaElement||!n.isMoveableElement(e)&&!n.controlBox.getElement().contains(e)||xs(e,"moveable-area")||xs(e,"moveable-padding")}return sf(n,i,"targetAbles",e,{dragStart:o,pinchStart:o})}function sf(i,t,o,a,s){void 0===s&&(s={});var e=i.props,n=e.pinchOutside,r=e.pinchThreshold,u={preventDefault:!1,container:window,pinchThreshold:r,pinchOutside:n},l=new vn(t,u);return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(n){l.on(""+r+n,function(t){var e=t.eventType;(!s[e]||s[e](t))&&of(i,o,r,a,n,t)||t.stop()})})}),l}var uf=function(){function t(t,e,n){var i=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this.onEvent=function(e){var n=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach(function(t){t[n](r,{inputEvent:e})})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),lf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=Os({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},fu(null)),e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new ws,e._prevTarget=null,e._prevDragArea=!1,e._observer=null,e._observerId=0,e.onPreventClick=function(t){t.stopPropagation(),Es(window,"click",e.onPreventClick,!0)},e.checkUpdateRect=function(){var t;e.isDragging()||((t=e.props.parentMoveable)?t.checkUpdateRect():(ls(e._observerId),e._observerId=us(function(){e.isDragging()||e.updateRect()})))},e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Cs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,l=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var c=n||{left:0,top:0},f=c.left,p=c.top,d=e.left,h=e.top,g=e.target,v=e.direction,m=t.targets,b=(m&&m.length||i)&&g,x=this.isDragging(),E={};return this.getEnabledAbles().forEach(function(t){E["data-able-"+t.name.toLowerCase()]=!0}),z(u,Os({cspNonce:a,ref:S(this,"controlBox"),className:qs("control-box",-1===v?"reverse":"",x?"dragging":"")+" "+r},E,{onClick:this.onPreventClick,portalContainer:l,style:{position:"absolute",display:b?"block":"none",transform:"translate3d("+(d-f)+"px, "+(h-p)+"px, "+s+")","--zoom":o,"--zoompx":o+"px"}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,r=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),n||e||r||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},n.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),mu(this,"targetGesto"),mu(this,"controlGesto");var t=this.events;for(var e in t){var n=t[e];n&&n.destroy()}},n.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(As)},n.dragStart=function(t){var e=this.targetGesto;return e&&!e.isFlag()&&e.triggerDragStart(t),this},n.hitTest=function(t){var e,n,r=this.state,i=r.target,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.targetClientRect;if(!i)return 0;var c=(n=t instanceof Element?{left:(e=t.getBoundingClientRect()).left,top:e.top,width:e.width,height:e.height}:Os({width:0,height:0},t)).left,f=n.top,p=n.width,d=n.height,h=Ye([o,a,u,s],l),g=Ue(h,[[c,f],[c+p,f],[c+p,f+d],[c,f+d]]),v=je(h);return g&&v?Math.min(100,g/v*100):0},n.isInside=function(t,e){var n=this.state,r=n.target,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=n.targetClientRect;return!!r&&Xe([t,e],Ye([i,o,s,a],u))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),s=i?i.props.rootContainer:r.rootContainer;this.updateState(fu(this.controlBox&&this.controlBox.getElement(),o,a,a,s||a),!i&&n)},n.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=vu(this.state),n=e[0],r=e[1],i=e[2],o=e[3],a=nu(e),s=t.width,u=t.height,l=a.width,c=a.height,f=a.left,p=a.top,d=[t.left,t.top],h=ne(d,t.origin);return{width:l,height:c,left:f,top:p,pos1:n,pos2:r,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:ne(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var t,e,n=this.state,r=n.pos1,i=n.pos2,o=n.direction;return t=o,e=hs(r,i)/Math.PI*180,e=0<=(e=0<=t?e:180-e)?e:360+e},n.request=function(e,t,n){void 0===t&&(t={});var r=this.props,i=r.ables,o=r.groupable,a=i.filter(function(t){return t.name===e})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=n||t.isInstant,c=u.isControl?"controlAbles":"targetAbles",f=(o?"Group":"")+(u.isControl?"Control":""),p={request:function(t){return of(s,c,"drag",f,"",Os(Os({},u.request(t)),{requestAble:e,isRequest:!0}),l),this},requestEnd:function(){return of(s,c,"drag",f,"End",Os(Os({},u.requestEnd()),{requestAble:e,isRequest:!0}),l),this}};return of(s,c,"drag",f,"Start",Os(Os({},u.requestStart(t)),{requestAble:e,isRequest:!0}),l),l?p.request(t).requestEnd():p},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,f=t.top,p=e.padding||{},d=p.left,h=void 0===d?0:d,g=p.top,v=void 0===g?0:g,m=p.bottom,b=void 0===m?0:m,x=p.right,E=void 0===x?0:x,S=o?4:3,y=e.groupable?n:ne(n,[c,f]);t.renderPoses=[ne(a,Ou(i,[-h,-v],r,y,S)),ne(s,Ou(i,[E,-v],r,y,S)),ne(u,Ou(i,[-h,b],r,y,S)),ne(l,Ou(i,[E,b],r,y,S))]},n.checkUpdate=function(){var t,e=this.props,n=e.target,r=e.container,i=e.parentMoveable,o=this.state,a=o.target,s=o.container;(a||n)&&(this.updateAbles(),Ru(a,n)&&Ru(s,r)||((t=r||this.controlBox)&&this.unsetAbles(),this.updateState({target:n,container:r}),!i&&t&&this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){this._emitter.trigger(t,e);var n=this.props[t];return n&&n(e)},n.useCSS=function(t,e){var n,r,i=this.props.customStyledMap,o=t+e;return i[o]||(i[o]=(n=t,r=Dn(e),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injector=r,t.tag=n,t}return ys(t,e),t}(Rs))),i[o]},n.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(t){t.unset&&t.unset(e)})},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always&&!1!==n[t.name]||n[t.name])}),o="drag"+e+"ControlStart",a=Mu(i,["drag"+e+"Start","pinch"+e+"Start"],r),s=Mu(i,[o],r);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=s},n.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var n=this.state;for(var r in t)n[r]=t[r]}},n.getEnabledAbles=function(){var e=this.props;return e.ables.filter(function(t){return t&&e[t.name]})},n.renderAbles=function(){var i,o,a,s,t,e=this,n=this.props.triggerAblesSimultaneously,r={createElement:z};return t=Mu(this.getEnabledAbles(),["render"],n).map(function(t){return(0,t.render)(e,r)||[]}),i=t.reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,e){var n=o(t,e,i),r=s[n];r||(r=[],s[n]=r,a.push(r)),r.push(t)}),a.map(function(t){return t[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._updateObserver=function(t){var e,n,r=this.props,i=r.target;window.ResizeObserver&&i&&r.useResizeObserver?t.target===i&&this._observer||((n=new ResizeObserver(this.checkUpdateRect)).observe(i,{box:"border-box"}),this._observer=n):null!==(e=this._observer)&&void 0!==e&&e.disconnect()},n._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,r=this.props,i=r.dragTarget||r.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(mu(this,"targetGesto"),this.updateState({gesto:null})),n||mu(this,"controlGesto"),i&&e&&!this.targetGesto&&(this.targetGesto=af(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=sf(this,t,"controlAbles","Control"))},n._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},n._renderLines=function(){var t=this.props,e=t.edge,n=t.zoom;if(t.hideDefaultLines)return[];var r=this.state.renderPoses,i={createElement:z};return[lc(i,e?"n":"",r[0],r[1],n,0),lc(i,e?"e":"",r[1],r[3],n,1),lc(i,e?"w":"",r[0],r[2],n,2),lc(i,e?"s":"",r[2],r[3],n,3)]},n._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevTarget,i=this._prevDragArea,o=e.dragArea;return!o&&r!==n||(t||o)&&i!==o},n._updateNativeEvents=function(){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,t=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}(s);if(this._isTargetChanged())for(var e in s){var n=s[e];n&&n.destroy(),s[e]=null}a&&(i=this.enabledAbles,t.forEach(function(t){var e=Mu(i,[t]),n=0<e.length,r=s[t];n?(r||(r=new uf(a,o,t),s[t]=r),r.setAbles(e)):r&&(r.destroy(),s[t]=null)}))},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},e}(q),cf={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(n,r){var t=n.props.targets||[];n.moveables=[];var e=n.state,i={left:e.left,top:e.top},o=n.props;return t.map(function(t,e){return r.createElement(lf,{key:"moveable"+e,ref:a(n,"moveables",e),target:t,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,parentMoveable:n,parentPosition:i})})}},ff=Bs("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,e){var n,r,i,o;e.isRequest||(n=window,r="click",i=t.onPreventClick,o=!0,n.addEventListener(r,i,o))},dragControlStart:function(t,e){this.dragStart(t,e)},dragGroupStart:function(t,e){this.dragStart(t,e),e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){this.endEvent(t);var n,r=t.state.target,i=e.inputEvent,o=e.inputTarget,a=!t.isMoveableElement(o)&&t.controlBox.getElement().contains(o);e.isDrag&&!a||this.unset(t),!i||!o||e.isDrag||t.isMoveableElement(o)||a||(n=r.contains(o),Su(t,"onClick",bu(t,e,{isDouble:e.isDouble,inputTarget:o,isTarget:r===o,containsTarget:n})))},dragGroupEnd:function(t,e){this.endEvent(t);var n,r,i,o,a=e.inputEvent,s=e.inputTarget;a&&s&&!e.isDrag&&!t.isMoveableElement(s)&&e.datas.inputTarget!==s&&(i=-1<(r=(n=t.props.targets).indexOf(s)),o=!1,-1===r&&(o=-1<(r=as(n,function(t){return t.contains(s)}))),Su(t,"onClickGroup",bu(t,e,{isDouble:e.isDouble,targets:n,inputTarget:s,targetIndex:r,isTarget:i,containsTarget:o})))},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)},endEvent:function(t){var e=this;us(function(){e.unset(t)})},unset:function(t){Es(window,"click",t.onPreventClick,!0)}});function pf(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Os(Os({},t),{datas:e})}var df=Bs("edgeDraggable",{dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return xs(n,qs("direction"))&&xs(n,qs("line"))},dragControlStart:function(t,e){return sc.dragStart(t,pf(e))},dragControl:function(t,e){return sc.drag(t,pf(e))},dragControlEnd:function(t,e){return sc.dragEnd(t,pf(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return xs(n,qs("direction"))&&xs(n,qs("line"))},dragGroupControlStart:function(t,e){return sc.dragGroupStart(t,pf(e))},dragGroupControl:function(t,e){return sc.dragGroup(t,pf(e))},dragGroupControlEnd:function(t,e){return sc.dragGroupEnd(t,pf(e))},unset:function(t){return sc.unset(t)}}),hf={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},gf=Ga,vf=Jn,mf=za,bf=[nf,Gc,ac,Au,sc,df,mc,bc,xc,yc,zc,Tc,Pc,Jc,Kc,ef,cf,hf,ff,Oc,rf].reduce(function(t,e){return Os(Os({},t),e.props)},{}),xf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(function(s){function t(t,e){void 0===e&&(e={});var n=s.call(this)||this;n.tempElement=document.createElement("div");var r=u({},e),i={};mf.forEach(function(e){i[("on "+e).replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})]=function(t){return n.trigger(e,t)}}),V(z(Fa,u({ref:S(n,"innerMoveable"),parentElement:t},r,i)),n.tempElement);var o,a=r.target;return o=a,Array.isArray(o)&&1<a.length&&n.updateRect(),n}i(t,s);var e=t.prototype;return e.setState=function(t,e){this.innerMoveable.setState(t,e)},e.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},e.dragStart=function(t){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t)},e.destroy=function(){V(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}([o(vf,function(t,r){t[r]||(t[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getMoveable();if(n&&n[r])return n[r].apply(n,t)})}),o(gf,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getMoveable().props[n]},set:function(t){var e;this.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(Ke));var Ef={__proto__:null,default:xf,PROPERTIES:gf,METHODS:vf,EVENTS:mf,PROPS_MAP:bf,getElementInfo:function(t,e,n){return r=e,void 0===(i=n)&&(i=r),ur(t,r,i,!0);var r,i},makeAble:In};for(var Sf in Ef)xf[Sf]=Ef[Sf];return xf});
//# sourceMappingURL=moveable.min.js.map
