/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.20.1
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Moveable=n()}(this,function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function i(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var u=function(){return(u=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function S(n,r){return function(t){t&&(n[r]=t)}}function r(r,e){return function(t){var n=t.prototype;r.forEach(function(t){e(n,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var r=this.keys,e=this.values,i=r.indexOf(t),o=-1===i?r.length:i;r[o]=t,e[o]=n},t}(),x=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),M="function"==typeof Map,o=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var y=function(){function t(t,n,r,e,i,o,a,s){this.prevList=t,this.list=n,this.added=r,this.removed=e,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t,r,s,u,n=(t=this.changedBeforeAdded,r=this.fixed,s=[],u=[],t.forEach(function(t){var n=t[0],r=t[1],e=new o;s[n]=e,u[r]=e}),s.forEach(function(t,n){t.connect(s[n-1])}),t.filter(function(t,n){return!r[n]}).map(function(t,n){var r=t[0],e=t[1];if(r===e)return[0,0];var i=s[r],o=u[e-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})),l=this.changed,c=[];this.cacheOrdered=n.filter(function(t,n){var r=t[0],e=t[1],i=l[n],o=i[0],a=i[1];if(r!==e)return c.push([o,a]),!0}),this.cachePureChanged=c},t}();function l(t,n,r){var e=M?Map:r?x:b,i=r||function(t){return t},o=[],a=[],s=[],u=t.map(i),l=n.map(i),c=new e,f=new e,p=[],d=[],h={},g=[],v=0,m=0;return u.forEach(function(t,n){c.set(t,n)}),l.forEach(function(t,n){f.set(t,n)}),u.forEach(function(t,n){var r=f.get(t);void 0===r?(++m,a.push(n)):h[r]=m}),l.forEach(function(t,n){var r=c.get(t);void 0===r?(o.push(n),++v):(s.push([r,n]),m=h[n]||0,p.push([r-m,n-v]),d.push(n===r),r!==n&&g.push([r,n]))}),a.reverse(),new y(t,n,o,a,g,s,p,d)}var t=function(){function t(t,n){void 0===t&&(t=[]),this.findKeyCallback=n,this.list=[].slice.call(t)}return t.prototype.update=function(t){var n=[].slice.call(t),r=l(this.list,n,this.findKeyCallback);return this.list=n,r},t}(),n="string",a="undefined";function c(t){return typeof t===n}function f(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(t,n,r){return""+n+e+r.toLowerCase()})}var s=function(t,n){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function p(t,n){function r(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var d=function(){return(d=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function h(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++)n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(r[e[i]]=t[e[i]]);return r}function g(t,n){if(t===n)return!1;for(var r in t)if(!(r in n))return!0;for(var r in n)if(t[r]!==n[r])return!0;return!1}function v(i,o){var a=Object.keys(i),r=Object.keys(o),t=l(a,r,function(t){return t}),e={},s={},u={};return t.added.forEach(function(t){var n=r[t];e[n]=o[n]}),t.removed.forEach(function(t){var n=a[t];s[n]=i[n]}),t.maintained.forEach(function(t){var n=t[0],r=a[n],e=[i[r],o[r]];i[r]!==o[r]&&(u[r]=e)}),{added:e,removed:s,changed:u}}function m(t){t.forEach(function(t){t()})}function E(t){var n=0;return t.map(function(t){return null==t?"$compat"+ ++n:""+t})}function w(t,n,r,e){return c(t)?new B("text_"+t,n,r,e,null,{}):new("string"==typeof t.type?G:t.type.prototype.render?I:_)(t.type,n,r,e,t.ref,t.props)}function C(t){var r=[];return t.forEach(function(t){var n;r=r.concat((n=t,Array.isArray(n)?C(t):t))}),r}function D(t){var n=t.className,r=h(t,["className"]);return null!=n&&(r.class=n),delete r.style,delete r.children,r}function R(t,n){if(!n)return t;for(var r in n)typeof t[r]===a&&(t[r]=n[r]);return t}function P(t,n){for(var r=[],e=2;e<arguments.length;e++)r[e-2]=arguments[e];var i=n||{},o=i.key,a=i.ref,s=h(i,["key","ref"]);return{type:t,key:o,ref:a,props:d(d({},s),{children:C(r).filter(function(t){return null!=t&&!1!==t})})}}var O=function(){function t(t,n,r,e,i,o){void 0===o&&(o={}),this.type=t,this.key=n,this.index=r,this.container=e,this.ref=i,this.props=o,this._providers=[]}var n=t.prototype;return n._should=function(t,n){return!0},n._update=function(t,n,r,e){if(this.base&&!c(n)&&!e&&!this._should(n.props,r))return!1;this.original=n,this._setState(r);var i=this.props;return c(n)||(this.props=n.props,this.ref=n.ref),this._render(t,this.base?i:{},r),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},t}();function z(t){var n={},r={};for(var e in t)0===e.indexOf("on")?r[e.replace("on","").toLowerCase()]=t[e]:n[e]=t[e];return{attributes:n,events:r}}var B=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}p(n,t);var r=n.prototype;return r._render=function(t){var n=this,r=!this.base;return r&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){r?n._mounted():n._updated()}),!0},r._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(O),G=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.events={},t}p(t,n);var r=t.prototype;return r.addEventListener=function(t,n){var r=this.events;r[t]=function(t){t.nativeEvent=t,n(t)},this.base.addEventListener(t,r[t])},r.removeEventListener=function(t){var n=this.events;this.base.removeEventListener(t,n[t]),delete n[t]},r._should=function(t){return g(this.props,t)},r._render=function(t,n){var r=this,e=!this.base;e&&(this.base=document.createElement(this.type)),F(this,this._providers,this.props.children,t,null);var i=this.base,o=z(n),a=o.attributes,s=o.events,u=z(this.props),l=u.attributes,c=u.events;return function(t,n,r){var e=v(t,n),i=e.added,o=e.removed,a=e.changed;for(var s in i)r.setAttribute(s,i[s]);for(var s in a)r.setAttribute(s,a[s][1]);for(var s in o)r.removeAttribute(s)}(D(a),D(l),i),function(t,n,r){var e=v(t,n),i=e.added,o=e.removed,a=e.changed;for(var s in o)r.removeEventListener(s);for(var s in i)r.addEventListener(s,i[s]);for(var s in a)r.removeEventListener(s),r.addEventListener(s,a[s][1]);for(var s in o)r.removeEventListener(s)}(s,c,this),function(t,n,r){var e=r.style,i=v(t,n),o=i.added,a=i.removed,s=i.changed;for(var u in o){var l=f(u,"-");e.setProperty?e.setProperty(l,o[u]):e[l]=o[u]}for(var u in s){l=f(u,"-");e.setProperty?e.setProperty(l,s[u][1]):e[l]=s[u][1]}for(var u in a){l=f(u,"-");e.removeProperty?e.removeProperty(l):e[l]=""}}(n.style||{},this.props.style||{},i),t.push(function(){e?r._mounted():r._updated()}),!0},r._unmount=function(){var t=this.events,n=this.base;for(var r in t)n.removeEventListener(r,t[r]);this._providers.forEach(function(t){t._unmount()}),this.events={},n.parentNode.removeChild(n)},t}(O);function T(t){if(!t)return null;if(t instanceof Node)return t;var n=t._provider._providers;return n.length?T(n[0].base):null}var _=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}p(n,t);var r=n.prototype;return r._render=function(t){var n=this.type(this.props);return F(this,this._providers,n?[n]:[],t),!0},r._unmount=function(){this._providers.forEach(function(t){t._unmount()})},n}(O),A=function(r){function t(t){var n=r.call(this,"container","container",0,null)||this;return n.base=t,n}p(t,r);var n=t.prototype;return n._render=function(){return!0},n._unmount=function(){},t}(O),I=function(a){function t(t,n,r,e,i,o){return void 0===o&&(o={}),a.call(this,t,n,r,e,i,R(o,t.defaultProps))||this}p(t,a);var n=t.prototype;return n._should=function(t,n){return this.base.shouldComponentUpdate(R(t,this.type.defaultProps),n||this.base.state)},n._render=function(t,n,r){var e=this;this.props=R(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),F(this,this._providers,s?[s]:[],t,r,null),t.push(function(){i?(e._mounted(),o.componentDidMount()):(e._updated(),o.componentDidUpdate(n,a))})},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),this.base.componentWillUnmount()},t}(O),k=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!0},n.render=function(){return null},n.setState=function(t,n,r){var e=[],i=this._provider;F(i.container,[i],[i.original],e,d(d({},this.state),t),r)&&(n&&e.push(n),m(e))},n.forceUpdate=function(t){this.setState(this.state,t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,n){},n.componentWillUnmount=function(){},t}(),j=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return p(n,t),n.prototype.shouldComponentUpdate=function(t,n){return g(this.props,t)||g(this.state,n)},n}(k),Y=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}p(n,t);var r=n.prototype;return r.componentDidMount=function(){var t=this.props,n=t.element,r=t.container;this._portalProvider=new A(r),q(n,r,this._portalProvider)},r.componentDidUpdate=function(){var t=this.props;q(t.element,t.container,this._portalProvider)},r.componentWillUnmount=function(){q(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(j);function X(i,a,o){var s=o.map(function(t){return c(t)?null:t.key}),t=l(E(a.map(function(t){return t.key})),E(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var n=t[0],r=t[1],e=a.splice(n,1)[0];a.splice(r,0,e);var i=T(e.base),o=T(a[r+1]&&a[r+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,w(o[t],s[t],t,i))});var n=t.maintained.filter(function(t){t[0];var n=t[1],r=o[n],e=a[n];return(c(r)?"text_"+r:r.type)!==e.type?(e._unmount(),a.splice(n,1,w(r,s[n],n,i)),!0):(e.index=n,!1)});return function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)e[i]=o[a];return e}(t.added,n.map(function(t){t[0];return t[1]}))}function F(i,o,r,e,a,s){var t=X(i,o,r),n=o.filter(function(t,n){return t._update(e,r[n],a,s)}),u=function t(n){if(!n)return null;var r=n.base;return r instanceof Node?r:t(n.container)}(i);return u&&t.reverse().forEach(function(t){var n,r=o[t],e=T(r.base);e&&(u===e||e.parentNode||(n=function(t,n){for(var r=t._providers,e=r.length,i=n.index+1;i<e;++i){var o=T(r[i].base);if(o)return o}return null}(i,r),u.insertBefore(e,n)))}),0<n.length}function q(t,n,r){void 0===r&&(r=n.__REACT_COMPAT__);var e,i,o,a,s=!!r;return r=r||new A(n),i=t?[t]:[],a=[],F(e=r,e._providers,i,a,o),m(a),s||(n.__REACT_COMPAT__=r),r}function N(t,n,r){var e=n.__REACT_COMPAT__;t&&!e&&(n.innerHTML=""),q(t,n,e),r&&r()}function L(t,n){for(var r=t.length,e=0;e<r;++e)if(n(t[e],e))return!0;return!1}function W(t,n){for(var r=t.length,e=0;e<r;++e)if(n(t[e],e))return t[e];return null}function H(t,n){try{return new RegExp(t,"g").exec(n)}catch(t){return null}}function V(t){return t.replace(/_/g,".")}function U(t,i){var o=null,a="-1";return L(t,function(t){var n,r,e=H("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",i);return e&&!t.brand&&(o=t,a=e[3]||"-1",t.versionAlias?a=t.versionAlias:t.versionTest&&(n=t.versionTest.toLowerCase(),r=H("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",i),a=(r?r[3]:"")||a),a=V(a),1)}),{preset:o,version:a}}function Z(t,r){return W(t,function(t){var n=t.brand;return H(""+r.test,n.toLowerCase())})}var $=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],K=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",brand:!0}],Q=[{test:"applewebkit",id:"webkit"}],J=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],tt=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function nt(t){var n=function(t){var n=t;if(void 0===n){if("undefined"==typeof navigator||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}(t),r=!!/mobi/g.exec(n),e={name:"unknown",version:"-1",majorVersion:-1,webview:!!U(J,n).preset,chromium:!!U(K,n).preset,webkit:!1},i={name:"unknown",version:"-1",majorVersion:-1},o=U($,n),a=o.preset,s=o.version,u=U(tt,n),l=u.preset,c=u.version;return e.webkit=!e.chromium&&!!U(Q,n).preset,l&&(i.name=l.id,i.version=c,i.majorVersion=parseInt(c,10)),a&&(e.name=a.id,e.version=s,e.webview&&"ios"===i.name&&"safari"!==e.name&&(e.webview=!1)),e.majorVersion=parseInt(e.version,10),{browser:e,os:i,isMobile:r,isHints:!1}}var rt="function",et="object",it="string",ot="undefined",at=['"',"'",'\\"',"\\'"],st={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function ut(t){return typeof t===ot}function lt(t){return t&&typeof t===et}function ct(t){return Array.isArray(t)}function ft(t){return typeof t===it}function pt(t,n,r,e){for(var i=r;i<e;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=pt(")",n,i+1,e):-1<at.indexOf(o)&&(a=pt(o,n,i+1,e)),-1===a)break;i=a}return-1}function dt(t,n){for(var r=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),e=t.split(r).filter(Boolean),i=e.length,o=[],a=[],s=0;s<i;++s){var u=e[s].trim(),l=s;if("("===u)l=pt(")",e,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<at.indexOf(u))l=pt(u,e,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(e.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function ht(t){return dt(t,"")}function gt(t){return dt(t,",")}function vt(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function mt(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var r=n[1],e=n[2];return{prefix:r,unit:n[3],value:parseFloat(e)}}function bt(t,n,r){void 0===r&&(r=-1);for(var e=t.length,i=0;i<e;++i)if(n(t[i],i,t))return i;return r}function xt(t,n){var r=mt(t),e=r.value,i=r.unit;if(lt(n)){var o=n[i];if(o){if(typeof o===rt)return o(e);if(st[i])return st[i](e,o)}}else if("%"===i)return e*n/100;return st[i]?st[i](e):e}function Mt(t,r,e){return[[r[0],r[0]*t[1]/t[0]],[r[1]*t[0]/t[1],r[1]]].filter(function(t){return t.every(function(t,n){return e?t<=r[n]:t>=r[n]})})[0]||t}function yt(t,o,a,n){if(!n)return t.map(function(t,n){return r=t,e=o[n],i=a[n],Math.max(e,Math.min(r,i));var r,e,i});var r=t[0],e=t[1],i=Mt(t,o,!1),s=i[0],u=i[1],l=Mt(t,a,!0),c=l[0],f=l[1];return r<s||e<u?(r=s,e=u):(c<r||f<e)&&(r=c,e=f),[r,e]}function Et(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}var St=1e-6,wt="undefined"!=typeof Float32Array?Float32Array:Array;function Ct(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Dt(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],f=n[8],p=n[9],d=n[10],h=n[11],g=n[12],v=n[13],m=n[14],b=n[15],x=r[0],M=r[1],y=r[2],E=r[3];return t[0]=x*e+M*s+y*f+E*g,t[1]=x*i+M*u+y*p+E*v,t[2]=x*o+M*l+y*d+E*m,t[3]=x*a+M*c+y*h+E*b,x=r[4],M=r[5],y=r[6],E=r[7],t[4]=x*e+M*s+y*f+E*g,t[5]=x*i+M*u+y*p+E*v,t[6]=x*o+M*l+y*d+E*m,t[7]=x*a+M*c+y*h+E*b,x=r[8],M=r[9],y=r[10],E=r[11],t[8]=x*e+M*s+y*f+E*g,t[9]=x*i+M*u+y*p+E*v,t[10]=x*o+M*l+y*d+E*m,t[11]=x*a+M*c+y*h+E*b,x=r[12],M=r[13],y=r[14],E=r[15],t[12]=x*e+M*s+y*f+E*g,t[13]=x*i+M*u+y*p+E*v,t[14]=x*o+M*l+y*d+E*m,t[15]=x*a+M*c+y*h+E*b,t}function Rt(t,n,r){var e=n[0],i=n[1],o=n[2],a=n[3],s=e+e,u=i+i,l=o+o,c=e*s,f=e*u,p=e*l,d=i*u,h=i*l,g=o*l,v=a*s,m=a*u,b=a*l;return t[0]=1-(d+g),t[1]=f+b,t[2]=p-m,t[3]=0,t[4]=f-b,t[5]=1-(c+g),t[6]=h+v,t[7]=0,t[8]=p+m,t[9]=h-v,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Pt(t,n){var r=n[0],e=n[1],i=n[2],o=n[4],a=n[5],s=n[6],u=n[8],l=n[9],c=n[10];return t[0]=Math.hypot(r,e,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,l,c),t}function Ot(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var zt={__proto__:null,create:function(){var t=new wt(16);return wt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var n=new wt(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},fromValues:function(t,n,r,e,i,o,a,s,u,l,c,f,p,d,h,g){var v=new wt(16);return v[0]=t,v[1]=n,v[2]=r,v[3]=e,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=u,v[9]=l,v[10]=c,v[11]=f,v[12]=p,v[13]=d,v[14]=h,v[15]=g,v},set:function(t,n,r,e,i,o,a,s,u,l,c,f,p,d,h,g,v){return t[0]=n,t[1]=r,t[2]=e,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=f,t[11]=p,t[12]=d,t[13]=h,t[14]=g,t[15]=v,t},identity:Ct,transpose:function(t,n){var r,e,i,o,a,s;return t===n?(r=n[1],e=n[2],i=n[3],o=n[6],a=n[7],s=n[11],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=o,t[11]=n[14],t[12]=i,t[13]=a,t[14]=s):(t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15]),t},invert:function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],l=n[7],c=n[8],f=n[9],p=n[10],d=n[11],h=n[12],g=n[13],v=n[14],m=n[15],b=r*s-e*a,x=r*u-i*a,M=r*l-o*a,y=e*u-i*s,E=e*l-o*s,S=i*l-o*u,w=c*g-f*h,C=c*v-p*h,D=c*m-d*h,R=f*v-p*g,P=f*m-d*g,O=p*m-d*v,z=b*O-x*P+M*R+y*D-E*C+S*w;return z?(z=1/z,t[0]=(s*O-u*P+l*R)*z,t[1]=(i*P-e*O-o*R)*z,t[2]=(g*S-v*E+m*y)*z,t[3]=(p*E-f*S-d*y)*z,t[4]=(u*D-a*O-l*C)*z,t[5]=(r*O-i*D+o*C)*z,t[6]=(v*M-h*S-m*x)*z,t[7]=(c*S-p*M+d*x)*z,t[8]=(a*P-s*D+l*w)*z,t[9]=(e*D-r*P-o*w)*z,t[10]=(h*E-g*M+m*b)*z,t[11]=(f*M-c*E-d*b)*z,t[12]=(s*C-a*R-u*w)*z,t[13]=(r*R-e*C+i*w)*z,t[14]=(g*x-h*y-v*b)*z,t[15]=(c*y-f*x+p*b)*z,t):null},adjoint:function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],l=n[7],c=n[8],f=n[9],p=n[10],d=n[11],h=n[12],g=n[13],v=n[14],m=n[15];return t[0]=s*(p*m-d*v)-f*(u*m-l*v)+g*(u*d-l*p),t[1]=-(e*(p*m-d*v)-f*(i*m-o*v)+g*(i*d-o*p)),t[2]=e*(u*m-l*v)-s*(i*m-o*v)+g*(i*l-o*u),t[3]=-(e*(u*d-l*p)-s*(i*d-o*p)+f*(i*l-o*u)),t[4]=-(a*(p*m-d*v)-c*(u*m-l*v)+h*(u*d-l*p)),t[5]=r*(p*m-d*v)-c*(i*m-o*v)+h*(i*d-o*p),t[6]=-(r*(u*m-l*v)-a*(i*m-o*v)+h*(i*l-o*u)),t[7]=r*(u*d-l*p)-a*(i*d-o*p)+c*(i*l-o*u),t[8]=a*(f*m-d*g)-c*(s*m-l*g)+h*(s*d-l*f),t[9]=-(r*(f*m-d*g)-c*(e*m-o*g)+h*(e*d-o*f)),t[10]=r*(s*m-l*g)-a*(e*m-o*g)+h*(e*l-o*s),t[11]=-(r*(s*d-l*f)-a*(e*d-o*f)+c*(e*l-o*s)),t[12]=-(a*(f*v-p*g)-c*(s*v-u*g)+h*(s*p-u*f)),t[13]=r*(f*v-p*g)-c*(e*v-i*g)+h*(e*p-i*f),t[14]=-(r*(s*v-u*g)-a*(e*v-i*g)+h*(e*u-i*s)),t[15]=r*(s*p-u*f)-a*(e*p-i*f)+c*(e*u-i*s),t},determinant:function(t){var n=t[0],r=t[1],e=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],p=t[11],d=t[12],h=t[13],g=t[14],v=t[15];return(n*a-r*o)*(f*v-p*g)-(n*s-e*o)*(c*v-p*h)+(n*u-i*o)*(c*g-f*h)+(r*s-e*a)*(l*v-p*d)-(r*u-i*a)*(l*g-f*d)+(e*u-i*s)*(l*h-c*d)},multiply:Dt,translate:function(t,n,r){var e,i,o,a,s,u,l,c,f,p,d,h,g=r[0],v=r[1],m=r[2];return n===t?(t[12]=n[0]*g+n[4]*v+n[8]*m+n[12],t[13]=n[1]*g+n[5]*v+n[9]*m+n[13],t[14]=n[2]*g+n[6]*v+n[10]*m+n[14],t[15]=n[3]*g+n[7]*v+n[11]*m+n[15]):(e=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],f=n[8],p=n[9],d=n[10],h=n[11],t[0]=e,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=p,t[10]=d,t[11]=h,t[12]=e*g+s*v+f*m+n[12],t[13]=i*g+u*v+p*m+n[13],t[14]=o*g+l*v+d*m+n[14],t[15]=a*g+c*v+h*m+n[15]),t},scale:function(t,n,r){var e=r[0],i=r[1],o=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},rotate:function(t,n,r,e){var i,o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,M,y,E,S,w,C,D,R,P=e[0],O=e[1],z=e[2],B=Math.hypot(P,O,z);return B<St?null:(P*=B=1/B,O*=B,z*=B,i=Math.sin(r),a=1-(o=Math.cos(r)),s=n[0],u=n[1],l=n[2],c=n[3],f=n[4],p=n[5],d=n[6],h=n[7],g=n[8],v=n[9],m=n[10],b=n[11],x=P*P*a+o,M=O*P*a+z*i,y=z*P*a-O*i,E=P*O*a-z*i,S=O*O*a+o,w=z*O*a+P*i,C=P*z*a+O*i,D=O*z*a-P*i,R=z*z*a+o,t[0]=s*x+f*M+g*y,t[1]=u*x+p*M+v*y,t[2]=l*x+d*M+m*y,t[3]=c*x+h*M+b*y,t[4]=s*E+f*S+g*w,t[5]=u*E+p*S+v*w,t[6]=l*E+d*S+m*w,t[7]=c*E+h*S+b*w,t[8]=s*C+f*D+g*R,t[9]=u*C+p*D+v*R,t[10]=l*C+d*D+m*R,t[11]=c*C+h*D+b*R,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},rotateX:function(t,n,r){var e=Math.sin(r),i=Math.cos(r),o=n[4],a=n[5],s=n[6],u=n[7],l=n[8],c=n[9],f=n[10],p=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*i+l*e,t[5]=a*i+c*e,t[6]=s*i+f*e,t[7]=u*i+p*e,t[8]=l*i-o*e,t[9]=c*i-a*e,t[10]=f*i-s*e,t[11]=p*i-u*e,t},rotateY:function(t,n,r){var e=Math.sin(r),i=Math.cos(r),o=n[0],a=n[1],s=n[2],u=n[3],l=n[8],c=n[9],f=n[10],p=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i-l*e,t[1]=a*i-c*e,t[2]=s*i-f*e,t[3]=u*i-p*e,t[8]=o*e+l*i,t[9]=a*e+c*i,t[10]=s*e+f*i,t[11]=u*e+p*i,t},rotateZ:function(t,n,r){var e=Math.sin(r),i=Math.cos(r),o=n[0],a=n[1],s=n[2],u=n[3],l=n[4],c=n[5],f=n[6],p=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*i+l*e,t[1]=a*i+c*e,t[2]=s*i+f*e,t[3]=u*i+p*e,t[4]=l*i-o*e,t[5]=c*i-a*e,t[6]=f*i-s*e,t[7]=p*i-u*e,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,n,r){var e,i,o,a=r[0],s=r[1],u=r[2],l=Math.hypot(a,s,u);return l<St?null:(a*=l=1/l,s*=l,u*=l,e=Math.sin(n),o=1-(i=Math.cos(n)),t[0]=a*a*o+i,t[1]=s*a*o+u*e,t[2]=u*a*o-s*e,t[3]=0,t[4]=a*s*o-u*e,t[5]=s*s*o+i,t[6]=u*s*o+a*e,t[7]=0,t[8]=a*u*o+s*e,t[9]=s*u*o-a*e,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:Rt,fromQuat2:function(t,n){var r=new wt(3),e=-n[0],i=-n[1],o=-n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],f=e*e+i*i+o*o+a*a;return 0<f?(r[0]=2*(s*a+c*e+u*o-l*i)/f,r[1]=2*(u*a+c*i+l*e-s*o)/f,r[2]=2*(l*a+c*o+s*i-u*e)/f):(r[0]=2*(s*a+c*e+u*o-l*i),r[1]=2*(u*a+c*i+l*e-s*o),r[2]=2*(l*a+c*o+s*i-u*e)),Rt(t,n,r),t},getTranslation:function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},getScaling:Pt,getRotation:function(t,n){var r=new wt(3);Pt(r,n);var e=1/r[0],i=1/r[1],o=1/r[2],a=n[0]*e,s=n[1]*i,u=n[2]*o,l=n[4]*e,c=n[5]*i,f=n[6]*o,p=n[8]*e,d=n[9]*i,h=n[10]*o,g=a+c+h,v=0;return 0<g?(v=2*Math.sqrt(1+g),t[3]=.25*v,t[0]=(f-d)/v,t[1]=(p-u)/v,t[2]=(s-l)/v):c<a&&h<a?(v=2*Math.sqrt(1+a-c-h),t[3]=(f-d)/v,t[0]=.25*v,t[1]=(s+l)/v,t[2]=(p+u)/v):h<c?(v=2*Math.sqrt(1+c-a-h),t[3]=(p-u)/v,t[0]=(s+l)/v,t[1]=.25*v,t[2]=(f+d)/v):(v=2*Math.sqrt(1+h-a-c),t[3]=(s-l)/v,t[0]=(p+u)/v,t[1]=(f+d)/v,t[2]=.25*v),t},fromRotationTranslationScale:function(t,n,r,e){var i=n[0],o=n[1],a=n[2],s=n[3],u=i+i,l=o+o,c=a+a,f=i*u,p=i*l,d=i*c,h=o*l,g=o*c,v=a*c,m=s*u,b=s*l,x=s*c,M=e[0],y=e[1],E=e[2];return t[0]=(1-(h+v))*M,t[1]=(p+x)*M,t[2]=(d-b)*M,t[3]=0,t[4]=(p-x)*y,t[5]=(1-(f+v))*y,t[6]=(g+m)*y,t[7]=0,t[8]=(d+b)*E,t[9]=(g-m)*E,t[10]=(1-(f+h))*E,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,n,r,e,i){var o=n[0],a=n[1],s=n[2],u=n[3],l=o+o,c=a+a,f=s+s,p=o*l,d=o*c,h=o*f,g=a*c,v=a*f,m=s*f,b=u*l,x=u*c,M=u*f,y=e[0],E=e[1],S=e[2],w=i[0],C=i[1],D=i[2],R=(1-(g+m))*y,P=(d+M)*y,O=(h-x)*y,z=(d-M)*E,B=(1-(p+m))*E,G=(v+b)*E,T=(h+x)*S,_=(v-b)*S,A=(1-(p+g))*S;return t[0]=R,t[1]=P,t[2]=O,t[3]=0,t[4]=z,t[5]=B,t[6]=G,t[7]=0,t[8]=T,t[9]=_,t[10]=A,t[11]=0,t[12]=r[0]+w-(R*w+z*C+T*D),t[13]=r[1]+C-(P*w+B*C+_*D),t[14]=r[2]+D-(O*w+G*C+A*D),t[15]=1,t},fromQuat:function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=r+r,s=e+e,u=i+i,l=r*a,c=e*a,f=e*s,p=i*a,d=i*s,h=i*u,g=o*a,v=o*s,m=o*u;return t[0]=1-f-h,t[1]=c+m,t[2]=p-v,t[3]=0,t[4]=c-m,t[5]=1-l-h,t[6]=d+g,t[7]=0,t[8]=p+v,t[9]=d-g,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,n,r,e,i,o,a){var s=1/(r-n),u=1/(i-e),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+n)*s,t[9]=(i+e)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t},perspective:function(t,n,r,e,i){var o,a=1/Math.tan(n/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(e-i),t[10]=(i+e)*o,t[14]=2*i*e*o):(t[10]=-1,t[14]=-2*e),t},perspectiveFromFieldOfView:function(t,n,r,e){var i=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),a=Math.tan(n.leftDegrees*Math.PI/180),s=Math.tan(n.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*l*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t},ortho:function(t,n,r,e,i,o,a){var s=1/(n-r),u=1/(e-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(n+r)*s,t[13]=(i+e)*u,t[14]=(a+o)*l,t[15]=1,t},lookAt:function(t,n,r,e){var i,o,a,s,u,l,c,f,p,d,h=n[0],g=n[1],v=n[2],m=e[0],b=e[1],x=e[2],M=r[0],y=r[1],E=r[2];return Math.abs(h-M)<St&&Math.abs(g-y)<St&&Math.abs(v-E)<St?Ct(t):(c=h-M,f=g-y,p=v-E,i=b*(p*=d=1/Math.hypot(c,f,p))-x*(f*=d),o=x*(c*=d)-m*p,a=m*f-b*c,(d=Math.hypot(i,o,a))?(i*=d=1/d,o*=d,a*=d):a=o=i=0,s=f*a-p*o,u=p*i-c*a,l=c*o-f*i,(d=Math.hypot(s,u,l))?(s*=d=1/d,u*=d,l*=d):l=u=s=0,t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=l,t[10]=p,t[11]=0,t[12]=-(i*h+o*g+a*v),t[13]=-(s*h+u*g+l*v),t[14]=-(c*h+f*g+p*v),t[15]=1,t)},targetTo:function(t,n,r,e){var i=n[0],o=n[1],a=n[2],s=e[0],u=e[1],l=e[2],c=i-r[0],f=o-r[1],p=a-r[2],d=c*c+f*f+p*p;0<d&&(c*=d=1/Math.sqrt(d),f*=d,p*=d);var h=u*p-l*f,g=l*c-s*p,v=s*f-u*c;return 0<(d=h*h+g*g+v*v)&&(h*=d=1/Math.sqrt(d),g*=d,v*=d),t[0]=h,t[1]=g,t[2]=v,t[3]=0,t[4]=f*v-p*g,t[5]=p*h-c*v,t[6]=c*g-f*h,t[7]=0,t[8]=c,t[9]=f,t[10]=p,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t},subtract:Ot,multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t},multiplyScalarAndAdd:function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},equals:function(t,n){var r=t[0],e=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],p=t[10],d=t[11],h=t[12],g=t[13],v=t[14],m=t[15],b=n[0],x=n[1],M=n[2],y=n[3],E=n[4],S=n[5],w=n[6],C=n[7],D=n[8],R=n[9],P=n[10],O=n[11],z=n[12],B=n[13],G=n[14],T=n[15];return Math.abs(r-b)<=St*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(e-x)<=St*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(i-M)<=St*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-y)<=St*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-E)<=St*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-S)<=St*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-w)<=St*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(l-C)<=St*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-D)<=St*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(f-R)<=St*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(p-P)<=St*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(d-O)<=St*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(h-z)<=St*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(g-B)<=St*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(v-G)<=St*Math.max(1,Math.abs(v),Math.abs(G))&&Math.abs(m-T)<=St*Math.max(1,Math.abs(m),Math.abs(T))},mul:Dt,sub:Ot},Bt=['"',"'",'\\"',"\\'"];function Gt(t,n,r,e){for(var i=r;i<e;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=Gt(")",n,i+1,e):-1<Bt.indexOf(o)&&(a=Gt(o,n,i+1,e)),-1===a)break;i=a}return-1}function Tt(t,n){for(var r=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),e=t.split(r).filter(Boolean),i=e.length,o=[],a=[],s=0;s<i;++s){var u=e[s].trim(),l=s;if("("===u)l=Gt(")",e,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<Bt.indexOf(u))l=Gt(u,e,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(e.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function _t(t){return Tt(t,",")}function At(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var n=t.functionName,r=t.functionValue;n&&zt[n](e,e,r)}),e}function It(t){var n;return(n=t,Array.isArray(n)?t:Tt(t,"")).map(function(t){var n,r,e,i,o,a,s,u,l,c,f,p,d=!(n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t))||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]},h=d.prefix,g=d.value,v="",m="";return"translate"===h||"translateX"===h||"translate3d"===h?(v="translate",m=[(r=_t(g).map(function(t){return parseFloat(t)}))[0],void 0===(e=r[1])?0:e,void 0===(i=r[2])?0:i]):"translateY"===h?(v="translate",m=[0,parseFloat(g),0]):"translateZ"===h?(v="translate",m=[0,0,parseFloat(g)]):"scale"===h||"scale3d"===h?(v="scale",m=[u=(o=_t(g).map(function(t){return parseFloat(t)}))[0],void 0===(a=o[1])?u:a,void 0===(s=o[2])?1:s]):"scaleX"===h?(v="scale",m=[u=parseFloat(g),1,1]):"scaleY"===h?(v="scale",m=[1,parseFloat(g),1]):"scaleZ"===h?(v="scale",m=[1,1,parseFloat(g)]):"rotate"===h||"rotateZ"===h||"rotateX"===h||"rotateY"===h?(c=(l=function(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var r=n[1],e=n[2];return{prefix:r,unit:n[3],value:parseFloat(e)}}(g)).unit,f=l.value,v="rotate"===h?"rotateZ":h,m="rad"===c?f:f*Math.PI/180):"matrix3d"===h?(v="multiply",m=_t(g).map(function(t){return parseFloat(t)})):"matrix"===h&&(v="multiply",m=[(p=_t(g).map(function(t){return parseFloat(t)}))[0],p[1],0,0,p[2],p[3],0,0,0,0,1,0,p[4],p[5],0,1]),{name:h,value:g,functionName:v,functionValue:m}})}function kt(t){return t&&"object"==typeof t}var jt=function(){return(jt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var Yt=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(kt(t))for(var r in t)this.on(r,t[r]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(kt(t))for(var r in t)this.off(r);else{var e,i;n?!(e=this._events[t])||-1<(i=function(t,n,r){void 0===r&&(r=-1);for(var e=t.length,i=0;i<e;++i)if(n(t[i],i,t))return i;return r}(e,function(t){return t.listener===n}))&&e.splice(i,1):this._events[t]=[]}else this._events={};return this},n.once=function(n,t){var r=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(t){r._addEvent(n,t,{once:!0})})},n.emit=function(n,r){var e=this;void 0===r&&(r={});var t=this._events[n];if(!n||!t)return!0;var i=!1;return r.eventType=n,r.stop=function(){i=!0},r.currentTarget=this,function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)e[i]=o[a];return e}(t).forEach(function(t){t.listener(r),t.once&&e.off(n,t.listener)}),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,r){var e=this._events;e[t]=e[t]||[],e[t].push(jt({listener:n},r))},t}();var Xt=function(t,n){return(Xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function Ft(t){var n=t.container;return[n.scrollLeft,n.scrollTop]}var qt=function(n){function t(){this.constructor=r}var r,e;function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}Xt(r=i,e=n),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t);var o=i.prototype;return o.dragStart=function(t,n){var r=n.container.getBoundingClientRect(),e=r.top,i=r.left,o=r.width,a=r.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:e,left:i,width:o,height:a}},o.drag=function(t,n){var r=this,e=t.clientX,i=t.clientY,o=n.container,a=n.threshold,s=void 0===a?0:a,u=n.throttleTime,l=void 0===u?0:u,c=n.getScrollPosition,f=void 0===c?Ft:c,p=this.startRect,d=this.startPos,h=Date.now?Date.now():(new Date).getTime(),g=Math.max(l+this.prevTime-h,0),v=[0,0];if(p.top>i-s?(d[1]>p.top||i<d[1])&&(v[1]=-1):p.top+p.height<i+s&&(d[1]<p.top+p.height||i>d[1])&&(v[1]=1),p.left>e-s?(d[0]>p.left||e<d[0])&&(v[0]=-1):p.left+p.width<e+s&&(d[0]<p.left+p.width||e>d[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){r.drag(t,n)},g),!1;this.prevTime=h;var m=f({container:o,direction:v});this.trigger("scroll",{container:o,direction:v,inputEvent:t});var b=f({container:o,direction:v}),x=b[0]-m[0],M=b[1]-m[1];return!(!x&&!M)&&(this.trigger("move",{offsetX:v[0]?x:0,offsetY:v[1]?M:0,inputEvent:t}),l&&(this.timer=window.setTimeout(function(){r.drag(t,n)},l)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},i}(Yt);function Nt(){return Date.now?Date.now():(new Date).getTime()}function Lt(t,n,r,e){t.addEventListener(n,r,e)}function Wt(t,n,r){t.removeEventListener(n,r)}var Ht=function(t,n){return(Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};var Vt=function(){return(Vt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Ut(t){return 180*(n=[t[0].clientX,t[0].clientY],r=[t[1].clientX,t[1].clientY],e=r[0]-n[0],i=r[1]-n[1],(0<=(o=Math.atan2(i,e))?o:o+2*Math.PI)/Math.PI);var n,r,e,i,o}function Zt(t){return t.touches?function(t){for(var n=Math.min(t.length,2),r=[],e=0;e<n;++e)r.push(Qt(t[e]));return r}(t.touches):[Qt(t)]}function $t(t,n,r){var e=r.length,i=Jt(t,e),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,l=Jt(n,e),c=l.clientX,f=l.clientY,p=Jt(r,e);return{clientX:s,clientY:u,deltaX:o-c,deltaY:a-f,distX:o-p.clientX,distY:a-p.clientY}}function Kt(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Qt(t){return{clientX:t.clientX,clientY:t.clientY}}function Jt(t,n){void 0===n&&(n=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},e=0;e<n;++e){var i=t[e];r.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,r.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,r.clientX+=i.clientX,r.clientY+=i.clientY}return n?{clientX:r.clientX/n,clientY:r.clientY/n,originalClientX:r.originalClientX/n,originalClientY:r.originalClientY/n}:r}var tn=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.addClients=function(t){void 0===t&&(t=this.prevClients);var n=this.getPosition(t),r=n.deltaX,e=n.deltaY;return this.movement+=Math.sqrt(r*r+e*e),this.prevClients=t,n},n.getAngle=function(t){return void 0===t&&(t=this.prevClients),Ut(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),Ut(t)-Ut(this.startClients)},n.getPosition=function(t){return $t(t||this.prevClients,this.prevClients,this.startClients)},n.getPositions=function(r){void 0===r&&(r=this.prevClients);var e=this.prevClients;return this.startClients.map(function(t,n){return $t([r[n]],[e[n]],[t])})},n.getMovement=function(t){var n=this.movement;if(!t)return n;var r=Jt(t,this.length),e=Jt(this.prevClients,this.length),i=r.clientX-e.clientX,o=r.clientY-e.clientY;return Math.sqrt(i*i+o*o)+n},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),Kt(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),Kt(t)/Kt(this.startClients)},n.move=function(n,r){this.startClients.forEach(function(t){t.clientX-=n,t.clientY-=r}),this.prevClients.forEach(function(t){t.clientX-=n,t.clientY-=r})},t}(),nn=["textarea","input"],rn=function(u){function t(){this.constructor=n}var n,r;function e(t,n){void 0===n&&(n={});var b=u.call(this)||this;b.options={},b.flag=!1,b.pinchFlag=!1,b.datas={},b.isDrag=!1,b.isPinch=!1,b.isMouse=!1,b.isTouch=!1,b.clientStores=[],b.targets=[],b.prevTime=0,b.isDouble=!1,b.onDragStart=function(t,n){if(void 0===n&&(n=!0),b.flag||!1!==t.cancelable){var r=b.options,e=r.container,i=r.pinchOutside,o=r.preventRightClick,a=r.preventDefault,s=r.checkInput,u=b.isTouch,l=!b.flag;if(l){var c,f=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),h=-1<nn.indexOf(d),g=p.isContentEditable;if(h||g){if(s||f===p)return!1;if(f&&g&&f.isContentEditable&&f.contains(p))return!1}else{(a||"touchstart"===t.type)&&f&&(c=f.tagName,(f.isContentEditable||-1<nn.indexOf(c))&&f.blur())}if(b.clientStores=[new tn(Zt(t))],b.flag=!0,b.isDrag=!1,b.datas={},o&&(3===t.which||2===t.button))return b.initDrag(),!1;!1===b.emit("dragStart",Vt({datas:b.datas,inputEvent:t,isTrusted:n},b.getCurrentStore().getPosition()))&&b.initDrag(),b.isDouble=Nt()-b.prevTime<200,b.flag&&a&&t.preventDefault()}if(!b.flag)return!1;var v,m=0;if(l&&u&&i&&(m=setTimeout(function(){Lt(e,"touchstart",b.onDragStart,{passive:!1})})),!l&&u&&i&&Wt(e,"touchstart",b.onDragStart),b.flag&&((v=t).touches&&2<=v.touches.length)){if(clearTimeout(m),l&&t.touches.length!==t.changedTouches.length)return;b.pinchFlag||b.onPinchStart(t)}}},b.onDrag=function(t,n){var r,e;b.flag&&(r=Zt(t),e=b.moveClients(r,t,!1),(b.pinchFlag||e.deltaX||e.deltaY)&&b.emit("drag",Vt({},e,{isScroll:!!n,inputEvent:t})),b.pinchFlag&&b.onPinch(t,r),b.getCurrentStore().addClients(r))},b.onDragEnd=function(t){var n,r,e,i,o,a;b.flag&&(r=(n=b.options).pinchOutside,e=n.container,b.isTouch&&r&&Wt(e,"touchstart",b.onDragStart),b.flag=!1,i=b.getCurrentStore().getPosition(),o=Nt(),a=!b.isDrag&&b.isDouble,b.prevTime=b.isDrag||a?0:o,b.emit("dragEnd",Vt({datas:b.datas,isDouble:a,isDrag:b.isDrag,inputEvent:t},i)),b.pinchFlag&&b.onPinchEnd(t),b.clientStores=[])},b.onBlur=function(){b.onDragEnd()};var r=[].concat(t);b.options=Vt({checkInput:!1,container:1<r.length?window:r[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},n);var e,i=b.options,o=i.container,a=i.events,s=i.checkWindowBlur;return b.isTouch=-1<a.indexOf("touch"),b.isMouse=-1<a.indexOf("mouse"),b.targets=r,b.isMouse&&(r.forEach(function(t){Lt(t,"mousedown",b.onDragStart)}),Lt(o,"mousemove",b.onDrag),Lt(o,"mouseup",b.onDragEnd),Lt(o,"contextmenu",b.onDragEnd)),s&&Lt(window,"blur",b.onBlur),b.isTouch&&(e={passive:!1},r.forEach(function(t){Lt(t,"touchstart",b.onDragStart,e)}),Lt(o,"touchmove",b.onDrag,e),Lt(o,"touchend",b.onDragEnd,e),Lt(o,"touchcancel",b.onDragEnd,e)),b}Ht(n=e,r=u),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var i=e.prototype;return i.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,n){return t+n.movement},0)},i.isDragging=function(){return this.isDrag},i.isFlag=function(){return this.flag},i.isPinchFlag=function(){return this.pinchFlag},i.isPinching=function(){return this.isPinch},i.scrollBy=function(t,n,r,e){void 0===e&&(e=!0),this.flag&&(this.clientStores[0].move(t,n),e&&this.onDrag(r,!0))},i.move=function(t,n){var e=t[0],i=t[1],r=this.getCurrentStore().prevClients;return this.moveClients(r.map(function(t){var n=t.clientX,r=t.clientY;return{clientX:n+e,clientY:r+i,originalClientX:n,originalClientY:r}}),n,!0)},i.triggerDragStart=function(t){this.onDragStart(t,!1)},i.setEventDatas=function(t){var n=this.datas;for(var r in t)n[r]=t[r];return this},i.getEventDatas=function(){return this.datas},i.unset=function(){var n=this,t=this.targets,r=this.options.container;this.off(),Wt(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){Wt(t,"mousedown",n.onDragStart)}),Wt(r,"mousemove",this.onDrag),Wt(r,"mouseup",this.onDragEnd),Wt(r,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){Wt(t,"touchstart",n.onDragStart)}),Wt(r,"touchstart",this.onDragStart),Wt(r,"touchmove",this.onDrag),Wt(r,"touchend",this.onDragEnd),Wt(r,"touchcancel",this.onDragEnd))},i.onPinchStart=function(t){var n,r=this.options.pinchThreshold;this.isDrag&&this.getMovement()>r||(n=new tn(Zt(t)),this.pinchFlag=!0,this.clientStores.splice(0,0,n),!1===this.emit("pinchStart",Vt({datas:this.datas,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1))},i.onPinch=function(t,n){var r;!this.flag||!this.pinchFlag||n.length<2||(r=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",Vt({datas:this.datas,movement:this.getMovement(n),angle:r.getAngle(n),rotation:r.getRotation(n),touches:r.getPositions(n),scale:r.getScale(n),distance:r.getDistance(n)},r.getPosition(n),{inputEvent:t})))},i.onPinchEnd=function(t){var n,r;this.pinchFlag&&(n=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,r=this.getCurrentStore(),this.emit("pinchEnd",Vt({datas:this.datas,isPinch:n,touches:r.getPositions()},r.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1)},i.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.flag=!1},i.getCurrentStore=function(){return this.clientStores[0]},i.moveClients=function(t,n,r){var e=this.getCurrentStore()[r?"addClients":"getPosition"](t);return this.isDrag=!0,Vt({datas:this.datas},e,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e}(Yt),en=function(t,n){return(en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};var on,an="function"==typeof Map?void 0:(on=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++on)}),sn=function(n){function t(){this.constructor=r}var r,e;function i(t){return void 0===t&&(t=[]),n.call(this,t,an)||this}return en(r=i,e=n),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t),i}(t),un=['"',"'",'\\"',"\\'"];function ln(t,n,r,e){for(var i=r;i<e;++i){var o=n[i].trim();if(o===t)return i;var a=i;if("("===o?a=ln(")",n,i+1,e):-1<un.indexOf(o)&&(a=ln(o,n,i+1,e)),-1===a)break;i=a}return-1}function cn(t){return function(t,n){for(var r=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),e=t.split(r).filter(Boolean),i=e.length,o=[],a=[],s=0;s<i;++s){var u=e[s].trim(),l=s;if("("===u)l=ln(")",e,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<un.indexOf(u))l=ln(u,e,s+1,i);else if(u===n){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=i-1),a.push(e.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}(t,",")}var fn=function(t){for(var n=5381,r=t.length;r;)n=33*n^t.charCodeAt(--r);return n>>>0};function pn(t,n,r,e){var i,o,a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",t),r.nonce&&a.setAttribute("nonce",r.nonce),a.innerHTML=(i=t,o=n,r.original?o:o.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,n){var r=n.trim();return(r?cn(r):[""]).map(function(t){var n=t.trim();return 0===n.indexOf("@")?n:-1<n.indexOf(":global")?n.replace(/\:global/g,""):-1<n.indexOf(":host")?""+n.replace(/\:host/g,"."+i):n?"."+i+" "+n:"."+i}).join(", ")+" {"})),(e||document.head||document.body).appendChild(a),a}function dn(o){var a,s="rCS"+fn(o).toString(36),u=0;return{className:s,inject:function(t,n){void 0===n&&(n={});var r,e=function(t){if(t&&t.getRootNode){var n=t.getRootNode();if(11===n.nodeType)return n}}(t),i=0===u;return(e||i)&&(r=pn(s,o,n,e)),i&&(a=r),e||++u,{destroy:function(){e?(t.removeChild(r),r=null):(0<u&&--u,0===u&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var hn=function(t,n){return(hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function gn(t,n){function r(){this.constructor=t}hn(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var vn=function(){return(vn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var mn=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}gn(t,n);var r=t.prototype;return r.render=function(){var t=this.props,n=t.className,r=void 0===n?"":n,e=(t.cspNonce,function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++)n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(r[e[i]]=t[e[i]]);return r}(t,["className","cspNonce"])),i=this.injector.className;return P(this.tag,vn({ref:S(this,"element"),"data-styled-id":i,className:r+" "+i},e))},r.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},r.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},r.getElement=function(){return this.element},t}(k);var bn=function(t,n){return(bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function xn(t,n){function r(){this.constructor=t}bn(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var Mn=function(){return(Mn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function yn(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)e[i]=o[a];return e}function En(t,n){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+n+'deg);transform-origin: 16px 16px"></path></svg>'}var Sn,wn,Cn,Dn,Rn,Pn,On,zn,Bn,Gn,Tn,_n=(void 0===Sn&&function(){if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData){var t=navigator.userAgentData,n=t.brands||t.uaList;return n&&n.length}}()?(Rn=navigator.userAgentData,Pn=(Rn.uaList||Rn.brands).slice(),On=Rn.mobile||!1,zn=Pn[0],Bn={name:zn.brand,version:zn.version,majorVersion:-1,webkit:!1,webview:L(J,function(t){return Z(Pn,t)}),chromium:L(K,function(t){return Z(Pn,t)})},Gn={name:"unknown",version:"-1",majorVersion:-1},Bn.webkit=!Bn.chromium&&L(Q,function(t){return Z(Pn,t)}),wn&&(Cn=wn.platform.toLowerCase(),Dn=W(tt,function(t){return new RegExp(""+t.test,"g").exec(Cn)}),Gn.name=Dn?Dn.id:Cn,Gn.version=wn.platformVersion),L($,function(t){var n=Z(Pn,t);return n&&(Bn.name=t.id,Bn.version=wn?wn.uaFullVersion:n.version,1)}),"Linux armv8l"===navigator.platform?Gn.name="android":Bn.webkit&&(Gn.name=On?"ios":"mac"),"ios"===Gn.name&&Bn.webview&&(Bn.version="-1"),Gn.version=V(Gn.version),Bn.version=V(Bn.version),Gn.majorVersion=parseInt(Gn.version,10),Bn.majorVersion=parseInt(Bn.version,10),{browser:Bn,os:Gn,isMobile:On,isHints:!0}):nt(Sn)).browser.webkit,An=_n&&(!!(Tn=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase()))&&parseFloat(Tn[1])<605),In="moveable-",kn="\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(r=En(1,n=t),e=En(2,n),i=45*Math.round(n/45)%180,"cursor:"+(o=135==i?"nwse-resize":45==i?"nesw-resize":90==i?"ew-resize":"ns-resize")+";cursor: url('"+r+"') 16 16, "+o+";cursor: -webkit-image-set(url('"+r+"') 1x, url('"+e+"') 2x) 16 16, "+o+";")+"\n}\n";var n,r,e,i,o}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(An?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",jn=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Yn=1e-7,Xn=Math.pow(10,10),Fn=-Xn,qn=["n","w","s","e","nw","ne","sw","se"],Nn={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Ln={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Wn=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"];function Hn(t,n,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=t.slice(),i=0;i<r;++i)e[i*r+n-1]=0,e[(n-1)*r+i]=0;return e[(n-1)*(r+1)]=1,e}function Vn(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),e=ar(n),i=0;i<n;++i){var o=n*i+i;if(0===r[o])for(var a=i+1;a<n;++a)if(r[n*i+a]){!function(t,n,r,e,i){for(var o=0;o<i;++o){var a=r+o*i,s=e+o*i,u=t[a],l=n[a];t[a]=t[s],t[s]=u,n[a]=n[s],n[s]=l}}(r,e,i,a,n);break}if(!r[o])return[];!function(t,n,r,e,i){for(var o=0;o<e;++o){var a=r+o*e;t[a]/=i,n[a]/=i}}(r,e,i,n,r[o]);for(a=0;a<n;++a){var s=r[a+i*n];0!==s&&i!==a&&function(t,n,r,e,i,o){for(var a=0;a<i;++a){var s=r+a*i,u=e+a*i;t[s]+=t[u]*o,n[s]+=n[u]*o}}(r,e,a,i,n,-s)}}return e}function Un(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=Math.atan2(e,r);return 0<=i?i:i+2*Math.PI}function Zn(t,n){for(var r=t.slice(),e=t.length;e<n-1;++e)r[e]=0;return r[n-1]=1,r}function $n(t,n,r){if(void 0===n&&(n=Math.sqrt(t.length)),n===r)return t;for(var e=ar(r),i=Math.min(n,r),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)e[o*r+a]=t[o*n+a];e[(o+1)*r-1]=t[(o+1)*n-1],e[(r-1)*r+o]=t[(n-1)*n+o]}return e[r*r-1]=t[n*n-1],e}function Kn(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var e=ar(n);return t.forEach(function(t){e=Qn(e,t,n)}),e}function Qn(t,n,r){void 0===r&&(r=Math.sqrt(t.length));var e=[],i=t.length/r,o=n.length/i;if(!i)return n;if(!o)return t;for(var a=0;a<r;++a)for(var s=0;s<o;++s)for(var u=e[s*r+a]=0;u<i;++u)e[s*r+a]+=t[u*r+a]*n[s*i+u];return e}function Jn(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,e=0,i=r-1;0<=i;--i)e+=t[i];return r?e/r:0}function tr(t,n){for(var r=Math.min(t.length,n.length),e=t.slice(),i=0;i<r;++i)e[i]=e[i]+n[i];return e}function nr(t,n){for(var r=Math.min(t.length,n.length),e=t.slice(),i=0;i<r;++i)e[i]=e[i]-n[i];return e}function rr(t,n){return void 0===n&&(n=9===t.length),n?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function er(t,n,r){void 0===r&&(r=n.length);var e=Qn(t,n,r),i=e[r-1];return e.map(function(t){return t/i})}function ir(t,n){return er(or(n,3),Zn(t,3))}function or(t,n){var r=Math.cos(t),e=Math.sin(t),i=ar(n);return i[0]=r,i[1]=e,i[n]=-e,i[n+1]=r,i}function ar(t){for(var n=t*t,r=[],e=0;e<n;++e)r[e]=e%(t+1)?0:1;return r}function sr(t,n){for(var r=ar(n),e=Math.min(t.length,n-1),i=0;i<e;++i)r[(n+1)*i]=t[i];return r}function ur(t,n){for(var r=ar(n),e=Math.min(t.length,n-1),i=0;i<e;++i)r[n*(n-1)+i]=t[i];return r}function lr(t,n,r,e,i,o,a,s){var u=t[0],l=t[1],c=n[0],f=n[1],p=r[0],d=r[1],h=e[0],g=e[1],v=i[0],m=i[1],b=o[0],x=o[1],M=a[0],y=a[1],E=s[0],S=s[1],w=Vn([u,0,c,0,p,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,c,0,p,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,-v*u,-m*u,-b*c,-x*c,-M*p,-y*p,-E*h,-S*h,-v*l,-m*l,-b*f,-x*f,-M*d,-y*d,-E*g,-S*g],8);if(!w.length)return[];var C=Qn(w,[v,m,b,x,M,y,E,S],8);return C[8]=1,$n(function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],e=0;e<n;++e)for(var i=0;i<n;++i)r[i*n+e]=t[n*e+i];return r}(C),3,4)}function cr(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(t){return t.split(" ").map(function(t){return t?""+n+t:""}).join(" ")}).join(" ")}.apply(void 0,yn([In],t))}function fr(t,n,r){return Kn(n,ur(r,n),t,ur(r.map(function(t){return-t}),n))}function pr(s){var t=dr(Lr(s,":before"));return console.log(s,Lr(s).transformOrigin,Lr(s,":before").transformOrigin),t.map(function(t,n){var r,e,i=mt(t),o=i.value,a=i.unit;return o*(r=s,e=0===n,"%"!==a?1:Mr(r.ownerSVGElement)[e?"width":"height"]/100)})}function dr(t){var n=t.transformOrigin;return n?n.split(" "):["0","0"]}function hr(t,n,r){for(var e=document.body,i=!t||r?t:t.parentElement,o=!1,a="relative";i&&i!==e;){n===i&&(o=!0);var s=Lr(i),u=s.transform;if("static"!==(a=s.position)||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===e,offsetParent:i||e}}function gr(t,n,r,e){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;e&&(s-=(o=(n||document.documentElement).getBoundingClientRect()).left,u-=o.top);var l,c,f=ut(s),p=!f;return p||"svg"===a?c=(l=dr(r).map(function(t){return parseFloat(t)})).slice():(c=(l=An?pr(t):dr(r).map(function(t){return parseFloat(t)})).slice(),p=!0,"g"===a?u=s=0:(s=(i=function(t,n){if(!t.getBBox)return[0,0];var r=t.getBBox(),e=Mr(t.ownerSVGElement),i=r.x-e.x,o=r.y-e.y;return[i,o,n[0]-i,n[1]-o]}(t,l))[0],u=i[1],l[0]=i[2],l[1]=i[3])),{isSVG:f,hasOffset:p,offset:[s||0,u||0],origin:l,targetOrigin:c}}function vr(t,n){void 0===n&&(n=window.getComputedStyle(t));var r=window.getComputedStyle(document.body),e=parseInt(r.marginLeft,10),i=parseInt(r.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(i=0),"auto"===n.left&&"auto"===n.right||(e=0)),[e,i]}function mr(t,n){for(var r,e,i,o,a,s,u=t,l=[],c=!1,f=!1,p=3,d=hr(n,n,!0).offsetParent;u&&!c;){var h=Lr(u),g=u.tagName.toLowerCase(),v=h.position,m="fixed"===v,b=(s=h.transform,o=s&&"none"!==s?lt(s)?s:vt(s).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0],(a=void 0)===a&&(a=6===o.length),a?[o[0],o[1],0,o[2],o[3],0,o[4],o[5],1]:o),x=b.length;if(!f&&16===x){f=!0,p=4;for(var M=l.length,y=0;y<M;++y)l[y]=$n(l[y],3,4)}f&&9===x&&(b=$n(b,3,4));var E=gr(u,n,h,m),S=E.hasOffset,w=E.isSVG,C=E.origin,D=E.targetOrigin,R=E.offset,P=R[0],O=R[1];"svg"===g&&i&&l.push(function(t,n){var r=t.clientWidth,e=t.clientHeight,i=Mr(t),o=i.width,a=i.height,s=r/o,u=e/a,l=t.preserveAspectRatio.baseVal,c=l.align,f=l.meetOrSlice,p=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),p[0]=o*g/2,p[1]=a*v/2,m=2===f?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(r-o)/2*g,h[1]=(e-a)/2*v)}var b=sr(d,n);return b[n*(n-1)]=h[0],b[n*(n-1)+1]=h[1],fr(b,n,p)}(u,p),ar(p));var z=hr(u,n),B=z.offsetParent,G=z.isEnd,T=z.isStatic;_n&&S&&!w&&T&&("relative"===v||"static"===v)&&(P-=B.offsetLeft,O-=B.offsetTop,c=c||G);var _,A=0,I=0;if(S&&d!==B&&(A=B.clientLeft,I=B.clientTop),S&&B===document.body&&(P+=(_=vr(u,h))[0],O+=_[1]),l.push(fr(b,p,C),ur(S?[P-u.scrollLeft+A,O-u.scrollTop+I]:[u,C],p)),i=i||b,r=r||C,e=e||D,c||m)break;u=B,c=G}return{offsetContainer:d,matrixes:l,targetMatrix:i=i||ar(p),transformOrigin:r=r||[0,0],targetOrigin:e=e||[0,0],is3d:f}}function br(t,n,r,e,i){var o;void 0===r&&(r=n);var a,s,u,l,c,f,p=0,d=0,h=0,g={};i?(p=i.width,d=i.height):t&&(a=Lr(t),p=t.offsetWidth,d=t.offsetHeight,ut(p)&&(p=(o=zr(t,a,!0))[0],d=o[1])),t&&(u=Cr((s=function(t,n,r,e){void 0===r&&(r=n);var i=mr(t,n),o=i.matrixes,a=i.is3d,s=i.targetMatrix,u=i.transformOrigin,l=i.targetOrigin,c=mr(i.offsetContainer,r),f=c.matrixes,p=c.is3d,d=e||p||a,h=d?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=n||document.body,m=s,b=ar(h),x=ar(h),M=ar(h),y=ar(h),E=o.length,S=hr(v,v,!0).offsetParent;f.reverse(),o.reverse(),!a&&d&&(m=$n(m,3,4),o.forEach(function(t,n){o[n]=$n(t,3,4)}));!p&&d&&f.forEach(function(t,n){f[n]=$n(t,3,4)});f.forEach(function(t){x=Qn(x,t,h)}),o.forEach(function(t,n){var r;E-2===n&&(M=b.slice()),E-1===n&&(y=b.slice()),lt(t[h*(h-1)])&&(r=function(t,n,r,e,i,o){var a,s=zr(t,void 0,!0),u=s[0],l=s[1],c=n.getBoundingClientRect(),f=[0,0];n===document.body&&(f=vr(t));var p=t.getBoundingClientRect(),d=p.left-c.left+n.scrollLeft-(n.clientLeft||0)+f[0],h=p.top-c.top+n.scrollTop-(n.clientTop||0)+f[1],g=p.width,v=p.height,m=Kn(r,i,o),b=wr(m,u,l,r),x=b.left,M=b.top,y=b.width,E=b.height,S=yr(m,e,r),w=nr(S,[x,M]),C=[d+w[0]*g/y,h+w[1]*v/E],D=[0,0],R=0;for(;++R<10;){var P=Vn(i,r);a=nr(yr(P,C,r),yr(P,S,r)),D[0]=a[0],D[1]=a[1];var O=wr(Kn(r,i,ur(D,r),o),u,l,r),z=O.left,B=O.top,G=z-d,T=B-h;if(Math.abs(G)<2&&Math.abs(T)<2)break;C[0]-=G,C[1]-=T}return D.map(function(t){return Math.round(t)})}(t[h*(h-1)],S,h,t[h*(h-1)+1],b,o[n+1]),t[h*(h-1)]=r[0],t[h*(h-1)+1]=r[1]),b=Qn(b,t,h)});var w=!g&&a;m=m||ar(w?4:3);var C=xr(g&&16===m.length?$n(m,4,3):m,w);return{rootMatrix:x=Hn(x,h,h),beforeMatrix:M,offsetMatrix:y,allMatrix:b,targetMatrix:m,targetTransform:C,transformOrigin:u,targetOrigin:l,is3d:d}}(t,n,r,e)).allMatrix,s.transformOrigin,p,d),g=Mn(Mn({},s),u),l=Cr(s.allMatrix,[50,50],100,100),c=[l.pos1,l.pos2],h=Un(0<(f=l.direction)?c[0]:c[1],0<f?c[1]:c[0]));var v=e?4:3;return Mn({width:p,height:d,rotation:h,rootMatrix:ar(v),beforeMatrix:ar(v),offsetMatrix:ar(v),allMatrix:ar(v),targetMatrix:ar(v),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!e,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},g)}function xr(t,n){return void 0===n&&(n=9<t.length),(n?"matrix3d":"matrix")+"("+rr(t,!n).join(",")+")"}function Mr(t){var n=t.clientWidth,r=t.clientHeight,e=t.viewBox,i=e&&e.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||n,height:i.height||r}}function yr(t,n,r){return er(t,Zn(n,r),r)}function Er(n,t,r,e){return[[0,0],[t,0],[0,r],[t,r]].map(function(t){return yr(n,t,e)})}function Sr(t){var n=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]}),e=Math.min.apply(Math,n),i=Math.min.apply(Math,r),o=Math.max.apply(Math,n),a=Math.max.apply(Math,r);return{left:e,top:i,right:o,bottom:a,width:o-e,height:a-i}}function wr(t,n,r,e){return Sr(Er(t,n,r,e))}function Cr(t,n,r,e){var i=16===t.length?4:3,o=Er(t,r,e,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],f=l[1],p=o[2],d=p[0],h=p[1],g=o[3],v=g[0],m=g[1],b=yr(t,n,i),x=b[0],M=b[1],y=Math.min(s,c,d,v),E=Math.min(u,f,h,m),S=Math.max(s,c,d,v),w=Math.max(u,f,h,m),x=x-y||0,M=M-E||0,C=[((s=s-y||0)+(c=c-y||0)+(d=d-y||0)+(v=v-y||0))/4,((u=u-E||0)+(f=f-E||0)+(h=h-E||0)+(m=m-E||0))/4],D=Un(C,[s,u]),R=Un(C,[c,f]);return{left:y,top:E,right:S,bottom:w,origin:[x,M],pos1:[s,u],pos2:[c,f],pos3:[d,h],pos4:[v,m],direction:D<R&&R-D<Math.PI||R<D&&R-D<-Math.PI?1:-1}}function Dr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Rr(t,n){return Dr([n[0]-t[0],n[1]-t[1]])}function Pr(t,n,r){void 0===r&&(r=Un(t,n));var e=Rr(t,n);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad)",width:e+"px"}}function Or(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var e=n.length;return{transform:"translate("+n.reduce(function(t,n){return t+n[0]},0)/e+"px, "+n.reduce(function(t,n){return t+n[1]},0)/e+"px) rotate("+t+"rad)"}}function zr(t,n,r,e){void 0===n&&(n=window.getComputedStyle(t)),void 0===e&&(e=r||"border-box"===n.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!ut(i);if((r||e)&&a)return[i,o];if(a||"svg"===t.tagName.toLowerCase())return i=t.clientWidth,o=t.clientHeight,r||e?[i+(parseFloat(n.borderLeftWidth)||0)+(parseFloat(n.borderRightWidth)||0),o+(parseFloat(n.borderTopWidth)||0)+(parseFloat(n.borderBottomWidth)||0)]:[i-(parseFloat(n.paddingLeft)||0)-(parseFloat(n.paddingRight)||0),o-(parseFloat(n.paddingTop)||0)-(parseFloat(n.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function Br(t,n,r,e,i,o){var a,s,u=1,l=[0,0],c=Gr(),f=Gr(),p=Gr(),d=br(n,r,i,!1,o);return n&&(a=d.is3d?4:3,u=(s=Cr(d.offsetMatrix,tr(d.transformOrigin,function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],e=t[n*n-1],i=0;i<n-1;++i)r[i]=t[n*(n-1)+i]/e;return r[n-1]=0,r}(d.targetMatrix,a)),d.width,d.height)).direction,l=tr(s.origin,[s.left-d.left,s.top-d.top]),c=Tr(n),f=Tr(hr(e,e,!0).offsetParent||document.body,!0),t&&(p=Tr(t))),Mn({targetClientRect:c,containerClientRect:f,moveableClientRect:p,beforeDirection:u,beforeOrigin:l,target:n},d)}function Gr(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Tr(t,n){var r=t.getBoundingClientRect(),e=r.left,i=r.width,o=r.top,a=r.bottom,s={left:e,right:r.right,top:o,bottom:a,width:i,height:r.height};return n&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function _r(t){if(t){var n=t.getAttribute("data-direction");if(n){var r=[0,0];return-1<n.indexOf("w")&&(r[0]=-1),-1<n.indexOf("e")&&(r[0]=1),-1<n.indexOf("n")&&(r[1]=-1),-1<n.indexOf("s")&&(r[1]=1),r}}}function Ar(t,n){return[tr(n,t[0]),tr(n,t[1]),tr(n,t[2]),tr(n,t[3])]}function Ir(t){var n=t.left,r=t.top;return Ar([t.pos1,t.pos2,t.pos3,t.pos4],[n,r])}function kr(t,n){return n?Math.round(t/n)*n:t}function jr(r,e){return r.forEach(function(t,n){r[n]=kr(r[n],e)}),r}function Yr(t,n){t[n]&&(t[n].unset(),t[n]=null)}function Xr(t,n,r){return(t[0]-n[0])*(r[1]-n[1])-(t[1]-n[1])*(r[0]-n[0])}function Fr(t,n,r){var e=n.datas;e.datas||(e.datas={});var i=Mn(Mn({},r),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,datas:e.datas});return e.isStartEvent?e.lastEvent=i:e.isStartEvent=!0,i}function qr(t,n,r){var e=n.datas,i="isDrag"in r?r.isDrag:n.isDrag;return e.datas||(e.datas={}),Mn(Mn({isDrag:i},r),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:e.lastEvent,isDouble:n.isDouble,datas:e.datas})}function Nr(t,n,r,e){return t.triggerEvent(n,r,e)}function Lr(t,n){return window.getComputedStyle(t,n)}function Wr(t,r,e){var i={},o={};return t.filter(function(n){var t=n.name;if(i[t]||!r.some(function(t){return n[t]}))return!1;if(!e&&n.ableGroup){if(o[n.ableGroup])return!1;o[n.ableGroup]=!0}return i[t]=!0})}function Hr(t,n,r){return t*(n?r:1/r)}function Vr(t,n,r){return t*(n?1/r:r)}function Ur(t,n){return t===n||null==t&&null==n}function Zr(o,a){var s=[],u=[];return o.forEach(function(t,n){var r=a(t,n,o),e=u.indexOf(r),i=s[e]||[];-1===e&&(u.push(r),s.push(i)),i.push(t)}),s}function $r(t){return t.reduce(function(t,n){return t.concat(n)},[])}function Kr(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(n)-Math.abs(t)}),t[0]}function Qr(t,n,r){return er(Vn(t,r),Zn(n,r),r)}function Jr(t,n){var r=t.is3d?4:3,e=Qr(t.rootMatrix,[n.distX,n.distY],r);return n.distX=e[0],n.distY=e[1],n}function te(t,n,r,e,i){return nr(yr(t,tr(r,n),i),e)}function ne(t,n,r){return r?t/n*100+"%":t+"px"}function re(t){return Math.abs(t)<=Yn?0:t}function ee(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:Et(t.inputEvent.target,cr("direction"))}function ie(t){var n={};for(var r in t)n[t[r]]=r;return n}function oe(t){return t?((n=t)&&lt(n)&&(ct(n)||"length"in n)?[].slice.call(t):[t]).map(function(t){return t?!ft(t)&&"current"in t?t.current:t:null}):[];var n}var ae={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(r,e){var t=e.datas,n=e.targets,i=e.angle,o=e.originalDatas,a=r.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(n?"Group":"")+"Start",c="drag"+(n?"Group":"")+"ControlStart",f=(!0===s?r.controlAbles:u.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),p=Fr(r,e,{});n&&(p.targets=n);var d=Nr(r,l,p);t.isPinch=!1!==d,t.ables=f;var h=t.isPinch;return!!h&&(f.forEach(function(t){var n;o[t.name]=o[t.name]||{},t[c]&&(n=Mn(Mn({},e),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](r,n))}),r.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h)},pinch:function(n,r){var t=r.datas,e=r.scale,i=r.distance,o=r.originalDatas,a=r.inputEvent,s=r.targets,u=r.angle;if(t.isPinch){var l=i*(1-1/e),c=Fr(n,r,{});s&&(c.targets=s),Nr(n,"onPinch"+(s?"Group":""),c);var f=t.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach(function(t){t[p]&&t[p](n,Mn(Mn({},r),{datas:o[t.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(n,r){var t=r.datas,e=r.isPinch,i=r.inputEvent,o=r.targets,a=r.originalDatas;if(t.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=qr(n,r,{isDrag:e});o&&(u.targets=o),Nr(n,s,u);var l=t.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(t){t[c]&&t[c](n,Mn(Mn({},r),{isDrag:e,datas:a[t.name],inputEvent:i,isPinch:!0}))}),e}},pinchGroupStart:function(t,n){return this.pinchStart(t,Mn(Mn({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,Mn(Mn({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,Mn(Mn({},n),{targets:t.props.targets}))}};function se(t,n,r,e,i){var o=n.gesto.move(r,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return Mn(Mn({},i?Jr(n,o):o),{isDrag:!0,isPinch:!!e,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var ue=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return(this.datas=r).draggable||(r.draggable={}),Mn(Mn({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var r,e;return this.isFlag?(r=this.prevX+t[0],e=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],e=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=r,clientY:this.prevY=e,inputEvent:n,isDrag:this.isDrag,distX:r-this.startX,distY:e-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function le(t,r,n){var e=n.originalDatas;e.groupable=e.groupable||{};var i=e.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas,a=n.inputEvent,s=n.isPinch,u=n.clientX,l=n.clientY,c=n.distX,f=n.distY;return t.moveables.map(function(t,n){return o[n]=o[n]||{},o[n][r]=o[n][r]||{},{inputEvent:a,datas:o[n][r],originalDatas:o[n],isPinch:s,clientX:u,clientY:l,distX:c,distY:f}})}function ce(t,o,a,s,n,u){var l=!!a.match(/Start$/g),c=!!a.match(/End$/g),f=n.isPinch,p=n.datas,r=le(t,o.name,n),d=t.moveables,e=r.map(function(t,n){var r=d[n],e=t,e=l?(new ue).dragStart(s,t):(r.state.gesto||(r.state.gesto=p.childGestos[n]),se(t,r.state,s,f,u)),i=o[a](r,Mn(Mn({},e),{parentFlag:!0}));return c&&(r.state.gesto=null),i});return l&&(p.childGestos=d.map(function(t){return t.state.gesto})),e}function fe(t,o,a,n,s,u){void 0===s&&(s=function(t,n){return n});var l=!!a.match(/End$/g),r=le(t,o.name,n),c=t.moveables;return r.map(function(t,n){var r=c[n],e=s(r,t),i=o[a](r,Mn(Mn({},e),{parentFlag:!0}));return i&&u&&u(r,t,i,n),l&&(r.state.gesto=null),i})}function pe(t,n){var r=n.clientX,e=n.clientY,i=n.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=nr(Qr(s,[r-a.left,e-a.top],u?4:3),l),f=xe({datas:i,distX:c[0],distY:c[1]});return[f[0],f[1]]}function de(t,n){var r=n.datas,e=t.state,i=e.allMatrix,o=e.beforeMatrix,a=e.is3d,s=e.left,u=e.top,l=e.origin,c=e.offsetMatrix,f=e.targetMatrix,p=e.transformOrigin,d=a?4:3;r.is3d=a,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=o,r.offsetMatrix=c,r.transformOrigin=p,r.inverseMatrix=Vn(i,d),r.inverseBeforeMatrix=Vn(o,d),r.absoluteOrigin=Zn(tr([s,u],l),d),r.startDragBeforeDist=er(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=er(r.inverseMatrix,r.absoluteOrigin,d)}function he(t,n){var r,e,i,o,a,s,u,l,c,f,p,d=t.datas,h=t.originalDatas.beforeRenderable,g=d.transformIndex,v=h.nextTransforms,m=h.nextTransformAppendedIndexes,b=-1===g?v.length:g+m.filter(function(t){return t<g}).length,x=(e=b,i=(r=v).slice(0,e<0?void 0:e),o=r[e]||"",a=e<0?[]:r.slice(e),s=It(i),u=It([o]),l=It(a),c=At(s),f=At(l),p=Qn(c,f,4),{transforms:r,beforeFunctionMatrix:c,targetFunctionMatrix:At(u),afterFunctionMatrix:f,allFunctionMatrix:p,beforeFunctions:s,targetFunction:u[0],afterFunctions:l,beforeFunctionTexts:i,targetFunctionText:o,afterFunctionTexts:a}),M=x.targetFunction,y="rotate"===n?"rotateZ":n;d.beforeFunctionTexts=x.beforeFunctionTexts,d.afterFunctionTexts=x.afterFunctionTexts,d.beforeTransform=x.beforeFunctionMatrix,d.targetTansform=x.targetFunctionMatrix,d.afterTransform=x.afterFunctionMatrix,d.targetAllTransform=x.allFunctionMatrix,M.functionName===y?(d.afterFunctionTexts.splice(0,1),d.isAppendTransform=!1):(d.isAppendTransform=!0,h.nextTransformAppendedIndexes=yn(m,[b]))}function ge(t,n,r){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?r:n)+" "+t.afterFunctionTexts.join(" ")}function ve(t){var n=t.datas,r=be({datas:n,distX:t.distX,distY:t.distY});return er(me(n,function(t,n){for(var r=ar(n),e=0;e<n-1;++e)r[n*(n-1)+e]=t[e]||0;return r}([r[0],r[1]],4)),Zn([0,0,0],4),4)}function me(t,n,r){var e=t.beforeTransform,i=t.afterTransform,o=t.targetAllTransform,a=r?Qn(o,n,4):Qn(n,o,4),s=Qn(Vn(e,4),a,4);return Qn(s,Vn(i,4),4)}function be(t){var n=t.datas,r=t.distX,e=t.distY,i=n.inverseBeforeMatrix,o=n.is3d,a=n.startDragBeforeDist,s=o?4:3;return nr(er(i,tr(n.absoluteOrigin,[r,e]),s),a)}function xe(t,n){var r=t.datas,e=t.distX,i=t.distY,o=r.inverseBeforeMatrix,a=r.inverseMatrix,s=r.is3d,u=r.startDragBeforeDist,l=r.startDragDist,c=s?4:3;return nr(er(n?o:a,tr(r.absoluteOrigin,[e,i]),c),n?u:l)}function Me(t){var n=[];return 0<=t[1]&&(0<=t[0]&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(0<=t[0]&&n.push(1),t[0]<=0&&n.push(0)),n}function ye(n,t){return Me(t).map(function(t){return n[t]})}function Ee(t,n){var r=ye(t,n);return[Jn.apply(void 0,r.map(function(t){return t[0]})),Jn.apply(void 0,r.map(function(t){return t[1]}))]}function Se(t,n){return Ee(t,n.map(function(t){return-t}))}function we(t,n,r,e){return Qn(t,fr(n,e,r),e)}function Ce(t,n,r){var e=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,a=n.beforeTransform,s=n.afterTransform,u=o?4:3;return we(i,$n(Qn(Qn(a,At(It([r])),4),s,4),4,u),e,u)}function De(r){var e=r.originalDatas.beforeRenderable;return{setTransform:function(t,n){void 0===n&&(n=-1),e.startTransforms=ct(t)?t:ht(t),Pe(r,n)},setTransformIndex:function(t){Pe(r,t)}}}function Re(t){Pe(t,-1)}function Pe(t,n){var r,e,i=t.originalDatas.beforeRenderable,o=t.datas;-1===(o.transformIndex=n)||(r=i.startTransforms[n])&&(e=It([r]),o.startValue=e[0].functionValue)}function Oe(t,n){t.originalDatas.beforeRenderable.nextTransforms=ht(n)}function ze(t,n,r,e,i){return Oe(i,n),{transform:n,drag:Gi.drag(t,se(i,t.state,r,e,!1))}}function Be(t,n,r,e,i){var o=t.state,a=o.left,s=o.top,u=t.props.groupable,l=u?a:0,c=u?s:0,f=nr(r,Te(t,e,Ce(t.state,i,n)));return nr(f,[l,c])}function Ge(t){var n=t.state,r=n.width,e=n.height,i=n.transformOrigin;return[i[0]/(r/2)-1,i[1]/(e/2)-1]}function Te(t,n,r){void 0===r&&(r=t.state.allMatrix);var e=t.state,i=e.width,o=e.height,a=e.is3d?4:3;return yr(r,[i/2*(1+n[0]),o/2*(1+n[1])],a)}function _e(t,n,r,e,i,o){var a,s,u,l,c,f,p,d,h,g=t.props.groupable,v=t.state,m=v.transformOrigin,b=v.targetMatrix,x=v.offsetMatrix,M=v.is3d,y=v.width,E=v.height,S=v.left,w=v.top,C=M?4:3,D=g?S:0,R=g?w:0,P=we(x,b,(s=n,u=r,void 0===(l=y)&&(l=s),void 0===(c=E)&&(c=u),void 0===(f=m)&&(f=[0,0]),(a=o)?a.map(function(t,n){var r=mt(t),e=r.value,i=r.unit,o=n?c:l,a=n?u:s;return"%"===t||isNaN(e)?a*(o?f[n]/o:0):"%"!==i?e:a*e/100}):f),C);return nr((p=i,d=e,h=Se(Er(P,n,r,C),d),[p[0]-h[0],p[1]-h[1]]),[D,R])}function Ae(t,n){if(!n[0]&&!n[1])return[0,0];var r=[-1,-1];return[n[0]?n[0]:-1*r[0],n[1]?n[1]:-1*r[1]]}function Ie(t,n){return Se(Ir(t.state),n)}function ke(t,n,p,d,r,e){var h=r[0],g=r[1],i=e[0],o=e[1],v=[],a=d?0:1,m="vertical"===n?"horizontal":"vertical",b=Zr(t.filter(function(t){return t.type===n}),function(t){return t.element}).map(function(t){return t[0]}).filter(function(t){var n=t.pos,r=t.sizes;return n[a]<=o&&i<=n[a]+r[a]});return b.forEach(function(t){var c=t.pos[d],f=c+t.sizes[d];b.forEach(function(t){var n,r=t.pos,e=t.sizes,i=t.element,o=r[d],a=o+e[d],s=0,u=0,l=!0;if(f<=o)h<(s=a-(u=f-o))-p&&(l=!1);else{if(!(a<=c))return;(s=o-(u=c-a))+p<g&&(l=!1)}l&&v.push({pos:"vertical"==m?[s,r[1]]:[r[0],s],element:i,sizes:e,size:0,type:m,gap:u,gapGuidelines:b}),f<=h&&g<=o&&(0<=kr(h-((n=(o+f-(g-h))/2)-p),.1)&&v.push({pos:"vertical"==m?[n,r[1]]:[r[0],n],element:i,sizes:e,size:0,type:m,gap:f-h,gapGuidelines:b}))})}),v}function je(n,r,e,t,i){return t&&t.forEach(function(t){n.push({type:"horizontal",pos:[0,kr(t,.1)],size:r})}),i&&i.forEach(function(t){n.push({type:"vertical",pos:[kr(t,.1),0],size:e})}),n}function Ye(t,n,r,e,i){var o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,M,y,E,S,w,C,D,R,P,O=(p=(o=t).state,d=p.guidelines,h=p.containerClientRect,g=h.scrollHeight,v=h.scrollWidth,m=o.props,b=m.snapHorizontal,x=void 0===b||b,M=m.snapVertical,y=void 0===M||M,E=m.snapGap,S=void 0===E||E,w=m.verticalGuidelines,C=m.horizontalGuidelines,D=m.snapThreshold,R=void 0===D?5:D,P=yn(d),S&&(s=(a=Sr(Ir(o.state))).top,u=a.left,l=a.bottom,c=a.right,f=d.filter(function(t){return t.element}),P.push.apply(P,yn(ke(f,"horizontal",R,0,[u,c],[s,l]),ke(f,"vertical",R,1,[s,l],[u,c])))),je(P,v,g,x&&C,y&&w),P),z=t.props,B=z.snapElement,G=void 0===B||B;return Xe(O,n,r,{snapThreshold:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length-1,e=0;e<r;++e){var i=t[e];if(!ut(i))return i}return t[r]}(i,z.snapThreshold,5),snapCenter:e,snapElement:G})}function Xe(t,n,r,e){return{vertical:Ne(t,"vertical",n,e),horizontal:Ne(t,"horizontal",r,e)}}function Fe(t,n,r,e){var i=t.props.snapCenter&&r,o=["left","right"],a=["top","bottom"];return i&&(o.push("center"),a.push("middle")),o=o.filter(function(t){return t in n}),a=a.filter(function(t){return t in n}),Ye(t,o.map(function(t){return n[t]}),a.map(function(t){return n[t]}),i,e)}function qe(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],e=r.guidelineInfos[0],i=e.offset,o=e.dist,a=e.guideline;return{isSnap:n,offset:i,dist:o,pos:r.pos,guideline:a}}function Ne(r,a,t,n){var e=void 0===n?{}:n,i=e.snapThreshold,s=void 0===i?5:i,u=e.snapElement,l=e.snapCenter;if(!r||!r.length)return{isSnap:!1,index:-1,posInfos:[]};var o="vertical"===a?0:1,c=t.map(function(e,t){var n=r.map(function(t){var n=t.pos,r=e-n[o];return{offset:r,dist:Math.abs(r),guideline:t}}).filter(function(t){var n=t.guideline,r=t.dist,e=n.type,i=n.center,o=n.element;return!(!u&&o||!l&&i||e!==a||s<r)}).sort(function(t,n){return t.dist-n.dist});return{pos:e,index:t,guidelineInfos:n}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist}),f=0<c.length;return{isSnap:f,index:f?c[0].index:-1,posInfos:c}}function Le(t,n){var r=Math.abs(t.offset),e=Math.abs(n.offset);return t.isBound&&n.isBound?e-r:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?e-r:t.isSnap?-1:n.isSnap||r<Yn?1:e<Yn?-1:r-e}function We(t,a){return t.slice().sort(function(t,n){var r=t.sign[a],e=n.sign[a],i=t.offset[a],o=n.offset[a];return r?e?Le({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function He(t,n){var r=Jn(n[0][0],n[1][0]),e=Jn(n[0][1],n[1][1]);return{vertical:r<=t[0],horizontal:e<=t[1]}}function Ve(t,n){var r,e,i=n[0],o=n[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<Yn&&(a=0),Math.abs(s)<Yn&&(s=0),e=a?(r=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(r=i[0],t[0]),r-e}function Ue(t,r,e){void 0===e&&(e=Yn);var i=Ve(t[0],r)<=0;return t.slice(1).every(function(t){var n=Ve(t,r);return n<=0==i||Math.abs(n)<=e})}function Ze(t,n,r,e,i){return void 0===i&&(i=0),e&&n-i<=t||!e&&t<=r+i?{isBound:!0,offset:e?n-t:r-t}:{isBound:!1,offset:0}}function $e(t,n,r,e,i){var o=t[0],a=t[1],s=n[0],u=n[1],l=re(a[1]-o[1]),c=re(a[0]-o[0]),f=re(u[1]-s[1]);if(!re(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return Ze(l/c*(s[0]-o[0])+o[1],s[1],u[1],r,e);var p=s[0]-o[0];return{isBound:d=Math.abs(p)<=(e||0),offset:d?p:0}}if(f)return{isBound:!1,offset:0};if(i&&!c)return{isBound:!1,offset:0};if(l)return Ze((s[1]-o[1])/(l/c)+o[0],s[0],u[0],r,e);var d,p=s[1]-o[1];return{isBound:d=Math.abs(p)<=(e||0),offset:d?p:0}}function Ke(c,t,f,p){return t.map(function(t){var r=t[0],n=t[1],e=t[2],i=function(t,n,r){var e=t.props.innerBounds;if(!e)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=e.left,o=e.top,a=e.width,s=e.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],f=[[i,o+s],[i+a,o+s]],p=He(r,n),d=p.horizontal,h=p.vertical;if(Ue([r,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=$e(n,l,h),v=$e(n,f,h),m=$e(n,u,d),b=$e(n,c,d),x=g.isBound&&v.isBound,M=g.isBound||v.isBound,y=m.isBound&&b.isBound,E=m.isBound||b.isBound,S=Kr(g.offset,v.offset),w=Kr(m.offset,b.offset),C=[0,0],D=!1;return{isAllBound:Math.abs(w)<Math.abs(S)?(C=[S,0],D=M,x):(C=[0,w],D=E,y),isVerticalBound:M,isHorizontalBound:E,isBound:D,offset:C}}(c,[n,e],f),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=xe({datas:p,distX:a[0],distY:a[1]}).map(function(t,n){return t*(r[n]?2/r[n]:0)});return{sign:r,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function Qe(t,n,r){var e,i,o,a,s,u,l,c,f,p,d,h,g,v=Ke(t,Je(n,[0,0],!1).map(function(t){var n=t[0],r=t[1],e=t[2];return[n.map(function(t){return 2*Math.abs(t)}),r,e]}),Ee(n,[0,0]),r),m=We(v,0),b=We(v,1),x=0,M=0,y=m.isVerticalBound||b.isVerticalBound,E=m.isHorizontalBound||b.isHorizontalBound;return(y||E)&&(i={datas:r,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,l=a.beforeMatrix,c=a.matrix,f=a.is3d,p=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=f?4:3,x=(e=nr(er(o?l:c,tr(o?p:d,[s,u]),g),h))[0],M=e[1]),{vertical:{isBound:y,offset:x},horizontal:{isBound:E,offset:M}}}function Je(i,t,n){return e=n,o=[],a=(r=t)[0],s=r[1],a&&s?o.push([[0,2*s],r,[-a,s]],[[2*a,0],r,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),e&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),e&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var n=t[0],r=t[1],e=t[2];return[n,Ee(i,r),Ee(i,e)]});var r,e,o,a,s}function ti(t,n,r,e){var i=e?t.map(function(t){return ir(t,e)}):t,o=yn([r],n);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t,n){return!Ue(o,t)})}function ni(t,n,r,e,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,f=s-e[0],p=s+l-e[0],d=u-e[1],h=u+c-e[1],g=[[f,d],[p,d],[f,h],[p,h]],v=Ee(r,[0,0]);if(!ti(r,g,v,0))return[];var m=[],b=g.map(function(t){return[Dr(t),Un([0,0],t)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(t){var i=Un([0,0],function(t){var n=t[0],r=t[1],e=r[0]-n[0],i=r[1]-n[1];if(!e)return[n[0],0];if(!i)return[0,n[1]];var o=i/e,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var n=t[0],r=t[1],e=r[0]-n[0],i=r[1]-n[1];if(!e)return Math.abs(n[0]);if(!i)return Math.abs(n[1]);var o=i/e;return Math.abs((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var n=t[0];return n&&o<=n}).map(function(t){var n=t[0],r=t[1],e=Math.acos(n?o/n:0);return[a+(r+e)-i,a+(r-e)-i]}).reduce(function(t,n){return t.push.apply(t,n),t},[]).filter(function(t){return!ti(n,g,v,t)}).map(function(t){return kr(180*t/Math.PI,Yn)}))}),m}function ri(t,n,r){var e=t||{},i=e.left,o=e.top,a=e.right,s=e.bottom,u={left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===s?1/0:s};return{vertical:ei(u,n,!0),horizontal:ei(u,r,!1)}}function ei(t,n,r){var e=t[r?"left":"top"],i=t[r?"right":"bottom"],o=Math.min.apply(Math,n),a=Math.max.apply(Math,n),s=[];return o<e+1&&s.push({isBound:!0,offset:o-e,pos:e}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)})}function ii(t,n,r){return(r?t.map(function(t){return ir(t,r)}):t).some(function(t){return t[0]<n.left&&.1<Math.abs(t[0]-n.left)||t[0]>n.right&&.1<Math.abs(t[0]-n.right)||t[1]<n.top&&.1<Math.abs(t[1]-n.top)||t[1]>n.bottom&&.1<Math.abs(t[1]-n.bottom)})}function oi(t,l,r,n,e){var i=t.props.bounds,c=e*Math.PI/180;if(!i)return[];var o=i.left,a=void 0===o?-1/0:o,s=i.top,u=void 0===s?-1/0:s,f=i.right,p=void 0===f?1/0:f,d=i.bottom,h=void 0===d?1/0:d,g=a-n[0],v=p-n[0],m=u-n[1],b=h-n[1],x={left:g,top:m,right:v,bottom:b};if(!ii(r,x,0))return[];var M=[];return[[g,0],[v,0],[m,1],[b,1]].forEach(function(t,n){var s=t[0],u=t[1];r.forEach(function(t){var r,n,e,i,o,a=Un([0,0],t);M.push.apply(M,(n=s,e=u,i=Dr(r=t),[o=Math.sqrt(i*i-n*n)||0,-o].sort(function(t,n){return Math.abs(t-r[e?0:1])-Math.abs(n-r[e?0:1])}).map(function(t){return Un([0,0],e?[t,n]:[n,t])}).map(function(t){return c+t-a}).filter(function(t){return!ii(l,x,t)}).map(function(t){return kr(180*t/Math.PI,Yn)})))})}),M}function ai(t,n,r){var e=yr(t,[n.clientLeft,n.clientTop],r);return[n.left+e[0],n.top+e[1]]}function si(t){var n,r,e,i,o,a,s,u,l,g,c,f,p,d,v,m,h,b,x,M,y,E,S,w,C=t.state;C.guidelines&&C.guidelines.length||(e=void 0===(r=(n=t.props).horizontalGuidelines)?[]:r,o=void 0===(i=n.verticalGuidelines)?[]:i,s=void 0===(a=n.elementGuidelines)?[]:a,u=n.bounds,l=n.innerBounds,g=n.snapCenter,(l||u||e.length||o.length||s.length)&&(c=C.containerClientRect,p=(f=C.targetClientRect).top,d=f.left,v=C.rootMatrix,m=C.is3d?4:3,h=ai(v,c,m),b=h[0],x=h[1],M=Ir(C),y=nr([Math.min.apply(Math,M.map(function(t){return t[0]})),Math.min.apply(Math,M.map(function(t){return t[1]}))],Qr(v,[d-b,p-x],m)).map(function(t){return n=t,Math.round(n%1==-.5?n-1:n);var n}),E=y[0],S=y[1],w=[],s.forEach(function(t){var n=t.getBoundingClientRect(),r=n.left-b,e=n.top-x,i=e+n.height,o=r+n.width,a=Qr(v,[r,e],m),s=a[0],u=a[1],l=Qr(v,[o,i],m),c=l[0],f=l[1],p=c-s,d=f-u,h=[p,d];w.push({type:"vertical",element:t,pos:[kr(s+E,.1),u],size:d,sizes:h}),w.push({type:"vertical",element:t,pos:[kr(c+E,.1),u],size:d,sizes:h}),w.push({type:"horizontal",element:t,pos:[s,kr(u+S,.1)],size:p,sizes:h}),w.push({type:"horizontal",element:t,pos:[s,kr(f+S,.1)],size:p,sizes:h}),g&&(w.push({type:"vertical",element:t,pos:[kr((s+c)/2+E,.1),u],size:d,sizes:h,center:!0}),w.push({type:"horizontal",element:t,pos:[s,kr((u+f)/2+S,.1)],size:p,sizes:h,center:!0}))}),C.guidelines=w,C.enableSnap=!0))}function ui(t,n){var r=t.props,e=r.snappable,i=r.bounds,o=r.innerBounds,a=r.verticalGuidelines,s=r.horizontalGuidelines,u=t.state,l=u.guidelines,c=u.enableSnap;return e&&c&&!(n&&!0!==e&&e.indexOf(n)<0)&&!!(i||o||l&&l.length||a&&a.length||s&&s.length)}function li(t,n,r,e,i){var o=function(t,n,r,e){var i=n[0]-t[0],o=n[1]-t[1];Math.abs(i)<Yn&&(i=0);Math.abs(o)<Yn&&(o=0);if(!i)return e?[0,0]:[0,r];if(!o)return e?[r,0]:[0,0];var a=o/i,s=t[1]-a*t[0];{if(e){var u=a*(n[0]+r)+s;return[r,u-n[1]]}return[(n[1]+r-s)/a-n[0],r]}}(t,n,r,e);if(!o)return[0,0];var a=xe({datas:i,distX:o[0],distY:o[1]});return[a[0],a[1]]}function ci(t,n,r,e,i,o){var a=Er(t,n,r,o?4:3);return Ar(a,nr(e,Se(a,i)))}function fi(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function pi(t,n){return t.isBound?t.offset:n.isSnap?qe(n).offset:0}function di(t,n,r,e){var i=function(t,n,r){var e=t.props.bounds||{},i=e.left,o=void 0===i?-1/0:i,a=e.top,s=void 0===a?-1/0:a,u=e.right,l=void 0===u?1/0:u,c=e.bottom,f=void 0===c?1/0:c,p=r[0],d=r[1],h=nr(r,n),g=h[0],v=h[1];Math.abs(g)<Yn&&(g=0),Math.abs(v)<Yn&&(v=0);var m,b,x,M,y,E=0<v,S=0<g,w={isBound:!1,offset:0,pos:0},C={isBound:!1,offset:0,pos:0};return 0===g&&0===v||(0===g?E?f<d&&(C.pos=f,C.offset=d-f):d<s&&(C.pos=s,C.offset=d-s):0===v?S?l<p&&(w.pos=l,w.offset=p-l):p<o&&(w.pos=o,w.offset=p-o):(m=v/g,b=r[1]-m*p,M=x=0,y=!1,S&&l<=p?(x=m*l+b,M=l,y=!0):!S&&p<=o&&(x=m*o+b,M=o,y=!0),y&&(x<s||f<x)&&(y=!1),y||(E&&f<=d?(M=((x=f)-b)/m,y=!0):!E&&d<=s&&(M=((x=s)-b)/m,y=!0)),y&&(w.isBound=!0,w.pos=M,w.offset=p-M,C.isBound=!0,C.pos=x,C.offset=d-x))),{vertical:w,horizontal:C}}(t,n,r),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,r){var e=r[0],i=r[1],o=n[0],a=n[1],s=nr(r,n),u=s[0],l=0<(f=s[1]),c=0<u,u=re(u),f=re(f),p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===f)return{vertical:p,horizontal:d};var h=Ye(t,u?[e]:[],f?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var n=t.pos;return c?o<=n:n<=o}),v.posInfos.filter(function(t){var n=t.pos;return l?a<=n:n<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,x,M,y,E=qe(g),S=E.isSnap,w=E.guideline,C=qe(v),D=C.isSnap,R=C.guideline,P=D?R.pos[1]:0,O=S?w.pos[0]:0;return 0===u?D&&(d.isSnap=!0,d.pos=R.pos[1],d.offset=i-d.pos):0===f?S&&(p.isSnap=!0,p.pos=O,p.offset=e-O):(m=f/u,b=r[1]-m*e,M=x=0,y=!1,S?(x=m*(M=O)+b,y=!0):D&&(M=((x=P)-b)/m,y=!0),y&&(p.isSnap=!0,p.pos=M,p.offset=e-M,d.isSnap=!0,d.pos=x,d.offset=i-x)),{vertical:p,horizontal:d}}(t,n,r),u=s.horizontal,l=s.vertical,c=fi(o,u),f=fi(a,l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:p},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:d}}}function hi(t,n,r,e){void 0===e&&(e=r);var i=ri(t.props.bounds,e.map(function(t){return t[0]}),e.map(function(t){return t[1]})),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Ye(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]})),u=s.horizontal,l=s.vertical,c=pi(o[0],u),f=pi(a[0],l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l}}}function gi(t,n,r,e,i){void 0===i&&(i={});var o=ri(n,r,e),a=o.horizontal,s=o.vertical,u=i.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Xe(t,r,e,i),l=u.horizontal,c=u.vertical,f=pi(a[0],l),p=pi(s[0],c),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:h,bounds:s,snap:c}}}function vi(t){return t?t/Math.abs(t):0}function mi(B,G,t,T,_,A){return t.map(function(t){var n=t[0],r=t[1],e=Ee(G,n),i=Ee(G,r),o=T?di(B,e,i,_):hi(B,_,[i]),a=o.horizontal,s=a.offset,u=a.isBound,l=a.isSnap,c=o.vertical,f=c.offset,p=c.isBound,d=c.isSnap,h=nr(r,n);if(!f&&!s)return{isBound:p||u,isSnap:d||l,sign:h,offset:[0,0]};var g,v,m,b,x,M,y,E,S,w,C,D,R,P=(g=o,v=T,m=Un(e,i)/Math.PI*180,b=g.vertical,x=b.isBound,M=b.isSnap,y=b.dist,E=g.horizontal,S=E.isBound,w=E.isSnap,D=(C=m%180)<3||177<C,R=87<C&&C<93,E.dist<y&&(x||M&&!R&&(!v||!D))?"vertical":!S&&(!w||D||v&&R)?"":"horizontal");if(!P)return{sign:h,isBound:!1,isSnap:!1,offset:[0,0]};var O="vertical"==P,z=li(e,i,-(O?f:s),O,A).map(function(t,n){return t*(h[n]?2/h[n]:0)});return{sign:h,isBound:O?p:u,isSnap:O?d:l,offset:z}})}function bi(t,n,r,e,i,o,a,s){for(var u,l,c,f,p,d,h,g,v,m,b,x,M,y,E,S,w,C,D,R,P,O,z,B,G,T,_,A,I,k,j,Y,X,F,q,N,L,W,H,V,U=Ir(t.state),Z=t.props.keepRatio,$=0,K=0,Q=0;Q<2;++Q){var J,tt,nt=n($,K),rt=(u=t,l=nt,p=a,d=s,E=y=M=x=b=m=v=g=h=void 0,g=f=Z,v=[],m=[-(h=c=i)[0],-h[1]],h[0]&&h[1]?(v.push([m,[h[0],-h[1]]],[m,[-h[0],h[1]]]),g&&v.push([m,h])):h[0]?g?v.push([m,[m[0],-1]],[m,[m[0],1]],[m,[h[0],-1]],[m,h],[m,[h[0],1]]):v.push([[m[0],-1],[h[0],-1]],[[m[0],0],[h[0],0]],[[m[0],1],[h[0],1]]):h[1]?g?v.push([m,[-1,m[1]]],[m,[1,m[1]]],[m,[-1,h[1]]],[m,[1,h[1]]],[m,h]):v.push([[-1,m[1]],[-1,h[1]]],[[0,m[1]],[0,h[1]]],[[1,m[1]],[1,h[1]]]):v.push([m,[1,0]],[m,[-1,0]],[m,[0,-1]],[m,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),b=v,x=Je(l,c,f),M=yn(mi(u,l,b,f,p,d),Ke(u,x,Ee(l,[0,0]),d)),y=We(M,0),E=We(M,1),{width:{isBound:y.isBound,offset:y.offset[0]},height:{isBound:E.isBound,offset:E.offset[1]}}),et=rt.width,it=rt.height,ot=et.isBound,at=it.isBound,st=et.offset,ut=it.offset;if(1===Q&&(ot||(st=0),at||(ut=0)),0===Q&&a&&!ot&&!at)return[0,0];Z&&(J=Math.abs(st)*(r?1/r:1),tt=Math.abs(ut)*(e?1/e:1),(ot&&at?J<tt:at||!ot&&J<tt)?st=r*ut/e:ut=e*st/r),$+=st,K+=ut}return i[0]&&i[1]&&(R=t,P=U,z=o,B=s,F=[-(O=i)[0],-O[1]],q=R.state,N=q.width,L=q.height,W=R.props.bounds,V=H=1/0,W&&(G=[[O[0],-O[1]],[-O[0],O[1]]],T=W.left,_=void 0===T?-1/0:T,A=W.top,I=void 0===A?-1/0:A,k=W.right,j=void 0===k?1/0:k,Y=W.bottom,X=void 0===Y?1/0:Y,G.forEach(function(t){var n,r,e,i=t[0]!==F[0],o=t[1]!==F[1],a=Ee(P,t),s=vi(t[1]-F[1]),u=vi(t[0]-F[0]),l=360*Un(z,a)/Math.PI;o&&(r=a.slice(),(Math.abs(l-360)<2||Math.abs(l-180)<2)&&(r[1]=z[1]),n=li(z,r,(z[1]<a[1]?X:I)-a[1],!1,B)[1],isNaN(n)||(V=L+s*n)),i&&(r=a.slice(),(Math.abs(l-90)<2||Math.abs(l-270)<2)&&(r[0]=z[0]),e=li(z,r,(z[0]<a[0]?j:_)-a[0],!0,B)[0],isNaN(e)||(H=N+u*e))})),w=(S={maxWidth:H,maxHeight:V}).maxWidth,C=S.maxHeight,$+=st=(D=function(t,n,r,e,i,o,a,s,u){var l=hi(t,s,[Ee(n,a)]),c=l.horizontal.offset,f=l.vertical.offset;if(f||c){var p=xe({datas:u,distX:-f,distY:-c}),d=p[0],h=p[1];return[Math.min(i||1/0,r+a[0]*d)-r,Math.min(o||1/0,e+a[1]*h)-e]}return[0,0]}(t,n($,K),r+$,e+K,w,C,i,a,s))[0],K+=ut=D[1]),[$,K]}function xi(t,n,r,e){if(!ui(t,"rotatable"))return e;var i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=e*Math.PI/180,l=[i,o,a,s].map(function(t){return nr(t,r)}),c=l.map(function(t){return ir(t,u)}),f=yn(oi(t,l,c,r,e),ni(t,l,c,r,e));return f.sort(function(t,n){return Math.abs(t-e)-Math.abs(n-e)}),f.length?f[0]:e}function Mi(t,s,u,l,n,c){var f=c.width,p=c.height;if(!ui(t,"scalable"))return[0,0];var d=c.is3d,r=bi(t,function(t,n){return ci((r=c,e=tr(s,[t/f,n/p]),i=r.transformOrigin,o=r.offsetMatrix,a=r.is3d?4:3,we(o,Qn(r.targetMatrix,sr(e,a),a),i,a)),f,p,l,u,d);var r,e,i,o,a},f,p,u,l,n,c);return[r[0]/f,r[1]/p]}function yi(t,n,r,e,i,o){if(!ui(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=Ar(o.absolutePoses,[n,r]),s=Sr(a),u=s.left,l=s.right,c=s.top,f=s.bottom,p=[[u,c],[l,c],[u,f],[l,f]];t.props.snapCenter&&p.push([(u+l)/2,(c+f)/2]);var d,h,g,v,m,b,x,M,y,E,S,w,C,D,R,P,O,z,B,G=hi(t,i,p,a),T=G.vertical,_=G.horizontal,A=Qe(t,a,o),I=A.vertical,k=A.horizontal,j=T.isSnap,Y=_.isSnap,X=T.isBound||I.isBound,F=_.isBound||k.isBound,q=Kr(T.offset,I.offset),N=Kr(_.offset,k.offset),L=(d=e,g=[X,F],v=[j,Y],m=[q,N],E=(h=[n,r])[0],S=h[1],w=g[0],C=g[1],D=v[0],R=v[1],P=m[0],O=m[1],z=-P,B=-O,d&&E&&S?(B=z=0,b=[],w&&C?b.push([0,O],[P,0]):w?b.push([P,0]):C?b.push([0,O]):D&&R?b.push([0,O],[P,0]):D?b.push([P,0]):R&&b.push([0,O]),b.length&&(b.sort(function(t,n){return Dr(nr([E,S],t))-Dr(nr([E,S],n))}),(x=b[0])[0]&&Math.abs(E)>Yn?(z=-x[0],B=S*Math.abs(E+z)/Math.abs(E)-S):x[1]&&Math.abs(S)>Yn&&(M=S,B=-x[1],z=E*Math.abs(S+B)/Math.abs(M)-E),d&&C&&w&&(Math.abs(z)>Yn&&Math.abs(z)<Math.abs(P)?(z*=y=Math.abs(P)/Math.abs(z),B*=y):Math.abs(B)>Yn&&Math.abs(B)<Math.abs(O)?(z*=y=Math.abs(O)/Math.abs(B),B*=y):(z=Kr(-P,z),B=Kr(-O,B))))):(z=E||w?-P:0,B=S||C?-O:0),[z,B]);return[{isBound:X,isSnap:j,offset:L[0]},{isBound:F,isSnap:Y,offset:L[1]}]}function Ei(t){var r=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var n=t.guideline;-1<r.indexOf(n)||r.push(n)})}),r}function Si(t,n,r,e){var i=t-r,o=i<0?i+n:e;return{size:(i<0?0:i)-o,pos:o}}function wi(t,l,r,c){var f=[],n=Zr(t.filter(function(t){var n=t.element,r=t.gap;return n&&!r}),function(t){var n,r,e,i=t.element,o=t.pos,a=o[c],s=(Math.min(0,a-l)<0?-1:1)+"_"+o[c?0:1],u=-1<(e=bt(n=f,function(t){var n=t[0],r=t[1];return i===n&&a===r}))?n[e]:r;return u?u[2]:(f.push([i,a,s]),s)});return n.forEach(function(t){t.sort(function(t,n){return Si(t.pos[c],t.size,l,r).size-Si(n.pos[c],t.size,l,r).size||t.pos[c?0:1]-n.pos[c?0:1]})}),n}function Ci(t,n,p,d,h,g,v,m,b,x,M,y){var E=n[0],S=n[1],w=n[2],C=n[3];return $r(t.map(function(t,c){var f=!0;return t.map(function(t,n){var r,e=t.pos,i=t.size,o=Si(e[x],i,d,h),a=o.pos,s=o.size;if(s<v)return null;var u=f;f=!1;var l=m&&u?parseFloat(s.toFixed(b)):0;return y.createElement("div",{className:cr("line",E,"guideline","dashed"),"data-size":0<l?M(l):"",key:E+"LinkGuidline"+c+"-"+n,style:((r={})[S]=p+a+"px",r[w]=-g+e[x?0:1]+"px",r[C]=s+"px",r)})})}))}function Di(t,n,o,a,s,u){var l=n[0],c=n[1],f=n[2],p=n[3];return t.map(function(t,n){var r,e=t.type,i=t.pos;return u.createElement("div",{className:cr("line",l,"guideline","target","bold",e),key:l+"TargetGuidline"+n,style:((r={})[c]=o+"px",r[f]=-a+i+"px",r[p]=s+"px",r)})})}function Ri(t,n,a,s,u,l){var c=n[0],f=n[1],p=n[2],d=n[3];return t.map(function(t,n){var r,e=t.pos,i=t.size,o=t.element;return l.createElement("div",{className:cr("line",c,"guideline",o?"bold":""),key:c+"Guidline"+n,style:((r={})[f]=-a+e[u]+"px",r[p]=-s+e[u?0:1]+"px",r[d]=i+"px",r)})})}function Pi(t,i,R,P){var n=t.filter(function(t){var n=t.element,r=t.gap,e=t.type;return n&&r&&e===i}),r="vertical"===i?[0,1]:[1,0],O=r[0],z=r[1];return $r(n.map(function(t,n){var r=t.pos,e=t.gap,i=t.gapGuidelines,o=t.sizes,a=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(t)-Math.abs(n)}),t[0]}(r[z]+o[z]-R[z],r[z]-R[z]-P[z]),s=Math.min(o[z],P[z]);0<a&&s<a?a=2*(a-s/2):a<0&&a<-s&&(a=2*(a+s/2));var u,l,c,f,p,d,h,g,v,m,b,x,M,y,E,S,w,C,D=(0<a?0:P[z])+a/2;return yn((m=i,b=O,x=R,M=P,y=r,E=e,S=D,w=Math.abs(E),C=y[b]+(0<E?M[0]:0),m.filter(function(t){return t.pos[b]<=x[b]}).sort(function(t,n){var r=t.pos;return n.pos[b]-r[b]}).filter(function(t){var n=t.pos,r=t.sizes,e=n[b];return kr(e+r[b],1e-4)===kr(C-w,1e-4)&&(C=e,!0)}).map(function(t){var n=-x[b]+t.pos[b]+t.sizes[b];return Mn(Mn({},t),{gap:E,renderPos:b?[S,n]:[n,S]})})),(u=i,l=O,c=R,f=P,p=r,d=e,h=D,g=Math.abs(d),v=p[l]+(d<0?f[l]:0),u.filter(function(t){return t.pos[l]>c[l]}).sort(function(t,n){var r=t.pos,e=n.pos;return r[l]-e[l]}).filter(function(t){var n=t.pos,r=t.sizes,e=n[l];return kr(e,1e-4)===kr(v+g,1e-4)&&(v=e+r[l],!0)}).map(function(t){var n=-c[l]+t.pos[l]-g;return Mn(Mn({},t),{gap:d,renderPos:l?[h,n]:[n,h]})})))}))}function Oi(t,n,r,e,s,u){var l=e[0],c=e[1],f=e[2],p=e[3],i=t.props,o=i.snapDigit,d=void 0===o?0:o,a=i.isDisplaySnapDigit,h=void 0===a||a,g="vertical"===r?"horizontal":"vertical",v="vertical"===r?[0,1]:[1,0],m=v[0],b=v[1];return n.map(function(t,n){var r,e=t.renderPos,i=t.gap,o=Math.abs(i),a=h?parseFloat(o.toFixed(d)):0;return u.createElement("div",{className:cr("line",l,"guideline","gap"),"data-size":0<a?s(a):"",key:g+"GapGuideline"+n,style:((r={})[c]=e[m]+"px",r[f]=e[b]+"px",r[p]=o+"px",r)})})}function zi(t,n,r,i,o,e){var a=ri(e||t.props.bounds,n,r),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})});var l=function(t){var n=t.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var r=t.getRect(),e=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,u=Ee([e,i,o,a],[0,0]),l=n.left,c=n.top,f=n.width,p=n.height,d=[[l,c],[l,c+p]],h=[[l,c],[l+f,c]],g=[[l+f,c],[l+f,c+p]],v=[[l,c+p],[l+f,c+p]],m=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return[[e,i],[i,a],[a,o],[o,e]].forEach(function(t){var n=He(u,t),r=n.horizontal,e=n.vertical,i=$e(t,h,e,1,!0),o=$e(t,v,e,1,!0),a=$e(t,d,r,1,!0),s=$e(t,g,r,1,!0);i.isBound&&!x.top&&(m.push(c),x.top=!0),o.isBound&&!x.bottom&&(m.push(c+p),x.bottom=!0),a.isBound&&!x.left&&(b.push(l),x.left=!0),s.isBound&&!x.right&&(b.push(l+f),x.right=!0)}),{horizontal:m,vertical:b}}(t),c=l.vertical,f=l.horizontal;c.forEach(function(e){0<=bt(i,function(t){var n=t.type,r=t.pos;return"bounds"===n&&r===e})||i.push({type:"bounds",pos:e})}),f.forEach(function(e){0<=bt(o,function(t){var n=t.type,r=t.pos;return"bounds"===n&&r===e})||o.push({type:"bounds",pos:e})})}var Bi={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,n){var r=t.state,e=r.top,i=r.left,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.snapRenderInfo,c=r.targetClientRect,f=r.containerClientRect,p=r.is3d,d=r.rootMatrix;if(!l||!ui(t,""))return[];var h,g=p?4:3,v=Math.min(o[0],a[0],s[0],u[0]),m=Math.min(o[1],a[1],s[1],u[1]),b=ai(d,f,g),x=Qr(d,[c.left-b[0],c.top-b[1]],g),M=x[0],y=x[1],E=t.props,S=E.snapThreshold,w=void 0===S?5:S,C=E.snapDigit,D=void 0===C?0:C,R=E.isDisplaySnapDigit,P=void 0===R||R,O=E.snapDistFormat,z=void 0===O?function(t){return t}:O,B=l.externalPoses||[],G=Ir(t.state),T=[],_=[],A=[],I=[],k=[],j=Sr(G),Y=j.width,X=j.height,F=j.top,q=j.left,N=j.bottom,L=j.right,W=0<B.length,H=W?Sr(B):{};l.request||(l.direction&&k.push(function(t,n,r){var e=[];if(r[0]&&r[1])e=[r,[-r[0],r[1]],[r[0],-r[1]]].map(function(t){return Ee(n,t)});else if(r[0]||r[1])t.props.keepRatio?e=[[-1,-1],[-1,1],[1,-1],[1,1],r].map(function(t){return Ee(n,t)}):1<(e=ye(n,r)).length&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)e.push(i[o]),e.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return Ye(t,e.map(function(t){return t[0]}),e.map(function(t){return t[1]}),!0,1)}(t,G,l.direction)),l.snap&&(h=Sr(G),l.center&&(h.middle=(h.top+h.bottom)/2,h.center=(h.left+h.right)/2),k.push(Fe(t,h,!0,1))),W&&(l.center&&(H.middle=(H.top+H.bottom)/2,H.center=(H.left+H.right)/2),k.push(Fe(t,H,!0,1))),k.forEach(function(t){var n=t.vertical.posInfos,r=t.horizontal.posInfos;T.push.apply(T,n.map(function(t){return{type:"snap",pos:t.pos}})),_.push.apply(_,r.map(function(t){return{type:"snap",pos:t.pos}})),A.push.apply(A,Ei(n)),I.push.apply(I,Ei(r))})),zi(t,[q,L],[F,N],T,_),W&&zi(t,[H.left,H.right],[H.top,H.bottom],T,_,l.externalBounds);var V=wi(I,M,Y,0),U=wi(A,y,X,1),Z=["horizontal","left","top","width"],$=["vertical","top","left","height"],K=Pi(A,"vertical",[i,e],[Y,X]),Q=Pi(I,"horizontal",[i,e],[Y,X]),J=yn(A,I);return Nr(t,"onSnap",{guidelines:J.filter(function(t){return!t.element}),elements:Zr(J.filter(function(t){return t.element}),function(t){return t.element}),gaps:yn(K,Q)},!0),yn(Oi(t,K,"vertical",Z,z,n),Oi(t,Q,"horizontal",$,z,n),Ci(V,Z,v,M,Y,e,w,P,D,0,z,n),Ci(U,$,m,y,X,i,w,P,D,1,z,n),Di(_,Z,v,e,Y,n),Di(T,$,m,i,X,n),Ri(I,Z,i,e,0,n),Ri(A,$,e,i,1,n))},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},si(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return!(!ee(t)&&!ki(t))||(!t.isRequest&&t.inputEvent?Et(t.inputEvent.target,cr("snap-control")):void 0)},dragControlStart:function(t,n){t.state.snapRenderInfo=null,si(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,n){t.state.snapRenderInfo=null,si(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var n=t.state;n.enableSnap=!1,n.guidelines=[],n.snapRenderInfo=null}},Gi={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var r=t.props.throttleDragRotate,e=t.state,i=e.dragInfo,o=e.beforeOrigin;if(!r||!i)return[];var a=i.dist;if(!a[0]&&!a[1])return[];var s=Dr(a),u=Un(a,[0,0]);return[n.createElement("div",{className:cr("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+o[0]+"px, "+o[1]+"px) rotate("+u+"rad)"}})]},dragStart:function(t,n){var r=n.datas,e=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s,u=window.getComputedStyle(a);r.datas={},r.left=parseFloat(u.left||"")||0,r.top=parseFloat(u.top||"")||0,r.bottom=parseFloat(u.bottom||"")||0,r.right=parseFloat(u.right||"")||0,r.startValue=[0,0],de(t,n),Re(n),s=t,r.absolutePoses=Ir(s.state),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1;var l=Fr(t,n,Mn({set:function(t){r.startValue=t}},De(n)));return!1!==(e||Nr(t,"onDragStart",l))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,r.isPinch=!1),!!r.isDrag&&l},drag:function(t,n){he(n,"translate");var r=n.datas,e=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.distX,u=n.distY,l=r.isDrag,c=r.prevDist,f=r.prevBeforeDist,p=r.startValue;if(l){var d,h,g,v,m,b,x,M,y,E,S,w,C=t.props,D=C.parentMoveable,R=!e&&C.throttleDrag||0,P=!e&&C.throttleDragRotate||0,O=!1,z=0;!e&&0<P&&(s||u)&&(h=kr((d=C.startDragRotate||0)+180*Un([0,0],[s,u])/Math.PI,P)-d,g=u*Math.abs(Math.cos((h-90)/180*Math.PI)),v=Dr([s*Math.abs(Math.cos(h/180*Math.PI)),g]),z=h*Math.PI/180,s=v*Math.cos(z),u=v*Math.sin(z)),o||e||i||P&&!s&&!u||(b=(m=yi(t,s,u,P,a,r))[0],x=m[1],M=b.isSnap,y=b.isBound,E=b.offset,S=x.isSnap,w=x.isBound,O=M||S||y||w,s+=E,u+=x.offset),r.passDeltaX=s-(r.passDistX||0),r.passDeltaY=u-(r.passDistY||0),r.passDistX=s,r.passDistY=u;var B=tr(be({datas:r,distX:s,distY:u}),p),G=tr(ve({datas:r,distX:s,distY:u}),p);P||O||(jr(G,R),jr(B,R));var T=nr(B,p),_=nr(G,p),A=nr(_,c),I=nr(T,f);r.prevDist=_,r.prevBeforeDist=T;var k=r.left+T[0],j=r.top+T[1],Y=r.right-T[0],X=r.bottom-T[1],F=ge(r,"translate("+G[0]+"px, "+G[1]+"px)","translate("+_[0]+"px, "+_[1]+"px)");if(t.state.dragInfo.dist=e?[0,0]:_,e||D||!A.every(function(t){return!t})||!I.some(function(t){return!t})){var q=t.state,N=Fr(t,n,{transform:F,dist:_,delta:A,translate:G,beforeDist:T,beforeDelta:I,beforeTranslate:B,left:k,top:j,right:Y,bottom:X,width:q.width,height:q.height,isPinch:o});return e||Nr(t,"onDrag",N),N}}},dragEnd:function(t,n){var r=n.parentEvent,e=n.datas,i=n.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,e.isDrag)return e.isDrag=!1,r||Nr(t,"onDragEnd",qr(t,n,{})),i},dragGroupStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;var a=ce(t,this,"dragStart",[e||0,i||0],n,!1),s=Nr(t,"onDragGroupStart",Mn(Mn({},o),{targets:t.props.targets,events:a}));return r.isDrag=!1!==s,!!r.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var r=this.drag(t,n),e=n.datas,i=ce(t,this,"drag",[e.passDeltaX,e.passDeltaY],n,!1);if(r){var o=Mn({targets:t.props.targets,events:i},r);return Nr(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,n){var r=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),ce(t,this,"dragEnd",[0,0],n,!1),Nr(t,"onDragGroupEnd",qr(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=t.getRect(),e=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?e=t.x-r.left:"deltaX"in t&&(e+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:e,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Ti(t,n,r,e,i,o){var a=t.state.is3d?4:3,s=yr(t.state.rootMatrix,i,a),u=tr([o.left,o.top],s);n.startAbsoluteOrigin=u,n.prevDeg=Un(u,[r,e])/Math.PI*180,n.prevSnapDeg=n.prevDeg,n.startDeg=n.prevDeg,n.loop=0}function _i(t,n,r,e,i,o){var a=r.prevDeg,s=xi(t,n,r.origin,e);return[(r.prevDeg=s)-a,s,o+s]}function Ai(t,n,r,e,i,o,a,s){var u=r.prevDeg,l=r.prevSnapDeg,c=r.startDeg,f=r.loop;e<u&&270<u&&e<90?++r.loop:u<e&&u<90&&270<e&&--r.loop;var p=r.loop,d=360*f+l-c+o,h=360*p+e-c+o;r.prevDeg=h-360*p+c-o;var g=i*((h=kr(h,a))-o);return s&&(h=(g=xi(t,n,r.origin,g))/i+o),r.prevSnapDeg=h-360*p+c-o,[i*(h-d),g,o+g]}function Ii(t,n,r,e,i,o,a,s){return Ai(t,n,r,Un(r.startAbsoluteOrigin,[i,o])/Math.PI*180,e,a,s,!0)}function ki(t){return t.isRequest?"rotatable"===t.requestAble:Et(t.inputEvent.target,cr("rotation"))}var ji={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".line.rotation-line {\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% calc(100% - 0.5px);\n            top: -40px;\n            width: var(--zoompx);\n            height: calc(40 * var(--zoompx));\n            top: calc(-40 * var(--zoompx));\n            transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n        }\n        .line.rotation-line .control {\n            border-color: #4af;\n            background:#fff;\n            cursor: alias;\n            left: 50%;\n        }"],render:function(t,n){var r=t.props,e=r.rotatable,i=r.rotationPosition,o=t.state,a=o.rotation,s=o.renderPoses;if(!e)return null;var u=function(t,n){var r=n[0],e=n[1],i=n[2],o=n[3],a=(t||"top").split("-"),s=a[0],u=a[1],l=[r,e];"left"===s?l=[i,r]:"right"===s?l=[e,o]:"bottom"===s&&(l=[o,i]);var c,f,p=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2];return u&&(f="bottom"===s||"left"===s,p=l[(c="top"===u||"left"===u)&&!f||!c&&f?0:1]),p}(i,s);return n.createElement("div",{key:"rotation",className:cr("line rotation-line"),style:{transform:"translate(-50%) translate("+u[0]+"px, "+u[1]+"px) rotate("+a+"rad)"}},n.createElement("div",{className:cr("control","rotation")}))},dragControlCondition:ki,dragControlStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,l=t.state,c=l.target,f=l.left,p=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform;if(!u&&!c)return!1;var b,x,M=t.getRect();r.rect=M,r.transform=m,r.left=f,r.top=p,r.fixedPosition=Te(t,Ge(t)),u||s||a?(b=o||0,r.beforeInfo={origin:M.beforeOrigin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0},r.afterInfo={origin:M.origin,prevDeg:b,startDeg:b,prevSnapDeg:b,loop:0}):(r.beforeInfo={origin:M.beforeOrigin},r.afterInfo={origin:M.origin},x=Tr(t.controlBox.getElement()),Ti(t,r.beforeInfo,e,i,h,x),Ti(t,r.afterInfo,e,i,d,x)),r.direction=g,r.beforeDirection=v,r.startValue=0,r.datas={},Re(n);var y=Fr(t,n,Mn(Mn({set:function(t){r.startValue=t*Math.PI/180}},De(n)),{dragStart:Gi.dragStart(t,(new ue).dragStart([0,0],n))})),E=Nr(t,"onRotateStart",y);return r.isRotate=!1!==E,t.state.snapRenderInfo={request:n.isRequest},!!r.isRotate&&y},dragControl:function(t,n){var r,e,i,o,a=n.datas,s=n.clientX,u=n.clientY,l=n.parentRotate,c=n.parentFlag,f=n.isPinch,p=n.groupDelta,d=a.beforeDirection,h=a.beforeInfo,g=a.afterInfo,v=a.isRotate,m=a.startValue,b=a.rect;if(v){he(n,"rotate");var x,M,y,E,S,w,C,D,R,P=d*Cr(n.datas.beforeTransform,[50,50],100,100).direction,O=t.props,z=O.throttleRotate,B=void 0===z?0:z,G=O.parentMoveable,T=180/Math.PI*m;if(R=!c&&"parentDist"in n?(y=(M=_i(t,b,g,x=n.parentDist,0,T))[0],E=M[1],S=M[2],C=(w=_i(t,b,h,x,0,T))[0],D=w[1],w[2]):f||c?(y=(r=Ai(t,b,g,l,P,T,B))[0],E=r[1],S=r[2],C=(e=Ai(t,b,h,l,d,T,B))[0],D=e[1],e[2]):(y=(i=Ii(t,b,g,P,s,u,T,B))[0],E=i[1],S=i[2],C=(o=Ii(t,b,h,d,s,u,T,B))[0],D=o[1],o[2]),y||C||G){var _,A,I,k,j=ge(a,"rotate("+S+"deg)","rotate("+E+"deg)"),Y=(_=t,A=E,I=a.fixedPosition,k=a,Be(_,"rotate("+A+"deg)",I,Ge(_),k)),X=nr(tr(p||[0,0],Y),a.prevInverseDist||[0,0]);a.prevInverseDist=Y;var F=Fr(t,n,Mn({delta:y,dist:E,rotate:S,beforeDist:D,beforeDelta:C,beforeRotate:R,isPinch:!!f},ze(t,j,X,f,n)));return Nr(t,"onRotate",F),F}}},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isRotate&&(r.isRotate=!1,Nr(t,"onRotateEnd",qr(t,n,{})),e)},dragGroupControlCondition:ki,dragGroupControlStart:function(t,n){var r=n.datas,e=t.state,s=e.left,u=e.top,l=e.beforeOrigin,i=this.dragControlStart(t,n);if(!i)return!1;i.set(r.beforeDirection*t.rotation);var o=fe(t,this,"dragControlStart",n,function(t,n){var r=t.state,e=r.left,i=r.top,o=r.beforeOrigin,a=tr(nr([e,i],[s,u]),nr(o,l));return n.datas.groupClient=a,Mn(Mn({},n),{parentRotate:0})}),a=Nr(t,"onRotateGroupStart",Mn(Mn({},i),{targets:t.props.targets,events:o}));return r.isRotate=!1!==a,!!r.isRotate&&i},dragGroupControl:function(n,t){var r=t.datas;if(r.isRotate){var e=this.dragControl(n,t);if(e){var l=r.beforeDirection,c=e.beforeDist,f=e.beforeDelta/180*Math.PI,i=fe(n,this,"dragControl",t,function(t,n){var r=n.datas.groupClient,e=r[0],i=r[1],o=ir([e,i],f*l),a=o[0],s=o[1],u=[a-e,s-i];return n.datas.groupClient=[a,s],Mn(Mn({},n),{parentRotate:c,groupDelta:u})});n.rotation=l*e.beforeRotate;var o=Mn({targets:n.props.targets,events:i,set:function(t){n.rotation=t}},e);return Nr(n,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),fe(t,this,"dragControlEnd",n),Nr(t,"onRotateGroupEnd",qr(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=0,e=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:n}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-e),{datas:n,parentDist:r}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Yi(t,n,e){var r=t.state,i=r.renderPoses,o=r.rotation,a=t.props.renderDirections,s=void 0===a?n:a,u=t.state.direction,l={};return s.forEach(function(t){l[t]=!0}),s.map(function(t){var n=Nn[t];if(!n||!l[t])return null;var r=kr(o/Math.PI*180,15)+Ln[t];return u<1&&(r=360-r),r%=180,e.createElement("div",{className:cr("control","direction",t),"data-rotation":r,"data-direction":t,key:"direction-"+t,style:Or.apply(void 0,yn([o],n.map(function(t){return i[t]})))})})}function Xi(t,n,r,e,i){for(var o=[],a=5;a<arguments.length;a++)o[a-5]=arguments[a];var s=Un(r,e),u=n?kr(s/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+i,className:cr.apply(void 0,yn(["line","direction",n],o)),"data-rotation":u,"data-line-index":i,"data-direction":n,style:Pr(r,e,s)})}function Fi(t,n){return Yi(t,qn,n)}function qi(t,n){return Yi(t,["nw","ne","sw","se"],n)}var Ni={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.edge;if(e)return(i?qi:Fi)(t,n)},dragControlCondition:ee,dragControlStart:function(t,n){var r,e,i,o=n.inputEvent,a=n.isPinch,s=n.parentDirection,u=n.datas,l=n.parentFlag,c=s||(a?[0,0]:_r(o.target)),f=t.state,p=f.target,d=f.width,h=f.height;if(!c||!p)return!1;a||de(t,n),u.datas={},u.direction=c,u.startOffsetWidth=d,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,e=p,i=window.getComputedStyle(e),r=[parseFloat(i.width),parseFloat(i.height)],u.startWidth=r[0],u.startHeight=r[1];var g,v=[Math.max(0,d-u.startWidth),Math.max(0,h-u.startHeight)];u.minSize=v,u.maxSize=[1/0,1/0],l||(g=window.getComputedStyle(p),u.minSize=tr([parseFloat(g.minWidth)||0,parseFloat(g.minHeight)||0],v),u.maxSize=tr([parseFloat(g.maxWidth)||1/0,parseFloat(g.maxHeight)||1/0],v));var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&ft(m)?m.split(" "):m,u.startDirection=Ae(0,c),u.fixedPosition=Ie(t,u.startDirection),u.fixedOriginalPosition=Ie(t,c);var b=Fr(t,n,{direction:c,set:function(t){var n=t[0],r=t[1];u.startWidth=n,u.startHeight=r},setMin:function(t){u.minSize=t},setMax:function(t){u.maxSize=t},setOrigin:function(t){u.transformOrigin=t},dragStart:Gi.dragStart(t,(new ue).dragStart([0,0],n))});return!1!==Nr(t,"onResizeStart",b)&&(u.isResize=!0,t.state.snapRenderInfo={request:n.isRequest,direction:c}),!!u.isResize&&b},dragControl:function(t,n){var r,e=n.datas,i=n.distX,o=n.distY,a=n.parentFlag,s=n.isPinch,u=n.parentDistance,l=n.parentScale,c=n.parentKeepRatio,f=n.dragClient,p=n.parentDist,d=n.isRequest,h=e.isResize,g=e.transformOrigin,v=e.startWidth,m=e.startHeight,b=e.startOffsetWidth,x=e.startOffsetHeight,M=e.prevWidth,y=e.prevHeight,E=e.minSize,S=e.maxSize;if(h){var w=t.props,C=w.throttleResize,D=void 0===C?0:C,R=w.parentMoveable,P=w.snapThreshold,O=void 0===P?5:P,z=e.direction,B=z,G=f,T=0,_=0;z[0]||z[1]||(B=[1,1]);var A,I,k,j,Y,X,F,q=0!==b&&0!==x&&(t.props.keepRatio||c),N=B[0]||!B[1],L=N?x/b:b/x,W=yn(q||a?z:e.startDirection);f||(G=!a&&s?Ie(t,[0,0]):q?e.fixedOriginalPosition:e.fixedPosition),p?(T=p[0],_=p[1]):l?(T=(l[0]-1)*b,_=(l[1]-1)*x):s?u&&(_=(T=u)*x/b):(A=xe({datas:e,distX:i,distY:o}),T=B[0]*A[0],_=B[1]*A[1],q&&b&&x?(I=Un([0,0],A),k=Un([0,0],B),j=Un([0,0],[b,x]),Y=Dr([T,_]),X=Math.cos(I-k)*Y,B[0]?_=B[1]?(T=Math.cos(j)*X,Math.sin(j)*X):Hr(T=X,N,L):T=Vr(_=X,N,L)):q||(F=yn(z),b||(A[0]<0?F[0]=-1:0<A[0]&&(F[0]=1)),x||(A[1]<0?F[1]=-1:0<A[1]&&(F[1]=1)),W=Ae(0,B=z=F),T=B[0]*A[0],_=B[1]*A[1]));var H=B[0]||q?Math.max(b+T,Yn):b,V=B[1]||q?Math.max(x+_,Yn):x;q&&b&&x&&(V=H*x/b);var U,Z=[0,0];s||(Z=function(t,r,e,i,o,n,a){if(!ui(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return bi(t,function(t,n){return ci(u,r+t,e+n,o,i,l)},r,e,i,o,n,a)}(t,H,V,z,e.fixedOriginalPosition,d,e)),p&&(p[0]||(Z[0]=0),p[1]||(Z[1]=0)),q?(B[0]&&B[1]&&Z[0]&&Z[1]&&(Math.abs(Z[0])>Math.abs(Z[1])?Z[1]=0:Z[0]=0),(U=!Z[0]&&!Z[1])&&(N?H=kr(H,D):V=kr(V,D)),B[0]&&!B[1]||Z[0]&&!Z[1]||U&&N?V=Hr(H+=Z[0],N,L):(!B[0]&&B[1]||!Z[0]&&Z[1]||U&&!N)&&(H=Vr(V+=Z[1],N,L))):(b+T<-O&&(Z[0]=0),b+_<-O&&(Z[1]=0),H+=Z[0],V+=Z[1],Z[0]||(H=kr(H,D)),Z[1]||(V=kr(V,D))),H=(r=yt([H,V],E,S,q))[0],V=r[1];var $=[(T=(H=Math.round(H))-b)-M,(_=(V=Math.round(V))-x)-y];e.prevWidth=T,e.prevHeight=_;var K=_e(t,H,V,W,G,g);if(R||!$.every(function(t){return!t})||!K.every(function(t){return!t})){var Q=Fr(t,n,{width:v+T,height:m+_,offsetWidth:H,offsetHeight:V,direction:z,dist:[T,_],delta:$,isPinch:!!s,drag:Gi.drag(t,se(n,t.state,K,!!s,!1))});return Nr(t,"onResize",Q),Q}}},dragControlAfter:function(t,n){var r=n.datas,e=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,a=r.prevWidth,s=r.prevHeight;if(e){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),f=3<Math.abs(l),p=3<Math.abs(c);return f&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),p&&(r.startHeight+=c,r.startOffsetHeight+=c,r.prevHeight+=c),f||p?(this.dragControl(t,n),!0):void 0}},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isResize&&(r.isResize=!1,Nr(t,"onResizeEnd",qr(t,n,{})),e)},dragGroupControlCondition:ee,dragGroupControlStart:function(a,t){var n=t.datas,r=this.dragControlStart(a,t);if(!r)return!1;var s=r.direction,u=n.fixedOriginalPosition,e=fe(a,this,"dragControlStart",t,function(t,n){var r=Ie(t,s),e=er(or(-a.rotation/180*Math.PI,3),[r[0]-u[0],r[1]-u[1],1],3),i=e[0],o=e[1];return n.datas.originalX=i,n.datas.originalY=o,n}),i=Mn(Mn({},r),{targets:a.props.targets,events:e}),o=Nr(a,"onResizeGroupStart",i);return n.isResize=!1!==o,!!n.isResize&&r},dragGroupControl:function(o,t){var n=t.datas;if(n.isResize){var r=this.dragControl(o,t);if(r){var e=r.offsetWidth,i=r.offsetHeight,a=r.dist,s=o.props.keepRatio,u=[e/(e-a[0]),i/(i-a[1])],l=n.fixedOriginalPosition,c=fe(o,this,"dragControl",t,function(t,n){var r=er(or(o.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),e=r[0],i=r[1];return Mn(Mn({},n),{parentDist:null,parentScale:u,dragClient:tr(l,[e,i]),parentKeepRatio:s})}),f=Mn({targets:o.props.targets,events:c},r);return Nr(o,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),fe(t,this,"dragControlEnd",n),Nr(t,"onResizeGroupEnd",qr(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=0,e=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?e=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(e+=t.deltaHeight),{datas:n,parentDist:[r,e]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},Li={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.scalable,o=r.edge;if(!e&&i)return(o?qi:Fi)(t,n)},dragControlCondition:ee,dragControlStart:function(t,n){var r=n.datas,e=n.isPinch,i=n.inputEvent,o=n.parentDirection||(e?[0,0]:_r(i.target)),a=t.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target;if(!o||!c)return!1;e||de(t,n),Re(n),r.datas={},r.transform=l,r.prevDist=[1,1],r.direction=o,r.width=s,r.height=u,r.startValue=[1,1],r.fixedDirection=o.map(function(t){return-t}),r.fixedPosition=Ie(t,o);var f=Fr(t,n,Mn(Mn({direction:o,set:function(t){r.startValue=t}},De(n)),{dragStart:Gi.dragStart(t,(new ue).dragStart([0,0],n))}));return!1!==Nr(t,"onScaleStart",f)&&(r.isScale=!0,t.state.snapRenderInfo={request:n.isRequest,direction:o}),!!r.isScale&&f},dragControl:function(t,n){he(n,"scale");var r=n.datas,e=n.distX,i=n.distY,o=n.parentScale,a=n.parentDistance,s=n.parentKeepRatio,u=n.parentFlag,l=n.isPinch,c=n.dragClient,f=n.parentDist,p=n.isRequest,d=r.prevDist,h=r.direction,g=r.width,v=r.height,m=r.isScale,b=r.startValue;if(!m)return!1;var x=t.props,M=x.throttleScale,y=x.parentMoveable,E=h;h[0]||h[1]||(E=[1,1]);var S,w,C,D,R,P,O,z,B=t.props.keepRatio||s,G=t.state,T=E[0]||!E[1],_=g*b[0],A=v*b[1],I=T?A/_:_/A,k=1,j=1,Y=c;c||(Y=!u&&l?Ie(t,[0,0]):r.fixedPosition),f?(k=(g+f[0])/g,j=(v+f[1])/v):o?(k=o[0],j=o[1]):l?a&&(k=(g+a)/g,j=(v+a*v/g)/v):(S=xe({datas:r,distX:e,distY:i}),w=E[0]*S[0],C=E[1]*S[1],B&&g&&v&&(D=Un([0,0],S),R=Un([0,0],E),P=Un([0,0],[_,A]),O=Dr([w,C]),z=Math.cos(D-R)*O,E[0]?C=E[1]?(w=Math.cos(P)*z,Math.sin(P)*z):Hr(w=z,T,I):w=Vr(C=z,T,I)),k=(g+w)/g,j=(v+C)/v),k=E[0]||B?k*b[0]:b[0],j=E[1]||B?j*b[1]:b[1],0===k&&(k=1e-9*(0<d[0]?1:-1)),0===j&&(j=1e-9*(0<d[1]?1:-1));var X,F=[k/b[0],j/b[1]],q=[k,j];l||!t.props.groupable||ct(X=(G.snapRenderInfo||{}).direction)&&(X[0]||X[1])&&(G.snapRenderInfo={direction:h,request:n.isRequest});var N,L,W,H=[0,0];l||(H=Mi(t,F,h,r.fixedPosition,p,r)),B?(E[0]&&E[1]&&H[0]&&H[1]&&(Math.abs(H[0])>Math.abs(H[1])?H[1]=0:H[0]=0),(N=!H[0]&&!H[1])&&(T?F[0]=kr(F[0]*b[0],M)/b[0]:F[1]=kr(F[1]*b[1],M)/b[1]),E[0]&&!E[1]||H[0]&&!H[1]||N&&T?(F[0]+=H[0],L=Hr(g*F[0]*b[0],T,I),F[1]=L/v/b[1]):(!E[0]&&E[1]||!H[0]&&H[1]||N&&!T)&&(F[1]+=H[1],W=Vr(v*F[1]*b[1],T,I),F[0]=W/g/b[0])):(F[0]+=H[0],F[1]+=H[1],H[0]||(F[0]=kr(F[0]*b[0],M)/b[0]),H[1]||(F[1]=kr(F[1]*b[1],M)/b[1])),0===F[0]&&(F[0]=1e-9*(0<d[0]?1:-1)),0===F[1]&&(F[1]=1e-9*(0<d[1]?1:-1));var V,U,Z=[F[0]/d[0],F[1]/d[1]];U=b,q=[(V=F)[0]*U[0],V[1]*U[1]];var $,K,Q,J=($=h,K=Y,Q=r,Be(t,"scale("+F.join(", ")+")",K,$.map(function(t){return-t}),Q)),tt=nr(J,r.prevInverseDist||[0,0]);if(r.prevDist=F,r.prevInverseDist=J,k===d[0]&&j===d[1]&&tt.every(function(t){return!t})&&!y)return!1;var nt=ge(r,"scale("+q.join(", ")+")","scale("+F.join(", ")+")"),rt=Fr(t,n,Mn({offsetWidth:g,offsetHeight:v,direction:h,scale:q,dist:F,delta:Z,isPinch:!!l},ze(t,nt,tt,l,n)));return Nr(t,"onScale",rt),rt},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isScale&&(r.isScale=!1,Nr(t,"onScaleEnd",qr(t,n,{})),e)},dragGroupControlCondition:ee,dragGroupControlStart:function(a,t){var n=t.datas,r=this.dragControlStart(a,t);if(!r)return!1;var s=r.direction,u=n.fixedPosition;n.moveableScale=a.scale;var e=fe(a,this,"dragControlStart",t,function(t,n){var r=Ie(t,s),e=er(or(-a.rotation/180*Math.PI,3),[r[0]-u[0],r[1]-u[1],1],3),i=e[0],o=e[1];return n.datas.originalX=i,n.datas.originalY=o,n}),i=Mn(Mn({},r),{targets:a.props.targets,events:e}),o=Nr(a,"onScaleGroupStart",i);return n.isScale=!1!==o,!!n.isScale&&i},dragGroupControl:function(o,t){var n=t.datas;if(n.isScale){var r=this.dragControl(o,t);if(r){var e=n.moveableScale;o.scale=[r.scale[0]*e[0],r.scale[1]*e[1]];var a=o.props.keepRatio,s=r.dist,u=r.scale,l=n.fixedPosition,i=fe(o,this,"dragControl",t,function(t,n){var r=er(or(o.rotation/180*Math.PI,3),[n.datas.originalX*s[0],n.datas.originalY*s[1],1],3),e=r[0],i=r[1];return Mn(Mn({},n),{parentDist:null,parentScale:u,parentKeepRatio:a,dragClient:tr(l,[e,i])})}),c=Mn({targets:o.props.targets,events:i},r);return Nr(o,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),fe(t,this,"dragControlEnd",n),Nr(t,"onScaleGroupEnd",qr(t,n,{targets:t.props.targets})),r},request:function(){var n={},r=0,e=0;return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return r+=t.deltaWidth,e+=t.deltaHeight,{datas:n,parentDist:[r,e]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Wi(t,a){return t.map(function(t,n){return r=t,e=a[n],(r*(o=2)+e*(i=1))/(i+o);var r,e,i,o})}function Hi(t,n,r){var e=Un(t,n),i=Un(t,r)-e;return 0<=i?i:i+2*Math.PI}var Vi={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.scalable,o=r.warpable;if(e||i||!o)return[];var a=t.state,s=a.pos1,u=a.pos2,l=a.pos3,c=a.pos4,f=Wi(s,u),p=Wi(u,s),d=Wi(s,l),h=Wi(l,s),g=Wi(l,c),v=Wi(c,l),m=Wi(u,c),b=Wi(c,u);return yn([n.createElement("div",{className:cr("line"),key:"middeLine1",style:Pr(f,g)}),n.createElement("div",{className:cr("line"),key:"middeLine2",style:Pr(p,v)}),n.createElement("div",{className:cr("line"),key:"middeLine3",style:Pr(d,m)}),n.createElement("div",{className:cr("line"),key:"middeLine4",style:Pr(h,b)})],Fi(t,n))},dragControlCondition:function(t){return!t.isRequest&&Et(t.inputEvent.target,cr("direction"))},dragControlStart:function(t,n){var e=n.datas,r=n.inputEvent,i=t.props.target,o=_r(r.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,f=a.width,p=a.height,d=a.left,h=a.top;return e.datas={},e.targetTransform=l,e.warpTargetMatrix=u?c:$n(c,3,4),e.targetInverseMatrix=Hn(Vn(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=d,e.top=h,de(t,n),Re(n),e.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(t){return nr(t,s)}),e.nextPoses=e.poses.map(function(t){var n=t[0],r=t[1];return er(e.warpTargetMatrix,[n,r,0,1],4)}),e.startValue=ar(4),e.prevMatrix=ar(4),e.absolutePoses=Ir(a),e.posIndexes=Me(o),!(a.snapRenderInfo={request:n.isRequest,direction:o})!==Nr(t,"onWarpStart",Fr(t,n,Mn({set:function(t){e.startValue=t}},De(n))))&&(e.isWarp=!0),e.isWarp},dragControl:function(t,n){var r,e,i,o,a=n.datas,s=n.isRequest,u=n.distX,l=n.distY,c=a.targetInverseMatrix,f=a.prevMatrix,p=a.isWarp,d=a.startValue,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!p)return!1;he(n,"matrix3d"),ui(t,"warpable")&&(1<(r=g.map(function(t){return v[t]})).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]),i=(e=hi(t,s,r.map(function(t){return[t[0]+u,t[1]+l]}))).horizontal,o=e.vertical,l-=i.offset,u-=o.offset);var m=xe({datas:a,distX:u,distY:l},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=tr(b[t],m)}),!jn.every(function(t){return n=t.map(function(t){return h[t]}),r=t.map(function(t){return b[t]}),e=Hi(n[0],n[1],n[2]),i=Hi(r[0],r[1],r[2]),!((o=Math.PI)<=e&&i<=o||e<=o&&o<=i);var n,r,e,i,o}))return!1;var x=lr(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var M=me(a,Qn(c,x,4),!0),y=Qn(Vn(f,4),M,4),E=Qn(d,a.prevMatrix=M,4),S=ge(a,"matrix3d("+E.join(", ")+")","matrix3d("+M.join(", ")+")");return Oe(n,S),Nr(t,"onWarp",Fr(t,n,{delta:y,matrix:E,dist:M,multiply:Qn,transform:S})),!0},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isWarp&&(r.isWarp=!1,Nr(t,"onWarpEnd",qr(t,n,{})),e)}},Ui=cr("area-pieces"),Zi=cr("area-piece"),$i=cr("avoid");function Ki(t){var n,r,e,i=t.areaElement,o=t.state,a=o.width,s=o.height;r=$i,(n=i).classList?n.classList.remove(r):(e=new RegExp("(\\s|^)"+r+"(\\s|$)"),n.className=n.className.replace(e," ")),i.style.cssText+="left: 0px; top: 0px; width: "+a+"px; height: "+s+"px"}function Qi(t){return t.createElement("div",{key:"area_pieces",className:Ui},t.createElement("div",{className:Zi}),t.createElement("div",{className:Zi}),t.createElement("div",{className:Zi}),t.createElement("div",{className:Zi}))}var Ji={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var r=t.props,e=r.target,i=r.dragArea,o=r.groupable,a=r.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,f=a?cr("area","pass"):cr("area");if(o)return[n.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f}),Qi(n)];if(!e||!i)return[];var p=lr([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=p.length?xr(p,!0):"none";return[n.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),Qi(n)]},dragStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;r.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,f=u.rootMatrix,p=u.is3d,d=l.left,h=l.top,g=Sr(c),v=g.left,m=g.top,b=g.width,x=g.height,M=Qr(f,[e-d,i-h],p?4:3),y=M[0],E=M[1],S=[{left:v,top:m,width:b,height:(E-=m)-10},{left:v,top:m,width:(y-=v)-10,height:x},{left:v,top:m+E+10,width:b,height:x-E-10},{left:v+y+10,top:m,width:b-y-10,height:x}],w=[].slice.call(s.nextElementSibling.children);S.forEach(function(t,n){w[n].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),a=$i,(o=s).classList?o.classList.add(a):o.className+=" "+a},drag:function(t,n){var r=n.datas;if(!n.inputEvent)return!1;r.isDragArea||(r.isDragArea=!0,Ki(t))},dragEnd:function(t,n){var r=n.inputEvent,e=n.datas;if(!r)return!1;e.isDragArea||Ki(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){Ki(t)}},to={name:"origin",props:{origin:Boolean},events:{},render:function(t,n){var r=t.state,e=r.beforeOrigin,i=r.rotation;return[n.createElement("div",{className:cr("control","origin"),style:Or(i,e),key:"beforeOrigin"})]}};function no(t){var n=t.scrollContainer;return[n.scrollLeft,n.scrollTop]}var ro={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(o,a){var t=o.props.scrollContainer,n=void 0===t?o.getContainer():t,r=new qt;a.datas.dragScroll=r;var e=a.isControl?"controlGesto":"targetGesto",s=a.targets;r.on("scroll",function(t){var n=t.container,r=t.direction,e=Fr(o,a,{scrollContainer:n,direction:r}),i=s?"onScrollGroup":"onScroll";s&&(e.targets=s),Nr(o,i,e)}).on("move",function(t){var n=t.offsetX,r=t.offsetY;o[e].scrollBy(n,r,a.inputEvent,!1)}),r.dragStart(a,{container:n})},checkScroll:function(t,n){var r=n.datas.dragScroll;if(r){var e=t.props,i=e.scrollContainer,o=void 0===i?t.getContainer():i,a=e.scrollThreshold,s=void 0===a?0:a,u=e.getScrollPosition,l=void 0===u?no:u;return r.drag(n,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,Mn(Mn({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,Mn(Mn({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,Mn(Mn({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,Mn(Mn({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,Mn(Mn({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,Mn(Mn({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,Mn(Mn({},n),{targets:t.props.targets}))}},eo={name:"",props:{target:Object,dragTarget:Object,container:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number},events:{}},io={name:"padding",props:{padding:Object},events:{},render:function(t,o){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},e=r.left,i=void 0===e?0:e,a=r.top,s=void 0===a?0:a,u=r.right,l=void 0===u?0:u,c=r.bottom,f=void 0===c?0:c,p=t.state,d=p.renderPoses,h=[p.pos1,p.pos2,p.pos3,p.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<l&&g.push([1,3]),0<f&&g.push([2,3]),g.map(function(t,n){var r=t[0],e=t[1],i=lr([0,0],[100,0],[0,100],[100,100],h[r],h[e],d[r],d[e]);if(i.length)return o.createElement("div",{key:"padding"+n,className:cr("padding"),style:{transform:xr(i,!0)}})})}},oo=["nw","ne","se","sw"];function ao(t,n){var r=t[0]+t[1],e=n<r?n/r:1;return t[0]*=e,t[1]=n-t[1]*e,t}var so=[1,2,5,6],uo=[0,3,4,7],lo=[1,-1,-1,1],co=[1,1,-1,-1];function fo(t,a,s,u,l,c,f,p,d){void 0===c&&(c=0),void 0===f&&(f=0),void 0===p&&(p=u),void 0===d&&(d=l);var h=[],g=!1,n=t.map(function(t,n){var r=a[n],e=r.horizontal,i=r.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-f:d-t[1]);return h.push(ne(o,l,s)),o}o=Math.max(0,1===e?t[0]-c:p-t[0]);return h.push(ne(o,u,s)),o});return{styles:h,raws:n}}function po(t){for(var n=[0,0],r=[0,0],e=t.length,i=0;i<e;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,r[0]=i+1),o.vertical&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:n,verticalRange:r}}function ho(t,e,i,o,a,n){var r,s,u;void 0===n&&(n=[0,0]);var l=t.indexOf("/"),c=(-1<l?t.slice(0,l):t).length,f=t.slice(0,c),p=t.slice(c+1),d=f[0],h=void 0===d?"0px":d,g=f[1],v=void 0===g?h:g,m=f[2],b=void 0===m?h:m,x=f[3],M=void 0===x?v:x,y=p[0],E=void 0===y?h:y,S=p[1],w=void 0===S?E:S,C=p[2],D=void 0===C?E:C,R=p[3],P=void 0===R?w:R,O=[h,v,b,M].map(function(t){return xt(t,e)}),z=[E,w,D,P].map(function(t){return xt(t,i)}),B=O.slice(),G=z.slice(),T=ao([B[0],B[1]],e);B[0]=T[0],B[1]=T[1],r=ao([B[3],B[2]],e),B[3]=r[0],B[2]=r[1],s=ao([G[0],G[3]],i),G[0]=s[0],G[3]=s[1],u=ao([G[1],G[2]],i),G[1]=u[0],G[2]=u[1];var _=B.slice(0,Math.max(n[0],f.length)),A=G.slice(0,Math.max(n[1],p.length));return yn(_.map(function(t,n){var r=oo[n];return{horizontal:lo[n],vertical:0,pos:[o+t,a+(-1===co[n]?i:0)],sub:!0,raw:O[n],direction:r}}),A.map(function(t,n){var r=oo[n];return{horizontal:0,vertical:co[n],pos:[o+(-1===lo[n]?e:0),a+t],sub:!0,raw:z[n],direction:r}}))}function go(t,n,r,e,i){void 0===i&&(i=n.length);var o=po(t.slice(e)),a=o.horizontalRange,s=o.verticalRange,u=r-e,l=0;if(0==u)l=i;else if(0<u&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),n.splice(r,l)}function vo(t,n,r,e,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=po(t.slice(r)),p=f.horizontalRange,d=f.verticalRange;if(-1<e)for(var h=1===lo[e]?o-l:s-o,g=p[1];g<=e;++g){var v=1===co[g]?c:u,m=0;if(e===g?m=o:0===g?m=l+h:-1===lo[g]&&(m=s-(n[r][0]-l)),t.splice(r+g,0,{horizontal:lo[g],vertical:0,pos:[m,v]}),n.splice(r+g,0,[m,v]),0===g)break}else if(-1<i){var b,x=1===co[i]?a-c:u-a;0===p[1]&&0===d[1]&&(b=[l+x,c],t.push({horizontal:lo[0],vertical:0,pos:b}),n.push(b));for(var M=d[0],g=d[1];g<=i;++g){m=1===lo[g]?l:s,v=0;if(i===g?v=a:0===g?v=c+x:1===co[g]?v=n[r+M][1]:-1===co[g]&&(v=u-(n[r+M][1]-c)),t.push({horizontal:0,vertical:co[g],pos:[m,v]}),n.push([m,v]),0===g)break}}}function mo(t,r){return void 0===r&&(r=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?r[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?r[n]:null}).filter(function(t){return null!=t})}}var bo=[[0,-1,"n"],[1,0,"e"]],xo=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Mo(t,n,r){var e=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=n.type,u=n.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return r.map(function(t){return ne(t[0],o,e)+" "+ne(t[1],a,e)});if(l||"inset"===s){var f=r[1][1],p=r[3][0],d=r[7][0],h=r[5][1];if(l)return[f,p,h,d].map(function(t){return t+"px"});var g,v,m,b=[f,o-p,a-h,d].map(function(t,n){return ne(t,n%2?o:a,e)});return 8<r.length&&(v=(g=nr(r[4],r[0]))[0],m=g[1],b.push.apply(b,yn(["round"],fo(r.slice(8),u.slice(8),e,v,m,d,f,p,h).styles))),b}if(c||"ellipse"===s){var x=r[0],M=ne(Math.abs(r[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,e);return(b=c?[M]:[ne(Math.abs(r[2][0]-x[0]),o,e),M]).push("at",ne(x[0],o,e),ne(x[1],a,e)),b}}function yo(t,n,r,e){var a=[e,(e+n)/2,n],s=[t,(t+r)/2,r];return xo.map(function(t){var n=t[0],r=t[1],e=t[2],i=a[n+1],o=s[r+1];return{vertical:Math.abs(r),horizontal:Math.abs(n),direction:e,pos:[i,o]}})}function Eo(t,i,o,n,r){var e,a,s,u=r;if(u||(u="none"!==(s=(a=getComputedStyle(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=n)){var l=vt(u),c=l.prefix,f=void 0===c?u:c,p=l.value,d=void 0===p?"":p,h="circle"===f,g=" ";if("polygon"===f){g=",";return{type:f,clipText:u,poses:B=(O=gt(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var n=t.split(" "),r=n[0],e=n[1];return{vertical:1,horizontal:1,pos:[xt(r,i),xt(e,o)]}}),splitter:g}}if(h||"ellipse"===f){var v,m,b,x,M,y,E,S,w,C="",D="",R=0,P=0,O=ht(d);P=h?(m="",m=void 0===(v=O[0])?"50%":v,C=void 0===(b=O[2])?"50%":b,D=void 0===(x=O[3])?"50%":x,R=xt(m,Math.sqrt((i*i+o*o)/2))):(S=y="",y=void 0===(M=O[0])?"50%":M,S=void 0===(E=O[1])?"50%":E,C=void 0===(w=O[3])?"50%":w,D=void 0===(e=O[4])?"50%":e,R=xt(y,i),xt(S,o));var z=[xt(C,i),xt(D,o)],B=yn([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],bo.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[z[0]+t[0]*R,z[1]+t[1]*P]}}));return{type:f,clipText:u,radiusX:R,radiusY:P,left:z[0]-R,top:z[1]-P,poses:B,splitter:g}}if("inset"===f){var G=(O=ht(d||"0 0 0 0")).indexOf("round"),T=(-1<G?O.slice(0,G):O).length,_=O.slice(T+1),A=O.slice(0,T),I=A[0],k=A[1],j=void 0===k?I:k,Y=A[2],X=void 0===Y?I:Y,F=A[3],q=void 0===F?j:F,N=[I,X].map(function(t){return xt(t,o)}),L=N[0],W=N[1],H=[q,j].map(function(t){return xt(t,i)}),V=H[0],U=H[1],Z=i-U,$=o-W,K=ho(_,Z-V,$-L,V,L);return{type:"inset",clipText:u,poses:B=yn(yo(L,Z,$,V),K),top:L,left:V,right:Z,bottom:$,radius:_,splitter:g}}if("rect"===f){g=",";var Q=(O=gt(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t){return mt(t).value});return{type:"rect",clipText:u,poses:B=yo(L=Q[0],U=Q[1],W=Q[2],V=Q[3]),top:L,right:U,bottom:W,left:V,values:O,splitter:g}}}}var So={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,s){var n=t.props,r=n.customClipPath,e=n.defaultClipPath,i=n.clipArea,o=n.zoom,a=t.state,u=a.target,l=a.width,c=a.height,f=a.allMatrix,p=a.is3d,d=a.left,h=a.top,g=a.pos1,v=a.pos2,m=a.pos3,b=a.pos4,x=a.clipPathState,M=a.snapBoundInfos;if(!u)return[];var y=Eo(u,l,c,e||"inset",x||r);if(!y)return[];var E,S,w,C,D,R,P=p?4:3,O=y.type,z=y.poses.map(function(t){var n=yr(f,t.pos,P);return[n[0]-d,n[1]-h]}),B=[],G=[],T="rect"===O,_="inset"===O,A="polygon"===O;if((T||_||A)&&(E=_?z.slice(0,8):z,G=E.map(function(t,n){var r=0===n?E[E.length-1]:E[n-1],e=Un(r,t),i=Rr(r,t);return s.createElement("div",{key:"clipLine"+n,className:cr("line","clip-line","snap-control"),"data-clip-index":n,style:{width:i+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+e+"rad)"}})})),B=z.map(function(t,n){return s.createElement("div",{key:"clipControl"+n,className:cr("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})}),_&&B.push.apply(B,z.slice(8).map(function(t,n){return s.createElement("div",{key:"clipRadiusControl"+n,className:cr("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})})),"circle"===O||"ellipse"===O){var I=y.left,k=y.top,j=y.radiusX,Y=y.radiusY,X=nr(yr(f,[I,k],P),yr(f,[0,0],P)),F=X[0],q=X[1],N="none";if(!i){for(var L=Math.max(10,j/5,Y/5),W=[],H=0;H<=L;++H){var V=2*Math.PI/L*H;W.push([j+(j-o)*Math.cos(V),Y+(Y-o)*Math.sin(V)])}W.push([j,-2]),W.push([-2,-2]),W.push([-2,2*Y+2]),W.push([2*j+2,2*Y+2]),W.push([2*j+2,-2]),W.push([j,-2]),N="polygon("+W.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}B.push(s.createElement("div",{key:"clipEllipse",className:cr("clip-ellipse","snap-control"),style:{width:2*j+"px",height:2*Y+"px",clipPath:N,transform:"translate("+(-d+F)+"px, "+(-h+q)+"px) "+xr(f)}}))}return i&&(w=(S=Sr(yn([g,v,m,b],z))).width,C=S.height,D=S.left,R=S.top,(A||T||_)&&(W=_?z.slice(0,8):z,B.push(s.createElement("div",{key:"clipArea",className:cr("clip-area","snap-control"),style:{width:w+"px",height:C+"px",transform:"translate("+D+"px, "+R+"px)",clipPath:"polygon("+W.map(function(t){return t[0]-D+"px "+(t[1]-R)+"px"}).join(", ")+")"}})))),M&&["vertical","horizontal"].forEach(function(o){var t=M[o],a="horizontal"===o;t.isSnap&&G.push.apply(G,t.snap.posInfos.map(function(t,n){var r=t.pos,e=nr(yr(f,a?[0,r]:[r,0],P),[d,h]),i=nr(yr(f,a?[l,r]:[r,c],P),[d,h]);return Xi(s,"",e,i,"clip"+o+"snap"+n,"guideline")})),t.isBound&&G.push.apply(G,t.bounds.map(function(t,n){var r=t.pos,e=nr(yr(f,a?[0,r]:[r,0],P),[d,h]),i=nr(yr(f,a?[l,r]:[r,c],P),[d,h]);return Xi(s,"",e,i,"clip"+o+"bounds"+n,"guideline","bounds","bold")}))}),yn(B,G)},dragControlCondition:function(t){return t.inputEvent&&-1<(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,n){var r=t.props.dragWithClip;return void 0!==r&&!r&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,n)},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var r=t.state,e=t.props,i=e.defaultClipPath,o=e.customClipPath,a=r.target,s=r.width,u=r.height,l=n.inputEvent?n.inputEvent.target:null,c=l?l.getAttribute("class"):"",f=n.datas,p=Eo(a,s,u,i||"inset",o);if(!p)return!1;var d=p.clipText;return!1===Nr(t,"onClipStart",Fr(t,n,{clipType:p.type,clipStyle:d,poses:p.poses.map(function(t){return t.pos})}))?f.isClipStart=!1:(f.isControl=-1<c.indexOf("clip-control"),f.isLine=-1<c.indexOf("clip-line"),f.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),f.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,r.clipPathState=d,de(t,n),!0)},dragControl:function(t,n){var r=n.datas,e=n.originalDatas;if(!r.isClipStart)return!1;var i=e&&e.draggable||{},o=r.isControl,a=r.isLine,s=r.isArea,u=r.index,l=r.clipPath;if(!l)return!1;var c=i.isDrag?i.prevDist:xe(n),f=c[0],p=c[1],d=t.props,h=t.state,g=h.width,v=h.height,m=!s&&!o&&!a,b=l.type,x=l.poses,M=l.splitter,y=x.map(function(t){return t.pos});m&&(f=-f,p=-p);var E,S,w,C,D,R,P,O,z,B,G,T,_,A,I,k=!o||"nesw"===x[u].direction,j="inset"===b||"rect"===b,Y=x.map(function(){return[0,0]});o&&!k?(S=(E=x[u]).horizontal,w=E.vertical,C=[f*Math.abs(S),p*Math.abs(w)],P=C,O=j,G=(D=x)[R=u],T=G.direction,_=G.sub,A=D.map(function(){return[0,0]}),I=T?T.split(""):[],O&&R<8?(z=I.filter(function(t){return"w"===t||"e"===t})[0],B=I.filter(function(t){return"n"===t||"s"===t})[0],A[R]=P,D.forEach(function(t,n){var r=t.direction;r&&(-1<r.indexOf(z)&&(A[n][0]=P[0]),-1<r.indexOf(B)&&(A[n][1]=P[1]))}),z&&(A[1][0]=P[0]/2,A[5][0]=P[0]/2),B&&(A[3][1]=P[1]/2,A[7][1]=P[1]/2)):T&&!_?I.forEach(function(o){var a="n"===o||"s"===o;D.forEach(function(t,n){var r=t.direction,e=t.horizontal,i=t.vertical;r&&-1!==r.indexOf(o)&&(A[n]=[a||!e?0:P[0],a&&i?P[1]:0])})}):A[R]=P,Y=A):k&&(Y=y.map(function(){return[f,p]}));var X=y.map(function(t,n){return tr(t,Y[n])}),F=yn(X);h.snapBoundInfos=null;var q,N,L,W,H,V,U="circle"===l.type,Z="ellipse"===l.type;(U||Z)&&(q=Sr(X),N=Math.abs(q.bottom-q.top),L=Math.abs(Z?q.right-q.left:N),W=X[0][1]+N,H=X[0][0]-L,V=X[0][0]+L,U&&(F.push([V,q.bottom]),Y.push([1,0])),F.push([q.left,W]),Y.push([0,1]),F.push([H,q.bottom]),Y.push([1,0]));var $,K=je([],g,v,(d.clipHorizontalGuidelines||[]).map(function(t){return xt(""+t,v)}),(d.clipVerticalGuidelines||[]).map(function(t){return xt(""+t,g)})),Q=[],J=[];J=U||Z?(Q=[F[4][0],F[2][0]],[F[1][1],F[3][1]]):j?(nt=[F[0],F[2],F[4],F[6]],$=[Y[0],Y[2],Y[4],Y[6]],Q=nt.filter(function(t,n){return $[n][0]}).map(function(t){return t[0]}),nt.filter(function(t,n){return $[n][1]}).map(function(t){return t[1]})):(Q=F.filter(function(t,n){return Y[n][0]}).map(function(t){return t[0]}),F.filter(function(t,n){return Y[n][1]}).map(function(t){return t[1]}));for(var tt=0;tt<2;++tt){if("break"===function(){var t=gi(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},Q,J,{snapThreshold:5}),n=t.horizontal,r=t.vertical,e=n.offset,i=r.offset;if(!Z&&!U||0!==Y[0][0]||0!==Y[0][1])return F.forEach(function(t,n){var r=Y[n];r[0]&&(t[0]-=i),r[1]&&(t[1]-=e)}),"break";var o=Sr(X),a=o.bottom-o.top,s=Z?o.right-o.left:a;s-=r.isBound?Math.abs(i):0===r.snapIndex?-i:i,a-=n.isBound?Math.abs(e):0===n.snapIndex?-e:e,U&&(s=a=0<Le(r,n)?a:s);var u=F[0];F[1][1]=u[1]-a,F[2][0]=u[0]+s,F[3][1]=u[1]+a,F[4][0]=u[0]-s}())break}var nt,rt=Mo(t,l,X),et=b+"("+rt.join(M)+")";return h.clipPathState=et,J=U||Z?(Q=[F[4][0],F[2][0]],[F[1][1],F[3][1]]):j?(nt=[F[0],F[2],F[4],F[6]],Q=nt.map(function(t){return t[0]}),nt.map(function(t){return t[1]})):(Q=F.map(function(t){return t[0]}),F.map(function(t){return t[1]})),h.snapBoundInfos=gi(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},Q,J,{snapThreshold:1}),Nr(t,"onClip",Fr(t,n,{clipEventType:"changed",clipType:b,poses:X,clipStyle:et,clipStyles:rt,distX:f,distY:p})),!0},dragControlEnd:function(t,n){this.unset(t);var r=n.isDrag,e=n.datas,i=n.isDouble,o=e.isLine,a=e.isClipStart,s=e.isControl;return!!a&&(Nr(t,"onClipEnd",qr(t,n,{})),i&&(s?function(t,n){var r=n.datas,e=r.clipPath,i=r.index,o=e.type,a=e.poses,s=e.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(go(a,u,i,8,l),l===a.length)return}var c=Mo(t,e,u);Nr(t,"onClip",Fr(t,n,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(s)+")",distX:0,distY:0}))}(t,n):o&&function(t,n){var r=pe(t,n),e=r[0],i=r[1],o=n.datas,a=o.clipPath,s=o.index,u=a.type,l=a.poses,c=a.splitter,f=l.map(function(t){return t.pos});if("polygon"===u)f.splice(s,0,[e,i]);else{if("inset"!==u)return;var p=so.indexOf(s),d=uo.indexOf(s),h=l.length;if(vo(l,f,8,p,d,e,i,f[4][0],f[4][1],f[0][0],f[0][1]),h===l.length)return}var g=Mo(t,a,f);Nr(t,"onClip",Fr(t,n,{clipEventType:"added",clipType:u,poses:f,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,n)),i||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},wo={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:Et(t.inputEvent.target,cr("origin"))},dragControlStart:function(t,n){var r=n.datas;de(t,n);var e=Fr(t,n,{dragStart:Gi.dragStart(t,(new ue).dragStart([0,0],n))}),i=Nr(t,"onDragOriginStart",e);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],!(r.isDragOrigin=!0)===i?r.isDragOrigin=!1:e},dragControl:function(t,n){var r=n.datas,e=n.isPinch,i=n.isRequest;if(!r.isDragOrigin)return!1;var o,a=xe(n),s=a[0],u=a[1],l=t.state,c=l.width,f=l.height,p=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,b=[s,u];!i||((o=n.distOrigin)[0]||o[1])&&(b=o);var x=tr(r.startOrigin,b),M=tr(r.startTargetOrigin,b),y=nr(b,r.prevOrigin),E=we(p,d,x,m),S=t.getRect(),w=Sr(Er(E,c,f,m)),C=[S.left-w.left,S.top-w.top],D=Fr(t,n,{width:c,height:f,origin:x,dist:r.prevOrigin=b,delta:y,transformOrigin:[ne(M[0],c,v),ne(M[1],f,v)].join(" "),drag:Gi.drag(t,se(n,t.state,C,!!e,!1))});return Nr(t,"onDragOrigin",D),D},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(Nr(t,"onDragOriginEnd",qr(t,n,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){var r=this.dragControl(t,n);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var n={},r=t.getRect(),e=0,i=0,o=r.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?e=t.x-r.left:"deltaX"in t&&(e+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:e,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Co(t,n,r,e,i){void 0===e&&(e=[0,0]);var o,a;return ho(!(a=i||((o=window.getComputedStyle(t))&&o.borderRadius||""))||!i&&"0px"===a?[]:ht(a),n,r,0,0,e)}function Do(t,n,r,e,i,o){var a=t.state,s=a.width,u=a.height,l=fo(o,i,t.props.roundRelative,s,u),c=l.raws,f=l.styles,p=mo(i,c),d=p.horizontals,h=p.verticals,g=f.join(" ");Nr(t,"onRound",Fr(t,n,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:e,dist:r}))}var Ro={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,i){var n=t.state,r=n.target,e=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,l=n.top,c=n.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,g=void 0===h?[4,4]:h;if(!r)return null;var v=s?4:3,m=Co(r,e,o,d,c);if(!m)return null;var b=0,x=0;return m.map(function(t,n){x+=Math.abs(t.horizontal),b+=Math.abs(t.vertical);var r=nr(yr(a,t.pos,v),[u,l]),e=t.vertical?b<=g[1]:x<=g[0];return i.createElement("div",{key:"borderRadiusControl"+n,className:cr("control","border-radius"),"data-radius-index":n,style:{display:e?"block":"none",transform:"translate("+r[0]+"px, "+r[1]+"px)"}})})},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var n=t.inputEvent.target.getAttribute("class")||"";return-1<n.indexOf("border-radius")||-1<n.indexOf("moveable-line")&&-1<n.indexOf("moveable-direction")},dragControlStart:function(t,n){var r=n.inputEvent,e=n.datas,i=r.target,o=i.getAttribute("class")||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===Nr(t,"onRoundStart",Fr(t,n,{})))return!1;e.lineIndex=l,e.controlIndex=u,e.isControl=a,e.isLine=s,de(t,n);var c=t.props,f=c.roundRelative,p=c.minRoundControls,d=void 0===p?[0,0]:p,h=t.state,g=h.target,v=h.width,m=h.height;e.isRound=!0,e.prevDist=[0,0];var b=Co(g,v,m,d)||[];return e.controlPoses=b,h.borderRadiusState=fo(b.map(function(t){return t.pos}),b,f,v,m).styles.join(" "),!0},dragControl:function(t,n){var r=n.datas;if(!r.isRound||!r.isControl||!r.controlPoses.length)return!1;var e=r.controlIndex,i=r.controlPoses,o=xe(n),a=o[0],s=o[1],u=[a,s],l=nr(u,r.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,p=t.state,d=p.width,h=p.height,g=i[e],v=g.vertical,m=g.horizontal,b=i.map(function(t,n){var r=t.horizontal,e=t.vertical,i=[r*m*u[0],e*v*u[1]];if(r){if(1===f[0])return i;if(f[0]<4&&r!==m)return i}else{if(0===f[1])return i[1]=e*m*u[0]/d*h,i;if(v){if(1===f[1])return i;if(f[1]<4&&e!==v)return i}}return[0,0]});b[e]=u;var x=i.map(function(t,n){return tr(t.pos,b[n])});return r.prevDist=[a,s],Do(t,n,u,l,i,x),!0},dragControlEnd:function(t,n){var r=t.state;r.borderRadiusState="";var e=n.datas,i=n.isDouble;if(!e.isRound)return!1;var o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,M,y,E=r.width,S=r.height,w=e.isControl,C=e.controlIndex,D=e.isLine,R=e.lineIndex,P=e.controlPoses,O=P.map(function(t){return t.pos}),z=O.length,B=t.props.roundClickable;return i&&(void 0===B||B)&&(w?go(P,O,C,0):D&&(a=(o=pe(t,n))[0],s=o[1],l=O,c=R,f=a,p=s,d=E,h=S,g=mo(u=P),v=g.horizontals,m=g.verticals,b=v.length,x=m.length,y=M=-1,0===c?0===b?M=0:1===b&&(M=1):3===c&&(b<=2?M=2:b<=3&&(M=3)),2===c?0===x?y=0:x<4&&(y=3):1===c&&(x<=1?y=1:x<=2&&(y=2)),vo(u,l,0,M,y,f,p,d,h)),z!==P.length&&Do(t,n,[0,0],[0,0],P,O),Nr(t,"onRoundEnd",qr(t,n,{}))),!(r.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}},Po={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,n){var r=t.state,e=r.is3d,i=r.targetMatrix,o=e?"matrix3d("+i.join(",")+")":"matrix("+rr(i,!0)+")";n.datas.startTransforms=[o]},resetTransform:function(t,n){n.datas.nextTransforms=n.datas.startTransforms,n.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return Fr(t,n,{setTransform:function(t){n.datas.startTransforms=ct(t)?t:ht(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return Fr(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),Nr(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(t,n),Nr(t,"onBeforeRender",Fr(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){Nr(t,"onBeforeRenderEnd",Fr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var e=this;this.dragStart(t,n);var r=le(t,"beforeRenderable",n),i=t.moveables,o=r.map(function(t,n){var r=i[n];return e.setTransform(r,t),e.fillDragStartParams(r,t)});Nr(t,"onBeforeRenderGroupStart",Fr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,n){var e=this;this.drag(t,n);var r=le(t,"beforeRenderable",n),i=t.moveables,o=r.map(function(t,n){var r=i[n];return e.resetTransform(r,t),e.fillDragParams(r,t)});Nr(t,"onBeforeRenderGroup",Fr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),Nr(t,"onBeforeRenderGroupEnd",Fr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},Oo={name:"Renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,n){Nr(t,"onRenderStart",Fr(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){Nr(t,"onRender",Fr(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){Nr(t,"onRenderEnd",Fr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){Nr(t,"onRenderGroupStart",Fr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){Nr(t,"onRenderGroup",Fr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,n){Nr(t,"onRenderGroupEnd",Fr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}};function zo(e,t,n,r,i,o,a){var s="Start"===i,u=e.state.target,l=o.isRequest;if(!u||s&&-1<r.indexOf("Control")&&!l&&e.areaElement===o.inputEvent.target)return!1;var c=""+n+r+i,f=""+n+r+"Condition",p="End"===i,d=-1<i.indexOf("After"),h=!(!s||e.targetGesto&&e.controlGesto&&e.targetGesto.isFlag()&&e.controlGesto.isFlag());h&&e.updateRect(i,!0,!1),""!==i||d||Jr(e.state,o);var g,v=-1<r.indexOf("Group"),m=yn([Po],e[t].slice(),[Oo]);if(l&&(g=o.requestAble,m.some(function(t){return t.name===g})||m.push.apply(m,e.props.ables.filter(function(t){return t.name===g}))),!m.length)return!1;var b=m.filter(function(t){return t[c]}),x=o.datas;h&&b.forEach(function(t){t.unset&&t.unset(e)});var M,y=o.inputEvent;p&&y&&(M=document.elementFromPoint(o.clientX,o.clientY)||y.target);var E=b.filter(function(t){var n=t.name,r=x[n]||(x[n]={});return s&&(r.isEventStart=!t[f]||t[f](o,e)),!!r.isEventStart&&t[c](e,Mn(Mn({},o),{datas:r,originalDatas:x,inputTarget:M}))}),S=E.length,w=s&&b.length&&!S;return(p||w)&&(e.state.gesto=null,e.moveables&&e.moveables.forEach(function(t){t.state.gesto=null})),h&&w&&b.forEach(function(t){t.unset&&t.unset(e)}),!e.isUnmounted&&!w&&((!s&&S&&!a||p)&&(E.some(function(t){return t.updateRect})&&!v?e.updateRect(i,!1,!1):e.updateRect(i,!0,!1),e.forceUpdate()),s||p||d||!S||a||zo(e,t,n,r,i+"After",o),!0)}function Bo(r,t,n){var e=r.controlBox.getElement(),i=[];i.push(e),r.props.dragArea||i.push(t);function o(t){var n=t.inputEvent.target;return n===r.areaElement||!r.isMoveableElement(n)||Et(n,"moveable-area")||Et(n,"moveable-padding")}return Go(r,i,"targetAbles",n,{dragStart:o,pinchStart:o})}function Go(i,t,o,a,s){void 0===s&&(s={});var n=i.props,r=n.pinchOutside,e=n.pinchThreshold,u={container:window,pinchThreshold:e,pinchOutside:r},l=new rn(t,u);return["drag","pinch"].forEach(function(e){["Start","","End"].forEach(function(r){l.on(""+e+r,function(t){var n=t.eventType;(!s[n]||s[n](t))&&zo(i,o,e,a,r,t)||t.stop()})})}),l}var To=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.state=Mn({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]]},Br(null)),t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isUnmounted=!1,t}xn(t,n);var r=t.prototype;return r.render=function(){var t=this.props,n=this.state,r=t.edge,e=t.parentPosition,i=t.className,o=t.target,a=t.zoom,s=t.cspNonce,u=t.translateZ,l=t.cssStyled;this.checkUpdate(),this.updateRenderPoses();var c=e||{left:0,top:0},f=c.left,p=c.top,d=n.left,h=n.top,g=n.target,v=n.direction,m=n.renderPoses,b=t.targets,x=(b&&b.length||o)&&g,M=this.isDragging(),y={},E={createElement:P};return this.getEnabledAbles().forEach(function(t){y["data-able-"+t.name.toLowerCase()]=!0}),P(l,Mn({cspNonce:s,ref:S(this,"controlBox"),className:cr("control-box",-1===v?"reverse":"",M?"dragging":"")+" "+i},y,{style:{position:"absolute",display:x?"block":"none",transform:"translate("+(d-f)+"px, "+(h-p)+"px) translateZ("+u+"px)","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),Xi(E,r?"n":"",m[0],m[1],0),Xi(E,r?"e":"",m[1],m[3],1),Xi(E,r?"w":"",m[0],m[2],2),Xi(E,r?"s":"",m[2],m[3],3))},r.componentDidMount=function(){this.controlBox.getElement();var t=this.props,n=t.parentMoveable,r=t.container;this.updateEvent(t),r||n||this.updateRect("End",!1,!0),this.updateCheckInput()},r.componentDidUpdate=function(t){this.updateEvent(t),this.updateCheckInput()},r.componentWillUnmount=function(){this.isUnmounted=!0,Yr(this,"targetGesto"),Yr(this,"controlGesto")},r.getContainer=function(){var t=this.props,n=t.parentMoveable;return t.container||n&&n.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(In)},r.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},r.hitTest=function(t){var n,r;r=t instanceof Element?{left:(n=t.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}:Mn({width:0,height:0},t);var e=this.state.targetClientRect,i=e.left,o=e.top,a=e.width,s=e.height,u=r.left,l=r.top,c=u+r.width,f=l+r.height,p=i+a,d=o+s,h=Math.max(i,u),g=Math.min(p,c),v=Math.max(o,l),m=Math.min(d,f);if(g<h||m<v)return 0;var b=(Math.min(p,c)-Math.max(u,i))*(Math.min(d,f)-Math.max(o,l));return Math.min(100,(g-h)*(m-v)/b*100)},r.isInside=function(t,n){var r=this.state,e=r.pos1,i=r.pos2,o=r.pos3,a=r.pos4,s=r.target,u=r.targetClientRect;if(!s)return!1;var l,c,f,p,d,h,g,v=u.left,m=u.top;return p=o,d=a,h=[Xr(l=[t-v,n-m],c=e,f=i),Xr(l,f,p),Xr(l,p,c)],g=[Xr(l,f,p),Xr(l,p,d),Xr(l,d,f)],!!(h.every(function(t){return 0<=t})||h.every(function(t){return t<=0})||g.every(function(t){return 0<=t})||g.every(function(t){return t<=0}))},r.updateRect=function(t,n,r){void 0===r&&(r=!0);var e=this.props,i=e.parentMoveable,o=this.state,a=o.target||this.props.target,s=this.getContainer(),u=i?i.props.rootContainer:e.rootContainer;this.updateState(Br(this.controlBox&&this.controlBox.getElement(),a,s,s,u||s,n?o:void 0),!i&&r)},r.updateEvent=function(t){var n=this.controlBox.getElement(),r=this.targetAbles.length,e=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=t.dragTarget||t.target,s=i.dragArea,u=t.dragArea,l=!s&&a!==o,c=!r&&this.targetGesto||l||u!==s;c&&(Yr(this,"targetGesto"),this.updateState({gesto:null})),e||Yr(this,"controlGesto"),o&&r&&!this.targetGesto&&(this.targetGesto=Bo(this,o,"")),!this.controlGesto&&e&&(this.controlGesto=Go(this,n,"controlAbles","Control")),c&&this.unsetAbles()},r.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,n=Ir(this.state),r=n[0],e=n[1],i=n[2],o=n[3],a=Sr(n),s=t.width,u=t.height,l=a.width,c=a.height,f=a.left,p=a.top,d=[t.left,t.top],h=tr(d,t.origin);return{width:l,height:c,left:f,top:p,pos1:r,pos2:e,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:tr(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},r.getRotation=function(){var t=this.state,n=t.pos1,r=t.pos2,e=t.direction,i=Un(n,r)/Math.PI*180;return i=0<=(i=0<=e?i:180-i)?i:360+i},r.request=function(n,t,r){void 0===t&&(t={});var e=this.props,i=e.ables,o=e.groupable,a=i.filter(function(t){return t.name===n})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=r||t.isInstant,c=u.isControl?"controlAbles":"targetAbles",f=(o?"Group":"")+(u.isControl?"Control":""),p={request:function(t){return zo(s,c,"drag",f,"",Mn(Mn({},u.request(t)),{requestAble:n,isRequest:!0}),l),this},requestEnd:function(){return zo(s,c,"drag",f,"End",Mn(Mn({},u.requestEnd()),{requestAble:n,isRequest:!0}),l),this}};return zo(s,c,"drag",f,"Start",Mn(Mn({},u.requestStart(t)),{requestAble:n,isRequest:!0}),l),l?p.request(t).requestEnd():p},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var t=this.state,n=this.props,r=t.beforeOrigin,e=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,f=t.top,p=n.padding||{},d=p.left,h=void 0===d?0:d,g=p.top,v=void 0===g?0:g,m=p.bottom,b=void 0===m?0:m,x=p.right,M=void 0===x?0:x,y=o?4:3,E=n.groupable?r:tr(r,[c,f]);t.renderPoses=[tr(a,te(i,[-h,-v],e,E,y)),tr(s,te(i,[M,-v],e,E,y)),tr(u,te(i,[-h,b],e,E,y)),tr(l,te(i,[M,b],e,E,y))]},r.checkUpdate=function(){var t=this.props,n=t.target,r=t.container,e=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||n)&&(this.updateAbles(),Ur(o,n)&&Ur(a,r)||(this.updateState({target:n,container:r}),e||!r&&!this.controlBox||this.updateRect("End",!1,!1)))},r.triggerEvent=function(t,n){var r=this.props[t];return r&&r(n)},r.unsetAbles=function(){var n=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(n),!0)}).length&&this.forceUpdate()},r.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var r=this.props,e=r.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always||r[t.name])}),o="drag"+n+"ControlStart",a=Wr(i,["drag"+n+"Start","pinch"+n+"Start"],e),s=Wr(i,[o],e);this.targetAbles=a,this.controlAbles=s},r.updateState=function(t,n){if(n)this.setState(t);else{var r=this.state;for(var e in t)r[e]=t[e]}},r.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(t){return t&&n[t.name]})},r.renderAbles=function(){var i,o,a,s,n=this,t=this.props.triggerAblesSimultaneously,r={createElement:P};return i=$r(Wr(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(n,r)||[]})).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,n){var r=o(t,n,i),e=s[r];e||(e=[],s[r]=e,a.push(e)),e.push(t)}),a.map(function(t){return t[0]})},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:50,cssStyled:null},t}(j),_o={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(o,a){var t=o.props.targets||[];o.moveables=[];var n=o.state,s={left:n.left,top:n.top};return t.map(function(t,n){return a.createElement(To,{key:"moveable"+n,ref:(i=n,function(t){t&&(r[e][i]=t)}),target:t,origin:!(e="moveables"),cssStyled:(r=o).props.cssStyled,parentMoveable:o,parentPosition:s});var r,e,i})}};function Ao(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n={}),Mn(Mn({},t),{datas:n})}var Io={name:"edgeDraggable",props:{edgeDraggable:Boolean},events:{},dragControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return Et(r,cr("direction"))&&Et(r,cr("line"))},dragControlStart:function(t,n){return Gi.dragStart(t,Ao(n))},dragControl:function(t,n){return Gi.drag(t,Ao(n))},dragControlEnd:function(t,n){return Gi.dragEnd(t,Ao(n))},dragGroupControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return Et(r,cr("direction"))&&Et(r,cr("line"))},dragGroupControlStart:function(t,n){return Gi.dragGroupStart(t,Ao(n))},dragGroupControl:function(t,n){return Gi.dragGroup(t,Ao(n))},dragGroupControlEnd:function(t,n){return Gi.dragGroupEnd(t,Ao(n))},unset:function(t){t.state.dragInfo=null}},ko=[Po,eo,Bi,ae,Gi,Io,ji,Ni,Li,Vi,ro,io,to,wo,So,Ro,_o,{name:"clickable",props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(){},dragGroupStart:function(t,n){n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){var r,e=t.state.target,i=n.inputEvent,o=n.inputTarget;i&&o&&!n.isDrag&&!t.isMoveableElement(o)&&(r=e.contains(o),Nr(t,"onClick",Fr(t,n,{isDouble:n.isDouble,inputTarget:o,isTarget:e===o,containsTarget:r})))},dragGroupEnd:function(t,n){var r,e,i,o,a=n.inputEvent,s=n.inputTarget;a&&s&&!n.isDrag&&!t.isMoveableElement(s)&&n.datas.inputTarget!==s&&(i=-1<(e=(r=t.props.targets).indexOf(s)),o=!1,-1===e&&(o=-1<(e=bt(r,function(t){return t.contains(s)}))),Nr(t,"onClickGroup",Fr(t,n,{isDouble:n.isDouble,targets:r,inputTarget:s,targetIndex:e,isTarget:i,containsTarget:o})))}},Ji,Oo],jo=ko.reduce(function(t,n){return Mn(Mn({},t),n.events)},{}),Yo=ko.reduce(function(t,n){return Mn(Mn({},t),n.props)},{}),Xo=ie(jo),Fo=Object.keys(Xo),qo=Object.keys(Yo);function No(t,o){return Math.max.apply(Math,t.map(function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return Math.max(n[o],r[o],e[o],i[o])}))}function Lo(t,o){return Math.min.apply(Math,t.map(function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return Math.min(n[o],r[o],e[o],i[o])}))}var Wo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.differ=new sn,t.moveables=[],t.transformOrigin="50% 50%",t}xn(t,e);var n=t.prototype;return n.updateEvent=function(t){var n=this.state,r=this.props;n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=Bo(this,n.target,"Group"),this.controlGesto=Go(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var e=!Ur(t.container,r.container);e&&(n.container=r.container);var i=this.differ.update(r.targets),o=i.added,a=i.changed,s=i.removed;(e||o.length||a.length||s.length)&&this.updateRect()},n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(n,t,r){var e,i,o,a,s,u,l,c,f,p,d,h,g,v,m,b;void 0===r&&(r=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(n,!1,!1)}),e=this.state,i=this.props,o=e.target||i.target,(!t||""!==n&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),a=this.rotation,s=this.scale,l=(u=function(t,n){if(!t.length)return[0,0,0,0];var o,i,a,e,s,r,u,l=t.map(function(t){return Ir(t.state)}),c=Xn,f=Xn,p=0,d=0,h=kr(n,Yn);return h%90?(o=n/180*Math.PI,i=Math.tan(o),a=-1/i,e=[Fn,Xn],s=[Fn,Xn],l.forEach(function(t){t.forEach(function(t){var n=t[1]-i*t[0],r=t[1]-a*t[0];e[0]=Math.max(e[0],n),e[1]=Math.min(e[1],n),s[0]=Math.max(s[0],r),s[1]=Math.min(s[1],r)})}),e.forEach(function(e){s.forEach(function(t){var n=(t-e)/(i-a),r=i*n+e;c=Math.min(c,n),f=Math.min(f,r)})}),p=No(r=l.map(function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return[ir(n,-o),ir(r,-o),ir(e,-o),ir(i,-o)]}),0)-Lo(r,0),d=No(r,1)-Lo(r,1)):(c=Lo(l,0),f=Lo(l,1),p=No(l,0)-c,d=No(l,1)-f,h%180&&(u=p,p=d,d=u)),[c,f,p,d]}(this.moveables,a))[0],c=u[1],f=u[2],p=u[3],o.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+f+"px; height:"+p+"px;transform:rotate("+a+"deg) scale("+(0<=s[0]?1:-1)+", "+(0<=s[1]?1:-1)+")",e.width=f,e.height=p,d=this.getContainer(),g=[(h=Br(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||d,e)).left,h.top],v=Ir(h),h.pos1=v[0],h.pos2=v[1],h.pos3=v[2],h.pos4=v[3],h.origin=tr(g,h.origin),h.beforeOrigin=tr(g,h.beforeOrigin),(m=h.targetClientRect).top+=c-h.top-e.top,m.left+=l-h.left-e.left,b=0<s[0]*s[1]?1:-1,this.updateState(Mn(Mn({},h),{direction:b,beforeDirection:b,left:l-h.left,top:c-h.top}),r))},n.getRect=function(){return Mn(Mn({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.triggerEvent=function(t,n,r){if(r||-1<t.indexOf("Group"))return e.prototype.triggerEvent.call(this,t,n)},n.updateAbles=function(){e.prototype.updateAbles.call(this,yn(this.props.ables,[_o]),"Group")},t.defaultProps=Mn(Mn({},To.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(To),Ho=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return xn(n,t),n.defaultAbles=ko,n}(function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t}xn(t,n);var r,e,i=t.prototype;return t.makeStyled=function(){var r={};this.getTotalAbles().forEach(function(t){var n=t.css;n&&n.forEach(function(t){r[t]=!0})});var e,t,i,o,n=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var r in n)n.push(r);return n}(r).join("\n");this.defaultStyled=(e="div",o=In,t=(kn+n).replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+o+"$1")+"{"}),i=dn(t),function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=i,t.tag=e,t}return gn(t,n),t}(mn))},t.getTotalAbles=function(){return yn([eo,_o,Ji],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var n,r,e,i=oe(this.props.target||this.props.targets),o=(n=i,r=this.selectorMap,e=[],n.forEach(function(t){t&&(ft(t)?r[t]&&e.push.apply(e,r[t]):e.push(t))}),e);this.refTargets=i;var a=1<o.length,s=yn(t.getTotalAbles(),this.props.ables||[]);return a?P(Wo,Mn({key:"group",ref:S(this,"moveable"),cssStyled:t.defaultStyled},this.props,{target:null,targets:o,ables:s})):P(To,Mn({key:"single",ref:S(this,"moveable"),cssStyled:t.defaultStyled},this.props,{target:o[0],ables:s}))},i.componentDidMount=function(){this.updateRefs()},i.componentDidUpdate=function(){this.updateRefs()},i.updateRefs=function(t){var e=oe(this.props.target||this.props.targets),n=this.refTargets.some(function(t,n){var r=e[n];return!(!t&&!r)&&t!==r}),r=t?{}:this.selectorMap,i={};this.refTargets.forEach(function(t){ft(t)&&(r[t]?i[t]=r[t]:(n=!0,i[t]=[].slice.call(document.querySelectorAll(t))))}),this.selectorMap=i,n&&this.forceUpdate()},t.defaultAbles=[],t.defaultStyled=null,function(t,n,r,e){var i,o=arguments.length,a=o<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,r):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,r,e);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,r,a):i(n,r))||a);3<o&&a&&Object.defineProperty(n,r,a)}([(r=Wn,void 0===e&&(e={}),function(n,o){r.forEach(function(i){var t=e[i]||i;n[t]||(n[t]=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=(t=this[o])[i].apply(t,n);return e===this[o]?this:e})})})],t.prototype,"moveable",void 0),t}(j)),Vo=function(r){function t(t){var n=r.call(this,t)||this;return n.state={},n.state=n.props,n}return i(t,r),t.prototype.render=function(){return t=P(Ho,u({ref:S(this,"moveable")},this.state)),n=this.state.parentElement,P(Y,{element:t,container:n});var t,n},t}(k),Uo=qo,Zo=Wn,$o=Fo,Ko=function(s){function t(t,n){void 0===n&&(n={});var r=s.call(this)||this;r.tempElement=document.createElement("div");var e=u({container:t||document.body},n),i={};$o.forEach(function(n){i[("on "+n).replace(/[\s-_]([a-z])/g,function(t,n){return n.toUpperCase()})]=function(t){return r.trigger(n,t)}}),N(P(Vo,u({ref:S(r,"innerMoveable"),parentElement:t},e,i)),r.tempElement);var o,a=e.target;return o=a,Array.isArray(o)&&1<a.length&&r.updateRect(),r}i(t,s);var n=t.prototype;return n.setState=function(t,n){this.innerMoveable.setState(t,n)},n.destroy=function(){N(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},function(t,n,r,e){var i,o=arguments.length,a=o<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,r):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,r,e);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,r,a):i(n,r))||a);return 3<o&&a&&Object.defineProperty(n,r,a),a}([r(Zo,function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.getMoveable();if(r&&r[e])return r[e].apply(r,t)})}),r(Uo,function(t,r){Object.defineProperty(t,r,{get:function(){return this.getMoveable().props[r]},set:function(t){var n;this.setState(((n={})[r]=t,n))},enumerable:!0,configurable:!0})})],t)}(Yt);var Qo={__proto__:null,default:Ko,PROPERTIES:Uo,METHODS:Zo,EVENTS:$o,getElementInfo:function(t,n,r){return e=n,void 0===(i=r)&&(i=e),br(t,e,i,!0);var e,i}};for(var Jo in Qo)Ko[Jo]=Qo[Jo];return Ko});
//# sourceMappingURL=moveable.min.js.map
