(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{109:function(e,t,n){e.exports=n(292)},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(102),i=n.n(o),c=(n(114),n(2)),l=n(5),u=n(4),s=n(3),p=n(42),f=n(10),h=n(106),v=n(66),d=n(107),g=n(9),m=(n(115),n(7)),b="scena-";function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.c.apply(void 0,[b].concat(t))}function k(e){return"inherit"===e.contentEditable?k(e.parentElement):"true"===e.contentEditable?e:null}var O=n(1),j=new(function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).eventMap={},e}return Object(l.a)(n,[{key:"requestTrigger",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.eventMap;cancelAnimationFrame(r[e]||0),r[e]=requestAnimationFrame((function(){t.trigger(e,n)}))}}]),n}(n(18).a));function E(e){var t=e.inputEvent.target,n=t.tagName;return!t.isContentEditable&&"INPUT"!==n&&"TEXTAREA"!==n}function C(e,t){g.a.global.keydown(e,(function(e){if(!E(e))return!1;t(e)}))}function S(e,t){g.a.global.keyup(e,(function(e){if(!E(e))return!1;t(e)}))}var w=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).keys=[],e.subContainer=r.createRef(),e.onClick=function(){e.props.selected&&e.focusSub();var t=e.props.onSelect;t&&t(e.constructor.id)},e.onSubClick=function(e){e.stopPropagation()},e.blur=function(){var t=e.subContainer.current;t&&(t.style.display="none")},e}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:y("icon",this.props.selected?"selected":""),onClick:this.onClick},this.renderIcon(),this.renderSubContainer())}},{key:"renderSubContainer",value:function(){var e=this.renderSubIcons();if(e.length)return[r.createElement("div",{key:"extends-icon",className:y("extends-icon")}),this.props.selected&&r.createElement("div",{key:"extends-container",className:y("extends-container"),ref:this.subContainer,onClick:this.onSubClick},e)]}},{key:"renderSubIcons",value:function(){return[]}},{key:"renderSubIcon",value:function(e,t,n){var a=this;return r.createElement("div",{key:t,className:y("icon","sub-icon",n?"selected":""),onClick:function(){a.onSubSelect(t)}},r.createElement(e,{selected:!1}),r.createElement("div",{className:y("sub-icon-label")},Object(O.q)(" ".concat(t))))}},{key:"focusSub",value:function(){var e=this.subContainer.current;e&&("block"===e.style.display?e.style.display="none":e.style.display="block")}},{key:"onSubSelect",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;j.on("blur",this.blur);var t=this.keys;t.length&&C(t,(function(){e.props.onSelect(e.constructor.id)}))}},{key:"componentWillUnmount",value:function(){j.off("blur",this.blur)}}]),n}(r.PureComponent);w.id=void 0,w.maker=void 0,w.makeThen=function(){};var T=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).keys=["v"],e}return Object(l.a)(n,[{key:"renderIcon",value:function(){return r.createElement("svg",{viewBox:"0 0 80 80"},r.createElement("path",{d:"M 21,21 L 35,60 L 40,44 L 54,58 A 3,3 0,0,0, 58,54 L 44,40 L 60,35 L 21,21Z",fill:"#222",strokeLinejoin:"round",strokeWidth:"3",stroke:"#eee",style:{transformOrigin:"42px 42px",transform:"rotate(10deg)"}}))}}]),n}(w);T.id="MoveTool";n(116);var x=new Map;x.set("background-color","#4af"),x.set("color","#333");var R=x,I=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).keys=["t"],e}return Object(l.a)(n,[{key:"renderIcon",value:function(){return r.createElement("svg",{viewBox:"0 0 80 80"},r.createElement("g",{transform:"matrix(0.987601,0,0,0.987601,-1.97306,0.554734)"},r.createElement("path",{d:"M64.286,17.81L20.714,17.81L20.714,29.56L29.214,23L39.262,23L39.262,55.476L27.77,61.262L27.77,62.071L57.23,62.071L57.23,61.262L45.738,55.476L45.738,23L55.786,23L64.286,29.56L64.286,17.81Z",style:{fill:"white"}})))}}]),n}(w);I.id="Text",I.maker=function(){return{tag:"div",props:{contentEditable:!0},style:{color:R.get("color")}}},I.makeThen=function(e){e.focus()};var M=n(105).a.create({createAuto:!0}),A=M;function P(){return R.get("targets")||[]}function N(){return P().map((function(e){return M.getFrame(e)}))}function L(){P().forEach((function(e){M.render(e)}))}var D=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderIcon",value:function(){return r.createElement("svg",{viewBox:"0 0 73 73"},r.createElement("ellipse",{fill:"#555",cx:"36.5",cy:"36.5",rx:"20",ry:"15",strokeLinejoin:"round",strokeWidth:"3",stroke:"#fff"}))}}]),n}(w);D.id="Oval",D.maker=function(){return{tag:"div",props:{},style:{"background-color":R.get("background-color"),"border-radius":"50%"}}};var z=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderIcon",value:function(){return r.createElement("svg",{viewBox:"0 0 73 73"},r.createElement("path",{d:"M16.5,21.5 h40 a0,0 0 0 1 0,0 v30 a0,0 0 0 1 -0,0 h-40 a0,0 0 0 1 -0,-0 v-30 a0,0 0 0 1 0,-0 z",fill:"#555",strokeLinejoin:"round",strokeWidth:"3",stroke:"#fff"}))}}]),n}(w);z.id="Rect",z.maker=function(){return{tag:"div",props:{},style:{"background-color":R.get("background-color")}}};var V=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderIcon",value:function(){return r.createElement("svg",{viewBox:"0 0 73 73"},r.createElement("ellipse",{fill:"#555",cx:"36.5",cy:"36.5",rx:"15",ry:"15",strokeLinejoin:"round",strokeWidth:"3",stroke:"#fff"}))}}]),n}(w);V.id="Circle",V.maker=function(){return{tag:"div",props:{},style:{"background-color":R.get("background-color"),"border-radius":"50%"}}};var G=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderIcon",value:function(){return r.createElement("svg",{viewBox:"0 0 73 73"},r.createElement("path",{d:"M 20,15 L 10,35 L 20,55 L 35,45 L 40, 50 L 55,31 L 41,15 L 30, 25 Z",fill:"#555",strokeLinejoin:"round",strokeWidth:"3",stroke:"#fff"}))}}]),n}(w);G.id="Polygon";var F=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).keys=["c"],e}return Object(l.a)(n,[{key:"renderIcon",value:function(){return r.createElement("svg",{viewBox:"0 0 80 80"},r.createElement("path",{d:"M25,10L25,50L65,50   M10,25L50,25L50,65",style:{stroke:"white",strokeWidth:5,fill:"none"}}))}},{key:"renderSubIcons",value:function(){var e=N()[0],t=R.get("crop")||"inset";if(e){var n=e.get("clip-path")||e.get("clip");n&&(t=Object(O.I)(n).prefix)}return[this.renderSubIcon(z,"inset","inset"===t),this.renderSubIcon(z,"rect","rect"===t),this.renderSubIcon(V,"circle","circle"===t),this.renderSubIcon(D,"ellipse","ellipse"===t),this.renderSubIcon(G,"polygon","polygon"===t)]}},{key:"onSubSelect",value:function(e){var t=N()[0];if(t){var n=t.get("clip-path")||t.get("clip");if(n)if(e!==Object(O.I)(n).prefix){t.remove("clip-path"),t.remove("clip");var r=P()[0];r.style.removeProperty("clip"),r.style.removeProperty("clip-path"),L()}}R.set("crop",e),j.requestTrigger("update"),this.forceUpdate()}}]),n}(w);F.id="Crop";var q=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderIcon",value:function(){return r.createElement("svg",{viewBox:"0 0 73 73"},r.createElement("path",{d:"M26.5,21.5 h20 a10,10 0 0 1 10,10 v10 a10,10 0 0 1 -10,10 h-20 a10,10 0 0 1 -10,-10 v-10 a10,10 0 0 1 10,-10 z",fill:"#555",strokeLinejoin:"round",strokeWidth:"3",stroke:"#fff"}))}}]),n}(w);q.id="RoundRect",q.maker=function(){return{tag:"div",props:{},style:{"background-color":R.get("background-color"),"border-radius":"10px"}}};var U=[T,I,F,z,q,D],W=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={selected:"MoveTool"},e.select=function(t){e.setState({selected:t}),e.props.onSelect(t)},e}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:y("menu")},this.renderMenus())}},{key:"renderMenus",value:function(){var e=this,t=this.state.selected;return U.map((function(n){var a=n.id;return r.createElement(n,{key:a,selected:t===a,onSelect:e.select})}))}},{key:"getSelected",value:function(){var e=this.state.selected;return U.filter((function(t){return t.id===e}))[0]}}]),n}(r.PureComponent),B=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={ids:{},infos:[]},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.style;return r.createElement("div",{className:y("viewport"),style:e},this.props.children,this.state.infos.map((function(e){return e.jsx})))}},{key:"makeId",value:function(){for(var e=this.state.ids;;){var t="scena".concat(Math.floor(1e8*Math.random()));if(!e[t])return t}}},{key:"setInfo",value:function(e,t){this.state.ids[e]=t}},{key:"getInfo",value:function(e){return this.state.ids[e]}},{key:"appendJSXs",value:function(e){var t=this,n=this.state.infos,a=e.map((function(e){var n=e.jsx,a=e.name,o=t.makeId(),i={jsx:r.cloneElement(n,{"data-moveable":!0,"data-moveable-id":o,key:o}),el:null,id:o,name:a};return t.setInfo(o,i),i})),o=[].concat(Object(f.a)(n),Object(f.a)(a));return new Promise((function(n){t.setState({infos:o},(function(){var t=a.map((function(t,n){var r=t.id,a=e[n].frame||{},o=document.querySelector('[data-moveable-id="'.concat(r,'"]'));return A.createFrame(o,a),A.render(o),t.el=o,o}));R.set("viewportInfos",o),j.requestTrigger("changeLayers",{infos:o}),n(t)}))}))}},{key:"appendJSX",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.appendJSXs([{jsx:e,name:t,frame:n}]).then((function(e){return e[0]}))}},{key:"appendElement",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.appendJSX(r.createElement(e,t),n,a)}},{key:"appendElements",value:function(e){return this.appendJSXs(e.map((function(e){var t=e.props,n=e.name,a=e.frame,o=e.tag;return{jsx:r.createElement(o,t),name:n,frame:a}})))}},{key:"removeTargets",value:function(e){var t=this.state,n=t.ids,r=t.infos;e.forEach((function(e){var t=Object(O.v)(r,(function(t){return t.el===e}));t&&(delete n[t.id],r.splice(r.indexOf(t),1))})),this.setState({ids:Object(p.a)({},n),infos:Object(f.a)(r)},(function(){R.set("viewportInfos",r),j.requestTrigger("changeLayers",{infos:r})}))}}]),n}(r.PureComponent),X=(n(117),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).title=void 0,e}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:y("tab")},r.createElement("h2",null,this.title),this.renderTab())}},{key:"getMoveable",value:function(){return this.props.moveableManager.current.getMoveable()}}]),n}(r.PureComponent));X.id=void 0;n(118);var J=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).input=r.createRef(),e}return Object(l.a)(n,[{key:"getValue",value:function(){}},{key:"setValue",value:function(e){}},{key:"componentDidMount",value:function(){var e=this.props;e.updateValue&&this.setValue(e.value)}},{key:"componentDidUpdate",value:function(){var e=this.props;e.updateValue&&this.setValue(e.value)}}]),n}(r.PureComponent),_=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).inputAttributes={},e.onInput=function(t){var n=t.nativeEvent||t;Object(O.D)(n.data)&&e.props.onChange(e.input.current.value)},e.onKeyDown=function(e){e.stopPropagation()},e.onKeyUp=function(t){var n=t.currentTarget;t.stopPropagation(),"enter"===Object(g.c)(t.keyCode)&&e.props.onChange(n.value)},e}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("input",Object.assign({ref:this.input,className:y("input")},this.inputAttributes,this.props.inputProps,{onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp}))}},{key:"getValue",value:function(){return this.input.current.value}},{key:"setValue",value:function(e){this.input.current.value="".concat(Object(O.D)(e)?"":e)}}]),n}(J),K=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).inputAttributes={type:"number",min:0,step:.1,pattern:"[0-9.]*"},e}return n}(_),H=(n(119),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).input=r.createRef(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.type,a=e.props,o=void 0===a?{}:a,i=e.inputProps,c=void 0===i?{}:i,l=e.input,u=e.onChange,s=e.value,p=e.updateValue;return r.createElement("div",{className:y("tab-input",n)},t&&r.createElement("h3",null,t),r.createElement(l,Object.assign({ref:this.input,onChange:u},o,{inputProps:c,value:s,updateValue:p})))}},{key:"setValue",value:function(e){this.input.current.setValue(e)}},{key:"getValue",value:function(){return this.input.current.getValue()}}]),n}(r.PureComponent)),Y=(n(120),["w","","e"]),Z=["n","","s"],Q=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).inputAttributes={},e.state={origin:[50,50]},e.onClick=function(t){var n=t.target.getAttribute("data-anchor-index");if(n){var r=n.split(",").map((function(e){return 50*parseFloat(e)}));e.props.onChange(r)}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.origin.map((function(e){return Math.min(100,Math.max(0,50*Math.round(e/50)))}));return r.createElement("div",{className:y("anchor-input")},r.createElement("div",{className:y("anchor-input-background"),onClick:this.onClick},Z.map((function(t,n){return Y.map((function(a,o){var i=[];return t&&i.push("anchor-".concat(t)),a&&i.push("anchor-".concat(a)),e[0]===50*o&&e[1]===50*n&&i.push("anchor-selected"),r.createElement("div",{key:"dir".concat(a,"-").concat(t),className:y.apply(void 0,["anchor-control"].concat(i)),"data-anchor-index":"".concat(o,",").concat(n)})}))}))))}},{key:"setValue",value:function(e){this.setState({origin:e})}},{key:"getValue",value:function(){return this.state.origin}}]),n}(J),$={step:1},ee=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).title="Transform",e.xInput=r.createRef(),e.yInput=r.createRef(),e.wInput=r.createRef(),e.hInput=r.createRef(),e.oInput=r.createRef(),e.rInput=r.createRef(),e.onChangeRotate=function(t){var n=parseFloat(t);e.getMoveable().request("rotatable",{rotate:n,isInstant:!0})},e.onChangePos=function(){var t=parseFloat(e.xInput.current.getValue()),n=parseFloat(e.yInput.current.getValue());e.getMoveable().request("draggable",{x:t,y:n,isInstant:!0})},e.onChangeOrigin=function(t){var n=e.getMoveable().getRect(),r=n.offsetWidth*t[0]/100,a=n.offsetHeight*t[1]/100;e.getMoveable().request("originDraggable",{origin:[r,a]},!0)},e.onChangeSize=function(){var t=parseFloat(e.wInput.current.getValue()),n=parseFloat(e.hInput.current.getValue());e.getMoveable().request("resizable",{offsetWidth:t,offsetHeight:n,isInstant:!0})},e.onRender=function(){var t=e.getMoveable().getRect();e.xInput.current.setValue(t.left),e.yInput.current.setValue(t.top),e.wInput.current.setValue(t.offsetWidth),e.hInput.current.setValue(t.offsetHeight),e.rInput.current.setValue(Math.round(t.rotation));var n=t.transformOrigin;e.oInput.current.setValue([n[0]/t.offsetWidth*100,n[1]/t.offsetHeight*100])},e}return Object(l.a)(n,[{key:"renderTab",value:function(){return r.createElement("div",{className:y("transform-tab")},r.createElement("div",{className:y("tab-line")},r.createElement(H,{ref:this.oInput,type:"half",label:"Anchor",input:Q,onChange:this.onChangeOrigin}),r.createElement(H,{ref:this.rInput,type:"half",label:"Rotation",input:K,onChange:this.onChangeRotate})),r.createElement("div",{className:y("tab-line")},r.createElement(H,{ref:this.xInput,type:"half",label:"X",input:K,onChange:this.onChangePos}),r.createElement(H,{ref:this.yInput,type:"half",label:"Y",input:K,onChange:this.onChangePos})),r.createElement("div",{className:y("tab-line")},r.createElement(H,{ref:this.wInput,type:"half",label:"W",input:K,inputProps:$,onChange:this.onChangeSize}),r.createElement(H,{ref:this.hInput,type:"half",label:"H",input:K,inputProps:$,onChange:this.onChangeSize})))}},{key:"componentDidMount",value:function(){j.on("render",this.onRender),j.on("renderGroup",this.onRender),j.on("setTargets",this.onRender),this.onRender()}},{key:"componentWillUnmount",value:function(){j.off("render",this.onRender),j.off("renderGroup",this.onRender),j.off("setTargets",this.onRender)}}]),n}(X);ee.id="Transform";n(47);var te=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fold:!1},e.onClick=function(t){var n=t.currentTarget.getAttribute("data-file-key"),r=e.props,a=r.multiselect,o=r.onSelect,i=r.selected;if(a){var c=(i||[]).slice(),l=c.indexOf(n);g.a.global.shiftKey?l>-1?c.splice(l,1):c.push(n):c=[n],o(c)}else o([n])},e.onClickFold=function(t){t.stopPropagation(),e.setState({fold:!e.state.fold})},e}return Object(l.a)(n,[{key:"isSelected",value:function(e){var t=this.props.selected;return t&&t.indexOf(e)>-1}},{key:"render",value:function(){var e=this.props,t=e.scope,n=e.name,a=t.join("///");return r.createElement("div",{className:y("folder")},n&&r.createElement("div",{className:y("tab-input","full","file",this.isSelected(a)?"selected":""),"data-file-key":a,onClick:this.onClick},r.createElement("div",{className:y("fold-icon",this.state.fold?"fold":""),onClick:this.onClickFold}),r.createElement("h3",null,n)),r.createElement("div",{className:y("properties"),style:{marginLeft:t.length?"10px":""}},this.renderProperties()))}},{key:"renderProperties",value:function(){var e=this,t=this.props,a=t.scope,o=t.properties,i=t.selected,c=t.multiselect,l=t.onSelect,u=t.FileComponent,s=t.getId,p=t.getName,f=t.getChildren;if(!this.state.fold)return Object.keys(o).map((function(t){var h=o[t],v=p(h,t),d=a.slice();d.push(s(h,t));var g=d.join("///"),m=f(h,t);return m&&Object(O.B)(m)?r.createElement(n,{key:g,name:v,scope:d,properties:h,multiselect:c,getId:s,getName:p,selected:i,onSelect:l,FileComponent:u}):r.createElement("div",{key:g,className:y("file",e.isSelected(g)?"selected":""),"data-file-key":g,onClick:e.onClick},r.createElement(u,{scope:d,name:v,value:h,fullName:g}))}))}}]),n}(r.PureComponent);te.defaultProps={getId:function(e,t){return t},getName:function(e,t){return t},getChildren:function(e){return e}};var ne=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.type;return r.createElement("div",{className:y("tab-input",n)},r.createElement("h3",null,t))}}]),n}(r.PureComponent),re=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(r.PureComponent),ae=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){var n=e.props;(0,n.onChange)(n.scope,t)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.value;return r.createElement(r.Fragment,null,r.createElement(ne,{type:"third",label:t}),r.createElement(H,{type:"twothird",input:_,value:n,updateValue:!0,onChange:this.onChange}))}}]),n}(re),oe=(n(121),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).title="Frame",e.state={selected:null},e.renderProperty=function(t){var n=t.name,a=t.fullName,o=t.scope,i=t.value;return r.createElement(ae,{name:n,fullName:a,scope:o,value:i,onChange:e.onChange})},e.onSelect=function(t){e.setState({selected:t})},e.onChange=function(t,n){N().length&&(N().forEach((function(e){e.set.apply(e,Object(f.a)(t).concat([n]))})),L(),e.getMoveable().updateRect(),j.requestTrigger("render"))},e.onRender=function(){e.forceUpdate()},e.setTargets=function(){e.state.selected=null,e.forceUpdate()},e}return Object(l.a)(n,[{key:"renderTab",value:function(){var e=this.state.selected,t=N()[0];if(t)return r.createElement("div",{className:y("frame-tab")},r.createElement(te,{name:"",properties:t.get(),scope:[],selected:e,onSelect:this.onSelect,FileComponent:this.renderProperty}))}},{key:"componentDidMount",value:function(){j.on("render",this.onRender),j.on("setTargets",this.setTargets)}},{key:"componentWillUnmount",value:function(){j.off("render",this.onRender),j.off("setTargets",this.setTargets)}}]),n}(X));oe.id="Frame";var ie=n(43),ce=(n(122),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onClick=function(){var t=e.props,n=t.type,r=t.direction;(0,t.onClick)(n,r)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.direction;return r.createElement("div",{className:y("align","align-".concat(t),"align-".concat(n)),onClick:this.onClick},r.createElement("div",{className:y("align-line")}),r.createElement("div",{className:y("align-element1")}),r.createElement("div",{className:y("align-element2")}))}}]),n}(r.PureComponent)),le=["vertical","horizontal"],ue=["start","center","end"];function se(e,t,n){var r,a;return"horizontal"===e?(r=n.height,a=n.top):(r=n.width,a=n.left),"start"===t?a:"center"===t?a+r/2:a+r}var pe=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).title="Align",e.onClick=function(t,n){var r=e.getMoveable();if(r.moveable){var a=r.moveable.moveables,o=r.getRect(),i=se(t,n,o);if(a){a.map((function(e){var r=e.state.target,a=A.getFrame(r);if(a){var o=e.getRect(),c=se(t,n,o),l=i-c,u=a.get("transform","translate").split(",").map((function(e){return parseFloat(e)}));u["horizontal"===t?1:0]+=l,a.set("transform","translate",u.map((function(e){return"".concat(e,"px")})).join(", "))}return r})).forEach((function(e){e&&A.render(e)})),r.updateRect()}else{var c=se(t,n,{width:400,height:600,left:0,top:0}),l=i-c;r.request("draggable",Object(ie.a)({},"horizontal"===t?"deltaY":"deltaX",-l),!0)}}},e}return Object(l.a)(n,[{key:"renderTab",value:function(){var e=this;return r.createElement("div",{className:y("align-tab")},le.map((function(t){return ue.map((function(n){return r.createElement(ce,{key:"".concat(t,"-").concat(n),type:t,direction:n,onClick:e.onClick})}))})))}}]),n}(X);pe.id="Align";var fe=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.name;return r.createElement(r.Fragment,null,r.createElement(ne,{type:"full",label:e}))}}]),n}(re),he=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).title="Layers",e.renderFile=function(e){var t=e.name,n=e.fullName,a=e.scope,o=e.value;return r.createElement(fe,{name:t,fullName:n,scope:a,value:o})},e.onSelect=function(e){j.requestTrigger("selectLayers",{selected:e})},e.changeLayers=function(){e.forceUpdate()},e.setTargets=function(){e.forceUpdate()},e}return Object(l.a)(n,[{key:"renderTab",value:function(){var e=R.get("viewportInfos")||[],t=P().map((function(e){return e.getAttribute("data-moveable-id")}));return r.createElement(te,{scope:[],name:"",properties:e,multiselect:!0,getId:function(e){return e.id},getName:function(e){return e.name},getChildren:function(){return!1},selected:t,onSelect:this.onSelect,FileComponent:this.renderFile})}},{key:"componentDidMount",value:function(){j.on("setTargets",this.setTargets),j.on("changeLayers",this.changeLayers)}},{key:"componentWillUnmount",value:function(){j.off("setTargets",this.setTargets),j.off("changeLayers",this.changeLayers)}}]),n}(X);he.id="Layers";var ve=n(103).ChromePicker,de=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).inputAttributes={},e.state={color:"rgba(255, 255, 255, 255)"},e.onChange=function(t){var n=t.rgb,r=n.r,a=n.g,o=n.b,i=n.a;e.setState({color:"rgba(".concat(r,", ").concat(a,", ").concat(o,", ").concat(i,")")})},e.onChangeComplete=function(t){var n=t.rgb,r=n.r,a=n.g,o=n.b,i=n.a;e.props.onChange("rgba(".concat(r,", ").concat(a,", ").concat(o,", ").concat(i,")"))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.color;return r.createElement(ve,{width:"180px",color:e,onChange:this.onChange,onChangeComplete:this.onChangeComplete})}},{key:"componentDidUpdate",value:function(){}},{key:"setValue",value:function(e){this.setState({color:e})}},{key:"getValue",value:function(){return this.state.color}}]),n}(J),ge=(n(289),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).inputAttributes={},e.colorInput=r.createRef(),e.textInput=r.createRef(),e.state={display:"none",color:"#fff"},e.onFocus=function(){e.setState({display:"block"})},e.onBlur=function(t){var n=t.nativeEvent.relatedTarget;e.input.current.contains(n)||e.setState({display:"none"})},e.onChange=function(t){e.props.onChange(t)},e.onDragStart=function(e){"INPUT"!==e.target.tagName&&e.preventDefault()},e.onClick=function(t){e.textInput.current.input.current.focus()},e}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:y("color-input"),ref:this.input,onBlur:this.onBlur},r.createElement("div",{className:y("color-background"),style:{backgroundColor:this.state.color},onClick:this.onClick}),r.createElement(_,{ref:this.textInput,onChange:this.onChange,inputProps:{onFocus:this.onFocus}}),this.renderPicker())}},{key:"renderPicker",value:function(){var e=this.state.display;if("none"!==e)return r.createElement("div",{className:y("color-picker"),onMouseDown:this.onDragStart,onTouchStart:this.onDragStart,style:{display:e}},r.createElement(de,{ref:this.colorInput,onChange:this.onChange}))}},{key:"setValue",value:function(e){this.setState({color:e}),this.textInput.current.setValue(e),this.colorInput.current&&this.colorInput.current.setValue(e)}},{key:"getValue",value:function(){return this.textInput.current.getValue()}}]),n}(J)),me=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).title="Colors",e.onChangeBackgroundColor=function(t){R.set("background-color",t),N().forEach((function(e){e.set("background-color",t)})),L(),e.forceUpdate()},e.onChangeTextColor=function(t){R.set("color",t),N().forEach((function(e){e.set("color",t)})),L(),e.forceUpdate()},e.onRender=function(){e.forceUpdate()},e}return Object(l.a)(n,[{key:"renderTab",value:function(){var e=N(),t=R.get("background-color"),n=R.get("color");if(e.length){var a=e.map((function(e){return e.get("background-color")})),o=e.map((function(e){return e.get("color")}));t=a.filter((function(e){return e}))[0]||"transparent",n=o.filter((function(e){return e}))[0]||"#333"}return r.createElement("div",{className:y("current-tab")},r.createElement(H,{type:"full",label:"Background Color",input:ge,value:t,updateValue:!0,onChange:this.onChangeBackgroundColor}),r.createElement(H,{type:"full",label:"Text Color",input:ge,value:n,updateValue:!0,onChange:this.onChangeTextColor}))}},{key:"componentDidMount",value:function(){j.on("render",this.onRender),j.on("setTargets",this.onRender)}},{key:"componentWillUnmount",value:function(){j.off("render",this.onRender),j.off("setTargets",this.onRender)}}]),n}(X);me.id="Colors";var be=n(104),ye=(n(290),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).inputAttributes={},e.onInput=function(t){var n=t.nativeEvent||t;Object(O.D)(n.data)&&e.props.onChange(e.input.current.value)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.options||[];return r.createElement("select",Object.assign({ref:this.input,className:y("select")},this.inputAttributes,this.props.inputProps,{onInput:this.onInput}),e.map((function(e){return r.createElement("option",{key:e,value:e},e)})))}},{key:"getValue",value:function(){return this.input.current.value}},{key:"setValue",value:function(e){this.input.current.value="".concat(Object(O.D)(e)?"":e)}}]),n}(J)),ke={options:["sans-serif"]},Oe={options:["left","center","right","justify"]},je={options:["normal","italic","blique"]},Ee={options:["100","200","300","normal","500","600","bold","800"]},Ce={options:["none","underline","overline","line-through"]},Se=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).title="Font",e.onChangeSize=function(t){e.changeProperty("font-size",t)},e.onChangeAlign=function(t){e.changeProperty("text-align",t)},e.onChangeFamily=function(t){e.changeProperty("font-family",t)},e.onChangeStyle=function(t){e.changeProperty("font-style",t)},e.onChangeWeight=function(t){e.changeProperty("font-weight",t)},e.onChangeDecoration=function(t){e.changeProperty("text-decoration",t)},e.onRender=function(){e.forceUpdate()},e.setTargets=function(){e.forceUpdate()},e}return Object(l.a)(n,[{key:"renderTab",value:function(){var e=function(e,t){var n=N();return n.length?e.map((function(e,r){return n.map((function(t){return t.get.apply(t,Object(f.a)(e))})).filter((function(e){return e}))[0]||t[r]})):e.map((function(e,n){return R.get(e.join("///"))||t[n]}))}([["font-family"],["font-size"],["text-align"],["font-style"],["font-weight"],["text-decoration"]],["sans-serif","14px","left","normal","normal","none"]),t=Object(be.a)(e,6),n=t[0],a=t[1],o=t[2],i=t[3],c=t[4],l=t[5];return r.createElement("div",{className:y("font-tab")},r.createElement(H,{type:"half",label:"family",input:ye,props:ke,value:n,updateValue:!0,onChange:this.onChangeFamily}),r.createElement(H,{type:"half",label:"size",input:_,value:a,updateValue:!0,onChange:this.onChangeSize}),r.createElement(H,{type:"half",label:"align",input:ye,props:Oe,value:o,updateValue:!0,onChange:this.onChangeAlign}),r.createElement(H,{type:"half",label:"style",input:ye,props:je,value:i,updateValue:!0,onChange:this.onChangeStyle}),r.createElement(H,{type:"half",label:"weight",input:ye,props:Ee,value:c,updateValue:!0,onChange:this.onChangeWeight}),r.createElement(H,{type:"half",label:"decoration",input:ye,props:Ce,value:l,updateValue:!0,onChange:this.onChangeDecoration}))}},{key:"componentDidMount",value:function(){j.on("render",this.onRender),j.on("setTargets",this.setTargets)}},{key:"componentWillUnmount",value:function(){j.off("render",this.onRender),j.off("setTargets",this.setTargets)}},{key:"changeProperty",value:function(e,t){var n,r;R.set(e,t),n=[e],r=t,N().forEach((function(e){e.set.apply(e,Object(f.a)(n).concat([r]))})),L()}}]),n}(X);Se.id="Font";var we=[me,pe,Se,he,ee,oe],Te=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).tabs=r.createRef(),e.state={selected:""},e.onClick=function(t){e.onMouseOver();var n=t.target,r=e.state.selected,a=n.getAttribute("data-target-id");e.setState({selected:r===a?"":a})},e.onMouseOver=function(){e.tabs.current.classList.add("scena-over")},e.onMouseOut=function(){e.tabs.current.classList.remove("scena-over")},e}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:y("tabs"),ref:this.tabs,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut},this.renderTabs())}},{key:"renderTabs",value:function(){var e=this,t=this.props.moveableManager,n=this.state.selected;return we.map((function(a){var o=a.id,i=o===n;return r.createElement("div",{key:o,className:y("tab-icon",i?"selected":"")},r.createElement("div",{"data-target-id":o,className:y("tab-icon-label"),onClick:e.onClick},r.createElement("span",null,a.id)),i&&r.createElement(a,{moveableManager:t}))}))}},{key:"componentDidMount",value:function(){j.on("blur",this.onMouseOut)}},{key:"componentWillUnmount",value:function(){j.off("blur",this.onMouseOut)}}]),n}(r.PureComponent),xe=n(108),Re=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).moveable=r.createRef(),e}return Object(l.a)(n,[{key:"getMoveable",value:function(){return this.moveable.current}},{key:"render",value:function(){var e=this.props,t=e.selectedMenu,n=e.targets,a=e.menu,o=e.selecto,i=e.verticalGuidelines,c=e.horizontalGuidelines,l=Object(f.a)(A.getTargets()).filter((function(e){return-1===n.indexOf(e)})),u=g.a.global.shiftKey;return r.createElement(xe.a,{ref:this.moveable,targets:n,draggable:!0,resizable:!0,throttleResize:1,clippable:"Crop"===t,dragArea:n.length>1||"Text"!==t,checkInput:"Text"===t,throttleDragRotate:u?45:0,keepRatio:u,rotatable:!0,snappable:!0,snapCenter:!0,snapGap:!1,roundable:!0,verticalGuidelines:i,horizontalGuidelines:c,elementGuidelines:l,clipArea:!0,onDragStart:A.onDragStart,onDrag:A.onDrag,onDragGroupStart:A.onDragGroupStart,onDragGroup:A.onDragGroup,onScaleStart:A.onScaleStart,onScale:A.onScale,onScaleGroupStart:A.onScaleGroupStart,onScaleGroup:A.onScaleGroup,onResizeStart:A.onResizeStart,onResize:A.onResize,onResizeGroupStart:A.onResizeGroupStart,onResizeGroup:A.onResizeGroup,onRotateStart:A.onRotateStart,onRotate:A.onRotate,onRotateGroupStart:A.onRotateGroupStart,onRotateGroup:A.onRotateGroup,defaultClipPath:R.get("crop")||"inset",onClip:A.onClip,onDragOriginStart:A.onDragOriginStart,onDragOrigin:function(e){A.onDragOrigin(e)},onRound:A.onRound,onClick:function(e){var t=e.inputTarget;if(e.isDouble&&t.isContentEditable){a.current.select("Text");var n=k(t);n&&n.focus()}},onClickGroup:function(e){o.current.clickTarget(e.inputEvent,e.inputTarget)},onRender:function(e){j.requestTrigger("render",e)},onRenderGroup:function(e){j.requestTrigger("renderGroup",e)},onRenderEnd:function(e){j.requestTrigger("render",e)},onRenderGroupEnd:function(e){j.requestTrigger("renderGroup",e)}})}},{key:"componentDidMount",value:function(){var e=this;C(["shift"],(function(){e.forceUpdate()})),S(["shift"],(function(){e.forceUpdate()}))}}]),n}(r.PureComponent);j.on("setTargets",(function(e){var t=e.targets;R.set("targets",t)}));var Ie=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={targets:[],horizontalGuides:[],verticalGuides:[],zoom:1,selectedMenu:"MoveTool"},e.horizontalGuides=r.createRef(),e.verticalGuides=r.createRef(),e.infiniteViewer=r.createRef(),e.selecto=r.createRef(),e.menu=r.createRef(),e.moveableManager=r.createRef(),e.viewport=r.createRef(),e.onMenuChange=function(t){e.setState({selectedMenu:t})},e.onResize=function(){e.horizontalGuides.current.resize(),e.verticalGuides.current.resize()},e.onWheel=function(t){g.a.global.altKey&&(t.preventDefault(),e.setState({zoom:Math.max(.1,e.state.zoom+t.deltaY/300)}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.horizontalGuides,n=this.verticalGuides,a=this.infiniteViewer,o=this.moveableManager,i=this.viewport,c=this.menu,l=this.selecto,u=this.state,s=u.selectedMenu,p=u.targets,g=u.zoom,m=this.props,b=m.width,O=m.height,j=[0,O,O/2].concat(Object(f.a)(u.horizontalGuides)),E=[0,b,b/2].concat(Object(f.a)(u.verticalGuides));return r.createElement("div",{className:y("editor")},r.createElement(Te,{moveableManager:o}),r.createElement(W,{ref:c,onSelect:this.onMenuChange}),r.createElement("div",{className:y("reset"),onClick:function(e){a.current.scrollCenter()}}),r.createElement(v.a,{ref:t,type:"horizontal",className:y("guides","horizontal"),style:{},snapThreshold:5,snaps:j,displayDragPos:!0,dragPosFormat:function(e){return"".concat(e,"px")},zoom:g,onChangeGuides:function(t){e.setState({horizontalGuides:t.guides})}}),r.createElement(v.a,{ref:n,type:"vertical",className:y("guides","vertical"),style:{},snapThreshold:5,snaps:E,displayDragPos:!0,dragPosFormat:function(e){return"".concat(e,"px")},zoom:g,onChangeGuides:function(t){e.setState({verticalGuides:t.guides})}}),r.createElement(h.a,{ref:a,className:y("viewer"),usePinch:!0,pinchThreshold:50,zoom:g,onDragStart:function(t){var n=t.inputEvent.target;e.checkBlur(),("A"===n.nodeName||o.current.getMoveable().isMoveableElement(n)||p.some((function(e){return e===n||e.contains(n)})))&&t.stop()},onDragEnd:function(e){e.isDrag||l.current.clickTarget(e.inputEvent)},onAbortPinch:function(e){l.current.triggerDragStart(e.inputEvent)},onScroll:function(e){t.current.scroll(e.scrollLeft),t.current.scrollGuides(e.scrollTop),n.current.scroll(e.scrollTop),n.current.scrollGuides(e.scrollLeft)},onPinch:function(t){e.setState({zoom:t.zoom})}},r.createElement(B,{ref:i,style:{width:"".concat(b,"px"),height:"".concat(O,"px")}},r.createElement(Re,{ref:o,targets:p,selectedMenu:s,selecto:l,menu:c,verticalGuidelines:E,horizontalGuidelines:j}))),r.createElement(d.a,{ref:l,dragContainer:".scena-viewer",hitRate:0,selectableTargets:["[data-moveable]"],selectByClick:!0,selectFromInside:!1,toggleContinueSelect:["shift"],preventDefault:!0,scrollOptions:a.current?{container:a.current.getContainer(),threshold:30,throttleTime:30,getScrollPosition:function(){var e=a.current;return[e.getScrollLeft(),e.getScrollTop()]}}:void 0,onDragStart:function(t){var n=t.inputEvent,r=n.target;if(e.checkBlur(),"Text"===s&&r.isContentEditable){var a=k(r);a&&a.hasAttribute("data-moveable")&&(t.stop(),e.setTargets([a]))}("touchstart"===n.type&&t.isTrusted||o.current.getMoveable().isMoveableElement(r)||u.targets.some((function(e){return e===r||e.contains(r)})))&&t.stop()},onScroll:function(e){var t=e.direction;a.current.scrollBy(10*t[0],10*t[1])},onSelectEnd:function(t){var n=t.isDragStart,r=t.selected,a=t.inputEvent,i=t.rect;n&&a.preventDefault(),e.selectEndMaker(i)||e.setTargets(r).then((function(){n&&o.current.getMoveable().dragStart(a)}))}}))}},{key:"promiseState",value:function(e){var t=this;return new Promise((function(n){t.setState(e,(function(){n()}))}))}},{key:"setTargets",value:function(e){return this.promiseState({targets:e}).then((function(){j.requestTrigger("setTargets",{targets:e})}))}},{key:"appendJSX",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.viewport.current.appendJSX(e,t,r).then((function(e){return n.setTargets([e]),e}))}},{key:"appendElement",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.viewport.current.appendElement(e,t,n,a).then((function(e){return r.setTargets([e]),e}))}},{key:"appendJSXs",value:function(e){var t=this;return this.viewport.current.appendJSXs(e).then((function(e){return t.setTargets([e[0]]),e}))}},{key:"appendElements",value:function(e){var t=this;return this.viewport.current.appendElements(e).then((function(e){return t.setTargets([e[0]]),e}))}},{key:"removeElements",value:function(e){var t=this,n=P().filter((function(t){return-1===e.indexOf(t)}));return e.forEach((function(e){A.removeFrame(e)})),this.setTargets(n).then((function(){t.viewport.current.removeTargets(e)}))}},{key:"componentDidMount",value:function(){var e=this,t=this.infiniteViewer;requestAnimationFrame((function(){t.current.scrollCenter()})),g.a.setGlobal(),window.addEventListener("resize",this.onResize),window.addEventListener("wheel",this.onWheel,{passive:!1});var n=this.viewport.current;j.on("selectLayers",(function(t){var r=t.selected;e.setTargets(r.map((function(e){return n.getInfo(e).el})))})),j.on("update",(function(){e.forceUpdate()})),S(["backspace"],(function(){e.removeElements(P())}))}},{key:"componentWillUnmount",value:function(){j.off(),R.clear(),g.a.global.destroy(),window.removeEventListener("resize",this.onResize),window.removeEventListener("wheel",this.onWheel)}},{key:"selectEndMaker",value:function(e){var t=this.infiniteViewer.current,n=this.menu.current.getSelected(),r=e.width,a=e.height;if(!n||!n.maker||!r||!a)return!1;var o=n.maker(),i=30-t.getScrollTop(),c=75-t.getScrollLeft(),l=e.top-i,u=e.left-c,s=Object(p.a)({top:"".concat(l,"px"),left:"".concat(u,"px"),position:"absolute",width:"".concat(r,"px"),height:"".concat(a,"px")},o.style);return this.appendElement(o.tag,o.props,"(".concat(n.id,")"),s).then(n.makeThen),!0}},{key:"checkBlur",value:function(){var e=document.activeElement;e&&e.blur();var t=document.getSelection();t&&t.removeAllRanges(),j.trigger("blur")}}]),n}(r.PureComponent);Ie.defaultProps={width:400,height:600};n(291);var Me=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).editor=r.createRef(),e}return Object(l.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:"app"},r.createElement(Ie,{ref:this.editor}),r.createElement("div",{className:"bottom"},r.createElement("a",{href:"https://github.com/daybrush/moveable",target:"_blank"},"Download"),r.createElement("a",{href:"https://daybrush.com/moveable/release/latest/doc",target:"_blank"},"API"),r.createElement("a",{href:"https://daybrush.com/moveable/storybook",target:"_blank"},"Storybook")))}},{key:"componentDidMount",value:function(){this.editor.current.appendJSXs([{jsx:r.createElement("div",{className:"moveable",contentEditable:"true"},"Moveable"),name:"(Logo)",frame:{position:"absolute",left:"50%",top:"30%",width:"250px",height:"200px","font-size":"40px",transform:"translate(-125px, -100px)",display:"flex","justify-content":"center","flex-direction":"column","text-align":"center","font-weight":100}},{jsx:r.createElement("p",{className:"badges"},r.createElement("a",{href:"https://www.npmjs.com/package/moveable",target:"_blank"},r.createElement("img",{src:"https://img.shields.io/npm/v/moveable.svg?style=flat-square&color=007acc&label=version",alt:"npm version"})),r.createElement("a",{href:"https://github.com/daybrush/moveable",target:"_blank"},r.createElement("img",{src:"https://img.shields.io/github/stars/daybrush/moveable.svg?color=42b883&style=flat-square"})),r.createElement("a",{href:"https://github.com/daybrush/moveable",target:"_blank"},r.createElement("img",{src:"https://img.shields.io/badge/language-typescript-blue.svg?style=flat-square"})),r.createElement("br",null),r.createElement("a",{href:"https://github.com/daybrush/moveable/tree/master/packages/react-moveable",target:"_blank"},r.createElement("img",{alt:"React",src:"https://img.shields.io/static/v1.svg?label=&message=React&style=flat-square&color=61daeb"})),r.createElement("a",{href:"https://github.com/daybrush/moveable/tree/master/packages/preact-moveable",target:"_blank"},r.createElement("img",{alt:"Preact",src:"https://img.shields.io/static/v1.svg?label=&message=Preact&style=flat-square&color=673ab8"})),r.createElement("a",{href:"https://github.com/daybrush/moveable/tree/master/packages/ngx-moveable",target:"_blank"},r.createElement("img",{alt:"Angular",src:"https://img.shields.io/static/v1.svg?label=&message=Angular&style=flat-square&color=C82B38"})),r.createElement("a",{href:"https://github.com/probil/vue-moveable",target:"_blank"},r.createElement("img",{alt:"Vue",src:"https://img.shields.io/static/v1.svg?label=&message=Vue&style=flat-square&color=3fb984"})),r.createElement("a",{href:"https://github.com/daybrush/moveable/tree/master/packages/svelte-moveable",target:"_blank"},r.createElement("img",{alt:"Svelte",src:"https://img.shields.io/static/v1.svg?label=&message=Svelte&style=flat-square&color=C82B38"}))),name:"(Badges)",frame:{position:"absolute",left:"0%",top:"50%",width:"400px","text-align":"center"}},{jsx:r.createElement("div",{className:"moveable",contentEditable:"true"},"Moveable is Draggable! Resizable! Scalable! Rotatable! Warpable! Pinchable"),name:"(Description)",frame:{position:"absolute",left:"0%",top:"65%",width:"400px","font-size":"14px","text-align":"center","font-weight":"normal"}}])}}]),n}(r.Component);i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Me,null)),document.getElementById("root"))},47:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.c26c223a.chunk.js.map